import{_ as re,G as le,g as d,h as u,i as ne,j as e,n as x,I as ce,y as i,l as v,p as E,s as ie,F as M,m as Y,J as de,K as ue,r as n,o as ve,L as fe}from"./index-NVPnfjv5.js";const me={name:"ArrowGame",setup(){const{isWalletConnected:y}=ue(),t=n(0),b=n(0);n(!1),n(!1);const s=n(5),h=n(0),f=n(1),C=n(0),o=n(!0),L=n("archer1"),p=n("basic"),S=n(!1),F=n(0),P=n(0),A=n(!1),q=n(!1),k=n(!1),W=[{id:"archer1",name:"Archer",color:"linear-gradient(135deg, #8B4513, #A0522D)"},{id:"archer2",name:"Ranger",color:"linear-gradient(135deg, #4A90E2, #357ABD)"},{id:"archer3",name:"Hunter",color:"linear-gradient(135deg, #E74C3C, #C0392B)"}],z=[{id:"basic",name:"Basic Bow",description:"Standard accuracy"},{id:"premium",name:"Premium Bow",description:"+20% accuracy"},{id:"legendary",name:"Legendary Bow",description:"+50% accuracy"}],R=computed(()=>({"wallet-status":!0,connected:y.value,disconnected:!y.value})),j=computed(()=>y.value?"Wallet Connected":"Wallet Disconnected"),J=()=>{A.value=!0},K=()=>{A.value=!1,$()},Q=()=>{q.value=!0},Z=()=>{q.value=!1,ee()},$=()=>{const a=document.querySelector(".character");if(!a)return;const r={archer1:{body:"#8B4513",head:"#FFE4C4",legs:"#8B4513"},archer2:{body:"#4A90E2",head:"#FFE4C4",legs:"#4A90E2"},archer3:{body:"#E74C3C",head:"#FFE4C4",legs:"#E74C3C"}}[L.value];a.querySelector(".character-body").style.background=`linear-gradient(135deg, ${r.body}, ${r.body}dd)`,a.querySelector(".character-head").style.background=r.head,a.querySelectorAll(".character-leg").forEach(g=>{g.style.background=`linear-gradient(135deg, ${r.legs}, ${r.legs}dd)`})},ee=()=>{const a=document.querySelector(".bow");if(!a)return;const l={basic:"#8B4513",premium:"#FFD700",legendary:"#FF4500"};a.querySelector(".bow-body").style.background=`linear-gradient(135deg, ${l[p.value]}, ${l[p.value]}dd)`},te=async()=>{if(!y.value){m("Please connect your wallet first!","error");return}if(h.value>=10)try{h.value-=10,s.value=5,o.value=!0,k.value=!1,m("5 arrows purchased for 10 PPO!","success")}catch{m("Failed to purchase arrows","error")}else m("Not enough PPO! Complete daily tasks to earn more!","error")},ae=()=>{t.value=0,C.value=0,f.value=1,s.value=5,o.value=!0,k.value=!1},m=(a,l)=>{const r=document.createElement("div");r.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${l==="success"?"#00ff88":l==="error"?"#ff6b6b":"#4a90e2"};
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        font-weight: bold;
        z-index: 10000;
        animation: slideIn 0.3s ease;
      `,r.textContent=a,document.body.appendChild(r),setTimeout(()=>{r.remove()},3e3)},_=a=>{if(!o.value||s.value<=0)return;S.value=!0,F.value=a.clientX,P.value=a.clientY;const l=document.querySelector(".arrow"),r=document.querySelector(".aiming-line"),c=document.querySelector(".bow");l&&(l.style.display="block"),r&&(r.style.display="block"),c&&c.classList.add("drawing")},T=a=>{if(!S.value)return;const l=a.clientX-F.value,r=a.clientY-P.value,c=Math.atan2(r,l),g=Math.min(Math.sqrt(l*l+r*r)/10,50),w=document.querySelector(".arrow"),B=document.querySelector(".aimingLine"),V=document.querySelector(".bowString");if(w&&(w.style.transform=`rotate(${c}rad) translateX(${g}px)`),B&&(B.style.transform=`rotate(${c}rad)`),V){const oe=Math.min(g/30,1.5);V.style.transform=`rotate(${c}rad) scaleY(${1+oe})`}},G=()=>{if(!S.value||!o.value||s.value<=0)return;S.value=!1,s.value--;const a=document.querySelector(".arrow"),l=document.querySelector(".aimingLine"),r=document.querySelector(".bow"),c=document.querySelector(".bowString");a&&(a.style.display="none"),l&&(l.style.display="none"),r&&r.classList.remove("drawing"),c&&(c.style.transform="rotate(0rad) scaleY(1)");const g=Math.random()*100;let w=30;if(p.value==="premium"&&(w=50),p.value==="legendary"&&(w=80),g<=w){if(C.value++,t.value+=Math.floor(f.value*10),C.value%5===0){f.value++,m(`Level Up! Now Level ${f.value}`,"success");const B=Math.floor(f.value*2);h.value+=B,m(`Level Up Reward: +${B} PPO!`,"success")}N("BULLSEYE!","#ffd700")}else N("MISS!","#ff6b6b");s.value<=0&&setTimeout(()=>{se()},2e3)},N=(a,l)=>{const r=document.createElement("div");r.className="hit-effect",r.innerHTML=`<div class="hit-text" style="color: ${l}">${a}</div>`,r.style.left="50%",r.style.top="50%",r.style.transform="translate(-50%, -50%)";const c=document.querySelector(".game-area");c&&(c.appendChild(r),setTimeout(()=>{r.remove()},1e3))},se=()=>{o.value=!1,k.value=!0,t.value>b.value&&(b.value=t.value,localStorage.setItem("highScore",b.value),m("New High Score!","success"))},D=a=>_(a),O=a=>T(a),X=()=>G(),H=a=>{a.preventDefault();const l=a.touches[0];_({clientX:l.clientX,clientY:l.clientY})},I=a=>{if(a.preventDefault(),S.value){const l=a.touches[0];T({clientX:l.clientX,clientY:l.clientY})}},U=a=>{a.preventDefault(),G()};return ve(()=>{const a=document.querySelector(".game-area");a&&(a.addEventListener("mousedown",D),a.addEventListener("mousemove",O),a.addEventListener("mouseup",X),a.addEventListener("touchstart",H),a.addEventListener("touchmove",I),a.addEventListener("touchend",U)),h.value=userBalance.value}),fe(()=>{const a=document.querySelector(".game-area");a&&(a.removeEventListener("mousedown",D),a.removeEventListener("mousemove",O),a.removeEventListener("mouseup",X),a.removeEventListener("touchstart",H),a.removeEventListener("touchmove",I),a.removeEventListener("touchend",U))}),{score:computed(()=>t.value),highScore:computed(()=>b.value),arrowsLeft:computed(()=>s.value),ppoBalance:computed(()=>h.value),currentLevel:computed(()=>f.value),showCharacterSelector:A,showBowSelector:q,showGameOverModal:k,characters:W,bows:z,selectedCharacter:computed(()=>L.value),selectedBow:computed(()=>p.value),walletStatusClass:R,walletStatusText:j,selectCharacter:J,confirmCharacter:K,selectBow:Q,confirmBow:Z,buyArrows:te,restartGame:ae}}},he={class:"arrow-game"},ge={class:"game-container"},we={class:"game-header"},ye={class:"game-stats"},be={class:"stat-card"},Ce={class:"stat-card"},pe={class:"stat-card score-display"},Se={class:"game-area",ref:"gameArea"},Be={class:"character",ref:"character"},Le={class:"bow",ref:"bow"},ke={class:"bow-string",ref:"bowString"},Ee={class:"aiming-line",ref:"aimingLine"},Ae={class:"arrow",ref:"arrow"},qe={class:"flying-arrow",ref:"flyingArrow"},xe={class:"target",ref:"target"},Me={class:"arrow-counter"},Ye={class:"arrow-display"},Fe={class:"ppo-balance"},Pe={class:"ppo-amount"},_e={class:"game-controls"},Te=["disabled"],Ge={key:0,class:"character-selector"},Ne={class:"character-grid"},De=["onClick"],Oe={key:1,class:"bow-selector"},Xe={class:"bow-grid"},He=["onClick"],Ie={key:2,class:"game-over-modal"},Ue={class:"modal-content"},Ve={class:"final-score"};function We(y,t,b,s,h,f){const C=le("router-link");return u(),d("div",he,[ne(C,{to:"/",class:"back-button"},{default:ce(()=>[...t[9]||(t[9]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),i("Back to Home ",-1)])]),_:1}),e("div",{class:E(["wallet-status",s.walletStatusClass])},[t[10]||(t[10]=e("i",{class:"fas fa-wallet me-1"},null,-1)),i(v(s.walletStatusText),1)],2),e("div",ge,[e("div",we,[t[14]||(t[14]=e("div",{class:"game-title"},[e("i",{class:"fas fa-crosshairs"}),i(" PPO Archery ")],-1)),e("div",ye,[e("div",be,[t[11]||(t[11]=e("i",{class:"fas fa-trophy"},null,-1)),e("span",null,"High: "+v(s.highScore),1)]),e("div",Ce,[t[12]||(t[12]=e("i",{class:"fas fa-star"},null,-1)),e("span",null,"Level: "+v(s.currentLevel),1)]),e("div",pe,[t[13]||(t[13]=e("i",{class:"fas fa-bullseye"},null,-1)),e("span",null,"Score: "+v(s.score),1)])])]),e("div",Se,[e("div",Be,[...t[15]||(t[15]=[ie('<div class="character-body" data-v-1c3390ef></div><div class="character-head" data-v-1c3390ef><div class="character-eyes" data-v-1c3390ef></div><div class="character-mouth" data-v-1c3390ef></div></div><div class="character-arms" data-v-1c3390ef><div class="character-arm left" data-v-1c3390ef></div><div class="character-arm right" data-v-1c3390ef></div></div><div class="character-hands" data-v-1c3390ef><div class="character-hand left" data-v-1c3390ef></div><div class="character-hand right" data-v-1c3390ef></div></div><div class="character-legs" data-v-1c3390ef><div class="character-leg left" data-v-1c3390ef></div><div class="character-leg right" data-v-1c3390ef></div></div><div class="character-feet" data-v-1c3390ef><div class="character-foot left" data-v-1c3390ef></div><div class="character-foot right" data-v-1c3390ef></div></div>',6)])],512),e("div",Le,[t[16]||(t[16]=e("div",{class:"bow-body"},null,-1)),e("div",ke,null,512)],512),e("div",Ee,null,512),e("div",Ae,null,512),e("div",qe,null,512),e("div",xe,[...t[17]||(t[17]=[e("div",{class:"target-ring outer"},null,-1),e("div",{class:"target-ring middle"},null,-1),e("div",{class:"target-ring inner"},null,-1),e("div",{class:"target-ring bullseye"},null,-1)])],512),e("div",Me,[t[18]||(t[18]=e("h3",null,[e("i",{class:"fas fa-arrows-alt"}),i(" Arrows")],-1)),e("div",Ye,[(u(),d(M,null,Y(5,o=>e("i",{key:o,class:E(["fas fa-arrow-right arrow-icon",{used:o>s.arrowsLeft}])},null,2)),64))])]),e("div",Fe,[t[19]||(t[19]=e("h3",null,[e("i",{class:"fas fa-coins"}),i(" PPO")],-1)),e("div",Pe,v(s.ppoBalance),1)]),e("div",_e,[e("button",{class:"control-btn",onClick:t[0]||(t[0]=(...o)=>s.selectCharacter&&s.selectCharacter(...o))},[...t[20]||(t[20]=[e("i",{class:"fas fa-user"},null,-1),i(" Character ",-1)])]),e("button",{class:"control-btn",onClick:t[1]||(t[1]=(...o)=>s.selectBow&&s.selectBow(...o))},[...t[21]||(t[21]=[e("i",{class:"fas fa-crosshairs"},null,-1),i(" Bow ",-1)])]),e("button",{class:"control-btn",onClick:t[2]||(t[2]=(...o)=>s.buyArrows&&s.buyArrows(...o)),disabled:s.ppoBalance<10},[...t[22]||(t[22]=[e("i",{class:"fas fa-shopping-cart"},null,-1),i(" Buy Arrows ",-1)])],8,Te)]),t[23]||(t[23]=e("div",{class:"instructions"},[e("i",{class:"fas fa-mouse"}),i(" Click and drag to aim, release to shoot! ")],-1))],512)]),s.showCharacterSelector?(u(),d("div",Ge,[t[24]||(t[24]=e("h2",null,"Choose Your Character",-1)),e("div",Ne,[(u(!0),d(M,null,Y(s.characters,o=>(u(),d("div",{key:o.id,class:E(["character-option",{selected:s.selectedCharacter===o.id}]),onClick:L=>s.selectedCharacter=o.id},[e("div",{class:"character-avatar",style:de({background:o.color})},null,4),e("span",null,v(o.name),1)],10,De))),128))]),e("button",{class:"control-btn",onClick:t[3]||(t[3]=(...o)=>s.confirmCharacter&&s.confirmCharacter(...o))},"Confirm"),e("button",{class:"control-btn",onClick:t[4]||(t[4]=o=>s.showCharacterSelector=!1)},"Cancel")])):x("",!0),s.showBowSelector?(u(),d("div",Oe,[t[26]||(t[26]=e("h2",null,"Choose Your Bow",-1)),e("div",Xe,[(u(!0),d(M,null,Y(s.bows,o=>(u(),d("div",{key:o.id,class:E(["bow-option",{selected:s.selectedBow===o.id}]),onClick:L=>s.selectedBow=o.id},[t[25]||(t[25]=e("i",{class:"fas fa-crosshairs"},null,-1)),e("div",null,v(o.name),1),e("small",null,v(o.description),1)],10,He))),128))]),e("button",{class:"control-btn",onClick:t[5]||(t[5]=(...o)=>s.confirmBow&&s.confirmBow(...o))},"Confirm"),e("button",{class:"control-btn",onClick:t[6]||(t[6]=o=>s.showBowSelector=!1)},"Cancel")])):x("",!0),s.showGameOverModal?(u(),d("div",Ie,[e("div",Ue,[t[29]||(t[29]=e("h2",null,[e("i",{class:"fas fa-gamepad"}),i(" Game Over!")],-1)),e("div",Ve,"Score: "+v(s.score),1),t[30]||(t[30]=e("p",null,"You've run out of arrows!",-1)),e("button",{class:"control-btn",onClick:t[7]||(t[7]=(...o)=>s.restartGame&&s.restartGame(...o))},[...t[27]||(t[27]=[e("i",{class:"fas fa-redo"},null,-1),i(" Play Again ",-1)])]),e("button",{class:"control-btn",onClick:t[8]||(t[8]=(...o)=>s.buyArrows&&s.buyArrows(...o))},[...t[28]||(t[28]=[e("i",{class:"fas fa-shopping-cart"},null,-1),i(" Buy More Arrows ",-1)])])])])):x("",!0)])}const Re=re(me,[["render",We],["__scopeId","data-v-1c3390ef"]]);export{Re as default};
