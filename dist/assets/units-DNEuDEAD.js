const V="6.15.0";function O(n,t,e){const r=t.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===t)return}const i=new Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${e}`,i.value=n,i}function S(n,t,e){for(let r in t){let i=t[r];const s=e?e[r]:null;s&&O(i,s,r),Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function w(n,t){if(n==null)return"null";if(t==null&&(t=new Set),typeof n=="object"){if(t.has(n))return"[Circular]";t.add(n)}if(Array.isArray(n))return"[ "+n.map(e=>w(e,t)).join(", ")+" ]";if(n instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let i=0;i<n.length;i++)r+=e[n[i]>>4],r+=e[n[i]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return w(n.toJSON(),t);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const e=Object.keys(n);return e.sort(),"{ "+e.map(r=>`${w(r,t)}: ${w(n[r],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function H(n,t){return n&&n.code===t}function j(n,t,e){let r=n;{const s=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${w(e)}`);for(const o in e){if(o==="shortMessage")continue;const l=e[o];s.push(o+"="+w(l))}}s.push(`code=${t}`),s.push(`version=${V}`),s.length&&(n+=" ("+s.join(", ")+")")}let i;switch(t){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return S(i,{code:t}),e&&Object.assign(i,e),i.shortMessage==null&&S(i,{shortMessage:r}),i}function f(n,t,e,r){if(!n)throw j(t,e,r)}function u(n,t,e,r){f(n,t,"INVALID_ARGUMENT",{argument:e,value:r})}function J(n,t,e){e==null&&(e=""),e&&(e=": "+e),f(n>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:n,expectedCount:t}),f(n<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((n,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(t)}catch{}return n},[]);function z(n,t,e){if(e==null&&(e=""),n!==t){let r=e,i="new";e&&(r+=".",i+=" "+e),f(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function M(n,t,e){if(n instanceof Uint8Array)return e?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(n.substring(i,i+2),16),i+=2;return r}u(!1,"invalid BytesLike value",t||"value",n)}function N(n,t){return M(n,t,!1)}function Z(n,t){return M(n,t,!0)}function q(n,t){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&n.length!==2+2*t||t===!0&&n.length%2!==0)}const T="0123456789abcdef";function R(n){const t=N(n);let e="0x";for(let r=0;r<t.length;r++){const i=t[r];e+=T[(i&240)>>4]+T[i&15]}return e}function K(n){return"0x"+n.map(t=>R(t).substring(2)).join("")}function X(n,t,e){const r=N(n);return e!=null&&e>r.length&&f(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:e}),R(r.slice(t??0,e??r.length))}function L(n,t,e){const r=N(n);f(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const i=new Uint8Array(t);return i.fill(0),e?i.set(r,t-r.length):i.set(r,0),R(i)}function Q(n,t){return L(n,t,!0)}function W(n,t){return L(n,t,!1)}const E=BigInt(0),c=BigInt(1),b=9007199254740991;function F(n,t){const e=B(n,"value"),r=BigInt(g(t,"width"));if(f(e>>r===E,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),e>>r-c){const i=(c<<r)-c;return-((~e&i)+c)}return e}function Y(n,t){let e=x(n,"value");const r=BigInt(g(t,"width")),i=c<<r-c;if(e<E){e=-e,f(e<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const s=(c<<r)-c;return(~e&s)+c}else f(e<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return e}function v(n,t){const e=B(n,"value"),r=BigInt(g(t,"bits"));return e&(c<<r)-c}function x(n,t){switch(typeof n){case"bigint":return n;case"number":return u(Number.isInteger(n),"underflow",t||"value",n),u(n>=-b&&n<=b,"overflow",t||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(e){u(!1,`invalid BigNumberish string: ${e.message}`,t||"value",n)}}u(!1,"invalid BigNumberish value",t||"value",n)}function B(n,t){const e=x(n,t);return f(e>=E,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),e}const C="0123456789abcdef";function _(n){if(n instanceof Uint8Array){let t="0x0";for(const e of n)t+=C[e>>4],t+=C[e&15];return BigInt(t)}return x(n)}function g(n,t){switch(typeof n){case"bigint":return u(n>=-b&&n<=b,"overflow",t||"value",n),Number(n);case"number":return u(Number.isInteger(n),"underflow",t||"value",n),u(n>=-b&&n<=b,"overflow",t||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return g(BigInt(n),t)}catch(e){u(!1,`invalid numeric string: ${e.message}`,t||"value",n)}}u(!1,"invalid numeric value",t||"value",n)}function tt(n){return g(_(n))}function nt(n,t){let r=B(n,"value").toString(16);if(t==null)r.length%2&&(r="0"+r);else{const i=g(t,"width");for(f(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function et(n){const t=B(n,"value");if(t===E)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const r=new Uint8Array(e.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(e.substring(s,s+2),16)}return r}const D=BigInt(-1),a=BigInt(0),p=BigInt(1),P=BigInt(5),m={};let U="0000";for(;U.length<80;)U+=U;function d(n){let t=U;for(;t.length<n;)t+=t;return BigInt("1"+t.substring(0,n))}function I(n,t,e){const r=BigInt(t.width);if(t.signed){const i=p<<r-p;f(e==null||n>=-i&&n<i,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:n}),n>a?n=F(v(n,r),r):n=-F(v(-n,r),r)}else{const i=p<<r;f(e==null||n>=0&&n<i,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:n}),n=(n%i+i)%i&i-p}return n}function A(n){typeof n=="number"&&(n=`fixed128x${n}`);let t=!0,e=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")t=!1;else{const s=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);u(s,"invalid fixed format","format",n),t=s[1]!=="u",e=parseInt(s[2]),r=parseInt(s[3])}}else if(n){const s=n,o=(l,y,k)=>s[l]==null?k:(u(typeof s[l]===y,"invalid fixed format ("+l+" not "+y+")","format."+l,s[l]),s[l]);t=o("signed","boolean",t),e=o("width","number",e),r=o("decimals","number",r)}u(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),u(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(t?"":"u")+"fixed"+String(e)+"x"+String(r);return{signed:t,width:e,decimals:r,name:i}}function G(n,t){let e="";n<a&&(e="-",n*=D);let r=n.toString();if(t===0)return e+r;for(;r.length<=t;)r=U+r;const i=r.length-t;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return e+r}class h{format;#e;#t;#n;_value;constructor(t,e,r){z(t,m,"FixedNumber"),this.#t=e,this.#e=r;const i=G(e,r.decimals);S(this,{format:r.name,_value:i}),this.#n=d(r.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#i(t){u(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)}#r(t,e){return t=I(t,this.#e,e),new h(m,t,this.#e)}#s(t,e){return this.#i(t),this.#r(this.#t+t.#t,e)}addUnsafe(t){return this.#s(t)}add(t){return this.#s(t,"add")}#o(t,e){return this.#i(t),this.#r(this.#t-t.#t,e)}subUnsafe(t){return this.#o(t)}sub(t){return this.#o(t,"sub")}#f(t,e){return this.#i(t),this.#r(this.#t*t.#t/this.#n,e)}mulUnsafe(t){return this.#f(t)}mul(t){return this.#f(t,"mul")}mulSignal(t){this.#i(t);const e=this.#t*t.#t;return f(e%this.#n===a,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#r(e/this.#n,"mulSignal")}#u(t,e){return f(t.#t!==a,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#i(t),this.#r(this.#t*this.#n/t.#t,e)}divUnsafe(t){return this.#u(t)}div(t){return this.#u(t,"div")}divSignal(t){f(t.#t!==a,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#i(t);const e=this.#t*this.#n;return f(e%t.#t===a,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#r(e/t.#t,"divSignal")}cmp(t){let e=this.value,r=t.value;const i=this.decimals-t.decimals;return i>0?r*=d(i):i<0&&(e*=d(-i)),e<r?-1:e>r?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=this.#t;return this.#t<a&&(t-=this.#n-p),t=this.#t/this.#n*this.#n,this.#r(t,"floor")}ceiling(){let t=this.#t;return this.#t>a&&(t+=this.#n-p),t=this.#t/this.#n*this.#n,this.#r(t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,r=P*d(e-1);let i=this.value+r;const s=d(e);return i=i/s*s,I(i,this.#e,"round"),new h(m,i,this.#e)}isZero(){return this.#t===a}isNegative(){return this.#t<a}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return h.fromString(this.toString(),t)}static fromValue(t,e,r){const i=e==null?0:g(e),s=A(r);let o=x(t,"value");const l=i-s.decimals;if(l>0){const y=d(l);f(o%y===a,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=y}else l<0&&(o*=d(-l));return I(o,s,"fromValue"),new h(m,o,s)}static fromString(t,e){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);u(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const i=A(e);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=U;f(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,i.decimals);const l=BigInt(r[1]+s+o);return I(l,i,"fromString"),new h(m,l,i)}static fromBytes(t,e){let r=_(N(t,"value"));const i=A(e);return i.signed&&(r=F(r,i.width)),I(r,i,"fromBytes"),new h(m,r,i)}}const $=["wei","kwei","mwei","gwei","szabo","finney","ether"];function rt(n,t){let e=18;if(typeof t=="string"){const r=$.indexOf(t);u(r>=0,"invalid unit","unit",t),e=3*r}else t!=null&&(e=g(t,"unit"));return h.fromValue(n,e,{decimals:e,width:512}).toString()}function it(n,t){u(typeof n=="string","value must be a string","value",n);let e=18;if(typeof t=="string"){const r=$.indexOf(t);u(r>=0,"invalid unit","unit",t),e=3*r}else t!=null&&(e=g(t,"unit"));return h.fromString(n,{decimals:e,width:512}).value}export{u as a,g as b,f as c,K as d,Z as e,rt as f,N as g,S as h,R as i,tt as j,et as k,z as l,nt as m,J as n,H as o,it as p,x as q,v as r,Y as s,_ as t,F as u,j as v,q as w,X as x,Q as y,W as z};
