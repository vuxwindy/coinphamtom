import{_ as R,c as V,a as j,b as t,p as B,w as J,h as K,e as c,t as f,k as v,d as Q,E,r as d,o as Z,G as $,y as _,j as ee}from"./index-r-K8bCt4.js";const te={name:"ArrowGameModern",setup(){const n=d(null);d(!0),d(0),d(0),d(!1),d(!1);const e=d(!1),w=d(!1),o=d(!1),L=computed(()=>({"wallet-status":!0,connected:isWalletConnected.value,disconnected:!isWalletConnected.value})),A=computed(()=>isWalletConnected.value?"Wallet Connected":"Wallet Disconnected"),S=()=>{try{b(),l()}catch(a){console.error("Error initializing game:",a)}},l=()=>{n.value?(n.value.addEventListener("mousedown",y),n.value.addEventListener("mousemove",p),n.value.addEventListener("mouseup",C),n.value.addEventListener("touchstart",k),n.value.addEventListener("touchmove",x),n.value.addEventListener("touchend",I),console.log("Event listeners set up successfully")):console.error("Game area ref not found")},k=a=>{a.preventDefault();const r=a.touches[0];y({clientX:r.clientX,clientY:r.clientY})},x=a=>{if(a.preventDefault(),gameState.isAiming){const r=a.touches[0];p({clientX:r.clientX,clientY:r.clientY})}},I=a=>{a.preventDefault(),C()},T=()=>{e.value=!0},Y=()=>{O(),e.value=!1},D=()=>{e.value=!1},P=()=>{w.value=!0},N=()=>{X(),w.value=!1},F=()=>{w.value=!1},O=()=>{const a=document.getElementById("character");if(!a)return;const s={archer1:{body:"#8B4513",head:"#FFE4C4",legs:"#8B4513"},archer2:{body:"#4A90E2",head:"#FFE4C4",legs:"#4A90E2"},archer3:{body:"#E74C3C",head:"#FFE4C4",legs:"#E74C3C"}}[gameState.selectedCharacter];a.querySelector(".character-body").style.background=`linear-gradient(135deg, ${s.body}, ${s.body}dd)`,a.querySelector(".character-head").style.background=s.head,a.querySelectorAll(".character-leg").forEach(u=>{u.style.background=`linear-gradient(135deg, ${s.legs}, ${s.legs}dd)`})},X=()=>{const a=document.getElementById("bow");if(!a)return;const r={basic:"#8B4513",premium:"#FFD700",legendary:"#FF4500"};a.querySelector(".bow-body").style.background=`linear-gradient(135deg, ${r[gameState.selectedBow]}, ${r[gameState.selectedBow]}dd)`},H=async()=>{if(!isWalletConnected.value){m("Please connect your wallet first!","error");return}if(gameState.ppoBalance>=10)try{await updateBalance(10,"subtract"),gameState.ppoBalance-=10,gameState.arrowsLeft=5,gameState.isGameActive=!0,o.value=!1,b(),m("5 arrows purchased for 10 PPO!","success")}catch{m("Failed to purchase arrows","error")}else m("Not enough PPO! Complete daily tasks to earn more!","error")},q=()=>{gameState.score=0,gameState.hitCount=0,gameState.currentLevel=1,gameState.arrowsLeft=5,gameState.isGameActive=!0,z(),b(),o.value=!1},m=(a,r)=>{const s=document.createElement("div"),i={success:"#00ff88",error:"#ff6b6b",info:"#4a90e2"};s.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${i[r]||i.info};
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        font-weight: bold;
        z-index: 10000;
        animation: slideIn 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      `,s.textContent=a,document.body.appendChild(s),setTimeout(()=>{s.remove()},3e3)},y=a=>{if(!gameState.isGameActive||gameState.arrowsLeft<=0)return;gameState.isAiming=!0,gameState.aimStartX=a.clientX,gameState.aimStartY=a.clientY;const r=document.getElementById("arrow"),s=document.getElementById("aimingLine"),i=document.getElementById("bow");r&&(r.style.display="block"),s&&(s.style.display="block"),i&&i.classList.add("drawing")},p=a=>{if(!gameState.isAiming)return;const r=a.clientX-gameState.aimStartX,s=a.clientY-gameState.aimStartY,i=Math.atan2(s,r),u=Math.min(Math.sqrt(r*r+s*s)/10,50),g=document.getElementById("arrow");g&&(g.style.transform=`rotate(${i}rad) translateX(${u}px)`);const h=document.getElementById("aimingLine");h&&(h.style.transform=`rotate(${i}rad)`);const M=document.getElementById("bowString");if(M){const U=Math.min(u/30,1.5);M.style.transform=`rotate(${i}rad) scaleY(${1+U})`}},C=()=>{if(!gameState.isAiming||!gameState.isGameActive||gameState.arrowsLeft<=0)return;gameState.isAiming=!1,gameState.arrowsLeft--;const a=document.getElementById("arrow"),r=document.getElementById("aimingLine"),s=document.getElementById("bow"),i=document.getElementById("bowString");a&&(a.style.display="none"),r&&(r.style.display="none"),s&&s.classList.remove("drawing"),i&&(i.style.transform="rotate(0rad) scaleY(1)");const u=Math.random()*100;let g=30;if(gameState.selectedBow==="premium"&&(g=50),gameState.selectedBow==="legendary"&&(g=80),u<=g){if(gameState.hitCount++,gameState.score+=Math.floor(gameState.currentLevel*10),gameState.hitCount%5===0){gameState.currentLevel++,m(`Level Up! Now Level ${gameState.currentLevel}`,"success");const h=Math.floor(gameState.currentLevel*2);gameState.ppoBalance+=h,m(`Level Up Reward: +${h} PPO!`,"success")}setTimeout(()=>{G("BULLSEYE!","#ffd700")},1e3)}else setTimeout(()=>{G("MISS!","#ff6b6b")},1e3);b(),gameState.arrowsLeft<=0&&setTimeout(()=>{W()},2e3)},G=(a,r)=>{const s=document.createElement("div");s.className="hit-effect",s.innerHTML=`<div class="hit-text" style="color: ${r}">${a}</div>`,s.style.left="50%",s.style.top="50%",s.style.transform="translate(-50%, -50%)";const i=document.querySelector(".game-area");i&&(i.appendChild(s),setTimeout(()=>{s.remove()},1e3))},W=()=>{gameState.isGameActive=!1,o.value=!0,gameState.score>gameState.highScore&&(gameState.highScore=gameState.score,localStorage.setItem("highScore",gameState.highScore),m("New High Score!","success"))},z=()=>{gameState.stuckArrows.forEach(a=>{a.parentNode&&a.parentNode.removeChild(a)}),gameState.stuckArrows=[]},b=()=>{const a=document.getElementById("arrowDisplay");if(a){a.innerHTML="";for(let s=0;s<5;s++){const i=document.createElement("i");i.className=`fas fa-arrow-right arrow-icon ${s>=gameState.arrowsLeft?"used":""}`,a.appendChild(i)}}const r=document.getElementById("buyArrowsBtn");r&&(r.disabled=gameState.ppoBalance<10)};return Z(()=>{try{console.log("Component mounted, initializing game..."),$(()=>{console.log("DOM updated, checking game area ref:",!!n.value),setTimeout(()=>{const a=document.getElementById("character"),r=document.getElementById("bow"),s=document.getElementById("target");console.log("Debug - Elements found:",{character:!!a,bow:!!r,target:!!s,gameAreaRef:!!n.value}),a&&console.log("Character element:",a),r&&console.log("Bow element:",r),s&&console.log("Target element:",s),n.value&&console.log("Game area ref:",n.value),S(),b()},100)}),gameState.ppoBalance=userBalance.value}catch(a){console.warn("Game initialization error:",a)}}),_(()=>{try{n.value&&(n.value.removeEventListener("mousedown",y),n.value.removeEventListener("mousemove",p),n.value.removeEventListener("mouseup",C),n.value.removeEventListener("touchstart",k),n.value.removeEventListener("touchmove",x),n.value.removeEventListener("touchend",I))}catch(a){console.warn("Game cleanup error:",a)}}),{gameArea:n,score:computed(()=>gameState.score),highScore:computed(()=>gameState.highScore),arrowsLeft:computed(()=>gameState.arrowsLeft),ppoBalance:computed(()=>gameState.ppoBalance),currentLevel:computed(()=>gameState.currentLevel),showCharacterSelector:e,showBowSelector:w,showGameOverModal:o,selectedCharacter:computed(()=>gameState.selectedCharacter),selectedBow:computed(()=>gameState.selectedBow),walletStatusClass:L,walletStatusText:A,selectCharacter:T,confirmCharacter:Y,closeCharacterSelector:D,selectBow:P,confirmBow:N,closeBowSelector:F,buyArrows:H,restartGame:q}}},ae={class:"arrow-game-modern"},oe={class:"game-container"},se={class:"game-header"},re={class:"game-stats"},le={class:"stat-card"},ne={id:"highScore"},ie={class:"stat-card"},ce={id:"currentLevel"},de={class:"stat-card score-display"},me={id:"score"},ve={class:"game-area",ref:"gameArea"},ue={class:"ppo-balance"},ge={class:"ppo-amount",id:"ppoBalance"},fe={class:"game-controls"},we=["disabled"],be={class:"character-selector",id:"characterSelector"},he={class:"character-grid"},Se={class:"bow-selector",id:"bowSelector"},ye={class:"bow-grid"},pe={class:"game-over-modal",id:"gameOverModal"},Ce={class:"modal-content"},Be={class:"final-score",id:"finalScore"};function Ee(n,e,w,o,L,A){const S=K("router-link");return ee(),V("div",ae,[j(S,{to:"/",class:"back-button"},{default:J(()=>e[15]||(e[15]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),c("Back to Home ",-1)])),_:1,__:[15]}),t("div",{class:v(["wallet-status",o.walletStatusClass]),id:"walletStatus"},[e[16]||(e[16]=t("i",{class:"fas fa-wallet me-1"},null,-1)),c(f(o.walletStatusText),1)],2),t("div",oe,[t("div",se,[e[23]||(e[23]=t("div",{class:"game-title"},[t("i",{class:"fas fa-crosshairs"}),c(" PPO Archery ")],-1)),t("div",re,[t("div",le,[e[18]||(e[18]=t("i",{class:"fas fa-trophy"},null,-1)),t("span",null,[e[17]||(e[17]=c("High: ",-1)),t("span",ne,f(o.highScore),1)])]),t("div",ie,[e[20]||(e[20]=t("i",{class:"fas fa-star"},null,-1)),t("span",null,[e[19]||(e[19]=c("Level: ",-1)),t("span",ce,f(o.currentLevel),1)])]),t("div",de,[e[22]||(e[22]=t("i",{class:"fas fa-bullseye"},null,-1)),t("span",null,[e[21]||(e[21]=c("Score: ",-1)),t("span",me,f(o.score),1)])])])]),t("div",ve,[e[28]||(e[28]=Q('<div class="character" id="character" data-v-34566ba0><div class="character-body" data-v-34566ba0></div><div class="character-head" data-v-34566ba0><div class="character-eyes" data-v-34566ba0></div><div class="character-mouth" data-v-34566ba0></div></div><div class="character-arms" data-v-34566ba0><div class="character-arm left" data-v-34566ba0></div><div class="character-arm right" data-v-34566ba0></div></div><div class="character-hands" data-v-34566ba0><div class="character-hand left" data-v-34566ba0></div><div class="character-hand right" data-v-34566ba0></div></div><div class="character-legs" data-v-34566ba0><div class="character-leg left" data-v-34566ba0></div><div class="character-leg right" data-v-34566ba0></div></div><div class="character-feet" data-v-34566ba0><div class="character-foot left" data-v-34566ba0></div><div class="character-foot right" data-v-34566ba0></div></div></div><div class="bow" id="bow" data-v-34566ba0><div class="bow-body" data-v-34566ba0></div><div class="bow-string" id="bowString" data-v-34566ba0></div></div><div class="aiming-line" id="aimingLine" data-v-34566ba0></div><div class="arrow" id="arrow" data-v-34566ba0></div><div class="flying-arrow" id="flyingArrow" data-v-34566ba0></div><div class="target" id="target" data-v-34566ba0><div class="target-ring outer" data-v-34566ba0></div><div class="target-ring middle" data-v-34566ba0></div><div class="target-ring inner" data-v-34566ba0></div><div class="target-ring bullseye" data-v-34566ba0></div></div><div class="arrow-counter" data-v-34566ba0><h3 data-v-34566ba0><i class="fas fa-arrows-alt" data-v-34566ba0></i> Arrows</h3><div class="arrow-display" id="arrowDisplay" data-v-34566ba0></div></div>',7)),t("div",ue,[e[24]||(e[24]=t("h3",null,[t("i",{class:"fas fa-coins"}),c(" PPO")],-1)),t("div",ge,f(o.ppoBalance),1)]),t("div",fe,[t("button",{class:"control-btn",onClick:e[0]||(e[0]=(...l)=>o.selectCharacter&&o.selectCharacter(...l))},e[25]||(e[25]=[t("i",{class:"fas fa-user"},null,-1),c(" Character ",-1)])),t("button",{class:"control-btn",onClick:e[1]||(e[1]=(...l)=>o.selectBow&&o.selectBow(...l))},e[26]||(e[26]=[t("i",{class:"fas fa-crosshairs"},null,-1),c(" Bow ",-1)])),t("button",{class:"control-btn",onClick:e[2]||(e[2]=(...l)=>o.buyArrows&&o.buyArrows(...l)),disabled:o.ppoBalance<10,id:"buyArrowsBtn"},e[27]||(e[27]=[t("i",{class:"fas fa-shopping-cart"},null,-1),c(" Buy Arrows ",-1)]),8,we)]),e[29]||(e[29]=t("div",{class:"instructions"},[t("i",{class:"fas fa-mouse"}),c(" Click and drag to aim, release to shoot! ")],-1))],512)]),B(t("div",be,[e[33]||(e[33]=t("h2",null,"Choose Your Character",-1)),t("div",he,[t("div",{class:v(["character-option",{selected:o.selectedCharacter==="archer1"}]),onClick:e[3]||(e[3]=l=>o.selectedCharacter="archer1")},e[30]||(e[30]=[t("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #8B4513, #A0522D)","border-radius":"50%",margin:"0 auto 10px"}},null,-1),t("span",null,"Archer",-1)]),2),t("div",{class:v(["character-option",{selected:o.selectedCharacter==="archer2"}]),onClick:e[4]||(e[4]=l=>o.selectedCharacter="archer2")},e[31]||(e[31]=[t("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #4A90E2, #357ABD)","border-radius":"50%",margin:"0 auto 10px"}},null,-1),t("span",null,"Ranger",-1)]),2),t("div",{class:v(["character-option",{selected:o.selectedCharacter==="archer3"}]),onClick:e[5]||(e[5]=l=>o.selectedCharacter="archer3")},e[32]||(e[32]=[t("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #E74C3C, #C0392B)","border-radius":"50%",margin:"0 auto 10px"}},null,-1),t("span",null,"Hunter",-1)]),2)]),t("button",{class:"control-btn",onClick:e[6]||(e[6]=(...l)=>o.confirmCharacter&&o.confirmCharacter(...l))},"Confirm"),t("button",{class:"control-btn",onClick:e[7]||(e[7]=(...l)=>o.closeCharacterSelector&&o.closeCharacterSelector(...l))},"Cancel")],512),[[E,o.showCharacterSelector]]),B(t("div",Se,[e[37]||(e[37]=t("h2",null,"Choose Your Bow",-1)),t("div",ye,[t("div",{class:v(["bow-option",{selected:o.selectedBow==="basic"}]),onClick:e[8]||(e[8]=l=>o.selectedBow="basic")},e[34]||(e[34]=[t("i",{class:"fas fa-crosshairs"},null,-1),t("div",null,"Basic Bow",-1),t("small",null,"Standard accuracy",-1)]),2),t("div",{class:v(["bow-option",{selected:o.selectedBow==="premium"}]),onClick:e[9]||(e[9]=l=>o.selectedBow="premium")},e[35]||(e[35]=[t("i",{class:"fas fa-crosshairs"},null,-1),t("div",null,"Premium Bow",-1),t("small",null,"+20% accuracy",-1)]),2),t("div",{class:v(["bow-option",{selected:o.selectedBow==="legendary"}]),onClick:e[10]||(e[10]=l=>o.selectedBow="legendary")},e[36]||(e[36]=[t("i",{class:"fas fa-crosshairs"},null,-1),t("div",null,"Legendary Bow",-1),t("small",null,"+50% accuracy",-1)]),2)]),t("button",{class:"control-btn",onClick:e[11]||(e[11]=(...l)=>o.confirmBow&&o.confirmBow(...l))},"Confirm"),t("button",{class:"control-btn",onClick:e[12]||(e[12]=(...l)=>o.closeBowSelector&&o.closeBowSelector(...l))},"Cancel")],512),[[E,o.showBowSelector]]),B(t("div",pe,[t("div",Ce,[e[40]||(e[40]=t("h2",null,[t("i",{class:"fas fa-gamepad"}),c(" Game Over!")],-1)),t("div",Be,"Score: "+f(o.score),1),e[41]||(e[41]=t("p",null,"You've run out of arrows!",-1)),t("button",{class:"control-btn",onClick:e[13]||(e[13]=(...l)=>o.restartGame&&o.restartGame(...l))},e[38]||(e[38]=[t("i",{class:"fas fa-redo"},null,-1),c(" Play Again ",-1)])),t("button",{class:"control-btn",onClick:e[14]||(e[14]=(...l)=>o.buyArrows&&o.buyArrows(...l))},e[39]||(e[39]=[t("i",{class:"fas fa-shopping-cart"},null,-1),c(" Buy More Arrows ",-1)]))])],512),[[E,o.showGameOverModal]])])}const Ae=R(te,[["render",Ee],["__scopeId","data-v-34566ba0"]]);export{Ae as default};
