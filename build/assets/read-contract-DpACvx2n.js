import{a0 as u,aa as p,S as h}from"./index-r-K8bCt4.js";import{e as y,i as A,p as f,a as w}from"./utils-GbVwyc3t.js";import{e as g}from"./to-serializable-transaction-BMbNRj8d.js";function P(n){return Object.fromEntries(Object.entries(n).map(([t,e])=>[t,{balance:e.balance?u(e.balance):void 0,code:e.code,nonce:e.nonce?u(e.nonce):void 0,state:e.state,stateDiff:e.stateDiff}]))}async function k(n,t){const{blockNumber:e,blockTag:r,...s}=t,c=(e?u(e):void 0)||r||"latest";return await n({method:"eth_call",params:t.stateOverrides?[s,c,P(t.stateOverrides)]:[s,c]})}async function D(n){const{contract:t,method:e,params:r}=n,s=async()=>{if(Array.isArray(e))return e;if(A(e))return f(e);if(typeof e=="function")return f(await e(t));if(typeof e=="string"&&e.startsWith("function ")){const o=w(e);if(o.type==="function")return f(o);throw new Error('"method" passed is not of type "function"')}if(t.abi&&t.abi?.length>0){const o=t.abi?.find(l=>l.type==="function"&&l.name===e);if(o)return f(o)}throw new Error(`Could not resolve method "${e}".`)},[a,c]=await Promise.all([s(),typeof r=="function"?r():r]);let d;a[1].length===0?d=a[0]:d=a[0]+y(a[1],c).slice(2);const m=p({chain:t.chain,client:t.client}),b=await k(m,{data:d,from:n.from?h(n.from):void 0,to:t.address}),i=g(a[2],b);return Array.isArray(i)&&i.length===1?i[0]:i}export{D as readContract};
