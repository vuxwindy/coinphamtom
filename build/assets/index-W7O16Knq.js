const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-Dz_EPM7C.js","assets/hmac-DLbHqf-0.js","assets/ccip-BkXzkAbu.js","assets/localBatchGatewayRequest-DaEkX05X.js","assets/secp256k1-C21G73AV.js","assets/embedded-wallet-BoqMkhSQ.js","assets/state-Cf6Acp3J.js","assets/index-KkpI0fgd.js","assets/HelpersUtil-DNixBIjv.js","assets/index-Cqg5Vvc8.js","assets/index-DgA7GKrI.js","assets/ref-D8lD3BzL.js","assets/if-defined-Cjow_KMx.js","assets/index-XAL8BJnK.js","assets/index-DkewI-3x.js","assets/ref-DVXAuq4D.js","assets/index-BkuMDALp.js","assets/index-Sz6pSxEn.js","assets/index-NtF0e3ax.js","assets/index-BTClOK_9.js","assets/index-DsLsIr5D.js","assets/email-DsKz-m7q.js","assets/index-BXVXKBFS.js","assets/state-BNPL_3uu.js","assets/index-BwYKPcL7.js","assets/socials-iIgQaO8Z.js","assets/if-defined-BKrOdqAi.js","assets/index-Dl-p1Jbf.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-SvmkJxsZ.js","assets/index-XapnR-EF.js","assets/index-fD5z2hcm.js","assets/index-CX_ap1W4.js","assets/swaps-MO6GUFcp.js","assets/index-BxK889hR.js","assets/index-D0gkOPNs.js","assets/SwapController-DRNL448h.js","assets/index-DZZBALnv.js","assets/send-BIgpas_a.js","assets/index-B3sZNB9u.js","assets/index-Br57CPtN.js","assets/receive-BDwjxlbF.js","assets/index-DU1pprzb.js","assets/onramp-D1mhNYnK.js","assets/index-BNLNiClf.js","assets/index-zd-rhwAS.js","assets/pay-with-exchange-Glh_Wh5D.js","assets/transactions-D-txcsXI.js","assets/index-CUFGt7Ac.js","assets/index-DNTl5ytZ.js","assets/index-Dmbf6N_C.js","assets/data-capture-B-mcFTfm.js","assets/features--0clmnVL.js","assets/index-CA1tyvM0.js","assets/index-DLaXJVxM.js","assets/w3m-modal-B5UR1fii.js","assets/Game-xIb1rhLP.js","assets/Game-Cq0nwcrm.css","assets/Dashboard-B80Z31gx.js","assets/Dashboard-A8rDCuF6.css","assets/Marketplace-BXx4QsBR.js","assets/Marketplace-DrqroVUM.css","assets/Collection-DUuhuhIY.js","assets/Collection-CvEF6ZiI.css","assets/Blindbox-oZiY_adS.js","assets/Blindbox-CYkkv7dR.css","assets/Investment-BjXu2Vcq.js","assets/Investment-BHzWEjdO.css","assets/NFTInvestment-COuw6ZQE.js","assets/NFTInvestment-D7Pwpiuq.css","assets/Referral-Bk342VZK.js","assets/Referral-DRdq9hHr.css","assets/Profile-CpLNOjoA.js","assets/Profile-CJg-zi_H.css","assets/Whitepaper-Cl1_ojsA.js","assets/Whitepaper-UHAja_38.css","assets/Swap-nFZ1cLy7.js","assets/Swap-Bec7M_7H.css","assets/Creators-Lvm6m50S.js","assets/Creators-BC6q9gXS.css","assets/Tasks-gDzBC_hj.js","assets/Tasks-BxtMIaOL.css","assets/Signup-CJrgrjmc.js","assets/Signup-B9pc1cCX.css","assets/ArrowGame-D_ww-OlC.js","assets/ArrowGame-rB8JjRY1.css","assets/ArrowGameModern-BhtXmaLA.js","assets/ArrowGameModern-Nfwz_aje.css","assets/WalletTest-Bifmgdg4.js","assets/WalletTest-B8yUSR7c.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ny(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wF(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var yS={},i0={},M3;function vX(){if(M3)return i0;M3=1,i0.byteLength=a,i0.toByteArray=l,i0.fromByteArray=h;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)t[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(f){var m=f.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=f.indexOf("=");g===-1&&(g=m);var y=g===m?0:4-g%4;return[g,y]}function a(f){var m=o(f),g=m[0],y=m[1];return(g+y)*3/4-y}function c(f,m,g){return(m+g)*3/4-g}function l(f){var m,g=o(f),y=g[0],v=g[1],_=new n(c(f,y,v)),A=0,k=v>0?y-4:y,S;for(S=0;S<k;S+=4)m=e[f.charCodeAt(S)]<<18|e[f.charCodeAt(S+1)]<<12|e[f.charCodeAt(S+2)]<<6|e[f.charCodeAt(S+3)],_[A++]=m>>16&255,_[A++]=m>>8&255,_[A++]=m&255;return v===2&&(m=e[f.charCodeAt(S)]<<2|e[f.charCodeAt(S+1)]>>4,_[A++]=m&255),v===1&&(m=e[f.charCodeAt(S)]<<10|e[f.charCodeAt(S+1)]<<4|e[f.charCodeAt(S+2)]>>2,_[A++]=m>>8&255,_[A++]=m&255),_}function u(f){return t[f>>18&63]+t[f>>12&63]+t[f>>6&63]+t[f&63]}function d(f,m,g){for(var y,v=[],_=m;_<g;_+=3)y=(f[_]<<16&16711680)+(f[_+1]<<8&65280)+(f[_+2]&255),v.push(u(y));return v.join("")}function h(f){for(var m,g=f.length,y=g%3,v=[],_=16383,A=0,k=g-y;A<k;A+=_)v.push(d(f,A,A+_>k?k:A+_));return y===1?(m=f[g-1],v.push(t[m>>2]+t[m<<4&63]+"==")):y===2&&(m=(f[g-2]<<8)+f[g-1],v.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),v.join("")}return i0}var Z_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var B3;function bX(){return B3||(B3=1,Z_.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?s-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=h,u-=8);if(i===0)i=1-l;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-l}return(f?-1:1)*o*Math.pow(2,i-r)},Z_.write=function(t,e,n,r,s,i){var o,a,c,l=i*8-s-1,u=(1<<l)-1,d=u>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,m=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=a&255,f+=m,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;t[n+f]=o&255,f+=m,o/=256,l-=8);t[n+f-m]|=g*128}),Z_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var L3;function _X(){return L3||(L3=1,(function(t){const e=vX(),n=bX(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const F=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(F,C),F.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(F){if(F>s)throw new RangeError('The value "'+F+'" is invalid for option "size"');const C=new Uint8Array(F);return Object.setPrototypeOf(C,a.prototype),C}function a(F,C,N){if(typeof F=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(F)}return c(F,C,N)}a.poolSize=8192;function c(F,C,N){if(typeof F=="string")return h(F,C);if(ArrayBuffer.isView(F))return m(F);if(F==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(Qe(F,ArrayBuffer)||F&&Qe(F.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Qe(F,SharedArrayBuffer)||F&&Qe(F.buffer,SharedArrayBuffer)))return g(F,C,N);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const G=F.valueOf&&F.valueOf();if(G!=null&&G!==F)return a.from(G,C,N);const ee=y(F);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return a.from(F[Symbol.toPrimitive]("string"),C,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}a.from=function(F,C,N){return c(F,C,N)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function u(F,C,N){return l(F),F<=0?o(F):C!==void 0?typeof N=="string"?o(F).fill(C,N):o(F).fill(C):o(F)}a.alloc=function(F,C,N){return u(F,C,N)};function d(F){return l(F),o(F<0?0:v(F)|0)}a.allocUnsafe=function(F){return d(F)},a.allocUnsafeSlow=function(F){return d(F)};function h(F,C){if((typeof C!="string"||C==="")&&(C="utf8"),!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const N=A(F,C)|0;let G=o(N);const ee=G.write(F,C);return ee!==N&&(G=G.slice(0,ee)),G}function f(F){const C=F.length<0?0:v(F.length)|0,N=o(C);for(let G=0;G<C;G+=1)N[G]=F[G]&255;return N}function m(F){if(Qe(F,Uint8Array)){const C=new Uint8Array(F);return g(C.buffer,C.byteOffset,C.byteLength)}return f(F)}function g(F,C,N){if(C<0||F.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<C+(N||0))throw new RangeError('"length" is outside of buffer bounds');let G;return C===void 0&&N===void 0?G=new Uint8Array(F):N===void 0?G=new Uint8Array(F,C):G=new Uint8Array(F,C,N),Object.setPrototypeOf(G,a.prototype),G}function y(F){if(a.isBuffer(F)){const C=v(F.length)|0,N=o(C);return N.length===0||F.copy(N,0,0,C),N}if(F.length!==void 0)return typeof F.length!="number"||Le(F.length)?o(0):f(F);if(F.type==="Buffer"&&Array.isArray(F.data))return f(F.data)}function v(F){if(F>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return F|0}function _(F){return+F!=F&&(F=0),a.alloc(+F)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,N){if(Qe(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),Qe(N,Uint8Array)&&(N=a.from(N,N.offset,N.byteLength)),!a.isBuffer(C)||!a.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===N)return 0;let G=C.length,ee=N.length;for(let ae=0,ye=Math.min(G,ee);ae<ye;++ae)if(C[ae]!==N[ae]){G=C[ae],ee=N[ae];break}return G<ee?-1:ee<G?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,N){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let G;if(N===void 0)for(N=0,G=0;G<C.length;++G)N+=C[G].length;const ee=a.allocUnsafe(N);let ae=0;for(G=0;G<C.length;++G){let ye=C[G];if(Qe(ye,Uint8Array))ae+ye.length>ee.length?(a.isBuffer(ye)||(ye=a.from(ye)),ye.copy(ee,ae)):Uint8Array.prototype.set.call(ee,ye,ae);else if(a.isBuffer(ye))ye.copy(ee,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=ye.length}return ee};function A(F,C){if(a.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||Qe(F,ArrayBuffer))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);const N=F.length,G=arguments.length>2&&arguments[2]===!0;if(!G&&N===0)return 0;let ee=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return ve(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return ke(F).length;default:if(ee)return G?-1:ve(F).length;C=(""+C).toLowerCase(),ee=!0}}a.byteLength=A;function k(F,C,N){let G=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,C>>>=0,N<=C))return"";for(F||(F="utf8");;)switch(F){case"hex":return J(this,C,N);case"utf8":case"utf-8":return X(this,C,N);case"ascii":return W(this,C,N);case"latin1":case"binary":return Y(this,C,N);case"base64":return $(this,C,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,C,N);default:if(G)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),G=!0}}a.prototype._isBuffer=!0;function S(F,C,N){const G=F[C];F[C]=F[N],F[N]=G}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<C;N+=2)S(this,N,N+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<C;N+=4)S(this,N,N+3),S(this,N+1,N+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<C;N+=8)S(this,N,N+7),S(this,N+1,N+6),S(this,N+2,N+5),S(this,N+3,N+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?X(this,0,C):k.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const N=t.INSPECT_MAX_BYTES;return C=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(C+=" ... "),"<Buffer "+C+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(C,N,G,ee,ae){if(Qe(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(N===void 0&&(N=0),G===void 0&&(G=C?C.length:0),ee===void 0&&(ee=0),ae===void 0&&(ae=this.length),N<0||G>C.length||ee<0||ae>this.length)throw new RangeError("out of range index");if(ee>=ae&&N>=G)return 0;if(ee>=ae)return-1;if(N>=G)return 1;if(N>>>=0,G>>>=0,ee>>>=0,ae>>>=0,this===C)return 0;let ye=ae-ee,Bt=G-N;const Gt=Math.min(ye,Bt),nn=this.slice(ee,ae),zn=C.slice(N,G);for(let ln=0;ln<Gt;++ln)if(nn[ln]!==zn[ln]){ye=nn[ln],Bt=zn[ln];break}return ye<Bt?-1:Bt<ye?1:0};function R(F,C,N,G,ee){if(F.length===0)return-1;if(typeof N=="string"?(G=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,Le(N)&&(N=ee?0:F.length-1),N<0&&(N=F.length+N),N>=F.length){if(ee)return-1;N=F.length-1}else if(N<0)if(ee)N=0;else return-1;if(typeof C=="string"&&(C=a.from(C,G)),a.isBuffer(C))return C.length===0?-1:T(F,C,N,G,ee);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(F,C,N):Uint8Array.prototype.lastIndexOf.call(F,C,N):T(F,[C],N,G,ee);throw new TypeError("val must be string, number or Buffer")}function T(F,C,N,G,ee){let ae=1,ye=F.length,Bt=C.length;if(G!==void 0&&(G=String(G).toLowerCase(),G==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(F.length<2||C.length<2)return-1;ae=2,ye/=2,Bt/=2,N/=2}function Gt(zn,ln){return ae===1?zn[ln]:zn.readUInt16BE(ln*ae)}let nn;if(ee){let zn=-1;for(nn=N;nn<ye;nn++)if(Gt(F,nn)===Gt(C,zn===-1?0:nn-zn)){if(zn===-1&&(zn=nn),nn-zn+1===Bt)return zn*ae}else zn!==-1&&(nn-=nn-zn),zn=-1}else for(N+Bt>ye&&(N=ye-Bt),nn=N;nn>=0;nn--){let zn=!0;for(let ln=0;ln<Bt;ln++)if(Gt(F,nn+ln)!==Gt(C,ln)){zn=!1;break}if(zn)return nn}return-1}a.prototype.includes=function(C,N,G){return this.indexOf(C,N,G)!==-1},a.prototype.indexOf=function(C,N,G){return R(this,C,N,G,!0)},a.prototype.lastIndexOf=function(C,N,G){return R(this,C,N,G,!1)};function b(F,C,N,G){N=Number(N)||0;const ee=F.length-N;G?(G=Number(G),G>ee&&(G=ee)):G=ee;const ae=C.length;G>ae/2&&(G=ae/2);let ye;for(ye=0;ye<G;++ye){const Bt=parseInt(C.substr(ye*2,2),16);if(Le(Bt))return ye;F[N+ye]=Bt}return ye}function E(F,C,N,G){return Ie(ve(C,F.length-N),F,N,G)}function x(F,C,N,G){return Ie(He(C),F,N,G)}function D(F,C,N,G){return Ie(ke(C),F,N,G)}function M(F,C,N,G){return Ie(De(C,F.length-N),F,N,G)}a.prototype.write=function(C,N,G,ee){if(N===void 0)ee="utf8",G=this.length,N=0;else if(G===void 0&&typeof N=="string")ee=N,G=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(G)?(G=G>>>0,ee===void 0&&(ee="utf8")):(ee=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-N;if((G===void 0||G>ae)&&(G=ae),C.length>0&&(G<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");let ye=!1;for(;;)switch(ee){case"hex":return b(this,C,N,G);case"utf8":case"utf-8":return E(this,C,N,G);case"ascii":case"latin1":case"binary":return x(this,C,N,G);case"base64":return D(this,C,N,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,C,N,G);default:if(ye)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),ye=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(F,C,N){return C===0&&N===F.length?e.fromByteArray(F):e.fromByteArray(F.slice(C,N))}function X(F,C,N){N=Math.min(F.length,N);const G=[];let ee=C;for(;ee<N;){const ae=F[ee];let ye=null,Bt=ae>239?4:ae>223?3:ae>191?2:1;if(ee+Bt<=N){let Gt,nn,zn,ln;switch(Bt){case 1:ae<128&&(ye=ae);break;case 2:Gt=F[ee+1],(Gt&192)===128&&(ln=(ae&31)<<6|Gt&63,ln>127&&(ye=ln));break;case 3:Gt=F[ee+1],nn=F[ee+2],(Gt&192)===128&&(nn&192)===128&&(ln=(ae&15)<<12|(Gt&63)<<6|nn&63,ln>2047&&(ln<55296||ln>57343)&&(ye=ln));break;case 4:Gt=F[ee+1],nn=F[ee+2],zn=F[ee+3],(Gt&192)===128&&(nn&192)===128&&(zn&192)===128&&(ln=(ae&15)<<18|(Gt&63)<<12|(nn&63)<<6|zn&63,ln>65535&&ln<1114112&&(ye=ln))}}ye===null?(ye=65533,Bt=1):ye>65535&&(ye-=65536,G.push(ye>>>10&1023|55296),ye=56320|ye&1023),G.push(ye),ee+=Bt}return L(G)}const P=4096;function L(F){const C=F.length;if(C<=P)return String.fromCharCode.apply(String,F);let N="",G=0;for(;G<C;)N+=String.fromCharCode.apply(String,F.slice(G,G+=P));return N}function W(F,C,N){let G="";N=Math.min(F.length,N);for(let ee=C;ee<N;++ee)G+=String.fromCharCode(F[ee]&127);return G}function Y(F,C,N){let G="";N=Math.min(F.length,N);for(let ee=C;ee<N;++ee)G+=String.fromCharCode(F[ee]);return G}function J(F,C,N){const G=F.length;(!C||C<0)&&(C=0),(!N||N<0||N>G)&&(N=G);let ee="";for(let ae=C;ae<N;++ae)ee+=tt[F[ae]];return ee}function V(F,C,N){const G=F.slice(C,N);let ee="";for(let ae=0;ae<G.length-1;ae+=2)ee+=String.fromCharCode(G[ae]+G[ae+1]*256);return ee}a.prototype.slice=function(C,N){const G=this.length;C=~~C,N=N===void 0?G:~~N,C<0?(C+=G,C<0&&(C=0)):C>G&&(C=G),N<0?(N+=G,N<0&&(N=0)):N>G&&(N=G),N<C&&(N=C);const ee=this.subarray(C,N);return Object.setPrototypeOf(ee,a.prototype),ee};function se(F,C,N){if(F%1!==0||F<0)throw new RangeError("offset is not uint");if(F+C>N)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,N,G){C=C>>>0,N=N>>>0,G||se(C,N,this.length);let ee=this[C],ae=1,ye=0;for(;++ye<N&&(ae*=256);)ee+=this[C+ye]*ae;return ee},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,N,G){C=C>>>0,N=N>>>0,G||se(C,N,this.length);let ee=this[C+--N],ae=1;for(;N>0&&(ae*=256);)ee+=this[C+--N]*ae;return ee},a.prototype.readUint8=a.prototype.readUInt8=function(C,N){return C=C>>>0,N||se(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,N){return C=C>>>0,N||se(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,N){return C=C>>>0,N||se(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,N){return C=C>>>0,N||se(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,N){return C=C>>>0,N||se(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=Je(function(C){C=C>>>0,Z(C,"offset");const N=this[C],G=this[C+7];(N===void 0||G===void 0)&&te(C,this.length-8);const ee=N+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,ae=this[++C]+this[++C]*2**8+this[++C]*2**16+G*2**24;return BigInt(ee)+(BigInt(ae)<<BigInt(32))}),a.prototype.readBigUInt64BE=Je(function(C){C=C>>>0,Z(C,"offset");const N=this[C],G=this[C+7];(N===void 0||G===void 0)&&te(C,this.length-8);const ee=N*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],ae=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+G;return(BigInt(ee)<<BigInt(32))+BigInt(ae)}),a.prototype.readIntLE=function(C,N,G){C=C>>>0,N=N>>>0,G||se(C,N,this.length);let ee=this[C],ae=1,ye=0;for(;++ye<N&&(ae*=256);)ee+=this[C+ye]*ae;return ae*=128,ee>=ae&&(ee-=Math.pow(2,8*N)),ee},a.prototype.readIntBE=function(C,N,G){C=C>>>0,N=N>>>0,G||se(C,N,this.length);let ee=N,ae=1,ye=this[C+--ee];for(;ee>0&&(ae*=256);)ye+=this[C+--ee]*ae;return ae*=128,ye>=ae&&(ye-=Math.pow(2,8*N)),ye},a.prototype.readInt8=function(C,N){return C=C>>>0,N||se(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,N){C=C>>>0,N||se(C,2,this.length);const G=this[C]|this[C+1]<<8;return G&32768?G|4294901760:G},a.prototype.readInt16BE=function(C,N){C=C>>>0,N||se(C,2,this.length);const G=this[C+1]|this[C]<<8;return G&32768?G|4294901760:G},a.prototype.readInt32LE=function(C,N){return C=C>>>0,N||se(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,N){return C=C>>>0,N||se(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=Je(function(C){C=C>>>0,Z(C,"offset");const N=this[C],G=this[C+7];(N===void 0||G===void 0)&&te(C,this.length-8);const ee=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(G<<24);return(BigInt(ee)<<BigInt(32))+BigInt(N+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=Je(function(C){C=C>>>0,Z(C,"offset");const N=this[C],G=this[C+7];(N===void 0||G===void 0)&&te(C,this.length-8);const ee=(N<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(ee)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+G)}),a.prototype.readFloatLE=function(C,N){return C=C>>>0,N||se(C,4,this.length),n.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,N){return C=C>>>0,N||se(C,4,this.length),n.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,N){return C=C>>>0,N||se(C,8,this.length),n.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,N){return C=C>>>0,N||se(C,8,this.length),n.read(this,C,!1,52,8)};function ue(F,C,N,G,ee,ae){if(!a.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>ee||C<ae)throw new RangeError('"value" argument is out of bounds');if(N+G>F.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,N,G,ee){if(C=+C,N=N>>>0,G=G>>>0,!ee){const Bt=Math.pow(2,8*G)-1;ue(this,C,N,G,Bt,0)}let ae=1,ye=0;for(this[N]=C&255;++ye<G&&(ae*=256);)this[N+ye]=C/ae&255;return N+G},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,N,G,ee){if(C=+C,N=N>>>0,G=G>>>0,!ee){const Bt=Math.pow(2,8*G)-1;ue(this,C,N,G,Bt,0)}let ae=G-1,ye=1;for(this[N+ae]=C&255;--ae>=0&&(ye*=256);)this[N+ae]=C/ye&255;return N+G},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,1,255,0),this[N]=C&255,N+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,2,65535,0),this[N]=C&255,this[N+1]=C>>>8,N+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,2,65535,0),this[N]=C>>>8,this[N+1]=C&255,N+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,4,4294967295,0),this[N+3]=C>>>24,this[N+2]=C>>>16,this[N+1]=C>>>8,this[N]=C&255,N+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,4,4294967295,0),this[N]=C>>>24,this[N+1]=C>>>16,this[N+2]=C>>>8,this[N+3]=C&255,N+4};function Ee(F,C,N,G,ee){Q(C,G,ee,F,N,7);let ae=Number(C&BigInt(4294967295));F[N++]=ae,ae=ae>>8,F[N++]=ae,ae=ae>>8,F[N++]=ae,ae=ae>>8,F[N++]=ae;let ye=Number(C>>BigInt(32)&BigInt(4294967295));return F[N++]=ye,ye=ye>>8,F[N++]=ye,ye=ye>>8,F[N++]=ye,ye=ye>>8,F[N++]=ye,N}function pe(F,C,N,G,ee){Q(C,G,ee,F,N,7);let ae=Number(C&BigInt(4294967295));F[N+7]=ae,ae=ae>>8,F[N+6]=ae,ae=ae>>8,F[N+5]=ae,ae=ae>>8,F[N+4]=ae;let ye=Number(C>>BigInt(32)&BigInt(4294967295));return F[N+3]=ye,ye=ye>>8,F[N+2]=ye,ye=ye>>8,F[N+1]=ye,ye=ye>>8,F[N]=ye,N+8}a.prototype.writeBigUInt64LE=Je(function(C,N=0){return Ee(this,C,N,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Je(function(C,N=0){return pe(this,C,N,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,N,G,ee){if(C=+C,N=N>>>0,!ee){const Gt=Math.pow(2,8*G-1);ue(this,C,N,G,Gt-1,-Gt)}let ae=0,ye=1,Bt=0;for(this[N]=C&255;++ae<G&&(ye*=256);)C<0&&Bt===0&&this[N+ae-1]!==0&&(Bt=1),this[N+ae]=(C/ye>>0)-Bt&255;return N+G},a.prototype.writeIntBE=function(C,N,G,ee){if(C=+C,N=N>>>0,!ee){const Gt=Math.pow(2,8*G-1);ue(this,C,N,G,Gt-1,-Gt)}let ae=G-1,ye=1,Bt=0;for(this[N+ae]=C&255;--ae>=0&&(ye*=256);)C<0&&Bt===0&&this[N+ae+1]!==0&&(Bt=1),this[N+ae]=(C/ye>>0)-Bt&255;return N+G},a.prototype.writeInt8=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,1,127,-128),C<0&&(C=255+C+1),this[N]=C&255,N+1},a.prototype.writeInt16LE=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,2,32767,-32768),this[N]=C&255,this[N+1]=C>>>8,N+2},a.prototype.writeInt16BE=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,2,32767,-32768),this[N]=C>>>8,this[N+1]=C&255,N+2},a.prototype.writeInt32LE=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,4,2147483647,-2147483648),this[N]=C&255,this[N+1]=C>>>8,this[N+2]=C>>>16,this[N+3]=C>>>24,N+4},a.prototype.writeInt32BE=function(C,N,G){return C=+C,N=N>>>0,G||ue(this,C,N,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[N]=C>>>24,this[N+1]=C>>>16,this[N+2]=C>>>8,this[N+3]=C&255,N+4},a.prototype.writeBigInt64LE=Je(function(C,N=0){return Ee(this,C,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Je(function(C,N=0){return pe(this,C,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Se(F,C,N,G,ee,ae){if(N+G>F.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function Me(F,C,N,G,ee){return C=+C,N=N>>>0,ee||Se(F,C,N,4),n.write(F,C,N,G,23,4),N+4}a.prototype.writeFloatLE=function(C,N,G){return Me(this,C,N,!0,G)},a.prototype.writeFloatBE=function(C,N,G){return Me(this,C,N,!1,G)};function ce(F,C,N,G,ee){return C=+C,N=N>>>0,ee||Se(F,C,N,8),n.write(F,C,N,G,52,8),N+8}a.prototype.writeDoubleLE=function(C,N,G){return ce(this,C,N,!0,G)},a.prototype.writeDoubleBE=function(C,N,G){return ce(this,C,N,!1,G)},a.prototype.copy=function(C,N,G,ee){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(G||(G=0),!ee&&ee!==0&&(ee=this.length),N>=C.length&&(N=C.length),N||(N=0),ee>0&&ee<G&&(ee=G),ee===G||C.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),C.length-N<ee-G&&(ee=C.length-N+G);const ae=ee-G;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,G,ee):Uint8Array.prototype.set.call(C,this.subarray(G,ee),N),ae},a.prototype.fill=function(C,N,G,ee){if(typeof C=="string"){if(typeof N=="string"?(ee=N,N=0,G=this.length):typeof G=="string"&&(ee=G,G=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!a.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(C.length===1){const ye=C.charCodeAt(0);(ee==="utf8"&&ye<128||ee==="latin1")&&(C=ye)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(N<0||this.length<N||this.length<G)throw new RangeError("Out of range index");if(G<=N)return this;N=N>>>0,G=G===void 0?this.length:G>>>0,C||(C=0);let ae;if(typeof C=="number")for(ae=N;ae<G;++ae)this[ae]=C;else{const ye=a.isBuffer(C)?C:a.from(C,ee),Bt=ye.length;if(Bt===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(ae=0;ae<G-N;++ae)this[ae+N]=ye[ae%Bt]}return this};const oe={};function ge(F,C,N){oe[F]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${F}]`,this.stack,delete this.name}get code(){return F}set code(ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ee,writable:!0})}toString(){return`${this.name} [${F}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(F){return F?`${F} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(F,C){return`The "${F}" argument must be of type number. Received type ${typeof C}`},TypeError),ge("ERR_OUT_OF_RANGE",function(F,C,N){let G=`The value of "${F}" is out of range.`,ee=N;return Number.isInteger(N)&&Math.abs(N)>2**32?ee=Ne(String(N)):typeof N=="bigint"&&(ee=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(ee=Ne(ee)),ee+="n"),G+=` It must be ${C}. Received ${ee}`,G},RangeError);function Ne(F){let C="",N=F.length;const G=F[0]==="-"?1:0;for(;N>=G+4;N-=3)C=`_${F.slice(N-3,N)}${C}`;return`${F.slice(0,N)}${C}`}function mt(F,C,N){Z(C,"offset"),(F[C]===void 0||F[C+N]===void 0)&&te(C,F.length-(N+1))}function Q(F,C,N,G,ee,ae){if(F>N||F<C){const ye=typeof C=="bigint"?"n":"";let Bt;throw C===0||C===BigInt(0)?Bt=`>= 0${ye} and < 2${ye} ** ${(ae+1)*8}${ye}`:Bt=`>= -(2${ye} ** ${(ae+1)*8-1}${ye}) and < 2 ** ${(ae+1)*8-1}${ye}`,new oe.ERR_OUT_OF_RANGE("value",Bt,F)}mt(G,ee,ae)}function Z(F,C){if(typeof F!="number")throw new oe.ERR_INVALID_ARG_TYPE(C,"number",F)}function te(F,C,N){throw Math.floor(F)!==F?(Z(F,N),new oe.ERR_OUT_OF_RANGE("offset","an integer",F)):C<0?new oe.ERR_BUFFER_OUT_OF_BOUNDS:new oe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${C}`,F)}const me=/[^+/0-9A-Za-z-_]/g;function we(F){if(F=F.split("=")[0],F=F.trim().replace(me,""),F.length<2)return"";for(;F.length%4!==0;)F=F+"=";return F}function ve(F,C){C=C||1/0;let N;const G=F.length;let ee=null;const ae=[];for(let ye=0;ye<G;++ye){if(N=F.charCodeAt(ye),N>55295&&N<57344){if(!ee){if(N>56319){(C-=3)>-1&&ae.push(239,191,189);continue}else if(ye+1===G){(C-=3)>-1&&ae.push(239,191,189);continue}ee=N;continue}if(N<56320){(C-=3)>-1&&ae.push(239,191,189),ee=N;continue}N=(ee-55296<<10|N-56320)+65536}else ee&&(C-=3)>-1&&ae.push(239,191,189);if(ee=null,N<128){if((C-=1)<0)break;ae.push(N)}else if(N<2048){if((C-=2)<0)break;ae.push(N>>6|192,N&63|128)}else if(N<65536){if((C-=3)<0)break;ae.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((C-=4)<0)break;ae.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return ae}function He(F){const C=[];for(let N=0;N<F.length;++N)C.push(F.charCodeAt(N)&255);return C}function De(F,C){let N,G,ee;const ae=[];for(let ye=0;ye<F.length&&!((C-=2)<0);++ye)N=F.charCodeAt(ye),G=N>>8,ee=N%256,ae.push(ee),ae.push(G);return ae}function ke(F){return e.toByteArray(we(F))}function Ie(F,C,N,G){let ee;for(ee=0;ee<G&&!(ee+N>=C.length||ee>=F.length);++ee)C[ee+N]=F[ee];return ee}function Qe(F,C){return F instanceof C||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===C.name}function Le(F){return F!==F}const tt=(function(){const F="0123456789abcdef",C=new Array(256);for(let N=0;N<16;++N){const G=N*16;for(let ee=0;ee<16;++ee)C[G+ee]=F[N]+F[ee]}return C})();function Je(F){return typeof BigInt>"u"?ft:F}function ft(){throw new Error("BigInt not supported")}})(yS)),yS}_X();var wS={exports:{}},$3;function EX(){if($3)return wS.exports;$3=1;var t=wS.exports={},e,n;function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch{e=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=s}catch{n=s}})();function i(g){if(e===setTimeout)return setTimeout(g,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(g,0);try{return e(g,0)}catch{try{return e.call(null,g,0)}catch{return e.call(this,g,0)}}}function o(g){if(n===clearTimeout)return clearTimeout(g);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(g);try{return n(g)}catch{try{return n.call(null,g)}catch{return n.call(this,g)}}}var a=[],c=!1,l,u=-1;function d(){!c||!l||(c=!1,l.length?a=l.concat(a):u=-1,a.length&&h())}function h(){if(!c){var g=i(d);c=!0;for(var y=a.length;y;){for(l=a,a=[];++u<y;)l&&l[u].run();u=-1,y=a.length}l=null,c=!1,o(g)}}t.nextTick=function(g){var y=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)y[v-1]=arguments[v];a.push(new f(g,y)),a.length===1&&!c&&i(h)};function f(g,y){this.fun=g,this.array=y}f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function m(){}return t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(g){return[]},t.binding=function(g){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(g){throw new Error("process.chdir is not supported")},t.umask=function(){return 0},wS.exports}EX();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function rO(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ir={},Gm=[],Bc=()=>{},AX=()=>!1,tI=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),sO=t=>t.startsWith("onUpdate:"),ls=Object.assign,iO=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},CX=Object.prototype.hasOwnProperty,Vn=(t,e)=>CX.call(t,e),yt=Array.isArray,Km=t=>Cb(t)==="[object Map]",ry=t=>Cb(t)==="[object Set]",U3=t=>Cb(t)==="[object Date]",Wt=t=>typeof t=="function",Mr=t=>typeof t=="string",za=t=>typeof t=="symbol",cr=t=>t!==null&&typeof t=="object",vF=t=>(cr(t)||Wt(t))&&Wt(t.then)&&Wt(t.catch),bF=Object.prototype.toString,Cb=t=>bF.call(t),IX=t=>Cb(t).slice(8,-1),_F=t=>Cb(t)==="[object Object]",oO=t=>Mr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Z0=rO(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nI=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},TX=/-(\w)/g,ha=nI(t=>t.replace(TX,(e,n)=>n?n.toUpperCase():"")),SX=/\B([A-Z])/g,gp=nI(t=>t.replace(SX,"-$1").toLowerCase()),rI=nI(t=>t.charAt(0).toUpperCase()+t.slice(1)),WE=nI(t=>t?`on${rI(t)}`:""),Ld=(t,e)=>!Object.is(t,e),GE=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},M2=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},L1=t=>{const e=parseFloat(t);return isNaN(e)?t:e},xX=t=>{const e=Mr(t)?Number(t):NaN;return isNaN(e)?t:e};let F3;const sI=()=>F3||(F3=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{});function Ib(t){if(yt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Mr(r)?OX(r):Ib(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Mr(t)||cr(t))return t}const PX=/;(?![^(]*\))/g,RX=/:([^]+)/,NX=/\/\*[^]*?\*\//g;function OX(t){const e={};return t.replace(NX,"").split(PX).forEach(n=>{if(n){const r=n.split(RX);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function jn(t){let e="";if(Mr(t))e=t;else if(yt(t))for(let n=0;n<t.length;n++){const r=jn(t[n]);r&&(e+=r+" ")}else if(cr(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const kX="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",DX=rO(kX);function EF(t){return!!t||t===""}function MX(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Tb(t[r],e[r]);return n}function Tb(t,e){if(t===e)return!0;let n=U3(t),r=U3(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=za(t),r=za(e),n||r)return t===e;if(n=yt(t),r=yt(e),n||r)return n&&r?MX(t,e):!1;if(n=cr(t),r=cr(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Tb(t[o],e[o]))return!1}}return String(t)===String(e)}function aO(t,e){return t.findIndex(n=>Tb(n,e))}const AF=t=>!!(t&&t.__v_isRef===!0),xt=t=>Mr(t)?t:t==null?"":yt(t)||cr(t)&&(t.toString===bF||!Wt(t.toString))?AF(t)?xt(t.value):JSON.stringify(t,CF,2):String(t),CF=(t,e)=>AF(e)?CF(t,e.value):Km(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[vS(r,i)+" =>"]=s,n),{})}:ry(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>vS(n))}:za(e)?vS(e):cr(e)&&!yt(e)&&!_F(e)?String(e):e,vS=(t,e="")=>{var n;return za(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qs;class BX{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Qs,!e&&Qs&&(this.index=(Qs.scopes||(Qs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Qs;try{return Qs=this,e()}finally{Qs=n}}}on(){++this._on===1&&(this.prevScope=Qs,Qs=this)}off(){this._on>0&&--this._on===0&&(Qs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function LX(){return Qs}function cO(t,e=!1){Qs&&Qs.cleanups.push(t)}let fr;const bS=new WeakSet;class IF{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Qs&&Qs.active&&Qs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bS.has(this)&&(bS.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||SF(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,j3(this),xF(this);const e=fr,n=ja;fr=this,ja=!0;try{return this.fn()}finally{PF(this),fr=e,ja=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)dO(e);this.deps=this.depsTail=void 0,j3(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bS.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){B2(this)&&this.run()}get dirty(){return B2(this)}}let TF=0,J0,X0;function SF(t,e=!1){if(t.flags|=8,e){t.next=X0,X0=t;return}t.next=J0,J0=t}function lO(){TF++}function uO(){if(--TF>0)return;if(X0){let e=X0;for(X0=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;J0;){let e=J0;for(J0=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function xF(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function PF(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),dO(r),$X(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function B2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(RF(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function RF(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===kw)||(t.globalVersion=kw,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!B2(t))))return;t.flags|=2;const e=t.dep,n=fr,r=ja;fr=t,ja=!0;try{xF(t);const s=t.fn(t._value);(e.version===0||Ld(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{fr=n,ja=r,PF(t),t.flags&=-3}}function dO(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)dO(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function $X(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ja=!0;const NF=[];function hu(){NF.push(ja),ja=!1}function fu(){const t=NF.pop();ja=t===void 0?!0:t}function j3(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=fr;fr=void 0;try{e()}finally{fr=n}}}let kw=0;class UX{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hO{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!fr||!ja||fr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==fr)n=this.activeLink=new UX(fr,this),fr.deps?(n.prevDep=fr.depsTail,fr.depsTail.nextDep=n,fr.depsTail=n):fr.deps=fr.depsTail=n,OF(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=fr.depsTail,n.nextDep=void 0,fr.depsTail.nextDep=n,fr.depsTail=n,fr.deps===n&&(fr.deps=r)}return n}trigger(e){this.version++,kw++,this.notify(e)}notify(e){lO();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{uO()}}}function OF(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)OF(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const $1=new WeakMap,Cf=Symbol(""),L2=Symbol(""),Dw=Symbol("");function Zs(t,e,n){if(ja&&fr){let r=$1.get(t);r||$1.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new hO),s.map=r,s.key=n),s.track()}}function Gl(t,e,n,r,s,i){const o=$1.get(t);if(!o){kw++;return}const a=c=>{c&&c.trigger()};if(lO(),e==="clear")o.forEach(a);else{const c=yt(t),l=c&&oO(n);if(c&&n==="length"){const u=Number(r);o.forEach((d,h)=>{(h==="length"||h===Dw||!za(h)&&h>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(Dw)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Cf)),Km(t)&&a(o.get(L2)));break;case"delete":c||(a(o.get(Cf)),Km(t)&&a(o.get(L2)));break;case"set":Km(t)&&a(o.get(Cf));break}}uO()}function FX(t,e){const n=$1.get(t);return n&&n.get(e)}function Jp(t){const e=Sn(t);return e===t?e:(Zs(e,"iterate",Dw),ca(t)?e:e.map(Os))}function iI(t){return Zs(t=Sn(t),"iterate",Dw),t}const jX={__proto__:null,[Symbol.iterator](){return _S(this,Symbol.iterator,Os)},concat(...t){return Jp(this).concat(...t.map(e=>yt(e)?Jp(e):e))},entries(){return _S(this,"entries",t=>(t[1]=Os(t[1]),t))},every(t,e){return bl(this,"every",t,e,void 0,arguments)},filter(t,e){return bl(this,"filter",t,e,n=>n.map(Os),arguments)},find(t,e){return bl(this,"find",t,e,Os,arguments)},findIndex(t,e){return bl(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return bl(this,"findLast",t,e,Os,arguments)},findLastIndex(t,e){return bl(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return bl(this,"forEach",t,e,void 0,arguments)},includes(...t){return ES(this,"includes",t)},indexOf(...t){return ES(this,"indexOf",t)},join(t){return Jp(this).join(t)},lastIndexOf(...t){return ES(this,"lastIndexOf",t)},map(t,e){return bl(this,"map",t,e,void 0,arguments)},pop(){return o0(this,"pop")},push(...t){return o0(this,"push",t)},reduce(t,...e){return V3(this,"reduce",t,e)},reduceRight(t,...e){return V3(this,"reduceRight",t,e)},shift(){return o0(this,"shift")},some(t,e){return bl(this,"some",t,e,void 0,arguments)},splice(...t){return o0(this,"splice",t)},toReversed(){return Jp(this).toReversed()},toSorted(t){return Jp(this).toSorted(t)},toSpliced(...t){return Jp(this).toSpliced(...t)},unshift(...t){return o0(this,"unshift",t)},values(){return _S(this,"values",Os)}};function _S(t,e,n){const r=iI(t),s=r[e]();return r!==t&&!ca(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const VX=Array.prototype;function bl(t,e,n,r,s,i){const o=iI(t),a=o!==t&&!ca(t),c=o[e];if(c!==VX[e]){const d=c.apply(t,i);return a?Os(d):d}let l=n;o!==t&&(a?l=function(d,h){return n.call(this,Os(d),h,t)}:n.length>2&&(l=function(d,h){return n.call(this,d,h,t)}));const u=c.call(o,l,r);return a&&s?s(u):u}function V3(t,e,n,r){const s=iI(t);let i=n;return s!==t&&(ca(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,Os(a),c,t)}),s[e](i,...r)}function ES(t,e,n){const r=Sn(t);Zs(r,"iterate",Dw);const s=r[e](...n);return(s===-1||s===!1)&&pO(n[0])?(n[0]=Sn(n[0]),r[e](...n)):s}function o0(t,e,n=[]){hu(),lO();const r=Sn(t)[e].apply(t,n);return uO(),fu(),r}const HX=rO("__proto__,__v_isRef,__isVue"),kF=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(za));function qX(t){za(t)||(t=String(t));const e=Sn(this);return Zs(e,"has",t),e.hasOwnProperty(t)}class DF{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?FF:UF:i?$F:LF).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=yt(e);if(!s){let c;if(o&&(c=jX[n]))return c;if(n==="hasOwnProperty")return qX}const a=Reflect.get(e,n,os(e)?e:r);return(za(n)?kF.has(n):HX(n))||(s||Zs(e,"get",n),i)?a:os(a)?o&&oO(n)?a:a.value:cr(a)?s?Sb(a):yp(a):a}}class MF extends DF{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=Zd(i);if(!ca(r)&&!Zd(r)&&(i=Sn(i),r=Sn(r)),!yt(e)&&os(i)&&!os(r))return c?!1:(i.value=r,!0)}const o=yt(e)&&oO(n)?Number(n)<e.length:Vn(e,n),a=Reflect.set(e,n,r,os(e)?e:s);return e===Sn(s)&&(o?Ld(r,i)&&Gl(e,"set",n,r):Gl(e,"add",n,r)),a}deleteProperty(e,n){const r=Vn(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Gl(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!za(n)||!kF.has(n))&&Zs(e,"has",n),r}ownKeys(e){return Zs(e,"iterate",yt(e)?"length":Cf),Reflect.ownKeys(e)}}class BF extends DF{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zX=new MF,WX=new BF,GX=new MF(!0),KX=new BF(!0),$2=t=>t,J_=t=>Reflect.getPrototypeOf(t);function QX(t,e,n){return function(...r){const s=this.__v_raw,i=Sn(s),o=Km(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),u=n?$2:e?U1:Os;return!e&&Zs(i,"iterate",c?L2:Cf),{next(){const{value:d,done:h}=l.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function X_(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function YX(t,e){const n={get(s){const i=this.__v_raw,o=Sn(i),a=Sn(s);t||(Ld(s,a)&&Zs(o,"get",s),Zs(o,"get",a));const{has:c}=J_(o),l=e?$2:t?U1:Os;if(c.call(o,s))return l(i.get(s));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Zs(Sn(s),"iterate",Cf),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Sn(i),a=Sn(s);return t||(Ld(s,a)&&Zs(o,"has",s),Zs(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Sn(a),l=e?$2:t?U1:Os;return!t&&Zs(c,"iterate",Cf),a.forEach((u,d)=>s.call(i,l(u),l(d),o))}};return ls(n,t?{add:X_("add"),set:X_("set"),delete:X_("delete"),clear:X_("clear")}:{add(s){!e&&!ca(s)&&!Zd(s)&&(s=Sn(s));const i=Sn(this);return J_(i).has.call(i,s)||(i.add(s),Gl(i,"add",s,s)),this},set(s,i){!e&&!ca(i)&&!Zd(i)&&(i=Sn(i));const o=Sn(this),{has:a,get:c}=J_(o);let l=a.call(o,s);l||(s=Sn(s),l=a.call(o,s));const u=c.call(o,s);return o.set(s,i),l?Ld(i,u)&&Gl(o,"set",s,i):Gl(o,"add",s,i),this},delete(s){const i=Sn(this),{has:o,get:a}=J_(i);let c=o.call(i,s);c||(s=Sn(s),c=o.call(i,s)),a&&a.call(i,s);const l=i.delete(s);return c&&Gl(i,"delete",s,void 0),l},clear(){const s=Sn(this),i=s.size!==0,o=s.clear();return i&&Gl(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=QX(s,t,e)}),n}function oI(t,e){const n=YX(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Vn(n,s)&&s in r?n:r,s,i)}const ZX={get:oI(!1,!1)},JX={get:oI(!1,!0)},XX={get:oI(!0,!1)},eee={get:oI(!0,!0)},LF=new WeakMap,$F=new WeakMap,UF=new WeakMap,FF=new WeakMap;function tee(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nee(t){return t.__v_skip||!Object.isExtensible(t)?0:tee(IX(t))}function yp(t){return Zd(t)?t:aI(t,!1,zX,ZX,LF)}function fO(t){return aI(t,!1,GX,JX,$F)}function Sb(t){return aI(t,!0,WX,XX,UF)}function ree(t){return aI(t,!0,KX,eee,FF)}function aI(t,e,n,r,s){if(!cr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=nee(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Qm(t){return Zd(t)?Qm(t.__v_raw):!!(t&&t.__v_isReactive)}function Zd(t){return!!(t&&t.__v_isReadonly)}function ca(t){return!!(t&&t.__v_isShallow)}function pO(t){return t?!!t.__v_raw:!1}function Sn(t){const e=t&&t.__v_raw;return e?Sn(e):t}function see(t){return!Vn(t,"__v_skip")&&Object.isExtensible(t)&&M2(t,"__v_skip",!0),t}const Os=t=>cr(t)?yp(t):t,U1=t=>cr(t)?Sb(t):t;function os(t){return t?t.__v_isRef===!0:!1}function Lt(t){return jF(t,!1)}function iee(t){return jF(t,!0)}function jF(t,e){return os(t)?t:new oee(t,e)}class oee{constructor(e,n){this.dep=new hO,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Sn(e),this._value=n?e:Os(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ca(e)||Zd(e);e=r?e:Sn(e),Ld(e,n)&&(this._rawValue=e,this._value=r?e:Os(e),this.dep.trigger())}}function _s(t){return os(t)?t.value:t}const aee={get:(t,e,n)=>e==="__v_raw"?t:_s(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return os(s)&&!os(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function VF(t){return Qm(t)?t:new Proxy(t,aee)}function HF(t){const e=yt(t)?new Array(t.length):{};for(const n in t)e[n]=lee(t,n);return e}class cee{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return FX(Sn(this._object),this._key)}}function lee(t,e,n){const r=t[e];return os(r)?r:new cee(t,e,n)}class uee{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new hO(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=kw-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&fr!==this)return SF(this,!0),!0}get value(){const e=this.dep.track();return RF(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function dee(t,e,n=!1){let r,s;return Wt(t)?r=t:(r=t.get,s=t.set),new uee(r,s,n)}const eE={},F1=new WeakMap;let Xh;function hee(t,e=!1,n=Xh){if(n){let r=F1.get(n);r||F1.set(n,r=[]),r.push(t)}}function fee(t,e,n=ir){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,l=k=>s?k:ca(k)||s===!1||s===0?Kl(k,1):Kl(k);let u,d,h,f,m=!1,g=!1;if(os(t)?(d=()=>t.value,m=ca(t)):Qm(t)?(d=()=>l(t),m=!0):yt(t)?(g=!0,m=t.some(k=>Qm(k)||ca(k)),d=()=>t.map(k=>{if(os(k))return k.value;if(Qm(k))return l(k);if(Wt(k))return c?c(k,2):k()})):Wt(t)?e?d=c?()=>c(t,2):t:d=()=>{if(h){hu();try{h()}finally{fu()}}const k=Xh;Xh=u;try{return c?c(t,3,[f]):t(f)}finally{Xh=k}}:d=Bc,e&&s){const k=d,S=s===!0?1/0:s;d=()=>Kl(k(),S)}const y=LX(),v=()=>{u.stop(),y&&y.active&&iO(y.effects,u)};if(i&&e){const k=e;e=(...S)=>{k(...S),v()}}let _=g?new Array(t.length).fill(eE):eE;const A=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(e){const S=u.run();if(s||m||(g?S.some((R,T)=>Ld(R,_[T])):Ld(S,_))){h&&h();const R=Xh;Xh=u;try{const T=[S,_===eE?void 0:g&&_[0]===eE?[]:_,f];_=S,c?c(e,3,T):e(...T)}finally{Xh=R}}}else u.run()};return a&&a(A),u=new IF(d),u.scheduler=o?()=>o(A,!1):A,f=k=>hee(k,!1,u),h=u.onStop=()=>{const k=F1.get(u);if(k){if(c)c(k,4);else for(const S of k)S();F1.delete(u)}},e?r?A(!0):_=u.run():o?o(A.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function Kl(t,e=1/0,n){if(e<=0||!cr(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,os(t))Kl(t.value,e,n);else if(yt(t))for(let r=0;r<t.length;r++)Kl(t[r],e,n);else if(ry(t)||Km(t))t.forEach(r=>{Kl(r,e,n)});else if(_F(t)){for(const r in t)Kl(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Kl(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xb(t,e,n,r){try{return r?t(...r):t()}catch(s){cI(s,e,n)}}function Wa(t,e,n,r){if(Wt(t)){const s=xb(t,e,n,r);return s&&vF(s)&&s.catch(i=>{cI(i,e,n)}),s}if(yt(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Wa(t[i],e,n,r));return s}}function cI(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ir;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,c,l)===!1)return}a=a.parent}if(i){hu(),xb(i,null,10,[t,c,l]),fu();return}}pee(t,n,s,r,o)}function pee(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const mi=[];let bc=-1;const Ym=[];let md=null,Im=0;const qF=Promise.resolve();let j1=null;function Pb(t){const e=j1||qF;return t?e.then(this?t.bind(this):t):e}function mee(t){let e=bc+1,n=mi.length;for(;e<n;){const r=e+n>>>1,s=mi[r],i=Mw(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function mO(t){if(!(t.flags&1)){const e=Mw(t),n=mi[mi.length-1];!n||!(t.flags&2)&&e>=Mw(n)?mi.push(t):mi.splice(mee(e),0,t),t.flags|=1,zF()}}function zF(){j1||(j1=qF.then(GF))}function gee(t){yt(t)?Ym.push(...t):md&&t.id===-1?md.splice(Im+1,0,t):t.flags&1||(Ym.push(t),t.flags|=1),zF()}function H3(t,e,n=bc+1){for(;n<mi.length;n++){const r=mi[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;mi.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function WF(t){if(Ym.length){const e=[...new Set(Ym)].sort((n,r)=>Mw(n)-Mw(r));if(Ym.length=0,md){md.push(...e);return}for(md=e,Im=0;Im<md.length;Im++){const n=md[Im];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}md=null,Im=0}}const Mw=t=>t.id==null?t.flags&2?-1:1/0:t.id;function GF(t){try{for(bc=0;bc<mi.length;bc++){const e=mi[bc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),xb(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;bc<mi.length;bc++){const e=mi[bc];e&&(e.flags&=-2)}bc=-1,mi.length=0,WF(),j1=null,(mi.length||Ym.length)&&GF()}}let Ms=null,KF=null;function V1(t){const e=Ms;return Ms=t,KF=t&&t.type.__scopeId||null,e}function ws(t,e=Ms,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&X3(-1);const i=V1(e);let o;try{o=t(...s)}finally{V1(i),r._d&&X3(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function yee(t,e){if(Ms===null)return t;const n=pI(Ms),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=ir]=e[s];i&&(Wt(i)&&(i={mounted:i,updated:i}),i.deep&&Kl(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Vh(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(hu(),Wa(c,n,8,[t.el,a,t,e]),fu())}}const wee=Symbol("_vte"),vee=t=>t.__isTeleport,Xp=Symbol("_leaveCb"),tE=Symbol("_enterCb");function bee(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return wp(()=>{t.isMounted=!0}),e9(()=>{t.isUnmounting=!0}),t}const jo=[Function,Array],_ee={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jo,onEnter:jo,onAfterEnter:jo,onEnterCancelled:jo,onBeforeLeave:jo,onLeave:jo,onAfterLeave:jo,onLeaveCancelled:jo,onBeforeAppear:jo,onAppear:jo,onAfterAppear:jo,onAppearCancelled:jo};function Eee(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function U2(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:y,onAppear:v,onAfterAppear:_,onAppearCancelled:A}=e,k=String(t.key),S=Eee(n,t),R=(E,x)=>{E&&Wa(E,r,9,x)},T=(E,x)=>{const D=x[1];R(E,x),yt(E)?E.every(M=>M.length<=1)&&D():E.length<=1&&D()},b={mode:o,persisted:a,beforeEnter(E){let x=c;if(!n.isMounted)if(i)x=y||c;else return;E[Xp]&&E[Xp](!0);const D=S[k];D&&Tm(t,D)&&D.el[Xp]&&D.el[Xp](),R(x,[E])},enter(E){let x=l,D=u,M=d;if(!n.isMounted)if(i)x=v||l,D=_||u,M=A||d;else return;let $=!1;const X=E[tE]=P=>{$||($=!0,P?R(M,[E]):R(D,[E]),b.delayedLeave&&b.delayedLeave(),E[tE]=void 0)};x?T(x,[E,X]):X()},leave(E,x){const D=String(t.key);if(E[tE]&&E[tE](!0),n.isUnmounting)return x();R(h,[E]);let M=!1;const $=E[Xp]=X=>{M||(M=!0,x(),X?R(g,[E]):R(m,[E]),E[Xp]=void 0,S[D]===t&&delete S[D])};S[D]=t,f?T(f,[E,$]):$()},clone(E){return U2(E,e,n,r)}};return b}function Bw(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Bw(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function QF(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===ar?(o.patchFlag&128&&s++,r=r.concat(QF(o.children,e,a))):(e||o.type!==Zc)&&r.push(a!=null?$f(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Su(t,e){return Wt(t)?ls({name:t.name},e,{setup:t}):t}function YF(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ew(t,e,n,r,s=!1){if(yt(t)){t.forEach((m,g)=>ew(m,e&&(yt(e)?e[g]:e),n,r,s));return}if(Zm(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ew(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?pI(r.component):r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===ir?a.refs={}:a.refs,d=a.setupState,h=Sn(d),f=d===ir?()=>!1:m=>Vn(h,m);if(l!=null&&l!==c&&(Mr(l)?(u[l]=null,f(l)&&(d[l]=null)):os(l)&&(l.value=null)),Wt(c))xb(c,a,12,[o,u]);else{const m=Mr(c),g=os(c);if(m||g){const y=()=>{if(t.f){const v=m?f(c)?d[c]:u[c]:c.value;s?yt(v)&&iO(v,i):yt(v)?v.includes(i)||v.push(i):m?(u[c]=[i],f(c)&&(d[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else m?(u[c]=o,f(c)&&(d[c]=o)):g&&(c.value=o,t.k&&(u[t.k]=o))};o?(y.id=-1,ho(y,n)):y()}}}sI().requestIdleCallback;sI().cancelIdleCallback;const Zm=t=>!!t.type.__asyncLoader,ZF=t=>t.type.__isKeepAlive;function Aee(t,e){JF(t,"a",e)}function Cee(t,e){JF(t,"da",e)}function JF(t,e,n=ei){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(lI(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ZF(s.parent.vnode)&&Iee(r,e,n,s),s=s.parent}}function Iee(t,e,n,r){const s=lI(e,t,r,!0);sy(()=>{iO(r[e],s)},n)}function lI(t,e,n=ei,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{hu();const a=Rb(n),c=Wa(e,n,t,o);return a(),fu(),c});return r?s.unshift(i):s.push(i),i}}const xu=t=>(e,n=ei)=>{(!Uw||t==="sp")&&lI(t,(...r)=>e(...r),n)},Tee=xu("bm"),wp=xu("m"),See=xu("bu"),XF=xu("u"),e9=xu("bum"),sy=xu("um"),xee=xu("sp"),Pee=xu("rtg"),Ree=xu("rtc");function Nee(t,e=ei){lI("ec",t,e)}const t9="components";function tu(t,e){return r9(t9,t,!0,e)||t}const n9=Symbol.for("v-ndc");function gO(t){return Mr(t)?r9(t9,t,!1)||t:t||n9}function r9(t,e,n=!0,r=!1){const s=Ms||ei;if(s){const i=s.type;{const a=wte(i,!1);if(a&&(a===e||a===ha(e)||a===rI(ha(e))))return i}const o=q3(s[t]||i[t],e)||q3(s.appContext[t],e);return!o&&r?i:o}}function q3(t,e){return t&&(t[e]||t[ha(e)]||t[rI(ha(e))])}function Ma(t,e,n,r){let s;const i=n,o=yt(t);if(o||Mr(t)){const a=o&&Qm(t);let c=!1,l=!1;a&&(c=!ca(t),l=Zd(t),t=iI(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(c?l?U1(Os(t[u])):Os(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(cr(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];s[c]=e(t[u],u,c,i)}}else s=[];return s}function Oee(t,e,n={},r,s){if(Ms.ce||Ms.parent&&Zm(Ms.parent)&&Ms.parent.ce)return dt(),ia(ar,null,[cn("slot",n,r)],64);let i=t[e];i&&i._c&&(i._d=!1),dt();const o=i&&s9(i(n)),a=n.key||o&&o.key,c=ia(ar,{key:(a&&!za(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function s9(t){return t.some(e=>$w(e)?!(e.type===Zc||e.type===ar&&!s9(e.children)):!0)?t:null}function kee(t,e){const n={};for(const r in t)n[WE(r)]=t[r];return n}const F2=t=>t?I9(t)?pI(t):F2(t.parent):null,tw=ls(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>F2(t.parent),$root:t=>F2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>o9(t),$forceUpdate:t=>t.f||(t.f=()=>{mO(t.update)}),$nextTick:t=>t.n||(t.n=Pb.bind(t.proxy)),$watch:t=>ete.bind(t)}),AS=(t,e)=>t!==ir&&!t.__isScriptSetup&&Vn(t,e),Dee={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(AS(r,e))return o[e]=1,r[e];if(s!==ir&&Vn(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&Vn(l,e))return o[e]=3,i[e];if(n!==ir&&Vn(n,e))return o[e]=4,n[e];j2&&(o[e]=0)}}const u=tw[e];let d,h;if(u)return e==="$attrs"&&Zs(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==ir&&Vn(n,e))return o[e]=4,n[e];if(h=c.config.globalProperties,Vn(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return AS(s,e)?(s[e]=n,!0):r!==ir&&Vn(r,e)?(r[e]=n,!0):Vn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==ir&&Vn(t,o)||AS(e,o)||(a=i[0])&&Vn(a,o)||Vn(r,o)||Vn(tw,o)||Vn(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Vn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function z3(t){return yt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let j2=!0;function Mee(t){const e=o9(t),n=t.proxy,r=t.ctx;j2=!1,e.beforeCreate&&W3(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:g,deactivated:y,beforeDestroy:v,beforeUnmount:_,destroyed:A,unmounted:k,render:S,renderTracked:R,renderTriggered:T,errorCaptured:b,serverPrefetch:E,expose:x,inheritAttrs:D,components:M,directives:$,filters:X}=e;if(l&&Bee(l,r,null),o)for(const W in o){const Y=o[W];Wt(Y)&&(r[W]=Y.bind(n))}if(s){const W=s.call(n,n);cr(W)&&(t.data=yp(W))}if(j2=!0,i)for(const W in i){const Y=i[W],J=Wt(Y)?Y.bind(n,n):Wt(Y.get)?Y.get.bind(n,n):Bc,V=!Wt(Y)&&Wt(Y.set)?Y.set.bind(n):Bc,se=_r({get:J,set:V});Object.defineProperty(r,W,{enumerable:!0,configurable:!0,get:()=>se.value,set:ue=>se.value=ue})}if(a)for(const W in a)i9(a[W],r,n,W);if(c){const W=Wt(c)?c.call(n):c;Reflect.ownKeys(W).forEach(Y=>{KE(Y,W[Y])})}u&&W3(u,t,"c");function L(W,Y){yt(Y)?Y.forEach(J=>W(J.bind(n))):Y&&W(Y.bind(n))}if(L(Tee,d),L(wp,h),L(See,f),L(XF,m),L(Aee,g),L(Cee,y),L(Nee,b),L(Ree,R),L(Pee,T),L(e9,_),L(sy,k),L(xee,E),yt(x))if(x.length){const W=t.exposed||(t.exposed={});x.forEach(Y=>{Object.defineProperty(W,Y,{get:()=>n[Y],set:J=>n[Y]=J,enumerable:!0})})}else t.exposed||(t.exposed={});S&&t.render===Bc&&(t.render=S),D!=null&&(t.inheritAttrs=D),M&&(t.components=M),$&&(t.directives=$),E&&YF(t)}function Bee(t,e,n=Bc){yt(t)&&(t=V2(t));for(const r in t){const s=t[r];let i;cr(s)?"default"in s?i=Eo(s.from||r,s.default,!0):i=Eo(s.from||r):i=Eo(s),os(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function W3(t,e,n){Wa(yt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function i9(t,e,n,r){let s=r.includes(".")?b9(n,r):()=>n[r];if(Mr(t)){const i=e[t];Wt(i)&&Tf(s,i)}else if(Wt(t))Tf(s,t.bind(n));else if(cr(t))if(yt(t))t.forEach(i=>i9(i,e,n,r));else{const i=Wt(t.handler)?t.handler.bind(n):e[t.handler];Wt(i)&&Tf(s,i,t)}}function o9(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>H1(c,l,o,!0)),H1(c,e,o)),cr(e)&&i.set(e,c),c}function H1(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&H1(t,i,n,!0),s&&s.forEach(o=>H1(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Lee[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Lee={data:G3,props:K3,emits:K3,methods:M0,computed:M0,beforeCreate:hi,created:hi,beforeMount:hi,mounted:hi,beforeUpdate:hi,updated:hi,beforeDestroy:hi,beforeUnmount:hi,destroyed:hi,unmounted:hi,activated:hi,deactivated:hi,errorCaptured:hi,serverPrefetch:hi,components:M0,directives:M0,watch:Uee,provide:G3,inject:$ee};function G3(t,e){return e?t?function(){return ls(Wt(t)?t.call(this,this):t,Wt(e)?e.call(this,this):e)}:e:t}function $ee(t,e){return M0(V2(t),V2(e))}function V2(t){if(yt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function hi(t,e){return t?[...new Set([].concat(t,e))]:e}function M0(t,e){return t?ls(Object.create(null),t,e):e}function K3(t,e){return t?yt(t)&&yt(e)?[...new Set([...t,...e])]:ls(Object.create(null),z3(t),z3(e??{})):e}function Uee(t,e){if(!t)return e;if(!e)return t;const n=ls(Object.create(null),t);for(const r in e)n[r]=hi(t[r],e[r]);return n}function a9(){return{app:null,config:{isNativeTag:AX,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Fee=0;function jee(t,e){return function(r,s=null){Wt(r)||(r=ls({},r)),s!=null&&!cr(s)&&(s=null);const i=a9(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:Fee++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:bte,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&Wt(u.install)?(o.add(u),u.install(l,...d)):Wt(u)&&(o.add(u),u(l,...d))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,d){return d?(i.components[u]=d,l):i.components[u]},directive(u,d){return d?(i.directives[u]=d,l):i.directives[u]},mount(u,d,h){if(!c){const f=l._ceVNode||cn(r,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),t(f,u,h),c=!0,l._container=u,u.__vue_app__=l,pI(f.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Wa(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,d){return i.provides[u]=d,l},runWithContext(u){const d=If;If=l;try{return u()}finally{If=d}}};return l}}let If=null;function KE(t,e){if(ei){let n=ei.provides;const r=ei.parent&&ei.parent.provides;r===n&&(n=ei.provides=Object.create(r)),n[t]=e}}function Eo(t,e,n=!1){const r=fI();if(r||If){let s=If?If._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Wt(e)?e.call(r&&r.proxy):e}}function c9(){return!!(fI()||If)}const l9={},u9=()=>Object.create(l9),d9=t=>Object.getPrototypeOf(t)===l9;function Vee(t,e,n,r=!1){const s={},i=u9();t.propsDefaults=Object.create(null),h9(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:fO(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Hee(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Sn(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(uI(t.emitsOptions,h))continue;const f=e[h];if(c)if(Vn(i,h))f!==i[h]&&(i[h]=f,l=!0);else{const m=ha(h);s[m]=H2(c,a,m,f,t,!1)}else f!==i[h]&&(i[h]=f,l=!0)}}}else{h9(t,e,s,i)&&(l=!0);let u;for(const d in a)(!e||!Vn(e,d)&&((u=gp(d))===d||!Vn(e,u)))&&(c?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=H2(c,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Vn(e,d))&&(delete i[d],l=!0)}l&&Gl(t.attrs,"set","")}function h9(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Z0(c))continue;const l=e[c];let u;s&&Vn(s,u=ha(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:uI(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Sn(n),l=a||ir;for(let u=0;u<i.length;u++){const d=i[u];n[d]=H2(s,c,d,l[d],t,!Vn(l,d))}}return o}function H2(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Vn(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Wt(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const u=Rb(s);r=l[n]=c.call(null,e),u()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===gp(n))&&(r=!0))}return r}const qee=new WeakMap;function f9(t,e,n=!1){const r=n?qee:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!Wt(t)){const u=d=>{c=!0;const[h,f]=f9(d,e,!0);ls(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return cr(t)&&r.set(t,Gm),Gm;if(yt(i))for(let u=0;u<i.length;u++){const d=ha(i[u]);Q3(d)&&(o[d]=ir)}else if(i)for(const u in i){const d=ha(u);if(Q3(d)){const h=i[u],f=o[d]=yt(h)||Wt(h)?{type:h}:ls({},h),m=f.type;let g=!1,y=!0;if(yt(m))for(let v=0;v<m.length;++v){const _=m[v],A=Wt(_)&&_.name;if(A==="Boolean"){g=!0;break}else A==="String"&&(y=!1)}else g=Wt(m)&&m.name==="Boolean";f[0]=g,f[1]=y,(g||Vn(f,"default"))&&a.push(d)}}const l=[o,a];return cr(t)&&r.set(t,l),l}function Q3(t){return t[0]!=="$"&&!Z0(t)}const yO=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",wO=t=>yt(t)?t.map(Tc):[Tc(t)],zee=(t,e,n)=>{if(e._n)return e;const r=ws((...s)=>wO(e(...s)),n);return r._c=!1,r},p9=(t,e,n)=>{const r=t._ctx;for(const s in t){if(yO(s))continue;const i=t[s];if(Wt(i))e[s]=zee(s,i,r);else if(i!=null){const o=wO(i);e[s]=()=>o}}},m9=(t,e)=>{const n=wO(e);t.slots.default=()=>n},g9=(t,e,n)=>{for(const r in e)(n||!yO(r))&&(t[r]=e[r])},Wee=(t,e,n)=>{const r=t.slots=u9();if(t.vnode.shapeFlag&32){const s=e.__;s&&M2(r,"__",s,!0);const i=e._;i?(g9(r,e,n),n&&M2(r,"_",i,!0)):p9(e,r)}else e&&m9(t,e)},Gee=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ir;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:g9(s,e,n):(i=!e.$stable,p9(e,s)),o=e}else e&&(m9(t,e),o={default:1});if(i)for(const a in s)!yO(a)&&o[a]==null&&delete s[a]},ho=ate;function Kee(t){return Qee(t)}function Qee(t,e){const n=sI();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=Bc,insertStaticContent:m}=t,g=(Q,Z,te,me=null,we=null,ve=null,He=void 0,De=null,ke=!!Z.dynamicChildren)=>{if(Q===Z)return;Q&&!Tm(Q,Z)&&(me=ce(Q),ue(Q,we,ve,!0),Q=null),Z.patchFlag===-2&&(ke=!1,Z.dynamicChildren=null);const{type:Ie,ref:Qe,shapeFlag:Le}=Z;switch(Ie){case dI:y(Q,Z,te,me);break;case Zc:v(Q,Z,te,me);break;case QE:Q==null&&_(Z,te,me,He);break;case ar:M(Q,Z,te,me,we,ve,He,De,ke);break;default:Le&1?S(Q,Z,te,me,we,ve,He,De,ke):Le&6?$(Q,Z,te,me,we,ve,He,De,ke):(Le&64||Le&128)&&Ie.process(Q,Z,te,me,we,ve,He,De,ke,Ne)}Qe!=null&&we?ew(Qe,Q&&Q.ref,ve,Z||Q,!Z):Qe==null&&Q&&Q.ref!=null&&ew(Q.ref,null,ve,Q,!0)},y=(Q,Z,te,me)=>{if(Q==null)r(Z.el=a(Z.children),te,me);else{const we=Z.el=Q.el;Z.children!==Q.children&&l(we,Z.children)}},v=(Q,Z,te,me)=>{Q==null?r(Z.el=c(Z.children||""),te,me):Z.el=Q.el},_=(Q,Z,te,me)=>{[Q.el,Q.anchor]=m(Q.children,Z,te,me,Q.el,Q.anchor)},A=({el:Q,anchor:Z},te,me)=>{let we;for(;Q&&Q!==Z;)we=h(Q),r(Q,te,me),Q=we;r(Z,te,me)},k=({el:Q,anchor:Z})=>{let te;for(;Q&&Q!==Z;)te=h(Q),s(Q),Q=te;s(Z)},S=(Q,Z,te,me,we,ve,He,De,ke)=>{Z.type==="svg"?He="svg":Z.type==="math"&&(He="mathml"),Q==null?R(Z,te,me,we,ve,He,De,ke):E(Q,Z,we,ve,He,De,ke)},R=(Q,Z,te,me,we,ve,He,De)=>{let ke,Ie;const{props:Qe,shapeFlag:Le,transition:tt,dirs:Je}=Q;if(ke=Q.el=o(Q.type,ve,Qe&&Qe.is,Qe),Le&8?u(ke,Q.children):Le&16&&b(Q.children,ke,null,me,we,CS(Q,ve),He,De),Je&&Vh(Q,null,me,"created"),T(ke,Q,Q.scopeId,He,me),Qe){for(const F in Qe)F!=="value"&&!Z0(F)&&i(ke,F,null,Qe[F],ve,me);"value"in Qe&&i(ke,"value",null,Qe.value,ve),(Ie=Qe.onVnodeBeforeMount)&&uc(Ie,me,Q)}Je&&Vh(Q,null,me,"beforeMount");const ft=Yee(we,tt);ft&&tt.beforeEnter(ke),r(ke,Z,te),((Ie=Qe&&Qe.onVnodeMounted)||ft||Je)&&ho(()=>{Ie&&uc(Ie,me,Q),ft&&tt.enter(ke),Je&&Vh(Q,null,me,"mounted")},we)},T=(Q,Z,te,me,we)=>{if(te&&f(Q,te),me)for(let ve=0;ve<me.length;ve++)f(Q,me[ve]);if(we){let ve=we.subTree;if(Z===ve||E9(ve.type)&&(ve.ssContent===Z||ve.ssFallback===Z)){const He=we.vnode;T(Q,He,He.scopeId,He.slotScopeIds,we.parent)}}},b=(Q,Z,te,me,we,ve,He,De,ke=0)=>{for(let Ie=ke;Ie<Q.length;Ie++){const Qe=Q[Ie]=De?gd(Q[Ie]):Tc(Q[Ie]);g(null,Qe,Z,te,me,we,ve,He,De)}},E=(Q,Z,te,me,we,ve,He)=>{const De=Z.el=Q.el;let{patchFlag:ke,dynamicChildren:Ie,dirs:Qe}=Z;ke|=Q.patchFlag&16;const Le=Q.props||ir,tt=Z.props||ir;let Je;if(te&&Hh(te,!1),(Je=tt.onVnodeBeforeUpdate)&&uc(Je,te,Z,Q),Qe&&Vh(Z,Q,te,"beforeUpdate"),te&&Hh(te,!0),(Le.innerHTML&&tt.innerHTML==null||Le.textContent&&tt.textContent==null)&&u(De,""),Ie?x(Q.dynamicChildren,Ie,De,te,me,CS(Z,we),ve):He||Y(Q,Z,De,null,te,me,CS(Z,we),ve,!1),ke>0){if(ke&16)D(De,Le,tt,te,we);else if(ke&2&&Le.class!==tt.class&&i(De,"class",null,tt.class,we),ke&4&&i(De,"style",Le.style,tt.style,we),ke&8){const ft=Z.dynamicProps;for(let F=0;F<ft.length;F++){const C=ft[F],N=Le[C],G=tt[C];(G!==N||C==="value")&&i(De,C,N,G,we,te)}}ke&1&&Q.children!==Z.children&&u(De,Z.children)}else!He&&Ie==null&&D(De,Le,tt,te,we);((Je=tt.onVnodeUpdated)||Qe)&&ho(()=>{Je&&uc(Je,te,Z,Q),Qe&&Vh(Z,Q,te,"updated")},me)},x=(Q,Z,te,me,we,ve,He)=>{for(let De=0;De<Z.length;De++){const ke=Q[De],Ie=Z[De],Qe=ke.el&&(ke.type===ar||!Tm(ke,Ie)||ke.shapeFlag&198)?d(ke.el):te;g(ke,Ie,Qe,null,me,we,ve,He,!0)}},D=(Q,Z,te,me,we)=>{if(Z!==te){if(Z!==ir)for(const ve in Z)!Z0(ve)&&!(ve in te)&&i(Q,ve,Z[ve],null,we,me);for(const ve in te){if(Z0(ve))continue;const He=te[ve],De=Z[ve];He!==De&&ve!=="value"&&i(Q,ve,De,He,we,me)}"value"in te&&i(Q,"value",Z.value,te.value,we)}},M=(Q,Z,te,me,we,ve,He,De,ke)=>{const Ie=Z.el=Q?Q.el:a(""),Qe=Z.anchor=Q?Q.anchor:a("");let{patchFlag:Le,dynamicChildren:tt,slotScopeIds:Je}=Z;Je&&(De=De?De.concat(Je):Je),Q==null?(r(Ie,te,me),r(Qe,te,me),b(Z.children||[],te,Qe,we,ve,He,De,ke)):Le>0&&Le&64&&tt&&Q.dynamicChildren?(x(Q.dynamicChildren,tt,te,we,ve,He,De),(Z.key!=null||we&&Z===we.subTree)&&y9(Q,Z,!0)):Y(Q,Z,te,Qe,we,ve,He,De,ke)},$=(Q,Z,te,me,we,ve,He,De,ke)=>{Z.slotScopeIds=De,Q==null?Z.shapeFlag&512?we.ctx.activate(Z,te,me,He,ke):X(Z,te,me,we,ve,He,ke):P(Q,Z,ke)},X=(Q,Z,te,me,we,ve,He)=>{const De=Q.component=fte(Q,me,we);if(ZF(Q)&&(De.ctx.renderer=Ne),pte(De,!1,He),De.asyncDep){if(we&&we.registerDep(De,L,He),!Q.el){const ke=De.subTree=cn(Zc);v(null,ke,Z,te),Q.placeholder=ke.el}}else L(De,Q,Z,te,we,ve,He)},P=(Q,Z,te)=>{const me=Z.component=Q.component;if(ite(Q,Z,te))if(me.asyncDep&&!me.asyncResolved){W(me,Z,te);return}else me.next=Z,me.update();else Z.el=Q.el,me.vnode=Z},L=(Q,Z,te,me,we,ve,He)=>{const De=()=>{if(Q.isMounted){let{next:Le,bu:tt,u:Je,parent:ft,vnode:F}=Q;{const ae=w9(Q);if(ae){Le&&(Le.el=F.el,W(Q,Le,He)),ae.asyncDep.then(()=>{Q.isUnmounted||De()});return}}let C=Le,N;Hh(Q,!1),Le?(Le.el=F.el,W(Q,Le,He)):Le=F,tt&&GE(tt),(N=Le.props&&Le.props.onVnodeBeforeUpdate)&&uc(N,ft,Le,F),Hh(Q,!0);const G=Z3(Q),ee=Q.subTree;Q.subTree=G,g(ee,G,d(ee.el),ce(ee),Q,we,ve),Le.el=G.el,C===null&&ote(Q,G.el),Je&&ho(Je,we),(N=Le.props&&Le.props.onVnodeUpdated)&&ho(()=>uc(N,ft,Le,F),we)}else{let Le;const{el:tt,props:Je}=Z,{bm:ft,m:F,parent:C,root:N,type:G}=Q,ee=Zm(Z);Hh(Q,!1),ft&&GE(ft),!ee&&(Le=Je&&Je.onVnodeBeforeMount)&&uc(Le,C,Z),Hh(Q,!0);{N.ce&&N.ce._def.shadowRoot!==!1&&N.ce._injectChildStyle(G);const ae=Q.subTree=Z3(Q);g(null,ae,te,me,Q,we,ve),Z.el=ae.el}if(F&&ho(F,we),!ee&&(Le=Je&&Je.onVnodeMounted)){const ae=Z;ho(()=>uc(Le,C,ae),we)}(Z.shapeFlag&256||C&&Zm(C.vnode)&&C.vnode.shapeFlag&256)&&Q.a&&ho(Q.a,we),Q.isMounted=!0,Z=te=me=null}};Q.scope.on();const ke=Q.effect=new IF(De);Q.scope.off();const Ie=Q.update=ke.run.bind(ke),Qe=Q.job=ke.runIfDirty.bind(ke);Qe.i=Q,Qe.id=Q.uid,ke.scheduler=()=>mO(Qe),Hh(Q,!0),Ie()},W=(Q,Z,te)=>{Z.component=Q;const me=Q.vnode.props;Q.vnode=Z,Q.next=null,Hee(Q,Z.props,me,te),Gee(Q,Z.children,te),hu(),H3(Q),fu()},Y=(Q,Z,te,me,we,ve,He,De,ke=!1)=>{const Ie=Q&&Q.children,Qe=Q?Q.shapeFlag:0,Le=Z.children,{patchFlag:tt,shapeFlag:Je}=Z;if(tt>0){if(tt&128){V(Ie,Le,te,me,we,ve,He,De,ke);return}else if(tt&256){J(Ie,Le,te,me,we,ve,He,De,ke);return}}Je&8?(Qe&16&&Me(Ie,we,ve),Le!==Ie&&u(te,Le)):Qe&16?Je&16?V(Ie,Le,te,me,we,ve,He,De,ke):Me(Ie,we,ve,!0):(Qe&8&&u(te,""),Je&16&&b(Le,te,me,we,ve,He,De,ke))},J=(Q,Z,te,me,we,ve,He,De,ke)=>{Q=Q||Gm,Z=Z||Gm;const Ie=Q.length,Qe=Z.length,Le=Math.min(Ie,Qe);let tt;for(tt=0;tt<Le;tt++){const Je=Z[tt]=ke?gd(Z[tt]):Tc(Z[tt]);g(Q[tt],Je,te,null,we,ve,He,De,ke)}Ie>Qe?Me(Q,we,ve,!0,!1,Le):b(Z,te,me,we,ve,He,De,ke,Le)},V=(Q,Z,te,me,we,ve,He,De,ke)=>{let Ie=0;const Qe=Z.length;let Le=Q.length-1,tt=Qe-1;for(;Ie<=Le&&Ie<=tt;){const Je=Q[Ie],ft=Z[Ie]=ke?gd(Z[Ie]):Tc(Z[Ie]);if(Tm(Je,ft))g(Je,ft,te,null,we,ve,He,De,ke);else break;Ie++}for(;Ie<=Le&&Ie<=tt;){const Je=Q[Le],ft=Z[tt]=ke?gd(Z[tt]):Tc(Z[tt]);if(Tm(Je,ft))g(Je,ft,te,null,we,ve,He,De,ke);else break;Le--,tt--}if(Ie>Le){if(Ie<=tt){const Je=tt+1,ft=Je<Qe?Z[Je].el:me;for(;Ie<=tt;)g(null,Z[Ie]=ke?gd(Z[Ie]):Tc(Z[Ie]),te,ft,we,ve,He,De,ke),Ie++}}else if(Ie>tt)for(;Ie<=Le;)ue(Q[Ie],we,ve,!0),Ie++;else{const Je=Ie,ft=Ie,F=new Map;for(Ie=ft;Ie<=tt;Ie++){const Gt=Z[Ie]=ke?gd(Z[Ie]):Tc(Z[Ie]);Gt.key!=null&&F.set(Gt.key,Ie)}let C,N=0;const G=tt-ft+1;let ee=!1,ae=0;const ye=new Array(G);for(Ie=0;Ie<G;Ie++)ye[Ie]=0;for(Ie=Je;Ie<=Le;Ie++){const Gt=Q[Ie];if(N>=G){ue(Gt,we,ve,!0);continue}let nn;if(Gt.key!=null)nn=F.get(Gt.key);else for(C=ft;C<=tt;C++)if(ye[C-ft]===0&&Tm(Gt,Z[C])){nn=C;break}nn===void 0?ue(Gt,we,ve,!0):(ye[nn-ft]=Ie+1,nn>=ae?ae=nn:ee=!0,g(Gt,Z[nn],te,null,we,ve,He,De,ke),N++)}const Bt=ee?Zee(ye):Gm;for(C=Bt.length-1,Ie=G-1;Ie>=0;Ie--){const Gt=ft+Ie,nn=Z[Gt],zn=Z[Gt+1],ln=Gt+1<Qe?zn.el||zn.placeholder:me;ye[Ie]===0?g(null,nn,te,ln,we,ve,He,De,ke):ee&&(C<0||Ie!==Bt[C]?se(nn,te,ln,2):C--)}}},se=(Q,Z,te,me,we=null)=>{const{el:ve,type:He,transition:De,children:ke,shapeFlag:Ie}=Q;if(Ie&6){se(Q.component.subTree,Z,te,me);return}if(Ie&128){Q.suspense.move(Z,te,me);return}if(Ie&64){He.move(Q,Z,te,Ne);return}if(He===ar){r(ve,Z,te);for(let Le=0;Le<ke.length;Le++)se(ke[Le],Z,te,me);r(Q.anchor,Z,te);return}if(He===QE){A(Q,Z,te);return}if(me!==2&&Ie&1&&De)if(me===0)De.beforeEnter(ve),r(ve,Z,te),ho(()=>De.enter(ve),we);else{const{leave:Le,delayLeave:tt,afterLeave:Je}=De,ft=()=>{Q.ctx.isUnmounted?s(ve):r(ve,Z,te)},F=()=>{Le(ve,()=>{ft(),Je&&Je()})};tt?tt(ve,ft,F):F()}else r(ve,Z,te)},ue=(Q,Z,te,me=!1,we=!1)=>{const{type:ve,props:He,ref:De,children:ke,dynamicChildren:Ie,shapeFlag:Qe,patchFlag:Le,dirs:tt,cacheIndex:Je}=Q;if(Le===-2&&(we=!1),De!=null&&(hu(),ew(De,null,te,Q,!0),fu()),Je!=null&&(Z.renderCache[Je]=void 0),Qe&256){Z.ctx.deactivate(Q);return}const ft=Qe&1&&tt,F=!Zm(Q);let C;if(F&&(C=He&&He.onVnodeBeforeUnmount)&&uc(C,Z,Q),Qe&6)Se(Q.component,te,me);else{if(Qe&128){Q.suspense.unmount(te,me);return}ft&&Vh(Q,null,Z,"beforeUnmount"),Qe&64?Q.type.remove(Q,Z,te,Ne,me):Ie&&!Ie.hasOnce&&(ve!==ar||Le>0&&Le&64)?Me(Ie,Z,te,!1,!0):(ve===ar&&Le&384||!we&&Qe&16)&&Me(ke,Z,te),me&&Ee(Q)}(F&&(C=He&&He.onVnodeUnmounted)||ft)&&ho(()=>{C&&uc(C,Z,Q),ft&&Vh(Q,null,Z,"unmounted")},te)},Ee=Q=>{const{type:Z,el:te,anchor:me,transition:we}=Q;if(Z===ar){pe(te,me);return}if(Z===QE){k(Q);return}const ve=()=>{s(te),we&&!we.persisted&&we.afterLeave&&we.afterLeave()};if(Q.shapeFlag&1&&we&&!we.persisted){const{leave:He,delayLeave:De}=we,ke=()=>He(te,ve);De?De(Q.el,ve,ke):ke()}else ve()},pe=(Q,Z)=>{let te;for(;Q!==Z;)te=h(Q),s(Q),Q=te;s(Z)},Se=(Q,Z,te)=>{const{bum:me,scope:we,job:ve,subTree:He,um:De,m:ke,a:Ie,parent:Qe,slots:{__:Le}}=Q;Y3(ke),Y3(Ie),me&&GE(me),Qe&&yt(Le)&&Le.forEach(tt=>{Qe.renderCache[tt]=void 0}),we.stop(),ve&&(ve.flags|=8,ue(He,Q,Z,te)),De&&ho(De,Z),ho(()=>{Q.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},Me=(Q,Z,te,me=!1,we=!1,ve=0)=>{for(let He=ve;He<Q.length;He++)ue(Q[He],Z,te,me,we)},ce=Q=>{if(Q.shapeFlag&6)return ce(Q.component.subTree);if(Q.shapeFlag&128)return Q.suspense.next();const Z=h(Q.anchor||Q.el),te=Z&&Z[wee];return te?h(te):Z};let oe=!1;const ge=(Q,Z,te)=>{Q==null?Z._vnode&&ue(Z._vnode,null,null,!0):g(Z._vnode||null,Q,Z,null,null,null,te),Z._vnode=Q,oe||(oe=!0,H3(),WF(),oe=!1)},Ne={p:g,um:ue,m:se,r:Ee,mt:X,mc:b,pc:Y,pbc:x,n:ce,o:t};return{render:ge,hydrate:void 0,createApp:jee(ge)}}function CS({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Hh({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Yee(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function y9(t,e,n=!1){const r=t.children,s=e.children;if(yt(r)&&yt(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=gd(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&y9(o,a)),a.type===dI&&(a.el=o.el),a.type===Zc&&!a.el&&(a.el=o.el)}}function Zee(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function w9(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:w9(e)}function Y3(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Jee=Symbol.for("v-scx"),Xee=()=>Eo(Jee);function Tf(t,e,n){return v9(t,e,n)}function v9(t,e,n=ir){const{immediate:r,deep:s,flush:i,once:o}=n,a=ls({},n),c=e&&r||!e&&i!=="post";let l;if(Uw){if(i==="sync"){const f=Xee();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!c){const f=()=>{};return f.stop=Bc,f.resume=Bc,f.pause=Bc,f}}const u=ei;a.call=(f,m,g)=>Wa(f,u,m,g);let d=!1;i==="post"?a.scheduler=f=>{ho(f,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(f,m)=>{m?f():mO(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=fee(t,e,a);return Uw&&(l?l.push(h):c&&h()),h}function ete(t,e,n){const r=this.proxy,s=Mr(t)?t.includes(".")?b9(r,t):()=>r[t]:t.bind(r,r);let i;Wt(e)?i=e:(i=e.handler,n=e);const o=Rb(this),a=v9(s,i.bind(r),n);return o(),a}function b9(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const tte=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ha(e)}Modifiers`]||t[`${gp(e)}Modifiers`];function nte(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ir;let s=n;const i=e.startsWith("update:"),o=i&&tte(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>Mr(u)?u.trim():u)),o.number&&(s=n.map(L1)));let a,c=r[a=WE(e)]||r[a=WE(ha(e))];!c&&i&&(c=r[a=WE(gp(e))]),c&&Wa(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Wa(l,t,6,s)}}function _9(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Wt(t)){const c=l=>{const u=_9(l,e,!0);u&&(a=!0,ls(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(cr(t)&&r.set(t,null),null):(yt(i)?i.forEach(c=>o[c]=null):ls(o,i),cr(t)&&r.set(t,o),o)}function uI(t,e){return!t||!tI(e)?!1:(e=e.slice(2).replace(/Once$/,""),Vn(t,e[0].toLowerCase()+e.slice(1))||Vn(t,gp(e))||Vn(t,e))}function Z3(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:d,data:h,setupState:f,ctx:m,inheritAttrs:g}=t,y=V1(t);let v,_;try{if(n.shapeFlag&4){const k=s||r,S=k;v=Tc(l.call(S,k,u,d,f,h,m)),_=a}else{const k=e;v=Tc(k.length>1?k(d,{attrs:a,slots:o,emit:c}):k(d,null)),_=e.props?a:rte(a)}}catch(k){nw.length=0,cI(k,t,1),v=cn(Zc)}let A=v;if(_&&g!==!1){const k=Object.keys(_),{shapeFlag:S}=A;k.length&&S&7&&(i&&k.some(sO)&&(_=ste(_,i)),A=$f(A,_,!1,!0))}return n.dirs&&(A=$f(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&Bw(A,n.transition),v=A,V1(y),v}const rte=t=>{let e;for(const n in t)(n==="class"||n==="style"||tI(n))&&((e||(e={}))[n]=t[n]);return e},ste=(t,e)=>{const n={};for(const r in t)(!sO(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function ite(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?J3(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==r[h]&&!uI(l,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?J3(r,o,l):!0:!!o;return!1}function J3(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!uI(n,i))return!0}return!1}function ote({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const E9=t=>t.__isSuspense;function ate(t,e){e&&e.pendingBranch?yt(t)?e.effects.push(...t):e.effects.push(t):gee(t)}const ar=Symbol.for("v-fgt"),dI=Symbol.for("v-txt"),Zc=Symbol.for("v-cmt"),QE=Symbol.for("v-stc"),nw=[];let vo=null;function dt(t=!1){nw.push(vo=t?null:[])}function cte(){nw.pop(),vo=nw[nw.length-1]||null}let Lw=1;function X3(t,e=!1){Lw+=t,t<0&&vo&&e&&(vo.hasOnce=!0)}function A9(t){return t.dynamicChildren=Lw>0?vo||Gm:null,cte(),Lw>0&&vo&&vo.push(t),t}function Ct(t,e,n,r,s,i){return A9(H(t,e,n,r,s,i,!0))}function ia(t,e,n,r,s){return A9(cn(t,e,n,r,s,!0))}function $w(t){return t?t.__v_isVNode===!0:!1}function Tm(t,e){return t.type===e.type&&t.key===e.key}const C9=({key:t})=>t??null,YE=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Mr(t)||os(t)||Wt(t)?{i:Ms,r:t,k:e,f:!!n}:t:null);function H(t,e=null,n=null,r=0,s=null,i=t===ar?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&C9(e),ref:e&&YE(e),scopeId:KF,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ms};return a?(vO(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Mr(n)?8:16),Lw>0&&!o&&vo&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&vo.push(c),c}const cn=lte;function lte(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===n9)&&(t=Zc),$w(t)){const a=$f(t,e,!0);return n&&vO(a,n),Lw>0&&!i&&vo&&(a.shapeFlag&6?vo[vo.indexOf(t)]=a:vo.push(a)),a.patchFlag=-2,a}if(vte(t)&&(t=t.__vccOpts),e){e=ute(e);let{class:a,style:c}=e;a&&!Mr(a)&&(e.class=jn(a)),cr(c)&&(pO(c)&&!yt(c)&&(c=ls({},c)),e.style=Ib(c))}const o=Mr(t)?1:E9(t)?128:vee(t)?64:cr(t)?4:Wt(t)?2:0;return H(t,e,n,r,s,o,i,!0)}function ute(t){return t?pO(t)||d9(t)?ls({},t):t:null}function $f(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?hI(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&C9(l),ref:e&&e.ref?n&&i?yt(i)?i.concat(YE(e)):[i,YE(e)]:YE(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ar?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$f(t.ssContent),ssFallback:t.ssFallback&&$f(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Bw(u,c.clone(u)),u}function Cr(t=" ",e=0){return cn(dI,null,t,e)}function Ca(t,e){const n=cn(QE,null,t);return n.staticCount=e,n}function pi(t="",e=!1){return e?(dt(),ia(Zc,null,t)):cn(Zc,null,t)}function Tc(t){return t==null||typeof t=="boolean"?cn(Zc):yt(t)?cn(ar,null,t.slice()):$w(t)?gd(t):cn(dI,null,String(t))}function gd(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:$f(t)}function vO(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(yt(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),vO(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!d9(e)?e._ctx=Ms:s===3&&Ms&&(Ms.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Wt(e)?(e={default:e,_ctx:Ms},n=32):(e=String(e),r&64?(n=16,e=[Cr(e)]):n=8);t.children=e,t.shapeFlag|=n}function hI(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=jn([e.class,r.class]));else if(s==="style")e.style=Ib([e.style,r.style]);else if(tI(s)){const i=e[s],o=r[s];o&&i!==o&&!(yt(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function uc(t,e,n,r=null){Wa(t,e,7,[n,r])}const dte=a9();let hte=0;function fte(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||dte,i={uid:hte++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new BX(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:f9(r,s),emitsOptions:_9(r,s),emit:null,emitted:null,propsDefaults:ir,inheritAttrs:r.inheritAttrs,ctx:ir,data:ir,props:ir,attrs:ir,slots:ir,refs:ir,setupState:ir,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=nte.bind(null,i),t.ce&&t.ce(i),i}let ei=null;const fI=()=>ei||Ms;let q1,q2;{const t=sI(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};q1=e("__VUE_INSTANCE_SETTERS__",n=>ei=n),q2=e("__VUE_SSR_SETTERS__",n=>Uw=n)}const Rb=t=>{const e=ei;return q1(t),t.scope.on(),()=>{t.scope.off(),q1(e)}},e5=()=>{ei&&ei.scope.off(),q1(null)};function I9(t){return t.vnode.shapeFlag&4}let Uw=!1;function pte(t,e=!1,n=!1){e&&q2(e);const{props:r,children:s}=t.vnode,i=I9(t);Vee(t,r,i,e),Wee(t,s,n||e);const o=i?mte(t,e):void 0;return e&&q2(!1),o}function mte(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Dee);const{setup:r}=n;if(r){hu();const s=t.setupContext=r.length>1?yte(t):null,i=Rb(t),o=xb(r,t,0,[t.props,s]),a=vF(o);if(fu(),i(),(a||t.sp)&&!Zm(t)&&YF(t),a){if(o.then(e5,e5),e)return o.then(c=>{t5(t,c)}).catch(c=>{cI(c,t,0)});t.asyncDep=o}else t5(t,o)}else T9(t)}function t5(t,e,n){Wt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:cr(e)&&(t.setupState=VF(e)),T9(t)}function T9(t,e,n){const r=t.type;t.render||(t.render=r.render||Bc);{const s=Rb(t);hu();try{Mee(t)}finally{fu(),s()}}}const gte={get(t,e){return Zs(t,"get",""),t[e]}};function yte(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,gte),slots:t.slots,emit:t.emit,expose:e}}function pI(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(VF(see(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in tw)return tw[n](t)},has(e,n){return n in e||n in tw}})):t.proxy}function wte(t,e=!0){return Wt(t)?t.displayName||t.name:t.name||e&&t.__name}function vte(t){return Wt(t)&&"__vccOpts"in t}const _r=(t,e)=>dee(t,e,Uw);function S9(t,e,n){const r=arguments.length;return r===2?cr(e)&&!yt(e)?$w(e)?cn(t,null,[e]):cn(t,e):cn(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&$w(n)&&(n=[n]),cn(t,e,n))}const bte="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let z2;const n5=typeof window<"u"&&window.trustedTypes;if(n5)try{z2=n5.createPolicy("vue",{createHTML:t=>t})}catch{}const x9=z2?t=>z2.createHTML(t):t=>t,_te="http://www.w3.org/2000/svg",Ete="http://www.w3.org/1998/Math/MathML",jl=typeof document<"u"?document:null,r5=jl&&jl.createElement("template"),Ate={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?jl.createElementNS(_te,t):e==="mathml"?jl.createElementNS(Ete,t):n?jl.createElement(t,{is:n}):jl.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>jl.createTextNode(t),createComment:t=>jl.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>jl.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{r5.innerHTML=x9(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=r5.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Qu="transition",a0="animation",ug=Symbol("_vtc"),P9={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Cte=ls({},_ee,P9),qh=(t,e=[])=>{yt(t)?t.forEach(n=>n(...e)):t&&t(...e)},s5=t=>t?yt(t)?t.some(e=>e.length>1):t.length>1:!1;function Ite(t){const e={};for(const M in t)M in P9||(e[M]=t[M]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=Tte(s),g=m&&m[0],y=m&&m[1],{onBeforeEnter:v,onEnter:_,onEnterCancelled:A,onLeave:k,onLeaveCancelled:S,onBeforeAppear:R=v,onAppear:T=_,onAppearCancelled:b=A}=e,E=(M,$,X,P)=>{M._enterCancelled=P,pd(M,$?u:a),pd(M,$?l:o),X&&X()},x=(M,$)=>{M._isLeaving=!1,pd(M,d),pd(M,f),pd(M,h),$&&$()},D=M=>($,X)=>{const P=M?T:_,L=()=>E($,M,X);qh(P,[$,L]),i5(()=>{pd($,M?c:i),wc($,M?u:a),s5(P)||o5($,r,g,L)})};return ls(e,{onBeforeEnter(M){qh(v,[M]),wc(M,i),wc(M,o)},onBeforeAppear(M){qh(R,[M]),wc(M,c),wc(M,l)},onEnter:D(!1),onAppear:D(!0),onLeave(M,$){M._isLeaving=!0;const X=()=>x(M,$);wc(M,d),M._enterCancelled?(wc(M,h),W2()):(W2(),wc(M,h)),i5(()=>{M._isLeaving&&(pd(M,d),wc(M,f),s5(k)||o5(M,r,y,X))}),qh(k,[M,X])},onEnterCancelled(M){E(M,!1,void 0,!0),qh(A,[M])},onAppearCancelled(M){E(M,!0,void 0,!0),qh(b,[M])},onLeaveCancelled(M){x(M),qh(S,[M])}})}function Tte(t){if(t==null)return null;if(cr(t))return[IS(t.enter),IS(t.leave)];{const e=IS(t);return[e,e]}}function IS(t){return xX(t)}function wc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ug]||(t[ug]=new Set)).add(e)}function pd(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[ug];n&&(n.delete(e),n.size||(t[ug]=void 0))}function i5(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Ste=0;function o5(t,e,n,r){const s=t._endId=++Ste,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=R9(t,e);if(!o)return r();const l=o+"end";let u=0;const d=()=>{t.removeEventListener(l,h),i()},h=f=>{f.target===t&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),t.addEventListener(l,h)}function R9(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),s=r(`${Qu}Delay`),i=r(`${Qu}Duration`),o=a5(s,i),a=r(`${a0}Delay`),c=r(`${a0}Duration`),l=a5(a,c);let u=null,d=0,h=0;e===Qu?o>0&&(u=Qu,d=o,h=i.length):e===a0?l>0&&(u=a0,d=l,h=c.length):(d=Math.max(o,l),u=d>0?o>l?Qu:a0:null,h=u?u===Qu?i.length:c.length:0);const f=u===Qu&&/\b(transform|all)(,|$)/.test(r(`${Qu}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function a5(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>c5(n)+c5(t[r])))}function c5(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function W2(){return document.body.offsetHeight}function xte(t,e,n){const r=t[ug];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const z1=Symbol("_vod"),N9=Symbol("_vsh"),WGe={beforeMount(t,{value:e},{transition:n}){t[z1]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):c0(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),c0(t,!0),r.enter(t)):r.leave(t,()=>{c0(t,!1)}):c0(t,e))},beforeUnmount(t,{value:e}){c0(t,e)}};function c0(t,e){t.style.display=e?t[z1]:"none",t[N9]=!e}const Pte=Symbol(""),Rte=/(^|;)\s*display\s*:/;function Nte(t,e,n){const r=t.style,s=Mr(n);let i=!1;if(n&&!s){if(e)if(Mr(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ZE(r,a,"")}else for(const o in e)n[o]==null&&ZE(r,o,"");for(const o in n)o==="display"&&(i=!0),ZE(r,o,n[o])}else if(s){if(e!==n){const o=r[Pte];o&&(n+=";"+o),r.cssText=n,i=Rte.test(n)}}else e&&t.removeAttribute("style");z1 in t&&(t[z1]=i?r.display:"",t[N9]&&(r.display="none"))}const l5=/\s*!important$/;function ZE(t,e,n){if(yt(n))n.forEach(r=>ZE(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Ote(t,e);l5.test(n)?t.setProperty(gp(r),n.replace(l5,""),"important"):t[r]=n}}const u5=["Webkit","Moz","ms"],TS={};function Ote(t,e){const n=TS[e];if(n)return n;let r=ha(e);if(r!=="filter"&&r in t)return TS[e]=r;r=rI(r);for(let s=0;s<u5.length;s++){const i=u5[s]+r;if(i in t)return TS[e]=i}return e}const d5="http://www.w3.org/1999/xlink";function h5(t,e,n,r,s,i=DX(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(d5,e.slice(6,e.length)):t.setAttributeNS(d5,e,n):n==null||i&&!EF(n)?t.removeAttribute(e):t.setAttribute(e,i?"":za(n)?String(n):n)}function f5(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?x9(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=EF(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Ad(t,e,n,r){t.addEventListener(e,n,r)}function kte(t,e,n,r){t.removeEventListener(e,n,r)}const p5=Symbol("_vei");function Dte(t,e,n,r,s=null){const i=t[p5]||(t[p5]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=Mte(e);if(r){const l=i[e]=$te(r,s);Ad(t,a,l,c)}else o&&(kte(t,a,o,c),i[e]=void 0)}}const m5=/(?:Once|Passive|Capture)$/;function Mte(t){let e;if(m5.test(t)){e={};let r;for(;r=t.match(m5);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gp(t.slice(2)),e]}let SS=0;const Bte=Promise.resolve(),Lte=()=>SS||(Bte.then(()=>SS=0),SS=Date.now());function $te(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Wa(Ute(r,n.value),e,5,[r])};return n.value=t,n.attached=Lte(),n}function Ute(t,e){if(yt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const g5=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Fte=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?xte(t,r,o):e==="style"?Nte(t,n,r):tI(e)?sO(e)||Dte(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):jte(t,e,r,o))?(f5(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&h5(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Mr(r))?f5(t,ha(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),h5(t,e,r,o))};function jte(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&g5(e)&&Wt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return g5(e)&&Mr(n)?!1:e in t}const O9=new WeakMap,k9=new WeakMap,W1=Symbol("_moveCb"),y5=Symbol("_enterCb"),Vte=t=>(delete t.props.mode,t),Hte=Vte({name:"TransitionGroup",props:ls({},Cte,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=fI(),r=bee();let s,i;return XF(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!Kte(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(zte),s.forEach(Wte);const a=s.filter(Gte);W2(),a.forEach(c=>{const l=c.el,u=l.style;wc(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=l[W1]=h=>{h&&h.target!==l||(!h||/transform$/.test(h.propertyName))&&(l.removeEventListener("transitionend",d),l[W1]=null,pd(l,o))};l.addEventListener("transitionend",d)}),s=[]}),()=>{const o=Sn(t),a=Ite(o);let c=o.tag||ar;if(s=[],i)for(let l=0;l<i.length;l++){const u=i[l];u.el&&u.el instanceof Element&&(s.push(u),Bw(u,U2(u,a,r,n)),O9.set(u,u.el.getBoundingClientRect()))}i=e.default?QF(e.default()):[];for(let l=0;l<i.length;l++){const u=i[l];u.key!=null&&Bw(u,U2(u,a,r,n))}return cn(c,null,i)}}}),qte=Hte;function zte(t){const e=t.el;e[W1]&&e[W1](),e[y5]&&e[y5]()}function Wte(t){k9.set(t,t.el.getBoundingClientRect())}function Gte(t){const e=O9.get(t),n=k9.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function Kte(t,e,n){const r=t.cloneNode(),s=t[ug];s&&s.forEach(a=>{a.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=R9(r);return i.removeChild(r),o}const dg=t=>{const e=t.props["onUpdate:modelValue"]||!1;return yt(e)?n=>GE(e,n):e};function Qte(t){t.target.composing=!0}function w5(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const nu=Symbol("_assign"),Yte={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[nu]=dg(s);const i=r||s.props&&s.props.type==="number";Ad(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=L1(a)),t[nu](a)}),n&&Ad(t,"change",()=>{t.value=t.value.trim()}),e||(Ad(t,"compositionstart",Qte),Ad(t,"compositionend",w5),Ad(t,"change",w5))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[nu]=dg(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?L1(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},GGe={deep:!0,created(t,e,n){t[nu]=dg(n),Ad(t,"change",()=>{const r=t._modelValue,s=Fw(t),i=t.checked,o=t[nu];if(yt(r)){const a=aO(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const l=[...r];l.splice(a,1),o(l)}}else if(ry(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(D9(t,i))})},mounted:v5,beforeUpdate(t,e,n){t[nu]=dg(n),v5(t,e,n)}};function v5(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(yt(e))s=aO(e,r.props.value)>-1;else if(ry(e))s=e.has(r.props.value);else{if(e===n)return;s=Tb(e,D9(t,!0))}t.checked!==s&&(t.checked=s)}const KGe={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=ry(e);Ad(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?L1(Fw(o)):Fw(o));t[nu](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Pb(()=>{t._assigning=!1})}),t[nu]=dg(r)},mounted(t,{value:e}){b5(t,e)},beforeUpdate(t,e,n){t[nu]=dg(n)},updated(t,{value:e}){t._assigning||b5(t,e)}};function b5(t,e){const n=t.multiple,r=yt(e);if(!(n&&!r&&!ry(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Fw(o);if(n)if(r){const c=typeof a;c==="string"||c==="number"?o.selected=e.some(l=>String(l)===String(a)):o.selected=aO(e,a)>-1}else o.selected=e.has(a);else if(Tb(Fw(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Fw(t){return"_value"in t?t._value:t.value}function D9(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Zte=["ctrl","shift","alt","meta"],Jte={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Zte.some(n=>t[`${n}Key`]&&!e.includes(n))},G2=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=Jte[e[o]];if(a&&a(s,e))return}return t(s,...i)})},Xte=ls({patchProp:Fte},Ate);let _5;function ene(){return _5||(_5=Kee(Xte))}const M9=(...t)=>{const e=ene().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=nne(r);if(!s)return;const i=e._component;!Wt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,tne(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function tne(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function nne(t){return Mr(t)?document.querySelector(t):t}function rne(){const t=console.error,e=console.warn,n=console.log,r=["chrome-extension://","gomekmidlodglbbmalcneegieacbdmki","gpcWindowSetting.js","gpc.js","web_accessible_resources","manifest key","net::ERR_FAILED","message port closed","runtime.lastError","Unchecked runtime.lastError","injectScript","injectContentScript","execute @ gpc.js","Promise.then step @ gpc.js"];function s(i){return typeof i!="string"?!1:r.some(o=>i.toLowerCase().includes(o.toLowerCase()))}console.error=function(...i){const o=i.join(" ");s(o)||t.apply(console,i)},console.warn=function(...i){const o=i.join(" ");s(o)||e.apply(console,i)},console.log=function(...i){const o=i.join(" ");s(o)||n.apply(console,i)}}typeof window<"u"&&rne();const Nb=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},sne=Symbol(),E5=Object.getPrototypeOf,K2=new WeakMap,ine=t=>t&&(K2.has(t)?K2.get(t):E5(t)===Object.prototype||E5(t)===Array.prototype),one=t=>ine(t)&&t[sne]||null,A5=(t,e=!0)=>{K2.set(t,e)},G1={},bO=t=>typeof t=="object"&&t!==null,ane=t=>bO(t)&&!Ob.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),B9=(t,e)=>{const n=Q2.get(t);if(n?.[0]===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return A5(r,!0),Q2.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Ob.has(i))A5(i,!1);else if(Jd.has(i)){const[c,l]=Jd.get(i);a.value=B9(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},cne=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(C5(l,o)||jw.has(o)&&C5(l,jw.get(o))))return!0;n(i),bO(o)&&(o=one(o)||o);const u=!Jd.has(o)&&une(o)?Er(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Jd=new WeakMap,Ob=new WeakSet,Q2=new WeakMap,B0=[1,1],jw=new WeakMap;let C5=Object.is,lne=(t,e)=>new Proxy(t,e),une=ane,dne=B9,hne=cne;function Er(t={}){if(!bO(t))throw new Error("object required");const e=jw.get(t);if(e)return e;let n=B0[0];const r=new Set,s=(y,v=++B0[0])=>{n!==v&&(n=v,r.forEach(_=>_(y,v)))};let i=B0[1];const o=(y=++B0[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([v])=>{const _=v[1](y);_>n&&(n=_)})),n),a=y=>(v,_)=>{const A=[...v];A[1]=[y,...A[1]],s(A,_)},c=new Map,l=(y,v)=>{const _=!Ob.has(v)&&Jd.get(v);if(_){if((G1?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const A=_[2](a(y));c.set(y,[_,A])}else c.set(y,[_])}},u=y=>{var v;const _=c.get(y);_&&(c.delete(y),(v=_[1])==null||v.call(_))},d=y=>(r.add(y),r.size===1&&c.forEach(([_,A],k)=>{if((G1?"production":void 0)!=="production"&&A)throw new Error("remove already exists");const S=_[2](a(k));c.set(k,[_,S])}),()=>{r.delete(y),r.size===0&&c.forEach(([_,A],k)=>{A&&(A(),c.set(k,[_]))})});let h=!0;const f=hne(()=>h,l,u,s),m=lne(t,f);jw.set(t,m);const g=[t,o,d];return Jd.set(m,g),Reflect.ownKeys(t).forEach(y=>{const v=Object.getOwnPropertyDescriptor(t,y);"value"in v&&v.writable&&(m[y]=t[y])}),h=!1,m}function _i(t,e,n){const r=Jd.get(t);(G1?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Vw(t){const e=Jd.get(t);(G1?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return dne(n,r())}function hg(t){return Ob.add(t),t}function fne(){return{proxyStateMap:Jd,refSet:Ob,snapCache:Q2,versionHolder:B0,proxyCache:jw}}function Ti(t,e,n,r){let s=t[e];return _i(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:pne,snapCache:mne}=fne(),nE=t=>pne.has(t);function gne(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=mne.get(a),u=l?.[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return nE(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!nE(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!nE(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!nE(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Er(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var I5={};const le={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof I5<"u"?I5.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},Hw={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(n=>n.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const n=t.find(s=>s.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return le.CHAIN_NAME_MAP?.[r]||void 0}},L9=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var yne=20,wne=1,Uf=1e6,T5=1e6,vne=-7,bne=21,_ne=!1,kb="[big.js] ",vp=kb+"Invalid ",mI=vp+"decimal places",Ene=vp+"rounding mode",$9=kb+"Division by zero",Zn={},Lc=void 0,Ane=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function U9(){function t(e){var n=this;if(!(n instanceof t))return e===Lc?U9():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(vp+"value");e=e===0&&1/e<0?"-0":String(e)}Cne(n,e)}n.constructor=t}return t.prototype=Zn,t.DP=yne,t.RM=wne,t.NE=vne,t.PE=bne,t.strict=_ne,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Cne(t,e){var n,r,s;if(!Ane.test(e))throw Error(vp+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function bp(t,e,n,r){var s=t.c;if(n===Lc&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Ene);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Lc))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Lc||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function _p(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Zn.abs=function(){var t=new this.constructor(this);return t.s=1,t};Zn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Zn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Uf)throw Error(mI);if(!s[0])throw Error($9);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,m=r.length,g=r.slice(0,a),y=g.length,v=t,_=v.c=[],A=0,k=o+(v.e=e.e-t.e)+1;for(v.s=i,i=k<0?0:k,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}_[A++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<m||g[0]!==Lc)&&i--);return!_[0]&&A!=1&&(_.shift(),v.e--,k--),A>k&&bp(v,k,n.RM,g[0]!==Lc),v};Zn.eq=function(t){return this.cmp(t)===0};Zn.gt=function(t){return this.cmp(t)>0};Zn.gte=function(t){return this.cmp(t)>-1};Zn.lt=function(t){return this.cmp(t)<0};Zn.lte=function(t){return this.cmp(t)<1};Zn.minus=Zn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Zn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error($9);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Zn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Zn.plus=Zn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Zn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-T5||t>T5)throw Error(vp+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Zn.prec=function(t,e){if(t!==~~t||t<1||t>Uf)throw Error(vp+"precision");return bp(new this.constructor(this),t,e)};Zn.round=function(t,e){if(t===Lc)t=0;else if(t!==~~t||t<-Uf||t>Uf)throw Error(mI);return bp(new this.constructor(this),t+this.e+1,e)};Zn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(kb+"No square root");i=Math.sqrt(+_p(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return bp(t,(s.DP-=4)+t.e+1,s.RM)};Zn.times=Zn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Zn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Lc){if(t!==~~t||t<0||t>Uf)throw Error(mI);for(n=bp(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return _p(n,!0,!!r)};Zn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Lc){if(t!==~~t||t<0||t>Uf)throw Error(mI);for(n=bp(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return _p(n,!1,!!r)};Zn[Symbol.for("nodejs.util.inspect.custom")]=Zn.toJSON=Zn.toString=function(){var t=this,e=t.constructor;return _p(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Zn.toNumber=function(){var t=+_p(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(kb+"Imprecise conversion");return t};Zn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Lc){if(t!==~~t||t<1||t>Uf)throw Error(vp+"precision");for(n=bp(new r(n),t,e);n.c.length<t;)n.c.push(0)}return _p(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Zn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(kb+"valueOf disallowed");return _p(t,t.e<=e.NE||t.e>=e.PE,!0)};var Yu=U9();const Ine={bigNumber(t){return t?new Yu(t):new Yu(0)},multiply(t,e){if(t===void 0||e===void 0)return new Yu(0);const n=new Yu(t),r=new Yu(e);return n.times(r)},toFixed(t,e=2){return t===void 0||t===""?new Yu(0).toFixed(e):new Yu(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new Yu(e).toNumber()}},Tne=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Sne=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],xne=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Pne={getERC20Abi:t=>le.USDT_CONTRACT_ADDRESSES.includes(t)?xne:Tne,getSwapAbi:()=>Sne},qi={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},bt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function xS(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const gt={setItem(t,e){Um()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Um())return localStorage.getItem(t)||void 0},removeItem(t){Um()&&localStorage.removeItem(t)},clear(){Um()&&localStorage.clear()}};function Um(){return typeof window<"u"&&typeof localStorage<"u"}function Zl(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var S5={};const PS=(typeof process<"u"&&typeof S5<"u"?S5.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",F9=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Rne="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",En={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:PS,SECURE_SITE_DASHBOARD:`${PS}/dashboard`,SECURE_SITE_FAVICON:`${PS}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[le.CHAIN.EVM,le.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[le.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[le.CHAIN.EVM,le.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[le.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[le.CHAIN.EVM,le.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Te={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Te.getActiveNamespace(),e=Te.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{gt.setItem(bt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=gt.getItem(bt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{gt.removeItem(bt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{gt.setItem(bt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{gt.setItem(bt.ACTIVE_CAIP_NETWORK_ID,t),Te.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return gt.getItem(bt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{gt.removeItem(bt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=xS(t);gt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Te.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),gt.setItem(bt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=gt.getItem(bt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=xS(t);gt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return gt.getItem(bt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=xS(t);return gt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{gt.setItem(bt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return gt.getItem(bt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{gt.removeItem(bt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return gt.getItem(bt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return gt.getItem(bt.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{gt.setItem(bt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return gt.getItem(bt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=gt.getItem(bt.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));gt.setItem(bt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Te.getConnectedNamespaces();e.includes(t)||(e.push(t),Te.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Te.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Te.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return gt.getItem(bt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{gt.setItem(bt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{gt.removeItem(bt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=gt.getItem(bt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Te.getBalanceCache();gt.setItem(bt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Te.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Te.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Te.getBalanceCache();e[t.caipAddress]=t,gt.setItem(bt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=gt.getItem(bt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Te.getBalanceCache();gt.setItem(bt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Te.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Te.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Te.getNativeBalanceCache();e[t.caipAddress]=t,gt.setItem(bt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=gt.getItem(bt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Te.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Te.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Te.getEnsCache();e[t.address]=t,gt.setItem(bt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Te.getEnsCache();gt.setItem(bt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=gt.getItem(bt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Te.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Te.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Te.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},gt.setItem(bt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Te.getIdentityCache();gt.setItem(bt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{gt.removeItem(bt.PORTFOLIO_CACHE),gt.removeItem(bt.NATIVE_BALANCE_CACHE),gt.removeItem(bt.ENS_CACHE),gt.removeItem(bt.IDENTITY_CACHE),gt.removeItem(bt.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{gt.setItem(bt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=gt.getItem(bt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Te.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===le.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};gt.setItem(bt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=gt.getItem(bt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Te.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),gt.setItem(bt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=gt.getItem(bt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Te.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),gt.setItem(bt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Te.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),gt.setItem(bt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Te.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=gt.getItem(bt.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const r=Te.getTransactionsCache()[t]?.[e];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.transactionsHistory))return r.transactions;Te.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:r}){try{const s=Te.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:n,transactions:r}},gt.setItem(bt.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:r})}},removeTransactionsCache({address:t,chainId:e}){try{const n=Te.getTransactionsCache(),r=n?.[t]||{},{[e]:s,...i}=r;gt.setItem(bt.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=gt.getItem(bt.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=Te.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;Te.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=Te.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},gt.setItem(bt.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=Te.getTokenPriceCache();gt.setItem(bt.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},ot={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return ot.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=En.TEN_SEC_MS:!0},isAllowedRetry(t,e=En.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(ot.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const n=new URL(t),r=new URL(e);return n.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+En.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ot.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ot.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Te.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ot.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},getApiUrl(){return le.W3M_API_URL},getBlockchainApiUrl(){return le.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return le.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?En.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in le.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function l0(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Db{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await l0(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await l0(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await l0(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await l0(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await l0(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const Nne={getFeatureValue(t,e){const n=e?.[t];return n===void 0?En.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ot.isTelegram()){if(ot.isIos())return t.filter(e=>e!=="google");if(ot.isMac())return t.filter(e=>e!=="x");if(ot.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},pt=Er({features:En.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:En.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),be={state:pt,subscribeKey(t,e){return Ti(pt,t,e)},setOptions(t){Object.assign(pt,t)},setRemoteFeatures(t){if(!t)return;const e={...pt.remoteFeatures,...t};pt.remoteFeatures=e,pt.remoteFeatures?.socials&&(pt.remoteFeatures.socials=Nne.filterSocialsByPlatform(pt.remoteFeatures.socials)),pt.features?.pay&&(pt.remoteFeatures.email=!1,pt.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;pt.features||(pt.features=En.DEFAULT_FEATURES);const e={...pt.features,...t};pt.features=e,pt.features?.pay&&pt.remoteFeatures&&(pt.remoteFeatures.email=!1,pt.remoteFeatures.socials=!1)},setProjectId(t){pt.projectId=t},setCustomRpcUrls(t){pt.customRpcUrls=t},setAllWallets(t){pt.allWallets=t},setIncludeWalletIds(t){pt.includeWalletIds=t},setExcludeWalletIds(t){pt.excludeWalletIds=t},setFeaturedWalletIds(t){pt.featuredWalletIds=t},setTokens(t){pt.tokens=t},setTermsConditionsUrl(t){pt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){pt.privacyPolicyUrl=t},setCustomWallets(t){pt.customWallets=t},setIsSiweEnabled(t){pt.isSiweEnabled=t},setIsUniversalProvider(t){pt.isUniversalProvider=t},setSdkVersion(t){pt.sdkVersion=t},setMetadata(t){pt.metadata=t},setDisableAppend(t){pt.disableAppend=t},setEIP6963Enabled(t){pt.enableEIP6963=t},setDebug(t){pt.debug=t},setEnableWalletConnect(t){pt.enableWalletConnect=t},setEnableWalletGuide(t){pt.enableWalletGuide=t},setEnableAuthLogger(t){pt.enableAuthLogger=t},setEnableWallets(t){pt.enableWallets=t},setPreferUniversalLinks(t){pt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(En.SIWX_DEFAULTS))t[e]??=n;pt.siwx=t},setConnectMethodsOrder(t){pt.features={...pt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){pt.features={...pt.features,walletFeaturesOrder:t}},setSocialsOrder(t){pt.remoteFeatures={...pt.remoteFeatures,socials:t}},setCollapseWallets(t){pt.features={...pt.features,collapseWallets:t}},setEnableEmbedded(t){pt.enableEmbedded=t},setAllowUnsupportedChain(t){pt.allowUnsupportedChain=t},setManualWCControl(t){pt.manualWCControl=t},setEnableNetworkSwitch(t){pt.enableNetworkSwitch=t},setEnableReconnect(t){pt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(pt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){pt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return pt.universalProviderConfigOverride},getSnapshot(){return Vw(pt)}},One=Object.freeze({enabled:!0,events:[]}),kne=new Db({baseUrl:ot.getAnalyticsUrl(),clientId:null}),Dne=5,Mne=60*1e3,Zu=Er({...One}),Bne={state:Zu,subscribeKey(t,e){return Ti(Zu,t,e)},async sendError(t,e){if(!Zu.enabled)return;const n=Date.now();if(Zu.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Mne}).length>=Dne)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Zu.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=be.state;await kne.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Zu.enabled=!0},disable(){Zu.enabled=!1},clearEvents(){Zu.events=[]}};class fg extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,fg.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,fg):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function x5(t,e){let n="";try{t instanceof Error?n=t.message:typeof t=="string"?n=t:typeof t=="object"&&t!==null?n=JSON.stringify(t):n=String(t)}catch(s){n="Unknown error",console.error("Error parsing error message",s)}const r=t instanceof fg?t:new fg(n,e,t);throw Bne.sendError(r,r.category),r}function Ro(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return x5(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return x5(a,e)}},n[r]=i}else n[r]=s}),n}var pg={};const Lne="https://secure.walletconnect.org/sdk",$ne=(typeof process<"u"&&typeof pg<"u"?pg.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Lne,Une=(typeof process<"u"&&typeof pg<"u"?pg.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Fne=(typeof process<"u"&&typeof pg<"u"?pg.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",lt={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},as={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},fi={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},jne={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===fi.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${fi.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(t===fi.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${fi.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===le.CHAIN.SOLANA&&t===fi.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${fi.COINBASE.url}/dapp?cb_url=${r}`),e===le.CHAIN.BITCOIN&&t===fi.BINANCE.id&&!("binancew3w"in window)){const s=K.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${s?.id??1}`),a=new URL(fi.BINANCE.deeplink);a.searchParams.set("appId",fi.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(fi.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},lo=Er({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Vne={state:lo,subscribeNetworkImages(t){return _i(lo.networkImages,()=>t(lo.networkImages))},subscribeKey(t,e){return Ti(lo,t,e)},subscribe(t){return _i(lo,()=>t(lo))},setWalletImage(t,e){lo.walletImages[t]=e},setNetworkImage(t,e){lo.networkImages[t]=e},setChainImage(t,e){lo.chainImages[t]=e},setConnectorImage(t,e){lo.connectorImages={...lo.connectorImages,[t]:e}},setTokenImage(t,e){lo.tokenImages[t]=e},setCurrencyImage(t,e){lo.currencyImages[t]=e}},ka=Ro(Vne),Hne={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},RS=Er({networkImagePromises:{}}),j9={async fetchWalletImage(t){if(t)return await vt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(RS.networkImagePromises[t]||(RS.networkImagePromises[t]=vt._fetchNetworkImage(t)),await RS.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return ka.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return ka.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return ka.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return ka.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return ka.state.connectorImages[t.imageId]},getChainImage(t){return ka.state.networkImages[Hne[t]]}},Ju=Er({message:"",variant:"info",open:!1}),qne={state:Ju,subscribeKey(t,e){return Ti(Ju,t,e)},open(t,e){const{debug:n}=be.state,{code:r,displayMessage:s,debugMessage:i}=t;s&&n&&(Ju.message=s,Ju.variant=e,Ju.open=!0),i&&console.error(typeof i=="function"?i():i,r?{code:r}:void 0)},close(){Ju.open=!1,Ju.message="",Ju.variant="info"}},wr=Ro(qne),zne=ot.getAnalyticsUrl(),Wne=new Db({baseUrl:zne,clientId:null}),Gne=["MODAL_CREATED"],_l=Er({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),xn={state:_l,subscribe(t){return _i(_l,()=>t(_l))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=be.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{let e=ut.state.address;if("address"in t.data&&t.data.address&&(e=t.data.address),Gne.includes(t.data.event)||typeof window>"u")return;const n=K.getActiveCaipNetwork()?.caipNetworkId;await Wne.post({path:"/e",params:xn.getSdkProperties(),body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:n}}}}),_l.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===le.HTTP_STATUS_CODES.FORBIDDEN&&!_l.reportedErrors.FORBIDDEN&&(wr.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${Um()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),_l.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){_l.timestamp=Date.now(),_l.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(be.state.features?.analytics||e.includes(t.event))&&xn._sendAnalyticsEvent(_l)}},Kne=ot.getApiUrl(),Pi=new Db({baseUrl:Kne,clientId:null}),Qne=40,P5=4,Yne=20,Kt=Er({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),vt={state:Kt,subscribeKey(t,e){return Ti(Kt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=be.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return be.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Pi.baseUrl}/getWalletImage/${t}`,n=await Pi.getBlob({path:e,params:vt._getSdkProperties()});ka.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Pi.baseUrl}/public/getAssetImage/${t}`,n=await Pi.getBlob({path:e,params:vt._getSdkProperties()});ka.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Pi.baseUrl}/public/getAssetImage/${t}`,n=await Pi.getBlob({path:e,params:vt._getSdkProperties()});ka.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Pi.baseUrl}/public/getCurrencyImage/${t}`,n=await Pi.getBlob({path:e,params:vt._getSdkProperties()});ka.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Pi.baseUrl}/public/getTokenImage/${t}`,n=await Pi.getBlob({path:e,params:vt._getSdkProperties()});ka.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ot.isMobile()?t?.filter(n=>n.mobile_link||n.id===fi.COINBASE.id||n.id===fi.BINANCE.id?!0:K.state.activeChain==="solana"&&(n.id===fi.SOLFLARE.id||n.id===fi.PHANTOM.id)):t},async fetchProjectConfig(){return(await Pi.get({path:"/appkit/v1/config",params:vt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Pi.get({path:"/projects/v1/origins",params:vt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===le.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=le.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=K.getAllRequestedCaipNetworks()?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!j9.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>vt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ue.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>vt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>vt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>vt._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];vt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(fi).map(i=>i.id));const r=await Pi.get({path:"/getWallets",params:{...vt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:vt._filterWalletsByPlatform(r?.data)||[],count:r?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=be.state;if(t?.length){const e={...vt._getSdkProperties(),page:1,entries:t?.length??P5,include:t},{data:n}=await vt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>vt._fetchWalletImage(i))),Kt.featured=r,Kt.allFeatured=r}},async fetchRecommendedWallets(){try{Kt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=be.state,r=[...e??[],...n??[]].filter(Boolean),s=K.getRequestedCaipNetworkIds().join(","),i={page:1,entries:P5,include:t,exclude:r,chains:s},{data:o,count:a}=await vt.fetchWallets(i),c=Te.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>vt._fetchWalletImage(d))),Kt.recommended=o,Kt.allRecommended=o,Kt.count=a??0}catch{}finally{Kt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=be.state,s=K.getRequestedCaipNetworkIds().join(","),i=[...Kt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Qne,include:e,exclude:i,chains:s},{data:a,count:c}=await vt.fetchWallets(o),l=a.slice(0,Yne).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>vt._fetchWalletImage(u))),Kt.wallets=ot.uniqueBy([...Kt.wallets,...vt._filterOutExtensions(a)],"id").filter(u=>u.chains?.some(d=>s.includes(d))),Kt.count=c>Kt.count?c:Kt.count,Kt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await vt.fetchWallets(e);n&&n.forEach(r=>{Kt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=be.state,s=K.getRequestedCaipNetworkIds().join(",");Kt.search=[];const i={page:1,entries:100,search:t?.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await vt.fetchWallets(i);xn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>vt._fetchWalletImage(c)),ot.wait(300)]),Kt.search=vt._filterOutExtensions(o)},initPromise(t,e){const n=Kt.promises[t];return n||(Kt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&vt.initPromise("connectorImages",vt.fetchConnectorImages),e&&vt.initPromise("featuredWallets",vt.fetchFeaturedWallets),n&&vt.initPromise("recommendedWallets",vt.fetchRecommendedWallets),r&&vt.initPromise("networkImages",vt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){be.state.features?.analytics&&vt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Pi.get({path:"/getAnalyticsConfig",params:vt._getSdkProperties()});be.setFeatures({analytics:t})}catch{be.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Kt.featured=Kt.allFeatured,Kt.recommended=Kt.allRecommended;return}const e=K.getRequestedCaipNetworkIds().join(",");Kt.featured=Kt.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),Kt.recommended=Kt.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),Kt.filteredWallets=Kt.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))},clearFilterByNamespaces(){Kt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Kt.featured=Kt.allFeatured,Kt.recommended=Kt.allRecommended;return}const e=K.getRequestedCaipNetworkIds().join(",");Kt.featured=Kt.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),Kt.recommended=Kt.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),Kt.filteredWallets=Kt.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))}},er=Er({view:"Connect",history:["Connect"],transactionStack:[]}),Zne={state:er,subscribeKey(t,e){return Ti(er,t,e)},pushTransactionStack(t){er.transactionStack.push(t)},popTransactionStack(t){const e=er.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n?.();break;case"error":r?.(),Pt.goBack();break;case"cancel":s?.(),Pt.goBack();break}},push(t,e){t!==er.view&&(er.view=t,er.history.push(t),er.data=e)},reset(t,e){er.view=t,er.history=[t],er.data=e},replace(t,e){er.history.at(-1)===t||(er.view=t,er.history[er.history.length-1]=t,er.data=e)},goBack(){const t=K.state.activeCaipAddress,e=Pt.state.view==="ConnectingFarcaster",n=!t&&e;if(er.history.length>1){er.history.pop();const[r]=er.history.slice(-1);r&&(t&&r==="Connect"?er.view="Account":er.view=r)}else vn.close();er.data?.wallet&&(er.data.wallet=void 0),setTimeout(()=>{if(n){ut.setFarcasterUrl(void 0,K.state.activeChain);const r=Ue.getAuthConnector();r?.provider?.reload();const s=Vw(be.state);r?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(er.history.length>1){er.history=er.history.slice(0,t+1);const[e]=er.history.slice(-1);e&&(er.view=e)}},goBackOrCloseModal(){Pt.state.history.length>1?Pt.goBack():vn.close()}},Pt=Ro(Zne),El=Er({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Y2={state:El,subscribe(t){return _i(El,()=>t(El))},setThemeMode(t){El.themeMode=t;try{const e=Ue.getAuthConnector();if(e){const n=Y2.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Zl(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){El.themeVariables={...El.themeVariables,...t};try{const e=Ue.getAuthConnector();if(e){const n=Y2.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Zl(El.themeVariables,El.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Vw(El)}},Li=Ro(Y2),V9=Object.fromEntries(L9.map(t=>[t,void 0])),Jne=Object.fromEntries(L9.map(t=>[t,!0])),Pn=Er({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:V9,filterByNamespaceMap:Jne}),Xne={state:Pn,subscribe(t){return _i(Pn,()=>{t(Pn)})},subscribeKey(t,e){return Ti(Pn,t,e)},initialize(t){t.forEach(e=>{const n=Te.getConnectedConnectorId(e);n&&Ue.setConnectorId(n,e)})},setActiveConnector(t){t&&(Pn.activeConnector=hg(t))},setConnectors(t){t.filter(s=>!Pn.allConnectors.some(i=>i.id===s.id&&Ue.getConnectorName(i.name)===Ue.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Pn.allConnectors.push(hg(s))});const n=Ue.getEnabledNamespaces(),r=Ue.getEnabledConnectors(n);Pn.connectors=Ue.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Pn.filterByNamespaceMap).forEach(e=>{Pn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Pn.filterByNamespaceMap[e]=!0}),Ue.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Pn.filterByNamespaceMap[t]=e,Ue.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ue.getEnabledNamespaces(),e=Ue.getEnabledConnectors(t),n=Ue.areAllNamespacesEnabled();Pn.connectors=Ue.mergeMultiChainConnectors(e),n?vt.clearFilterByNamespaces():vt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Pn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Pn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Pn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ue.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=s?.id===le.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ue.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){if(t.id===le.CONNECTOR_ID.AUTH){const e=t,n=Vw(be.state),r=Li.getSnapshot().themeMode,s=Li.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e?.provider?.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Zl(s,r)}),Ue.setConnectors([t])}else Ue.setConnectors([t])},getAuthConnector(t){const e=t||K.state.activeChain,n=Pn.connectors.find(r=>r.id===le.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(s=>s.chain===e):n},getAnnouncedConnectorRdns(){return Pn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return Pn.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const r=n||K.state.activeChain;return Pn.allConnectors.filter(i=>i.chain===r).find(i=>i.explorerId===t||i.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,n=Vw(be.state),r=Li.getSnapshot().themeMode,s=Li.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Zl(s,r)})},getConnectorsByNamespace(t){const e=Pn.allConnectors.filter(n=>n.chain===t);return Ue.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return K.checkIfSmartAccountEnabled()&&To(t)===as.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Ue.getConnector({id:t.id,rdns:t.rdns});jne.handleMobileDeeplinkRedirect(e?.explorerId||t.id,K.state.activeChain),e?Pt.push("ConnectingExternal",{connector:e,wallet:t}):Pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ue.getConnectorsByNamespace(t):Ue.mergeMultiChainConnectors(Pn.allConnectors)},setFilterByNamespace(t){Pn.filterByNamespace=t,Pn.connectors=Ue.getConnectors(t),vt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Pn.activeConnectorIds={...Pn.activeConnectorIds,[e]:t},Te.setConnectedConnectorId(e,t))},removeConnectorId(t){Pn.activeConnectorIds={...Pn.activeConnectorIds,[t]:void 0},Te.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Pn.activeConnectorIds[t]},isConnected(t){return t?!!Pn.activeConnectorIds[t]:Object.values(Pn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Pn.activeConnectorIds={...V9}}},Ue=Ro(Xne),ere=1e3,u0={checkNamespaceConnectorId(t,e){return Ue.getConnectorId(t)===e},isSocialProvider(t){return En.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Ue.setActiveConnector(e),s?.(ot.isMobile()&&t),r){const l=vn.subscribeKey("open",u=>{u||(Pt.state.view!==r&&Pt.replace(r),l(),a(new Error("Modal closed")))})}const c=K.subscribeKey("activeCaipAddress",l=>{l&&(i?.(),n&&vn.close(),c(),o(qi.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=K.subscribeKey("activeCaipAddress",s=>{s&&(vn.close(),r(),e(qi.parseCaipAddress(s)))});qe.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:r,onConnect:s}){let i=ut.state.socialWindow,o=ut.state.socialProvider,a=!1,c=null;const l=e||K.state.activeChain,u=K.subscribeKey("activeCaipAddress",d=>{d&&(n&&vn.close(),u())});return new Promise((d,h)=>{async function f(g){if(g.data?.resultUri)if(g.origin===le.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const y=Ue.getAuthConnector(l);if(y&&!a){i&&(i.close(),ut.setSocialWindow(void 0,l),i=ut.state.socialWindow),a=!0;const v=g.data.resultUri;if(o&&xn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){Te.setConnectedSocialProvider(o),await qe.connectExternal({id:y.id,type:y.type,socialUri:v},y.chain);const _=K.state.activeCaipAddress;if(!_){h(new Error("Failed to connect"));return}d(qi.parseCaipAddress(_)),xn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o}})}}}catch{o&&xn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),h(new Error("Failed to connect"))}}else o&&xn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function m(){if(t&&(ut.setSocialProvider(t,l),o=ut.state.socialProvider,xn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){r?.();const g=vn.subscribeKey("open",v=>{!v&&t==="farcaster"&&(h(new Error("Popup closed")),s?.(),g())}),y=Ue.getAuthConnector();if(y&&!ut.state.farcasterUrl)try{const{url:v}=await y.provider.getFarcasterUri();ut.setFarcasterUrl(v,l)}catch{h(new Error("Failed to connect to farcaster"))}}else{const g=Ue.getAuthConnector();c=ot.returnOpenHref(`${le.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g&&o){const{uri:y}=await g.provider.getSocialRedirectUri({provider:o});if(c&&y){ut.setSocialWindow(c,l),i=ut.state.socialWindow,c.location.href=y;const v=setInterval(()=>{i?.closed&&!a&&(h(new Error("Popup closed")),clearInterval(v))},1e3);window.addEventListener("message",f,!1)}else c?.close(),h(new Error("Failed to initiate social connection"))}}catch{h(new Error("Failed to initiate social connection")),c?.close()}}}m()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n?.(),e){const a=vn.subscribeKey("open",c=>{c||(Pt.state.view!==e&&Pt.replace(e),a(),i(new Error("Modal closed")))})}const o=K.subscribeKey("activeCaipAddress",a=>{a&&(r?.(),t&&vn.close(),o(),s(qi.parseCaipAddress(a)))})})},async updateEmail(){const t=Te.getConnectedConnectorId(K.state.activeChain),e=Ue.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==le.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await vn.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(vn.close(),clearInterval(i),o(),r({email:a}))},ere),o=vn.subscribeKey("open",a=>{a||(Pt.state.view!=="Connect"&&Pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return K.checkIfSmartAccountEnabled()&&To(t)===as.ACCOUNT_TYPES.EOA}};function H9(){const t=K.state.activeCaipNetwork?.chainNamespace||"eip155",e=K.state.activeCaipNetwork?.id||1,n=En.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function To(t){return K.getAccountData(t)?.preferredAccountType}function Jl(t){return t?K.state.chains.get(t)?.networkState?.caipNetwork:K.state.activeCaipNetwork}const K1={getConnectionStatus(t,e){const n=Ue.state.activeConnectorIds[e],r=qe.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!be.state.remoteFeatures?.multiWallet,n=Ue.state.activeConnectorIds[t],r=qe.getConnections(t),i=(qe.state.recentConnections.get(t)??[]).filter(a=>Ue.getConnectorById(a.connectorId)),o=K1.excludeExistingConnections([...r.map(a=>a.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(a=>a.connectorId.toLowerCase()===n?.toLowerCase()),recentConnections:[]}}},ef=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Jr=Er({...ef}),tre={state:Jr,subscribeKey(t,e){return Ti(Jr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ot.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Jr.message=ef.message,Jr.variant=ef.variant,Jr.svg=ef.svg,Jr.open=ef.open,Jr.autoClose=ef.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ef.autoClose}){Jr.open?(Jr.open=!1,setTimeout(()=>{Jr.message=t,Jr.variant=n,Jr.svg=e,Jr.open=!0,Jr.autoClose=r},150)):(Jr.message=t,Jr.variant=n,Jr.svg=e,Jr.open=!0,Jr.autoClose=r)}},kc=tre,Ar=Er({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),nre={state:Ar,subscribe(t){return _i(Ar,()=>t(Ar))},setLastNetworkInView(t){Ar.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Ar.loading=!0;try{const e=await At.fetchTransactions({account:t,cursor:Ar.next,chainId:K.state.activeCaipNetwork?.caipNetworkId}),n=JE.filterSpamTransactions(e.data),r=JE.filterByConnectedChain(n),s=[...Ar.transactions,...r];Ar.loading=!1,Ar.transactions=s,Ar.transactionsByYear=JE.groupTransactionsByYearAndMonth(Ar.transactionsByYear,r),Ar.empty=s.length===0,Ar.next=e.next?e.next:void 0}catch{const n=K.state.activeChain;xn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:be.state.projectId,cursor:Ar.next,isSmartAccount:To(n)===as.ACCOUNT_TYPES.SMART_ACCOUNT}}),kc.showError("Failed to fetch transactions"),Ar.loading=!1,Ar.empty=!0,Ar.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>r.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=K.state.activeCaipNetwork?.caipNetworkId;return t.filter(r=>r.metadata.chain===e)},clearCursor(){Ar.next=void 0},resetTransactions(){Ar.transactions=[],Ar.transactionsByYear={},Ar.lastNetworkInView=void 0,Ar.loading=!1,Ar.empty=!1,Ar.next=void 0}},JE=Ro(nre,"API_ERROR"),Rn=Er({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let zh;const rre={state:Rn,subscribe(t){return _i(Rn,()=>t(Rn))},subscribeKey(t,e){return Ti(Rn,t,e)},_getClient(){return Rn._client},setClient(t){Rn._client=hg(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);qe.syncStorageConnections(e)},syncStorageConnections(t){const e=Te.getConnections(),n=t??Array.from(K.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Rn.recentConnections);i.set(r,s),Rn.recentConnections=i}},getConnections(t){return t?Rn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=qe.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect({cache:t="auto"}={}){const e=ot.isTelegram()||ot.isSafari()&&ot.isIos();if(t==="always"||t==="auto"&&e){if(zh){await zh,zh=void 0;return}if(!ot.isPairingExpired(Rn?.wcPairingExpiry)){const n=Rn.wcUri;Rn.wcUri=n;return}zh=qe._getClient()?.connectWalletConnect?.().catch(()=>{}),qe.state.status="connecting",await zh,zh=void 0,Rn.wcPairingExpiry=void 0,qe.state.status="connected"}else await qe._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,n=!0){const r=await qe._getClient()?.connectExternal?.(t);return n&&K.setActiveNamespace(e),r},async reconnectExternal(t){await qe._getClient()?.reconnectExternal?.(t);const e=t.chain||K.state.activeChain;e&&Ue.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;vn.setLoading(!0,K.state.activeChain);const n=Ue.getAuthConnector();n&&(ut.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Te.setPreferredAccountTypes(Object.entries(K.state.chains).reduce((r,[s,i])=>{const o=s,a=To(o);return a!==void 0&&(r[o]=a),r},{})),await qe.reconnectExternal(n),vn.setLoading(!1,K.state.activeChain),xn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:K.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return qe._getClient()?.signMessage(t)},parseUnits(t,e){return qe._getClient()?.parseUnits(t,e)},formatUnits(t,e){return qe._getClient()?.formatUnits(t,e)},async sendTransaction(t){return qe._getClient()?.sendTransaction(t)},async getCapabilities(t){return qe._getClient()?.getCapabilities(t)},async grantPermissions(t){return qe._getClient()?.grantPermissions(t)},async walletGetAssets(t){return qe._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return qe._getClient()?.estimateGas(t)},async writeContract(t){return qe._getClient()?.writeContract(t)},async getEnsAddress(t){return qe._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return qe._getClient()?.getEnsAvatar(t)},checkInstalled(t){return qe._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){Rn.wcUri=void 0,Rn.wcPairingExpiry=void 0,Rn.wcLinking=void 0,Rn.recentWallet=void 0,Rn.status="disconnected",JE.resetTransactions(),Te.deleteWalletConnectDeepLink()},resetUri(){Rn.wcUri=void 0,Rn.wcPairingExpiry=void 0,zh=void 0},finalizeWcConnection(t){const{wcLinking:e,recentWallet:n}=qe.state;e&&Te.setWalletConnectDeepLink(e),n&&Te.setAppKitRecent(n),xn.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:Pt.state.data?.wallet?.name||"Unknown"}})},setWcBasic(t){Rn.wcBasic=t},setUri(t){Rn.wcUri=t,Rn.wcPairingExpiry=ot.getPairingExpiry()},setWcLinking(t){Rn.wcLinking=t},setWcError(t){Rn.wcError=t,Rn.buffering=!1},setRecentWallet(t){Rn.recentWallet=t},setBuffering(t){Rn.buffering=t},setStatus(t){Rn.status=t},setIsSwitchingConnection(t){Rn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){try{await qe._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:n})}catch(r){throw new fg("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const n=new Map(Rn.connections);n.set(e,t),Rn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){const n=ut.state.user?.accounts?.find(s=>s.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&u0.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await qe.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Ue.getConnectorById(t.connectorId),s=t.connectorId===le.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await qe.handleAuthAccountSwitch({address:n,namespace:e});else return(await qe.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e))?.address;return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){const s=Ue.getConnectorById(t.connectorId),i=t.auth?.name?.toLowerCase(),o=t.connectorId===le.CONNECTOR_ID.AUTH,a=t.connectorId===le.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&u0.isSocialProvider(i)){const{address:l}=await u0.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){vn.open({view:"ConnectingFarcaster"})},onConnect(){Pt.replace("ProfileWallets")}});c=l}else{const{address:l}=await u0.connectEmail({closeModalOnConnect:r,onOpen(){vn.open({view:"EmailLogin"})},onConnect(){Pt.replace("ProfileWallets")}});c=l}else if(a){const{address:l}=await u0.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(u){const d=u?"AllWallets":"ConnectingWalletConnect";vn.state.open?Pt.push(d):vn.open({view:d})},onConnect(){Pt.replace("ProfileWallets")}});c=l}else{const l=await qe.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);l&&(c=l.address)}return o&&n&&await qe.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=ut.getCaipAddress(n);if(o){const{address:c}=qi.parseCaipAddress(o);i=c}const a=K1.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await qe.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s?.({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await qe.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&s?.({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},qe=Ro(rre),em=Er({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),La={state:em,subscribe(t){return _i(em,()=>t(em))},subscribeOpen(t){return Ti(em,"open",t)},set(t){Object.assign(em,{...em,...t})}},sre={async getTokenList(t){return(await At.fetchSwapTokens({chainId:t}))?.tokens?.map(r=>({...r,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=K.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await qe?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await At.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await At.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&n&&r){const i=qe.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await HO.getMyTokensWithBalance(t);return ut.setTokenBalance(e,K.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:H9(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},Qn=Er({tokenBalances:[],loading:!1}),ire={state:Qn,subscribe(t){return _i(Qn,()=>t(Qn))},subscribeKey(t,e){return Ti(Qn,t,e)},setToken(t){t&&(Qn.token=hg(t))},setTokenAmount(t){Qn.sendTokenAmount=t},setReceiverAddress(t){Qn.receiverAddress=t},setReceiverProfileImageUrl(t){Qn.receiverProfileImageUrl=t},setReceiverProfileName(t){Qn.receiverProfileName=t},setNetworkBalanceInUsd(t){Qn.networkBalanceInUSD=t},setLoading(t){Qn.loading=t},async sendToken(){try{switch(Ln.setLoading(!0),K.state.activeCaipNetwork?.chainNamespace){case"eip155":await Ln.sendEvmToken();return;case"solana":await Ln.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Ln.setLoading(!1)}},async sendEvmToken(){const t=K.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=To(t);if(!Ln.state.sendTokenAmount||!Ln.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ln.state.token)throw new Error("A token is required");Ln.state.token?.address?(xn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===as.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ln.state.token.address,amount:Ln.state.sendTokenAmount,network:K.state.activeCaipNetwork?.caipNetworkId||""}}),await Ln.sendERC20Token({receiverAddress:Ln.state.receiverAddress,tokenAddress:Ln.state.token.address,sendTokenAmount:Ln.state.sendTokenAmount,decimals:Ln.state.token.quantity.decimals})):(xn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===as.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ln.state.token.symbol||"",amount:Ln.state.sendTokenAmount,network:K.state.activeCaipNetwork?.caipNetworkId||""}}),await Ln.sendNativeToken({receiverAddress:Ln.state.receiverAddress,sendTokenAmount:Ln.state.sendTokenAmount,decimals:Ln.state.token.quantity.decimals}))},async fetchTokenBalance(t){Qn.loading=!0;const e=K.state.activeChain,n=K.state.activeCaipNetwork?.caipNetworkId,r=K.state.activeCaipNetwork?.chainNamespace,s=ut.getCaipAddress(e)??K.state.activeCaipAddress,i=s?ot.getPlainAddress(s):void 0;if(Qn.lastRetry&&!ot.isAllowedRetry(Qn.lastRetry,30*En.ONE_SEC_MS))return Qn.loading=!1,[];try{if(i&&n&&r){const o=await HO.getMyTokensWithBalance();return Qn.tokenBalances=o,Qn.lastRetry=void 0,o}}catch(o){Qn.lastRetry=Date.now(),t?.(o),kc.showError("Token Balance Unavailable")}finally{Qn.loading=!1}return[]},fetchNetworkBalance(){if(Qn.tokenBalances.length===0)return;const t=sre.mapBalancesToSwapTokens(Qn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===H9());e&&(Qn.networkBalanceInUSD=e?Ine.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){Pt.pushTransactionStack({});const e=t.receiverAddress,n=ut.state.address,r=qe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await qe.sendTransaction({chainNamespace:le.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),xn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:To("eip155")===as.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ln.state.token?.symbol||"",amount:t.sendTokenAmount,network:K.state.activeCaipNetwork?.caipNetworkId||""}}),qe._getClient()?.updateBalance("eip155"),Ln.resetSend()},async sendERC20Token(t){Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}});const e=qe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(ut.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ot.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await qe.writeContract({fromAddress:ut.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Pne.getERC20Abi(n),chainNamespace:le.CHAIN.EVM}),Ln.resetSend()}},async sendSolanaToken(){if(!Ln.state.sendTokenAmount||!Ln.state.receiverAddress)throw new Error("An amount and receiver address are required");Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}}),await qe.sendTransaction({chainNamespace:"solana",to:Ln.state.receiverAddress,value:Ln.state.sendTokenAmount}),qe._getClient()?.updateBalance("solana"),Ln.resetSend()},resetSend(){Qn.token=void 0,Qn.sendTokenAmount=void 0,Qn.receiverAddress=void 0,Qn.receiverProfileImageUrl=void 0,Qn.receiverProfileName=void 0,Qn.loading=!1,Qn.tokenBalances=[]}},Ln=Ro(ire),NS={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},rE={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},We=Er({chains:gne(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),ore={state:We,subscribe(t){return _i(We,()=>{t(We)})},subscribeKey(t,e){return Ti(We,t,e)},subscribeChainProp(t,e,n){let r;return _i(We.chains,()=>{const s=n||We.activeChain;if(s){const i=We.chains.get(s)?.[t];r!==i&&(r=i,e(i))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Te.getActiveNetworkProps(),i=e?.find(u=>u.id.toString()===r?.toString()),a=t.find(u=>u?.namespace===s)||t?.[0],c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=be.state.enableEmbedded?new Set([...c]):new Set([...e?.map(u=>u.chainNamespace)??[]]);(t?.length===0||!a)&&(We.noAdapters=!0),We.noAdapters||(We.activeChain=a?.namespace,We.activeCaipNetwork=i,K.setChainNetworkData(a?.namespace,{caipNetwork:i}),We.activeChain&&La.set({activeChain:a?.namespace})),l.forEach(u=>{const d=e?.filter(m=>m.chainNamespace===u),h=Te.getPreferredAccountTypes()||{},f={...be.state.defaultAccountTypes,...h};K.state.chains.set(u,{namespace:u,networkState:Er({...rE,caipNetwork:d?.[0]}),accountState:Er({...NS,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),K.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){if(We.activeChain===t){const e=Array.from(We.chains.entries()).find(([n])=>n!==t);if(e){const n=e[1]?.caipNetworks?.[0];n&&K.setActiveCaipNetwork(n)}}We.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");We.chains.set(t.namespace,{namespace:t.namespace,networkState:{...rE,caipNetwork:r[0]},accountState:NS,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),K.setRequestedCaipNetworks(r?.filter(s=>s.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=We.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];e.caipNetworks?.find(r=>r.id===t.id)||n.push(t),We.chains.set(t.chainNamespace,{...e,caipNetworks:n}),K.setRequestedCaipNetworks(n,t.chainNamespace),Ue.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const n=We.chains.get(t);if(n){const r=We.activeCaipNetwork?.id===e,s=[...n.caipNetworks?.filter(i=>i.id!==e)||[]];r&&n?.caipNetworks?.[0]&&K.setActiveCaipNetwork(n.caipNetworks[0]),We.chains.set(t,{...n,caipNetworks:s}),K.setRequestedCaipNetworks(s||[],t),s.length===0&&Ue.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=We.chains.get(t);n&&(n.networkState={...n.networkState||rE,...e},We.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=We.chains.get(t);if(r){const s={...r.accountState||NS,...e};We.chains.set(t,{...r,accountState:s}),(We.chains.size===1||We.activeChain===t)&&(e.caipAddress&&(We.activeCaipAddress=e.caipAddress),ut.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=We.chains.get(t);if(n){const r={...n.networkState||rE,...e};We.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){K.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){We.activeChain=t;const e=t?We.chains.get(t):void 0,n=e?.networkState?.caipNetwork;n?.id&&t&&(We.activeCaipAddress=e?.accountState?.caipAddress,We.activeCaipNetwork=n,K.setChainNetworkData(t,{caipNetwork:n}),Te.setActiveCaipNetworkId(n?.caipNetworkId),La.set({activeChain:t,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;We.activeChain!==t.chainNamespace&&K.setIsSwitchingNamespace(!0);const e=We.chains.get(t.chainNamespace);We.activeChain=t.chainNamespace,We.activeCaipNetwork=t,K.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?We.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:We.activeCaipAddress=void 0,K.setAccountProp("caipAddress",We.activeCaipAddress,t.chainNamespace),e&&ut.replaceState(e.accountState),Ln.resetSend(),La.set({activeChain:We.activeChain,selectedNetworkId:We.activeCaipNetwork?.caipNetworkId}),Te.setActiveCaipNetworkId(t.caipNetworkId),!K.checkIfSupportedNetwork(t.chainNamespace)&&be.state.enableNetworkSwitch&&!be.state.allowUnsupportedChain&&!qe.state.wcBasic&&K.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=We.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==K.state.activeChain,n=K.getNetworkData(t)?.caipNetwork,r=K.getCaipNetworkByNamespace(t,n?.id);e&&r&&await K.switchActiveNetwork(r)},async switchActiveNetwork(t){const e=K.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=!K.state.chains.get(e)?.caipNetworks?.some(i=>i.id===We.activeCaipNetwork?.id),s=K.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&vn.close()}catch{Pt.goBack()}xn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||We.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=We.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||We.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=We.chains.get(e);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){const n=We.chains.get(e)?.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=We.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=e?.networkState||{};return ot.sortRequestedNetworks(n,r).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return We.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=K.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){K.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=K.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ue.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return We.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=K.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){return t?We.chains.get(t)?.networkState?.caipNetwork:We.activeCaipNetwork},getActiveCaipAddress(){return We.activeCaipAddress},getApprovedCaipNetworkIds(t){return We.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const n=await K.getNetworkControllerClient()?.getApprovedCaipNetworksData();K.setAdapterNetworkState(t,{approvedCaipNetworkIds:n?.approvedCaipNetworkIds,supportsAllNetworks:n?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||We.activeCaipNetwork?.caipNetworkId,r=K.getRequestedCaipNetworks(t);return r.length?r?.some(s=>s.caipNetworkId===n):!0},checkIfSupportedChainId(t){return We.activeChain?K.getRequestedCaipNetworks(We.activeChain)?.some(n=>n.id===t):!0},setSmartAccountEnabledNetworks(t,e){K.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=Hw.caipNetworkIdToNumber(We.activeCaipNetwork?.caipNetworkId),e=We.activeChain;return!e||!t?!1:!!K.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},showUnsupportedChainUI(){vn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=We.activeCaipNetwork;return!!(t?.chainNamespace&&En.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){K.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=K.state.chains.get(e)?.accountState?.preferredAccountType,r=be.state.defaultAccountTypes[e];We.activeCaipAddress=void 0,K.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Ue.removeConnectorId(e)},setIsSwitchingNamespace(t){We.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(We.chains.forEach(n=>{le.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(r=>r===n.namespace)&&n.namespace&&t.push(n.namespace)}),t.length>0){const n=t[0];return e=n?We.chains.get(n)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||We.activeChain;if(e)return K.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||We.activeChain;if(e)return K.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const n=K.state.chains.get(t),r=n?.caipNetworks?.find(s=>s.id===e);return r||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=Ue.state.filterByNamespace;return(t?[We.chains.get(t)]:Array.from(We.chains.values())).flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?K.getRequestedCaipNetworks(t):K.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){We.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return We.lastConnectedSIWECaipNetwork}},K=Ro(ore),are={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},q9=ot.getBlockchainApiUrl(),Ri=Er({clientId:null,api:new Db({baseUrl:q9,clientId:null}),supportedChains:{http:[],ws:[]}}),At={state:Ri,async get(t){const{st:e,sv:n}=At.getSdkProperties(),r=be.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ri.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=be.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ri.supportedChains.http.length||await At.getSupportedNetworks()}catch{return!1}return Ri.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await At.get({path:"v1/supported-chains"});return Ri.supportedChains=t,t}catch{return Ri.supportedChains}},async fetchIdentity({address:t}){const e=Te.getIdentityFromCacheForAddress(t);if(e)return e;const n=await At.get({path:`/v1/identity/${t}`,params:{sender:K.state.activeCaipAddress?ot.getPlainAddress(K.state.activeCaipAddress):void 0}});return Te.updateIdentityCache({address:t,identity:n,timestamp:Date.now()}),n},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){if(!await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const o=Te.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await At.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r});return Te.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?At.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?At.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){if(!await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const n=Te.getTokenPriceCacheForAddresses(t);if(n)return n;const r=await Ri.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:be.state.projectId},headers:{"Content-Type":"application/json"}});return Te.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:r}),r},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?At.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:n}=At.getSdkProperties();if(!await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return At.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){if(!await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Ri.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:En.CONVERT_SLIPPAGE_TOLERANCE},projectId:be.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){const{st:r,sv:s}=At.getSdkProperties();if(!await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return At.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){const{st:r,sv:s}=At.getSdkProperties();if(!await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId))return kc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Te.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await At.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Te.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?At.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?At.get({path:`/v1/profile/reverse/${t}`,params:{sender:ut.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?At.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?Ri.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?(await Ri.api.post({path:"/v1/generators/onrampurl",params:{projectId:be.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await At.get({path:"/v1/onramp/options"})}catch{return are}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){try{return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?await Ri.api.post({path:"/v1/onramp/quote",params:{projectId:be.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?At.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){return await At.isNetworkSupported(K.state.activeCaipNetwork?.caipNetworkId)?Ri.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:be.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ri.clientId=t,Ri.api=new Db({baseUrl:q9,clientId:t})}},cre="1.0.8";let No=class Z2 extends Error{constructor(e,n={}){const r=n.cause instanceof Z2?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof Z2&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${cre}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Pu(t,e){return t.exec(e)?.groups}const z9=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,W9=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,G9=/^\(.+?\).*?$/,R5=/^tuple(?<array>(\[(\d*)\])*)$/;function J2(t){let e=t.type;if(R5.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=J2(i),s<n-1&&(e+=", ")}const r=Pu(R5,t.type);return e+=`)${r?.array??""}`,J2({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function d0(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=J2(s),r!==n-1&&(e+=", ")}return e}function lre(t){return t.type==="function"?`function ${t.name}(${d0(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${d0(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${d0(t.inputs)})`:t.type==="error"?`error ${t.name}(${d0(t.inputs)})`:t.type==="constructor"?`constructor(${d0(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const K9=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function ure(t){return K9.test(t)}function dre(t){return Pu(K9,t)}const Q9=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function hre(t){return Q9.test(t)}function fre(t){return Pu(Q9,t)}const Y9=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function pre(t){return Y9.test(t)}function mre(t){return Pu(Y9,t)}const Z9=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function J9(t){return Z9.test(t)}function gre(t){return Pu(Z9,t)}const X9=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function yre(t){return X9.test(t)}function wre(t){return Pu(X9,t)}const e7=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function vre(t){return e7.test(t)}function bre(t){return Pu(e7,t)}const _re=/^receive\(\) external payable$/;function Ere(t){return _re.test(t)}const Are=new Set(["indexed"]),X2=new Set(["calldata","memory","storage"]);class QGe extends No{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Cre extends No{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Ire extends No{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Tre extends No{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Sre extends No{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class xre extends No{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Pre extends No{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Rre extends No{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}let iy=class extends No{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}};class Nre extends No{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Ore extends No{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class kre extends No{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Dre extends No{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Mre(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const OS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Bre(t,e={}){if(pre(t))return Lre(t,e);if(hre(t))return $re(t,e);if(ure(t))return Ure(t,e);if(yre(t))return Fre(t,e);if(vre(t))return jre(t);if(Ere(t))return{type:"receive",stateMutability:"payable"};throw new Nre({signature:t})}function Lre(t,e={}){const n=mre(t);if(!n)throw new iy({signature:t,type:"function"});const r=Ba(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Ff(r[a],{modifiers:X2,structs:e,type:"function"}));const o=[];if(n.returns){const a=Ba(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Ff(a[l],{modifiers:X2,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function $re(t,e={}){const n=fre(t);if(!n)throw new iy({signature:t,type:"event"});const r=Ba(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ff(r[o],{modifiers:Are,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Ure(t,e={}){const n=dre(t);if(!n)throw new iy({signature:t,type:"error"});const r=Ba(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ff(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Fre(t,e={}){const n=wre(t);if(!n)throw new iy({signature:t,type:"constructor"});const r=Ba(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ff(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function jre(t){const e=bre(t);if(!e)throw new iy({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Vre=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Hre=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,qre=/^u?int$/;function Ff(t,e){const n=Mre(t,e?.type,e?.structs);if(OS.has(n))return OS.get(n);const r=G9.test(t),s=Pu(r?Hre:Vre,t);if(!s)throw new Tre({param:t});if(s.name&&Wre(s.name))throw new Sre({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=e?.structs??{};let c,l={};if(r){c="tuple";const d=Ba(s.type),h=[],f=d.length;for(let m=0;m<f;m++)h.push(Ff(d[m],{structs:a}));l={components:h}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(qre.test(s.type))c=`${s.type}256`;else if(c=s.type,e?.type!=="struct"&&!t7(c))throw new Ire({type:c});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new xre({param:t,type:e?.type,modifier:s.modifier});if(X2.has(s.modifier)&&!Gre(c,!!s.array))throw new Pre({param:t,type:e?.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return OS.set(n,u),u}function Ba(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Ba(a,[...e,n.trim()]):Ba(a,e,`${n}${o}`,r);case"(":return Ba(a,e,`${n}${o}`,r+1);case")":return Ba(a,e,`${n}${o}`,r-1);default:return Ba(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new Dre({current:n,depth:r});return e.push(n.trim()),e}function t7(t){return t==="address"||t==="bool"||t==="function"||t==="string"||z9.test(t)||W9.test(t)}const zre=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Wre(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||z9.test(t)||W9.test(t)||zre.test(t)}function Gre(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function Kre(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!J9(a))continue;const c=gre(a);if(!c)throw new iy({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const m=l[h].trim();if(!m)continue;const g=Ff(m,{type:"struct"});u.push(g)}if(!u.length)throw new Ore({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=n7(c,e)}return r}const Qre=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function n7(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(G9.test(o.type))r.push(o);else{const c=Pu(Qre,o.type);if(!c?.type)throw new Rre({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new kre({type:u});r.push({...o,type:`tuple${l??""}`,components:n7(e[u]??[],e,new Set([...n,u]))})}else if(t7(u))r.push(o);else throw new Cre({type:u})}}return r}function r7(t){const e=Kre(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];J9(i)||n.push(Bre(i,e))}return n}function vr(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function Xd(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new ase(t.type);return`${t.name}(${gI(t.inputs,{includeName:e})})`}function gI(t,{includeName:e=!1}={}){return t?t.map(n=>Yre(n,{includeName:e})).join(e?", ":","):""}function Yre(t,{includeName:e}){return t.type.startsWith("tuple")?`(${gI(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function eh(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function ss(t){return eh(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const s7="2.34.0";let kS={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${s7}`},Oe=class eP extends Error{constructor(e,n={}){const r=n.cause instanceof eP?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof eP&&n.cause.docsPath||n.docsPath,i=kS.getDocsUrl?.({...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...kS.version?[`Version: ${kS.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=s7}walk(e){return i7(this,e)}};function i7(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?i7(t.cause,e):e?null:t}class Zre extends Oe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class N5 extends Oe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class o7 extends Oe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${gI(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class yI extends Oe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Jre extends Oe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Xre extends Oe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ss(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class ese extends Oe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class ZGe extends Oe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class JGe extends Oe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class a7 extends Oe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class tse extends Oe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class c7 extends Oe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class XGe extends Oe{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Q1 extends Oe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class nse extends Oe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class eKe extends Oe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class rse extends Oe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Xd(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Xd(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class tKe extends Oe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class tP extends Oe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${gI(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class l7 extends Oe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Xd(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class sse extends Oe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class ise extends Oe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class ose extends Oe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class ase extends Oe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class nKe extends Oe{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}let u7=class extends Oe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},d7=class extends Oe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class O5 extends Oe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function oy(t,{dir:e,size:n=32}={}){return typeof t=="string"?$d(t,{dir:e,size:n}):cse(t,{dir:e,size:n})}function $d(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new d7({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function cse(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new d7({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let h7=class extends Oe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class lse extends Oe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class use extends Oe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let dse=class extends Oe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Ud(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function ga(t,{size:e}){if(ss(t)>e)throw new dse({givenSize:ss(t),maxSize:e})}function mg(t,e={}){const{signed:n}=e;e.size&&ga(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function aKe(t,e={}){let n=t;if(e.size&&(ga(n,{size:e.size}),n=Ud(n)),Ud(n)==="0x00")return!1;if(Ud(n)==="0x01")return!0;throw new use(n)}function jf(t,e={}){return Number(mg(t,e))}function f7(t,e={}){let n=Jc(t);return e.size&&(ga(n,{size:e.size}),n=Ud(n,{dir:"right"})),new TextDecoder().decode(n)}const hse=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gg(t,e={}){return typeof t=="number"||typeof t=="bigint"?fn(t,e):typeof t=="string"?wI(t,e):typeof t=="boolean"?p7(t,e):eo(t,e)}function p7(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ga(n,{size:e.size}),oy(n,{size:e.size})):n}function eo(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=hse[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ga(r,{size:e.size}),oy(r,{dir:"right",size:e.size})):r}function fn(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new h7({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?oy(a,{size:r}):a}const fse=new TextEncoder;function wI(t,e={}){const n=fse.encode(t);return eo(n,e)}const pse=new TextEncoder;function vI(t,e={}){return typeof t=="number"||typeof t=="bigint"?gse(t,e):typeof t=="boolean"?mse(t,e):eh(t)?Jc(t,e):m7(t,e)}function mse(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ga(n,{size:e.size}),oy(n,{size:e.size})):n}const Al={zero:48,nine:57,A:65,F:70,a:97,f:102};function k5(t){if(t>=Al.zero&&t<=Al.nine)return t-Al.zero;if(t>=Al.A&&t<=Al.F)return t-(Al.A-10);if(t>=Al.a&&t<=Al.f)return t-(Al.a-10)}function Jc(t,e={}){let n=t;e.size&&(ga(n,{size:e.size}),n=oy(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=k5(r.charCodeAt(a++)),l=k5(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Oe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function gse(t,e){const n=fn(t,e);return Jc(n)}function m7(t,e={}){const n=pse.encode(t);return typeof e.size=="number"?(ga(n,{size:e.size}),oy(n,{dir:"right",size:e.size})):n}const sE=BigInt(2**32-1),D5=BigInt(32);function yse(t,e=!1){return e?{h:Number(t&sE),l:Number(t>>D5&sE)}:{h:Number(t>>D5&sE)|0,l:Number(t&sE)|0}}function wse(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=yse(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const vse=(t,e,n)=>t<<n|e>>>32-n,bse=(t,e,n)=>e<<n|t>>>32-n,_se=(t,e,n)=>e<<n-32|t>>>64-n,Ese=(t,e,n)=>t<<n-32|e>>>64-n,tm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ase(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Y1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vf(t,...e){if(!Ase(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function cKe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Y1(t.outputLen),Y1(t.blockLen)}function Z1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function g7(t,e){Vf(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Cse(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function qw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function DS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function dc(t,e){return t<<32-e|t>>>e}const Ise=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Tse(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Sse(t){for(let e=0;e<t.length;e++)t[e]=Tse(t[e]);return t}const M5=Ise?t=>t:Sse,y7=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xse=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lKe(t){if(Vf(t),y7)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=xse[t[n]];return e}const Cl={_0:48,_9:57,A:65,F:70,a:97,f:102};function B5(t){if(t>=Cl._0&&t<=Cl._9)return t-Cl._0;if(t>=Cl.A&&t<=Cl.F)return t-(Cl.A-10);if(t>=Cl.a&&t<=Cl.f)return t-(Cl.a-10)}function uKe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(y7)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=B5(t.charCodeAt(i)),a=B5(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Pse(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function _O(t){return typeof t=="string"&&(t=Pse(t)),Vf(t),t}function dKe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Vf(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let w7=class{};function v7(t){const e=r=>t().update(_O(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function fKe(t=32){if(tm&&typeof tm.getRandomValues=="function")return tm.getRandomValues(new Uint8Array(t));if(tm&&typeof tm.randomBytes=="function")return Uint8Array.from(tm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Rse=BigInt(0),h0=BigInt(1),Nse=BigInt(2),Ose=BigInt(7),kse=BigInt(256),Dse=BigInt(113),b7=[],_7=[],E7=[];for(let t=0,e=h0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],b7.push(2*(5*r+n)),_7.push((t+1)*(t+2)/2%64);let s=Rse;for(let i=0;i<7;i++)e=(e<<h0^(e>>Ose)*Dse)%kse,e&Nse&&(s^=h0<<(h0<<BigInt(i))-h0);E7.push(s)}const A7=wse(E7,!0),Mse=A7[0],Bse=A7[1],L5=(t,e,n)=>n>32?_se(t,e,n):vse(t,e,n),$5=(t,e,n)=>n>32?Ese(t,e,n):bse(t,e,n);function Lse(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=L5(l,u,1)^n[a],h=$5(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=_7[o],c=L5(s,i,a),l=$5(s,i,a),u=b7[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Mse[r],t[1]^=Bse[r]}qw(n)}let $se=class C7 extends w7{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Y1(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Cse(this.state)}clone(){return this._cloneInto()}keccak(){M5(this.state32),Lse(this.state32,this.rounds),M5(this.state32),this.posOut=0,this.pos=0}update(e){Z1(this),e=_O(e),Vf(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Z1(this,!1),Vf(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Y1(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(g7(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,qw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new C7(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Use=(t,e,n)=>v7(()=>new $se(e,t,n)),EO=Use(1,136,256/8);function Mb(t,e){const n=e||"hex",r=EO(eh(t,{strict:!1})?vI(t):t);return n==="bytes"?r:gg(r)}const Fse=t=>Mb(vI(t));function jse(t){return Fse(t)}function Vse(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Oe("Unable to normalize signature.");return s}const Hse=t=>{const e=typeof t=="string"?t:lre(t);return Vse(e)};function I7(t){return jse(Hse(t))}const AO=I7;let Hf=class extends Oe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},bI=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const MS=new bI(8192);function _I(t,e){if(MS.has(`${t}.${e}`))return MS.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Mb(m7(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return MS.set(`${t}.${e}`,i),i}function L0(t,e){if(!Xc(t,{strict:!1}))throw new Hf({address:t});return _I(t,e)}const qse=/^0x[a-fA-F0-9]{40}$/,BS=new bI(8192);function Xc(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(BS.has(r))return BS.get(r);const s=qse.test(t)?t.toLowerCase()===t?!0:n?_I(t)===t:!0:!1;return BS.set(r,s),s}function yg(t){return typeof t[0]=="string"?EI(t):zse(t)}function zse(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function EI(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function J1(t,e,n,{strict:r}={}){return eh(t,{strict:!1})?Wse(t,e,n,{strict:r}):x7(t,e,n,{strict:r})}function T7(t,e){if(typeof e=="number"&&e>0&&e>ss(t)-1)throw new u7({offset:e,position:"start",size:ss(t)})}function S7(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ss(t)!==n-e)throw new u7({offset:n,position:"end",size:ss(t)})}function x7(t,e,n,{strict:r}={}){T7(t,e);const s=t.slice(e,n);return r&&S7(s,e,n),s}function Wse(t,e,n,{strict:r}={}){T7(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&S7(s,e,n),s}const gKe=/^(.*)\[([0-9]*)\]$/,yKe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Gse=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function P7(t,e){if(t.length!==e.length)throw new ese({expectedLength:t.length,givenLength:e.length});const n=Kse({params:t,values:e}),r=IO(n);return r.length===0?"0x":r}function Kse({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(CO({param:t[r],value:e[r]}));return n}function CO({param:t,value:e}){const n=TO(t.type);if(n){const[r,s]=n;return Yse(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return tie(e,{param:t});if(t.type==="address")return Qse(e);if(t.type==="bool")return Jse(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Gse.exec(t.type)??[];return Xse(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Zse(e,{param:t});if(t.type==="string")return eie(e);throw new sse(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function IO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=ss(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(fn(e+s,{size:32})),r.push(a),s+=ss(a)):n.push(a)}return yg([...n,...r])}function Qse(t){if(!Xc(t))throw new Hf({address:t});return{dynamic:!1,encoded:$d(t.toLowerCase())}}function Yse(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new ose(t);if(!r&&t.length!==e)throw new Jre({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=CO({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=IO(i);if(r){const a=fn(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?yg([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:yg(i.map(({encoded:o})=>o))}}function Zse(t,{param:e}){const[,n]=e.type.split("bytes"),r=ss(t);if(!n){let s=t;return r%32!==0&&(s=$d(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:yg([$d(fn(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Xre({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:$d(t,{dir:"right"})}}function Jse(t){if(typeof t!="boolean")throw new Oe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:$d(p7(t))}}function Xse(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new h7({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:fn(t,{size:32,signed:e})}}function eie(t){const e=wI(t),n=Math.ceil(ss(e)/32),r=[];for(let s=0;s<n;s++)r.push($d(J1(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:yg([$d(fn(ss(e),{size:32})),...r])}}function tie(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=CO({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?IO(r):yg(r.map(({encoded:s})=>s))}}function TO(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const SO=t=>J1(I7(t),0,4);function xO(t){const{abi:e,args:n=[],name:r}=t,s=eh(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?SO(a)===r:a.type==="event"?AO(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?nP(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=R7(a.inputs,o.inputs,n);if(l)throw new rse({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function nP(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Xc(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>nP(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>nP(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function R7(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return R7(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Xc(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Xc(n[r],{strict:!1}):!1)return o}}function nie(t,{method:e}){const n={};return t.transport.type==="fallback"&&t.transport.onResponse?.(({method:r,response:s,status:i,transport:o})=>{i==="success"&&e===r&&(n[s]=o.request)}),(r=>n[r]||t.request)}function cl(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const U5="/docs/contract/encodeFunctionData";function rie(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=xO({abi:e,args:n,name:r});if(!i)throw new Q1(r,{docsPath:U5});s=i}if(s.type!=="function")throw new Q1(void 0,{docsPath:U5});return{abi:[s],functionName:SO(Xd(s))}}function AI(t){const{args:e}=t,{abi:n,functionName:r}=t.abi.length===1&&t.functionName?.startsWith("0x")?t:rie(t),s=n[0],i=r,o="inputs"in s&&s.inputs?P7(s.inputs,e??[]):void 0;return EI([i,o??"0x"])}const sie={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},iie={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},oie={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class F5 extends Oe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class N7 extends Oe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class aie extends Oe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const cie={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new aie({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new N7({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new F5({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new F5({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function PO(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(cie);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function lie(t,e={}){typeof e.size<"u"&&ga(t,{size:e.size});const n=eo(t,e);return mg(n,e)}function uie(t,e={}){let n=t;if(typeof e.size<"u"&&(ga(n,{size:e.size}),n=Ud(n)),n.length>1||n[0]>1)throw new lse(n);return!!n[0]}function ru(t,e={}){typeof e.size<"u"&&ga(t,{size:e.size});const n=eo(t,e);return jf(n,e)}function die(t,e={}){let n=t;return typeof e.size<"u"&&(ga(n,{size:e.size}),n=Ud(n,{dir:"right"})),new TextDecoder().decode(n)}function CI(t,e){const n=typeof e=="string"?Jc(e):e,r=PO(n);if(ss(n)===0&&t.length>0)throw new yI;if(ss(e)&&ss(e)<32)throw new o7({data:typeof e=="string"?e:eo(e),params:t,size:ss(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Jm(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Jm(t,e,{staticPosition:n}){const r=TO(e.type);if(r){const[s,i]=r;return fie(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return yie(t,e,{staticPosition:n});if(e.type==="address")return hie(t);if(e.type==="bool")return pie(t);if(e.type.startsWith("bytes"))return mie(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return gie(t,e);if(e.type==="string")return wie(t,{staticPosition:n});throw new ise(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const j5=32,rP=32;function hie(t){const e=t.readBytes(32);return[_I(eo(x7(e,-20))),32]}function fie(t,e,{length:n,staticPosition:r}){if(!n){const o=ru(t.readBytes(rP)),a=r+o,c=a+j5;t.setPosition(a);const l=ru(t.readBytes(j5)),u=zw(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[m,g]=Jm(t,e,{staticPosition:c});d+=g,h.push(m)}return t.setPosition(r+32),[h,32]}if(zw(e)){const o=ru(t.readBytes(rP)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Jm(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Jm(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function pie(t){return[uie(t.readBytes(32),{size:32}),32]}function mie(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ru(t.readBytes(32));t.setPosition(n+o);const a=ru(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[eo(c),32]}return[eo(t.readBytes(Number.parseInt(s),32)),32]}function gie(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?lie(s,{signed:n}):ru(s,{signed:n}),32]}function yie(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(zw(e)){const o=ru(t.readBytes(rP)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Jm(t,l,{staticPosition:a});i+=d,s[r?c:l?.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Jm(t,a,{staticPosition:n});s[r?o:a?.name]=c,i+=l}return[s,i]}function wie(t,{staticPosition:e}){const n=ru(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ru(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=die(Ud(i));return t.setPosition(e+32),[o,32]}function zw(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(zw);const n=TO(t.type);return!!(n&&zw({...t,type:n[1]}))}function vie(t){const{abi:e,data:n}=t,r=J1(n,0,4);if(r==="0x")throw new yI;const i=[...e||[],iie,oie].find(o=>o.type==="error"&&r===SO(Xd(o)));if(!i)throw new a7(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?CI(i.inputs,J1(n,4)):void 0,errorName:i.name}}const la=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function O7({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?la(e[i]):e[i]}`).join(", ")})`}const bie={gwei:9,wei:18},_ie={ether:-9,wei:9},Eie={ether:-18,gwei:-9};function Bb(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function RO(t,e="wei"){return Bb(t,bie[e])}function Zi(t,e="wei"){return Bb(t,_ie[e])}class Aie extends Oe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Cie extends Oe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function V5(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Iie(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=V5(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=V5(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Lb(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Tie extends Oe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Sie extends Oe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Lb(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class xie extends Oe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){const f=Lb({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:d,value:typeof h<"u"&&`${RO(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Zi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Zi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Zi(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class k7 extends Oe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class D7 extends Oe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Pie extends Oe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Rie=t=>t,NO=t=>t;class Nie extends Oe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){const m=n?cl(n):void 0;let g=Lb({from:m?.address,to:d,value:typeof h<"u"&&`${RO(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Zi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Zi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Zi(l)} gwei`,nonce:u});f&&(g+=`
${Iie(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class M7 extends Oe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=xO({abi:n,args:r,name:o}),l=c?O7({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Xd(c,{includeName:!0}):void 0,d=Lb({address:s&&Rie(s),function:u,args:l&&l!=="()"&&`${[...Array(o?.length??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class Oie extends Oe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=vie({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=sie[f]}else{const f=u?Xd(u,{includeName:!0}):void 0,m=u&&h?O7({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",m&&m!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${m}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof a7&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class kie extends Oe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Die extends Oe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class OO extends Oe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class rw extends Oe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${NO(o)}`,e&&`Request body: ${la(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}let kO=class extends Oe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${NO(r)}`,`Request body: ${la(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}};class H5 extends Oe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${NO(n)}`,`Request body: ${la(e)}`],name:"TimeoutError"})}}const Mie=-1;let ro=class extends Oe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof kO?e.code:n??Mie}},Oo=class extends ro{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}};class Ww extends ro{constructor(e){super(e,{code:Ww.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Gw extends ro{constructor(e){super(e,{code:Gw.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Gw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Kw extends ro{constructor(e,{method:n}={}){super(e,{code:Kw.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Kw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Qw extends ro{constructor(e){super(e,{code:Qw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class qf extends ro{constructor(e){super(e,{code:qf.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(qf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Yw extends ro{constructor(e){super(e,{code:Yw.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Yw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Zw extends ro{constructor(e){super(e,{code:Zw.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Fd extends ro{constructor(e){super(e,{code:Fd.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Fd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class wg extends ro{constructor(e){super(e,{code:wg.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(wg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class lf extends ro{constructor(e,{method:n}={}){super(e,{code:lf.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(lf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class vg extends ro{constructor(e){super(e,{code:vg.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(vg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Jw extends ro{constructor(e){super(e,{code:Jw.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Jw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});let $i=class B7 extends Oo{constructor(e){super(e,{code:B7.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty($i,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Xw extends Oo{constructor(e){super(e,{code:Xw.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Xw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class ev extends Oo{constructor(e,{method:n}={}){super(e,{code:ev.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(ev,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class tv extends Oo{constructor(e){super(e,{code:tv.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(tv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class nv extends Oo{constructor(e){super(e,{code:nv.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(nv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});let rv=class L7 extends Oo{constructor(e){super(e,{code:L7.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(rv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class sv extends Oo{constructor(e){super(e,{code:sv.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(sv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class iv extends Oo{constructor(e){super(e,{code:iv.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(iv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class ov extends Oo{constructor(e){super(e,{code:ov.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(ov,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class av extends Oo{constructor(e){super(e,{code:av.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(av,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class cv extends Oo{constructor(e){super(e,{code:cv.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(cv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class lv extends Oo{constructor(e){super(e,{code:lv.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(lv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class uv extends Oo{constructor(e){super(e,{code:uv.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(uv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Bie extends ro{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Lie=3;function X1(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof OO?t:t instanceof Oe?t.walk(m=>"data"in m)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof yI?new kie({functionName:i}):[Lie,qf.code].includes(c)&&(l||u||d||h)?new Oie({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof kO?u:h??d}):t;return new M7(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function $ie(t){const e=Mb(`0x${t.substring(4)}`).substring(26);return _I(`0x${e}`)}const Uie="modulepreload",Fie=function(t){return"/"+t},q5={},un=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=c(n.map(l=>{if(l=Fie(l),l in q5)return;q5[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Uie,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function jie({hash:t,signature:e}){const n=eh(t)?t:gg(t),{secp256k1:r}=await un(async()=>{const{secp256k1:o}=await import("./secp256k1-Dz_EPM7C.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),m=z5(f);return new r.Signature(mg(l),mg(u)).addRecoveryBit(m)}const o=eh(e)?e:gg(e);if(ss(o)!==65)throw new Error("invalid signature length");const a=jf(`0x${o.slice(130)}`),c=z5(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function z5(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Vie({hash:t,signature:e}){return $ie(await jie({hash:t,signature:e}))}function Hie(t,e="hex"){const n=$7(t),r=PO(new Uint8Array(n.length));return n.encode(r),e==="hex"?eo(r.bytes):r.bytes}function $7(t){return Array.isArray(t)?qie(t.map(e=>$7(e))):zie(t)}function qie(t){const e=t.reduce((s,i)=>s+i.length,0),n=U7(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function zie(t){const e=typeof t=="string"?Jc(t):t,n=U7(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function U7(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new Oe("Length is too large.")}function Wie(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Mb(EI(["0x05",Hie([e?fn(e):"0x",s,n?fn(n):"0x"])]));return r==="bytes"?Jc(i):i}async function F7(t){const{authorization:e,signature:n}=t;return Vie({hash:Wie(e),signature:n??e})}class Gie extends Oe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){const f=Lb({from:n?.address,to:d,value:typeof h<"u"&&`${RO(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Zi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Zi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Zi(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class uf extends Oe{constructor({cause:e,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(uf,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(uf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class eA extends Oe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Zi(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(eA,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class sP extends Oe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Zi(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(sP,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class iP extends Oe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(iP,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class oP extends Oe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(oP,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class aP extends Oe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(aP,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class cP extends Oe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(cP,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class lP extends Oe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(lP,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class uP extends Oe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(uP,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class dP extends Oe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(dP,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class tA extends Oe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Zi(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Zi(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(tA,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class II extends Oe{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function DO(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof Oe?t.walk(s=>s?.code===uf.code):t;return r instanceof Oe?new uf({cause:t,message:r.details}):uf.nodeMessage.test(n)?new uf({cause:t,message:t.details}):eA.nodeMessage.test(n)?new eA({cause:t,maxFeePerGas:e?.maxFeePerGas}):sP.nodeMessage.test(n)?new sP({cause:t,maxFeePerGas:e?.maxFeePerGas}):iP.nodeMessage.test(n)?new iP({cause:t,nonce:e?.nonce}):oP.nodeMessage.test(n)?new oP({cause:t,nonce:e?.nonce}):aP.nodeMessage.test(n)?new aP({cause:t,nonce:e?.nonce}):cP.nodeMessage.test(n)?new cP({cause:t}):lP.nodeMessage.test(n)?new lP({cause:t,gas:e?.gas}):uP.nodeMessage.test(n)?new uP({cause:t,gas:e?.gas}):dP.nodeMessage.test(n)?new dP({cause:t}):tA.nodeMessage.test(n)?new tA({cause:t,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new II({cause:t})}function Kie(t,{docsPath:e,...n}){const r=(()=>{const s=DO(t,n);return s instanceof II?t:s})();return new Gie(r,{docsPath:e,...n})}function MO(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const Qie={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function BO(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Yie(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>eo(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=fn(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=fn(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=fn(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=fn(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=fn(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=fn(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=Qie[t.type]),typeof t.value<"u"&&(e.value=fn(t.value)),e}function Yie(t){return t.map(e=>({address:e.address,r:e.r?fn(BigInt(e.r)):e.r,s:e.s?fn(BigInt(e.s)):e.s,chainId:fn(e.chainId),nonce:fn(e.nonce),...typeof e.yParity<"u"?{yParity:fn(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:fn(e.v)}:{}}))}function W5(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new O5({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new O5({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Zie(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=fn(e)),n!==void 0&&(o.nonce=fn(n)),r!==void 0&&(o.state=W5(r)),s!==void 0){if(o.state)throw new Cie;o.stateDiff=W5(s)}return o}function j7(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Xc(n,{strict:!1}))throw new Hf({address:n});if(e[n])throw new Aie({address:n});e[n]=Zie(r)}return e}const Jie=2n**256n-1n;function TI(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?cl(e):void 0;if(o&&!Xc(o.address))throw new Hf({address:o.address});if(i&&!Xc(i))throw new Hf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Tie;if(r&&r>Jie)throw new eA({maxFeePerGas:r});if(s&&r&&s>r)throw new tA({maxFeePerGas:r,maxPriorityFeePerGas:s})}class Xie extends Oe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class LO extends Oe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class eoe extends Oe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Zi(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class V7 extends Oe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const H7={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function q7(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?jf(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?jf(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?H7[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=toe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function toe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function noe(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:q7(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function dv(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){const i=s??!1,o=n!==void 0?fn(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new V7({blockHash:e,blockNumber:n});return(t.chain?.formatters?.block?.format||noe)(a)}async function z7(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function _Ke(t,e){return W7(t,e)}async function W7(t,e){const{block:n,chain:r=t.chain,request:s}=e||{};try{const i=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof i=="function"){const a=n||await vr(t,dv,"getBlock")({}),c=await i({block:a,client:t,request:s});if(c===null)throw new Error;return c}if(typeof i<"u")return i;const o=await t.request({method:"eth_maxPriorityFeePerGas"});return mg(o)}catch{const[i,o]=await Promise.all([n?Promise.resolve(n):vr(t,dv,"getBlock")({}),vr(t,z7,"getGasPrice")({})]);if(typeof i.baseFeePerGas!="bigint")throw new LO;const a=o-i.baseFeePerGas;return a<0n?0n:a}}async function EKe(t,e){return hP(t,e)}async function hP(t,e){const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(o<1)throw new Xie;const c=10**(o.toString().split(".")[1]?.length??0),l=h=>h*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await vr(t,dv,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const h=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(h!==null)return h}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new LO;const h=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await W7(t,{block:u,chain:r,request:s}),f=l(u.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??f+h,maxPriorityFeePerGas:h}}return{gasPrice:s?.gasPrice??l(await vr(t,z7,"getGasPrice")({}))}}async function roe(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?fn(r):n]},{dedupe:!!r});return jf(s)}function G7(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Jc(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>eo(i))}function K7(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Jc(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Jc(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>eo(o))}function soe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function ioe(t,e,n){return t&e^~t&n}function ooe(t,e,n){return t&e^t&n^e&n}let aoe=class extends w7{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=DS(this.buffer)}update(e){Z1(this),e=_O(e),Vf(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=DS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Z1(this),g7(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,qw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;soe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=DS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Xu=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),coe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ed=new Uint32Array(64);let loe=class extends aoe{constructor(e=32){super(64,e,8,!1),this.A=Xu[0]|0,this.B=Xu[1]|0,this.C=Xu[2]|0,this.D=Xu[3]|0,this.E=Xu[4]|0,this.F=Xu[5]|0,this.G=Xu[6]|0,this.H=Xu[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ed[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ed[d-15],f=ed[d-2],m=dc(h,7)^dc(h,18)^h>>>3,g=dc(f,17)^dc(f,19)^f>>>10;ed[d]=g+ed[d-7]+m+ed[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=dc(a,6)^dc(a,11)^dc(a,25),f=u+h+ioe(a,c,l)+coe[d]+ed[d]|0,g=(dc(r,2)^dc(r,13)^dc(r,22))+ooe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){qw(ed)}destroy(){this.set(0,0,0,0,0,0,0,0),qw(this.buffer)}};const uoe=v7(()=>new loe),doe=uoe;function hoe(t,e){return doe(eh(t,{strict:!1})?vI(t):t)}function foe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=hoe(e);return s.set([n],0),r==="bytes"?s:eo(s)}function poe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(foe({commitment:i,to:r,version:n}));return s}const G5=6,Q7=32,$O=4096,Y7=Q7*$O,K5=Y7*G5-1-1*$O*G5;class moe extends Oe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class goe extends Oe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function yoe(t){const e=typeof t.data=="string"?Jc(t.data):t.data,n=ss(e);if(!n)throw new goe;if(n>K5)throw new moe({maxSize:K5,size:n});const r=[];let s=!0,i=0;for(;s;){const o=PO(new Uint8Array(Y7));let a=0;for(;a<$O;){const c=e.slice(i,i+(Q7-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>eo(o.bytes))}function woe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??yoe({data:e}),i=t.commitments??G7({blobs:s,kzg:n,to:r}),o=t.proofs??K7({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function voe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new Sie({transaction:t})}async function Z7(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return jf(e)}const J7=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Q5=new Map;async function UO(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=J7,type:u}=e,d=n&&cl(n),h={...e,...d?{from:d?.address}:{}};let f;async function m(){return f||(f=await vr(t,dv,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await vr(t,Z7,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const v=await y();h.nonce=await c.consume({address:d.address,chainId:v,client:t})}else h.nonce=await vr(t,roe,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const v=G7({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const _=poe({commitments:v,to:"hex"});h.blobVersionedHashes=_}if(l.includes("sidecars")){const _=K7({blobs:r,commitments:v,kzg:o}),A=woe({blobs:r,commitments:v,proofs:_,to:"hex"});h.sidecars=A}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=voe(h)}catch{let v=Q5.get(t.uid);typeof v>"u"&&(v=typeof(await m())?.baseFeePerGas=="bigint",Q5.set(t.uid,v)),h.type=v?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const v=await m(),{maxFeePerGas:_,maxPriorityFeePerGas:A}=await hP(t,{block:v,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<A)throw new eoe({maxPriorityFeePerGas:A});h.maxPriorityFeePerGas=A,h.maxFeePerGas=_}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new LO;if(typeof e.gasPrice>"u"){const v=await m(),{gasPrice:_}=await hP(t,{block:v,chain:s,request:h,type:"legacy"});h.gasPrice=_}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await vr(t,ej,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),TI(h),delete h.parameters,h}async function X7(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?fn(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function ej(t,e){const{account:n=t.account}=e,r=n?cl(n):void 0;try{let D=function($){const{block:X,request:P,rpcStateOverride:L}=$;return t.request({method:"eth_estimateGas",params:L?[P,X??t.experimental_blockTag??"latest",L]:X?[P,X]:[P]})};const{accessList:s,authorizationList:i,blobs:o,blobVersionedHashes:a,blockNumber:c,blockTag:l,data:u,gas:d,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,value:v,stateOverride:_,...A}=await UO(t,{...e,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),S=(typeof c=="bigint"?fn(c):void 0)||l,R=j7(_),T=await(async()=>{if(A.to)return A.to;if(i&&i.length>0)return await F7({authorization:i[0]}).catch(()=>{throw new Oe("`to` is required. Could not infer from `authorizationList`")})})();TI(e);const b=t.chain?.formatters?.transactionRequest?.format,x=(b||BO)({...MO(A,{format:b}),from:r?.address,accessList:s,authorizationList:i,blobs:o,blobVersionedHashes:a,data:u,gas:d,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,to:T,value:v});let M=BigInt(await D({block:S,request:x,rpcStateOverride:R}));if(i){const $=await X7(t,{address:x.from}),X=await Promise.all(i.map(async P=>{const{address:L}=P,W=await D({block:S,request:{authorizationList:void 0,data:u,from:r?.address,to:L,value:fn($)},rpcStateOverride:R}).catch(()=>100000n);return 2n*BigInt(W)}));M+=X.reduce((P,L)=>P+L,0n)}return M}catch(s){throw Kie(s,{...e,account:r,chain:t.chain})}}function boe(t,e){if(!Xc(t,{strict:!1}))throw new Hf({address:t});if(!Xc(e,{strict:!1}))throw new Hf({address:e});return t.toLowerCase()===e.toLowerCase()}const Y5="/docs/contract/decodeEventLog";function _oe(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new tse({docsPath:Y5});const c=e.find(g=>g.type==="event"&&o===AO(Xd(g)));if(!(c&&"name"in c)||c.type!=="event")throw new c7(o,{docsPath:Y5});const{name:l,inputs:u}=c,d=u?.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,v]=f[g],_=a[g];if(!_)throw new l7({abiItem:c,param:y});h[d?v:y.name||v]=Eoe({param:y,value:_})}const m=u.filter(g=>!("indexed"in g&&g.indexed));if(m.length>0){if(n&&n!=="0x")try{const g=CI(m,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<m.length;y++)h[m[y].name]=g[y]}catch(g){if(i)throw g instanceof o7||g instanceof N7?new tP({abiItem:c,data:n,params:m,size:ss(n)}):g}else if(i)throw new tP({abiItem:c,data:"0x",params:m,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Eoe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(CI([t],e)||[])[0]}function Aoe(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{try{const a=e.find(l=>l.type==="event"&&o.topics[0]===AO(l));if(!a)return null;const c=_oe({...o,abi:[a],strict:s});return i&&!i.includes(c.eventName)||!Coe({args:c.args,inputs:a.inputs,matchArgs:n})?null:{...c,...o}}catch(a){let c,l;if(a instanceof c7)return null;if(a instanceof tP||a instanceof l7){if(s)return null;c=a.abiItem.name,l=a.abiItem.inputs?.some(u=>!("name"in u&&u.name))}return{...o,args:l?[]:{},eventName:c}}}).filter(Boolean)}function Coe(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?boe(o,a):i.type==="string"||i.type==="bytes"?Mb(vI(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function tj(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}const LS="/docs/contract/decodeFunctionResult";function FO(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=xO({abi:e,args:n,name:r});if(!a)throw new Q1(r,{docsPath:LS});i=a}if(i.type!=="function")throw new Q1(void 0,{docsPath:LS});if(!i.outputs)throw new nse(i.name,{docsPath:LS});const o=CI(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const Ioe="0.1.1";function Toe(){return Ioe}let ay=class fP extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof fP){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof fP&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Toe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return nj(this,e)}};function nj(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?nj(t.cause,e):e?null:t}const Soe="#__bigint";function xoe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Soe:s,n)}function rj(t,e){if(bg(t)>e)throw new Loe({givenSize:bg(t),maxSize:e})}function Poe(t,e){if(typeof e=="number"&&e>0&&e>bg(t)-1)throw new oj({offset:e,position:"start",size:bg(t)})}function Roe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&bg(t)!==n-e)throw new oj({offset:n,position:"end",size:bg(t)})}function sj(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new $oe({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Noe=new TextEncoder,Ooe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function koe(t,e={}){const{strict:n=!1}=e;if(!t)throw new Z5(t);if(typeof t!="string")throw new Z5(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new J5(t);if(!t.startsWith("0x"))throw new J5(t)}function IKe(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function TKe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(rj(n,e.size),ij(n,e.size)):n}function Doe(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Ooe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(rj(r,e.size),Moe(r,e.size)):r}function Hl(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new Boe({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ij(c,r):c}function SKe(t,e={}){return Doe(Noe.encode(t),e)}function ij(t,e){return sj(t,{dir:"left",size:e})}function Moe(t,e){return sj(t,{dir:"right",size:e})}function xKe(t,e,n,r={}){const{strict:s}=r;Poe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Roe(i,e,n),i}function bg(t){return Math.ceil((t.length-2)/2)}function PKe(t,e={}){const{strict:n=!1}=e;try{return koe(t,{strict:n}),!0}catch{return!1}}let Boe=class extends ay{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class Z5 extends ay{constructor(e){super(`Value \`${typeof e=="object"?xoe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class J5 extends ay{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Loe=class extends ay{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class oj extends ay{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let $oe=class extends ay{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Uoe(t){return{address:t.address,amount:Hl(t.amount),index:Hl(t.index),validatorIndex:Hl(t.validatorIndex)}}function Foe(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Hl(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Hl(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Hl(t.gasLimit)},...typeof t.number=="bigint"&&{number:Hl(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Hl(t.prevRandao)},...typeof t.time=="bigint"&&{time:Hl(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Uoe)}}}const pP=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],kKe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],aj=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],DKe=[...aj,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],MKe=[...aj,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],BKe=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],LKe=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],$Ke=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],UKe=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],joe="0x82ad56cb",Voe="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Hoe="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",FKe="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class mP extends Oe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}let qoe=class extends Oe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}};class zoe extends Oe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class cj extends Oe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const $S="/docs/contract/encodeDeployData";function lj(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Zre({docsPath:$S});if(!("inputs"in s))throw new N5({docsPath:$S});if(!s.inputs||s.inputs.length===0)throw new N5({docsPath:$S});const i=P7(s.inputs,n);return EI([r,i])}function uj({blockNumber:t,chain:e,contract:n}){const r=e?.contracts?.[n];if(!r)throw new mP({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new mP({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function Woe(t,{docsPath:e,...n}){const r=(()=>{const s=DO(t,n);return s instanceof II?t:s})();return new Nie(r,{docsPath:e,...n})}function dj(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const US=new Map;function hj({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:m}=u[f];m?.([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:m}=u[f];m?.(h)}})},o=()=>US.delete(e),a=()=>c().map(({args:u})=>u),c=()=>US.get(e)||[],l=u=>US.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=dj();return n?.([...a(),u])&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function fj(t,e){const{account:n=t.account,authorizationList:r,batch:s=!!t.batch?.multicall,blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:m,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:_,nonce:A,to:k,value:S,stateOverride:R,...T}=e,b=n?cl(n):void 0;if(u&&(h||f))throw new Oe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&k)throw new Oe("Cannot provide both `code` & `to` as parameters.");const E=u&&d,x=h&&f&&k&&d,D=E||x,M=E?Qoe({code:u,data:d}):x?Yoe({data:d,factory:h,factoryData:f,to:k}):d;try{TI(e);const X=(typeof i=="bigint"?fn(i):void 0)||o,P=l?Foe(l):void 0,L=j7(R),W=t.chain?.formatters?.transactionRequest?.format,J=(W||BO)({...MO(T,{format:W}),from:b?.address,accessList:a,authorizationList:r,blobs:c,data:M,gas:m,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:_,nonce:A,to:D?void 0:k,value:S});if(s&&Goe({request:J})&&!L&&!P)try{return await Koe(t,{...J,blockNumber:i,blockTag:o})}catch(ue){if(!(ue instanceof cj)&&!(ue instanceof mP))throw ue}const V=(()=>{const ue=[J,X];return L&&P?[...ue,L,P]:L?[...ue,L]:P?[...ue,{},P]:ue})(),se=await t.request({method:"eth_call",params:V});return se==="0x"?{data:void 0}:{data:se}}catch($){const X=Zoe($),{offchainLookup:P,offchainLookupSignature:L}=await un(async()=>{const{offchainLookup:W,offchainLookupSignature:Y}=await import("./ccip-BkXzkAbu.js");return{offchainLookup:W,offchainLookupSignature:Y}},__vite__mapDeps([2,3]));if(t.ccipRead!==!1&&X?.slice(0,10)===L&&k)return{data:await P(t,{data:X,to:k})};throw D&&X?.slice(0,10)==="0x101bb98d"?new Die({factory:h}):Woe($,{...e,account:b,chain:t.chain})}}function Goe({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(joe)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Koe(t,e){const{batchSize:n=1024,wait:r=0}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i=t.experimental_blockTag??"latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new cj;l=uj({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?fn(s):void 0)||i,{schedule:h}=hj({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(g){return g.reduce((v,{data:_})=>v+(_.length-2),0)>n*2},fn:async g=>{const y=g.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),v=AI({abi:pP,args:[y],functionName:"aggregate3"}),_=await t.request({method:"eth_call",params:[{data:v,to:l},d]});return FO({abi:pP,args:[y],functionName:"aggregate3",data:_||"0x"})}}),[{returnData:f,success:m}]=await h({data:o,to:c});if(!m)throw new OO({data:f});return f==="0x"?{data:void 0}:{data:f}}function Qoe(t){const{code:e,data:n}=t;return lj({abi:r7(["constructor(bytes, bytes)"]),bytecode:Voe,args:[e,n]})}function Yoe(t){const{data:e,factory:n,factoryData:r,to:s}=t;return lj({abi:r7(["constructor(address, bytes, address, bytes)"]),bytecode:Hoe,args:[s,e,n,r]})}function Zoe(t){if(!(t instanceof Oe))return;const e=t.walk();return typeof e?.data=="object"?e.data?.data:e.data}async function pj(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=AI({abi:n,args:s,functionName:i});try{const{data:c}=await vr(t,fj,"call")({...o,data:a,to:r});return FO({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw X1(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}const FS=new Map,X5=new Map;let Joe=0;function nA(t,e,n){const r=++Joe,s=()=>FS.get(t)||[],i=()=>{const u=s();FS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=X5.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(FS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=((...d)=>{const h=s();if(h.length!==0)for(const f of h)f.fns[u]?.(...d)});const l=n(c);return typeof l=="function"&&X5.set(t,l),o}async function rA(t){return new Promise(e=>setTimeout(e,t))}function mj(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await n?.(a)??r;await rA(c);const l=async()=>{s&&(await t({unpoll:i}),await rA(r),l())};l()})(),i}const Xoe=new Map,eae=new Map;function tae(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Xoe),r=e(t,eae);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function nae(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=tae(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const rae=t=>`blockNumber.${t}`;async function sae(t,{cacheTime:e=t.cacheTime}={}){const n=await nae(()=>t.request({method:"eth_blockNumber"}),{cacheKey:rae(t.uid),cacheTime:e});return BigInt(n)}async function iae(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>tj(i));return!("abi"in e)||!e.abi?s:Aoe({abi:e.abi,logs:s,strict:n})}async function oae(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class jO extends Oe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class jS extends Oe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function aae({chain:t,currentChainId:e}){if(!t)throw new zoe;if(e!==t.id)throw new qoe({chain:t,currentChainId:e})}function cae(t,{docsPath:e,...n}){const r=(()=>{const s=DO(t,n);return s instanceof II?t:s})();return new xie(r,{docsPath:e,...n})}async function lae(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const VS=new bI(128);async function gj(t,e){const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:m,value:g,...y}=e;if(typeof n>"u")throw new jO({docsPath:"/docs/actions/wallet/sendTransaction"});const v=n?cl(n):null;try{TI(e);const _=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await F7({authorization:i[0]}).catch(()=>{throw new Oe("`to` is required. Could not infer from `authorizationList`.")})})();if(v?.type==="json-rpc"||v===null){let A;r!==null&&(A=await vr(t,Z7,"getChainId")({}),aae({currentChainId:A,chain:r}));const k=t.chain?.formatters?.transactionRequest?.format,R=(k||BO)({...MO(y,{format:k}),accessList:s,authorizationList:i,blobs:o,chainId:A,data:a,from:v?.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:_,type:m,value:g}),T=VS.get(t.uid),b=T?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:b,params:[R]},{retryCount:0})}catch(E){if(T===!1)throw E;const x=E;if(x.name==="InvalidInputRpcError"||x.name==="InvalidParamsRpcError"||x.name==="MethodNotFoundRpcError"||x.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[R]},{retryCount:0}).then(D=>(VS.set(t.uid,!0),D)).catch(D=>{const M=D;throw M.name==="MethodNotFoundRpcError"||M.name==="MethodNotSupportedRpcError"?(VS.set(t.uid,!1),x):M});throw x}}if(v?.type==="local"){const A=await vr(t,UO,"prepareTransactionRequest")({account:v,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:v.nonceManager,parameters:[...J7,"sidecars"],type:m,value:g,...y,to:_}),k=r?.serializers?.transaction,S=await v.signTransaction(A,{serializer:k});return await vr(t,lae,"sendRawTransaction")({serializedTransaction:S})}throw v?.type==="smart"?new jS({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new jS({docsPath:"/docs/actions/wallet/sendTransaction",type:v?.type})}catch(_){throw _ instanceof jS?_:cae(_,{...e,account:v,chain:e.chain||void 0})}}async function uae(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new jO({docsPath:"/docs/contract/writeContract"});const l=r?cl(r):null,u=AI({abi:n,args:i,functionName:a});try{return await vr(t,gj,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw X1(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l?.address})}}function sA(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await rA(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}const dae={"0x0":"reverted","0x1":"success"};function hae(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>tj(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?jf(t.transactionIndex):null,status:t.status?dae[t.status]:null,type:t.type?H7[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const gP=256;let iE=gP,oE;function yj(t=11){if(!oE||iE+t>gP*2){oE="",iE=0;for(let e=0;e<gP;e++)oE+=(256+Math.random()*256|0).toString(16).substring(1)}return oE.substring(iE,iE+++t)}function wj(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),c=n?.blockTime??12e3,l=Math.min(Math.max(Math.floor(c/2),500),4e3),u=t.pollingInterval??l,d=t.cacheTime??u,h=t.account?cl(t.account):void 0,{config:f,request:m,value:g}=t.transport({chain:n,pollingInterval:u}),y={...f,...g},v={account:h,batch:e,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:u,request:m,transport:y,type:o,uid:yj(),...a?{experimental_blockTag:a}:{}};function _(A){return k=>{const S=k(A);for(const T in v)delete S[T];const R={...A,...S};return Object.assign(R,{extend:_(R)})}}return Object.assign(v,{extend:_(v)})}const aE=new bI(8192);function fae(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(aE.get(n))return aE.get(n);const r=t().finally(()=>aE.delete(n));return aE.set(n,r),r}function pae(t,e={}){return async(n,r={})=>{const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if(i?.exclude?.includes(l))throw new lf(new Error("method not supported"),{method:l});if(i?.include&&!i.include.includes(l))throw new lf(new Error("method not supported"),{method:l});const u=s?wI(`${c}.${la(n)}`):void 0;return fae(()=>sA(async()=>{try{return await t(n)}catch(d){const h=d;switch(h.code){case Ww.code:throw new Ww(h);case Gw.code:throw new Gw(h);case Kw.code:throw new Kw(h,{method:n.method});case Qw.code:throw new Qw(h);case qf.code:throw new qf(h);case Yw.code:throw new Yw(h);case Zw.code:throw new Zw(h);case Fd.code:throw new Fd(h);case wg.code:throw new wg(h);case lf.code:throw new lf(h,{method:n.method});case vg.code:throw new vg(h);case Jw.code:throw new Jw(h);case $i.code:throw new $i(h);case Xw.code:throw new Xw(h);case ev.code:throw new ev(h);case tv.code:throw new tv(h);case nv.code:throw new nv(h);case rv.code:throw new rv(h);case sv.code:throw new sv(h);case iv.code:throw new iv(h);case ov.code:throw new ov(h);case av.code:throw new av(h);case cv.code:throw new cv(h);case lv.code:throw new lv(h);case uv.code:throw new uv(h);case 5e3:throw new $i(h);default:throw d instanceof Oe?d:new Bie(h)}}},{delay:({count:d,error:h})=>{if(h&&h instanceof rw){const f=h?.headers?.get("Retry-After");if(f?.match(/\d/))return Number.parseInt(f)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>mae(d)}),{enabled:s,id:u})}}function mae(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===vg.code||t.code===qf.code:t instanceof rw&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function VO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=yj();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:pae(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function gae(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>VO({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function eM(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=yae,retryCount:o,retryDelay:a}=e;return(({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const m=VO({key:n,name:r,async request({method:g,params:y}){let v;const _=async(A=0)=>{const k=h[A]({...d,chain:c,retryCount:0,timeout:u});try{const S=await k.request({method:g,params:y});return f({method:g,params:y,response:S,transport:k,status:"success"}),S}catch(S){if(f({error:S,method:g,params:y,transport:k,status:"error"}),i(S)||A===h.length-1||(v??=h.slice(A+1).some(R=>{const{include:T,exclude:b}=R({chain:c}).config.methods||{};return T?T.includes(g):b?!b.includes(g):!0}),!v))throw S;return _(A+1)}};return _()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};wae({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return m})}function yae(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===wg.code||t.code===$i.code||uf.nodeMessage.test(t.message)||t.code===5e3))}function wae({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),v=Date.now();let _,A;try{await(r?r({transport:y}):y.request({method:"net_listening"})),A=1}catch{A=0}finally{_=Date.now()}return{latency:_-v,success:A}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),m=o.map((g,y)=>{const v=u.map(R=>R[y].latency),A=1-v.reduce((R,T)=>R+T,0)/v.length/f,k=u.map(R=>R[y].success),S=k.reduce((R,T)=>R+T,0)/k.length;return S===0?[0,y]:[l*A+c*S,y]}).sort((g,y)=>y[0]-g[0]);n(m.map(([,g])=>o[g])),await rA(e),d()};d()}class vae extends Oe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function vj(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function bae(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const tM=bae();function _ae(t,e={}){return{async request(n){const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const d=await vj(async({signal:f})=>{const m={...a,body:Array.isArray(r)?la(r.map(_=>({jsonrpc:"2.0",id:_.id??tM.take(),..._}))):la({jsonrpc:"2.0",id:r.id??tM.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?f:null)},g=new Request(t,m),y=await s?.(g,m)??{...m,url:t};return await fetch(y.url??t,y)},{errorInstance:new H5({body:r,url:t}),timeout:o,signal:!0});i&&await i(d);let h;if(d.headers.get("Content-Type")?.startsWith("application/json"))h=await d.json();else{h=await d.text();try{h=JSON.parse(h||"{}")}catch(f){if(d.ok)throw f;h={error:h}}}if(!d.ok)throw new rw({body:r,details:la(h.error)||d.statusText,headers:d.headers,status:d.status,url:t});return h}catch(d){throw d instanceof rw||d instanceof H5?d:new rw({body:r,cause:d,url:t})}}}}function Fm(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:m=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,v=f??e.timeout??1e4,_=t||d?.rpcUrls.default.http[0];if(!_)throw new vae;const A=_ae(_,{fetchOptions:r,onRequest:a,onResponse:c,timeout:v});return VO({key:s,methods:i,name:o,async request({method:k,params:S}){const R={method:k,params:S},{schedule:T}=hj({id:_,wait:g,shouldSplitBatch(D){return D.length>m},fn:D=>A.request({body:D}),sort:(D,M)=>D.id-M.id}),b=async D=>n?T(D):[await A.request({body:D})],[{error:E,result:x}]=await b(R);if(u)return{error:E,result:x};if(E)throw new kO({body:R,error:E,url:_});return x},retryCount:y,retryDelay:l,timeout:v,type:"http"},{fetchOptions:r,url:_})}}async function Eae(t){const e=nie(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}function bj(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}async function _j(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){const o=r||"latest",a=n!==void 0?fn(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,fn(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,fn(i)]},{dedupe:!!a}),!c)throw new k7({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(t.chain?.formatters?.transaction?.format||q7)(c)}async function HS(t,{hash:e}){const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new D7({hash:e});return(t.chain?.formatters?.transactionReceipt?.format||hae)(n)}async function Aae(t,e){const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof t.batch?.multicall=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=uj({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,m=0;for(let v=0;v<l.length;v++){const{abi:_,address:A,args:k,functionName:S}=l[v];try{const R=AI({abi:_,args:k,functionName:S});m+=(R.length-2)/2,u>0&&m>u&&h[f].length>0&&(f++,m=(R.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:R,target:A}]}catch(R){const T=X1(R,{abi:_,address:A,args:k,docsPath:"/docs/contract/multicall",functionName:S,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(v=>vr(t,pj,"readContract")({abi:pP,account:n,address:d,args:[v],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let v=0;v<g.length;v++){const _=g[v];if(_.status==="rejected"){if(!r)throw _.reason;for(let k=0;k<h[v].length;k++)y.push({status:"failure",error:_.reason,result:void 0});continue}const A=_.value;for(let k=0;k<A.length;k++){const{returnData:S,success:R}=A[k],{callData:T}=h[v][k],{abi:b,address:E,functionName:x,args:D}=l[y.length];try{if(T==="0x")throw new yI;if(!R)throw new OO({data:S});const M=FO({abi:b,args:D,data:S,functionName:x});y.push(r?{result:M,status:"success"}:M)}catch(M){const $=X1(M,{abi:b,address:E,args:D,docsPath:"/docs/contract/multicall",functionName:x});if(!r)throw $;y.push({error:$,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new Oe("multicall results mismatch");return y}function Cae(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=la(["watchBlockNumber",t.uid,e,n,o]);return nA(d,{onBlockNumber:r,onError:s},h=>mj(async()=>{try{const f=await vr(t,sae,"getBlockNumber")({cacheTime:0});if(c){if(f===c)return;if(f-c>1&&n)for(let m=c+1n;m<f;m++)h.onBlockNumber(m,c),c=m}(!c||f>c)&&(h.onBlockNumber(f,c),c=f)}catch(f){h.onError?.(f)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=la(["watchBlockNumber",t.uid,e,n]);return nA(d,{onBlockNumber:r,onError:s},h=>{let f=!0,m=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(v){if(!f)return;const _=mg(v.result?.number);h.onBlockNumber(_,c),c=_},onError(v){h.onError?.(v)}});m=y,f||m()}catch(g){s?.(g)}})(),()=>m()})})()}async function Iae(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:S})=>~~(1<<S)*200,timeout:c=18e4}=e,l=la(["waitForTransactionReceipt",t.uid,s]),u=e.pollingInterval?e.pollingInterval:t.chain?.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval;let d,h,f,m=!1,g,y;const{promise:v,resolve:_,reject:A}=dj(),k=c?setTimeout(()=>{y(),g(),A(new Pie({hash:s}))},c):void 0;return g=nA(l,{onReplaced:i,resolve:_,reject:A},async S=>{if(f=await vr(t,HS,"getTransactionReceipt")({hash:s}).catch(()=>{}),f&&r<=1){clearTimeout(k),S.resolve(f),g();return}y=vr(t,Cae,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:u,async onBlockNumber(R){const T=E=>{clearTimeout(k),y(),E(),g()};let b=R;if(!m)try{if(f){if(r>1&&(!f.blockNumber||b-f.blockNumber+1n<r))return;T(()=>S.resolve(f));return}if(n&&!d&&(m=!0,await sA(async()=>{d=await vr(t,_j,"getTransaction")({hash:s}),d.blockNumber&&(b=d.blockNumber)},{delay:a,retryCount:o}),m=!1),f=await vr(t,HS,"getTransactionReceipt")({hash:s}),r>1&&(!f.blockNumber||b-f.blockNumber+1n<r))return;T(()=>S.resolve(f))}catch(E){if(E instanceof k7||E instanceof D7){if(!d){m=!1;return}try{h=d,m=!0;const x=await sA(()=>vr(t,dv,"getBlock")({blockNumber:b,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:$})=>$ instanceof V7});m=!1;const D=x.transactions.find(({from:$,nonce:X})=>$===h.from&&X===h.nonce);if(!D||(f=await vr(t,HS,"getTransactionReceipt")({hash:D.hash}),r>1&&(!f.blockNumber||b-f.blockNumber+1n<r)))return;let M="replaced";D.to===h.to&&D.value===h.value&&D.input===h.input?M="repriced":D.from===D.to&&D.value===0n&&(M="cancelled"),T(()=>{S.onReplaced?.({reason:M,replacedTransaction:h,transaction:D,transactionReceipt:f}),S.resolve(f)})}catch(x){T(()=>S.reject(x))}}else T(()=>S.reject(E))}}})}),v}function Tae(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=la(["watchPendingTransactions",t.uid,e,i]);return nA(l,{onTransactions:r,onError:n},u=>{let d;const h=mj(async()=>{try{if(!d)try{d=await vr(t,Eae,"createPendingTransactionFilter")({});return}catch(m){throw h(),m}const f=await vr(t,iae,"getFilterChanges")({filter:d});if(f.length===0)return;if(e)u.onTransactions(f);else for(const m of f)u.onTransactions([m])}catch(f){u.onError?.(f)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await vr(t,oae,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n?.(h)}});u=d,l||u()}catch(d){n?.(d)}})(),()=>u()})()}async function Sae(t,{account:e=t.account,message:n}){if(!e)throw new jO({docsPath:"/docs/actions/wallet/signMessage"});const r=cl(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?wI(n):n.raw instanceof Uint8Array?gg(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}const qS={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Bb(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},HO={async getMyTokensWithBalance(t){const e=ut.state.address,n=K.state.activeCaipNetwork,r=Ue.getConnectorId("eip155")===le.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Te.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===le.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await At.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){try{const n=qS.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await qe.getCapabilities(t))?.[n]?.assetDiscovery?.supported)return null;const s=await qe.walletGetAssets({account:t,chainFilter:[n]});if(!qS.isWalletGetAssetsResponse(s))return null;const o=(s[n]||[]).map(a=>qS.createBalance(a,e.caipNetworkId));return Te.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},hc=Er({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),xae={state:hc,replaceState(t){t&&Object.assign(hc,hg(t))},subscribe(t){return K.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return K.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){K.setAccountProp("status",t,e)},getCaipAddress(t){if(t)return K.state.chains.get(t)?.accountState?.caipAddress},setCaipAddress(t,e){const n=t?ot.getPlainAddress(t):void 0;e===K.state.activeChain&&(K.state.activeCaipAddress=t),K.setAccountProp("caipAddress",t,e),K.setAccountProp("address",n,e)},setBalance(t,e,n){K.setAccountProp("balance",t,n),K.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){K.setAccountProp("profileName",t,e)},setProfileImage(t,e){K.setAccountProp("profileImage",t,e)},setUser(t,e){K.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){K.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){K.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){K.setAccountProp("currentTab",t,K.state.activeChain)},setTokenBalance(t,e){t&&K.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){K.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){if(!n)return;const r=K.state.chains.get(n)?.accountState?.addressLabels||new Map;r.set(t,e),K.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){if(!e)return;const n=K.state.chains.get(e)?.accountState?.addressLabels||new Map;n.delete(t),K.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){K.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){K.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&K.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){K.setAccountProp("socialWindow",t?hg(t):void 0,e)},setFarcasterUrl(t,e){K.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){hc.balanceLoading=!0;const e=K.state.activeCaipNetwork?.caipNetworkId,n=K.state.activeCaipNetwork?.chainNamespace,r=K.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(hc.lastRetry&&!ot.isAllowedRetry(hc.lastRetry,30*En.ONE_SEC_MS))return hc.balanceLoading=!1,[];try{if(s&&e&&n){const i=await HO.getMyTokensWithBalance();return ut.setTokenBalance(i,n),hc.lastRetry=void 0,hc.balanceLoading=!1,i}}catch(i){hc.lastRetry=Date.now(),t?.(i),kc.showError("Token Balance Unavailable")}finally{hc.balanceLoading=!1}return[]},resetAccount(t){K.resetAccount(t)}},ut=Ro(xae),Pae={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=K.state.activeCaipNetwork,r=Pt.state.data;if(t.id===n?.id)return;const i=ut.getCaipAddress(K.state.activeChain),o=t.chainNamespace!==K.state.activeChain,a=ut.getCaipAddress(t.chainNamespace),l=Ue.getConnectorId(K.state.activeChain)===le.CONNECTOR_ID.AUTH,u=le.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Pt.push("SwitchNetwork",{...r,network:t})}},Ni=Er({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Rae={state:Ni,subscribe(t){return _i(Ni,()=>t(Ni))},subscribeKey(t,e){return Ti(Ni,t,e)},async open(t){const e=t?.namespace,n=K.state.activeChain,r=e&&e!==n,s=K.getAccountData(t?.namespace)?.caipAddress;if(qe.state.wcBasic?vt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await vt.prefetch(),Ue.setFilterByNamespace(t?.namespace),vn.setLoading(!0,e),e&&r){const i=K.getNetworkData(e)?.caipNetwork||K.getRequestedCaipNetworks(e)[0];i&&Pae.onSwitchNetwork({network:i,ignoreSwitchConfirmation:!0})}else{const i=K.state.noAdapters;be.state.manualWCControl||i&&!s?ot.isMobile()?Pt.reset("AllWallets"):Pt.reset("ConnectingWalletConnectBasic"):t?.view?Pt.reset(t.view,t.data):s?Pt.reset("Account"):Pt.reset("Connect")}Ni.open=!0,La.set({open:!0}),xn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=be.state.enableEmbedded,e=!!K.state.activeCaipAddress;Ni.open&&xn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ni.open=!1,Pt.reset("Connect"),vn.clearLoading(),t?e?Pt.replace("Account"):Pt.push("Connect"):La.set({open:!1}),qe.resetUri()},setLoading(t,e){e&&Ni.loadingNamespaceMap.set(e,t),Ni.loading=t,La.set({loading:t})},clearLoading(){Ni.loadingNamespaceMap.clear(),Ni.loading=!1,La.set({loading:!1})},shake(){Ni.shake||(Ni.shake=!0,setTimeout(()=>{Ni.shake=!1},500))}},vn=Ro(Rae),sw={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},yP={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Nae={providers:F9,selectedProvider:null,error:null,purchaseCurrency:sw,paymentCurrency:yP,purchaseCurrencies:[sw],paymentCurrencies:[],quotesLoading:!1},Tn=Er(Nae),Oae={state:Tn,subscribe(t){return _i(Tn,()=>t(Tn))},subscribeKey(t,e){return Ti(Tn,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=K.state.activeChain,n=e===le.CHAIN.SOLANA?"SOL":"USDC",r=e?K.state.chains.get(e)?.accountState?.address??"":"",s=new URL(t.url);s.searchParams.append("publicKey",Rne),s.searchParams.append("destinationCurrencyCode",n),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",be.state.projectId),Tn.selectedProvider={...t,url:s.toString()}}else Tn.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=F9.filter(r=>e.includes(r.name));Tn.providers=n}else Tn.providers=[]},setPurchaseCurrency(t){Tn.purchaseCurrency=t},setPaymentCurrency(t){Tn.paymentCurrency=t},setPurchaseAmount(t){wP.state.purchaseAmount=t},setPaymentAmount(t){wP.state.paymentAmount=t},async getAvailableCurrencies(){const t=await At.getOnrampOptions();Tn.purchaseCurrencies=t.purchaseCurrencies,Tn.paymentCurrencies=t.paymentCurrencies,Tn.paymentCurrency=t.paymentCurrencies[0]||yP,Tn.purchaseCurrency=t.purchaseCurrencies[0]||sw,await vt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await vt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){Tn.quotesLoading=!0;try{const t=await At.getOnrampQuote({purchaseCurrency:Tn.purchaseCurrency,paymentCurrency:Tn.paymentCurrency,amount:Tn.paymentAmount?.toString()||"0",network:Tn.purchaseCurrency?.symbol});return Tn.quotesLoading=!1,Tn.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return Tn.error=t.message,Tn.quotesLoading=!1,null}finally{Tn.quotesLoading=!1}},resetState(){Tn.selectedProvider=null,Tn.error=null,Tn.purchaseCurrency=sw,Tn.paymentCurrency=yP,Tn.purchaseCurrencies=[sw],Tn.paymentCurrencies=[],Tn.paymentAmount=void 0,Tn.purchaseAmount=void 0,Tn.quotesLoading=!1}},wP=Ro(Oae),nM=2147483648,kae={convertEVMChainIdToCoinType(t){if(t>=nM)throw new Error("Invalid chainId");return(nM|t)>>>0}},Vo=Er({suggestions:[],loading:!1}),Dae={state:Vo,subscribe(t){return _i(Vo,()=>t(Vo))},subscribeKey(t,e){return Ti(Vo,t,e)},async resolveName(t){try{return await At.lookupEnsName(t)}catch(e){const n=e;throw new Error(n?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await At.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Vo.loading=!0,Vo.suggestions=[];const e=await At.getEnsNameSuggestions(t);return Vo.suggestions=e.suggestions||[],Vo.suggestions}catch(e){const n=iw.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Vo.loading=!1}},async getNamesForAddress(t){try{if(!K.state.activeCaipNetwork)return[];const n=Te.getEnsFromCacheForAddress(t);if(n)return n;const r=await At.reverseLookupEnsName({address:t});return Te.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=iw.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=K.state.activeCaipNetwork,n=ut.state.address,r=Ue.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Vo.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Pt.pushTransactionStack({onCancel(){Pt.replace("RegisterAccountName")}});const i=await qe.signMessage(s);Vo.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=kae.convertEVMChainIdToCoinType(Number(o));await At.registerEnsName({coinType:a,address:n,signature:i,message:s}),ut.setProfileName(t,e.chainNamespace),Te.updateEnsCache({address:n,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),Pt.replace("RegisterAccountNameSuccess")}catch(s){const i=iw.parseEnsApiError(s,`Error registering name ${t}`);throw Pt.replace("RegisterAccountName"),new Error(i)}finally{Vo.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},iw=Ro(Dae);var cE={exports:{}},rM;function Mae(){if(rM)return cE.exports;rM=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,R,T){return Function.prototype.apply.call(S,R,T)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function r(k){console&&console.warn&&console.warn(k)}var s=Number.isNaN||function(S){return S!==S};function i(){i.init.call(this)}cE.exports=i,cE.exports.once=v,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(k){if(typeof k!="number"||k<0||s(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");o=k}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||s(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function c(k){return k._maxListeners===void 0?i.defaultMaxListeners:k._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(S){for(var R=[],T=1;T<arguments.length;T++)R.push(arguments[T]);var b=S==="error",E=this._events;if(E!==void 0)b=b&&E.error===void 0;else if(!b)return!1;if(b){var x;if(R.length>0&&(x=R[0]),x instanceof Error)throw x;var D=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw D.context=x,D}var M=E[S];if(M===void 0)return!1;if(typeof M=="function")e(M,this,R);else for(var $=M.length,X=m(M,$),T=0;T<$;++T)e(X[T],this,R);return!0};function l(k,S,R,T){var b,E,x;if(a(R),E=k._events,E===void 0?(E=k._events=Object.create(null),k._eventsCount=0):(E.newListener!==void 0&&(k.emit("newListener",S,R.listener?R.listener:R),E=k._events),x=E[S]),x===void 0)x=E[S]=R,++k._eventsCount;else if(typeof x=="function"?x=E[S]=T?[R,x]:[x,R]:T?x.unshift(R):x.push(R),b=c(k),b>0&&x.length>b&&!x.warned){x.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=k,D.type=S,D.count=x.length,r(D)}return k}i.prototype.addListener=function(S,R){return l(this,S,R,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(S,R){return l(this,S,R,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(k,S,R){var T={fired:!1,wrapFn:void 0,target:k,type:S,listener:R},b=u.bind(T);return b.listener=R,T.wrapFn=b,b}i.prototype.once=function(S,R){return a(R),this.on(S,d(this,S,R)),this},i.prototype.prependOnceListener=function(S,R){return a(R),this.prependListener(S,d(this,S,R)),this},i.prototype.removeListener=function(S,R){var T,b,E,x,D;if(a(R),b=this._events,b===void 0)return this;if(T=b[S],T===void 0)return this;if(T===R||T.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete b[S],b.removeListener&&this.emit("removeListener",S,T.listener||R));else if(typeof T!="function"){for(E=-1,x=T.length-1;x>=0;x--)if(T[x]===R||T[x].listener===R){D=T[x].listener,E=x;break}if(E<0)return this;E===0?T.shift():g(T,E),T.length===1&&(b[S]=T[0]),b.removeListener!==void 0&&this.emit("removeListener",S,D||R)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(S){var R,T,b;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[S]),this;if(arguments.length===0){var E=Object.keys(T),x;for(b=0;b<E.length;++b)x=E[b],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=T[S],typeof R=="function")this.removeListener(S,R);else if(R!==void 0)for(b=R.length-1;b>=0;b--)this.removeListener(S,R[b]);return this};function h(k,S,R){var T=k._events;if(T===void 0)return[];var b=T[S];return b===void 0?[]:typeof b=="function"?R?[b.listener||b]:[b]:R?y(b):m(b,b.length)}i.prototype.listeners=function(S){return h(this,S,!0)},i.prototype.rawListeners=function(S){return h(this,S,!1)},i.listenerCount=function(k,S){return typeof k.listenerCount=="function"?k.listenerCount(S):f.call(k,S)},i.prototype.listenerCount=f;function f(k){var S=this._events;if(S!==void 0){var R=S[k];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function m(k,S){for(var R=new Array(S),T=0;T<S;++T)R[T]=k[T];return R}function g(k,S){for(;S+1<k.length;S++)k[S]=k[S+1];k.pop()}function y(k){for(var S=new Array(k.length),R=0;R<S.length;++R)S[R]=k[R].listener||k[R];return S}function v(k,S){return new Promise(function(R,T){function b(x){k.removeListener(S,E),T(x)}function E(){typeof k.removeListener=="function"&&k.removeListener("error",b),R([].slice.call(arguments))}A(k,S,E,{once:!0}),S!=="error"&&_(k,b,{once:!0})})}function _(k,S,R){typeof k.on=="function"&&A(k,"error",S,R)}function A(k,S,R,T){if(typeof k.on=="function")T.once?k.once(S,R):k.on(S,R);else if(typeof k.addEventListener=="function")k.addEventListener(S,function b(E){T.once&&k.removeEventListener(S,b),R(E)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return cE.exports}var ya=Mae();const qO=ny(ya);var zS={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vP=function(t,e){return vP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},vP(t,e)};function Bae(t,e){vP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bP=function(){return bP=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bP.apply(this,arguments)};function Lae(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $ae(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Uae(t,e){return function(n,r){e(n,r,t)}}function Fae(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function jae(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Vae(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Hae(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function qae(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function _P(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ej(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function zae(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ej(arguments[e]));return t}function Wae(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function hv(t){return this instanceof hv?(this.v=t,this):new hv(t)}function Gae(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(m,g){i.push([h,f,m,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(m){d(i[0][3],m)}}function c(h){h.value instanceof hv?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Kae(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:hv(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Qae(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _P=="function"?_P(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Yae(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Zae(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Jae(t){return t&&t.__esModule?t:{default:t}}function Xae(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ece(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const tce=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return bP},__asyncDelegator:Kae,__asyncGenerator:Gae,__asyncValues:Qae,__await:hv,__awaiter:jae,__classPrivateFieldGet:Xae,__classPrivateFieldSet:ece,__createBinding:Hae,__decorate:$ae,__exportStar:qae,__extends:Bae,__generator:Vae,__importDefault:Jae,__importStar:Zae,__makeTemplateObject:Yae,__metadata:Fae,__param:Uae,__read:Ej,__rest:Lae,__spread:zae,__spreadArrays:Wae,__values:_P},Symbol.toStringTag,{value:"Module"})),SI=wF(tce);var WS={},f0={},sM;function nce(){if(sM)return f0;sM=1,Object.defineProperty(f0,"__esModule",{value:!0}),f0.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return f0.delay=t,f0}var Wh={},GS={},Gh={},iM;function rce(){return iM||(iM=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.ONE_THOUSAND=Gh.ONE_HUNDRED=void 0,Gh.ONE_HUNDRED=100,Gh.ONE_THOUSAND=1e3),Gh}var KS={},oM;function sce(){return oM||(oM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(KS)),KS}var aM;function Aj(){return aM||(aM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=SI;e.__exportStar(rce(),t),e.__exportStar(sce(),t)})(GS)),GS}var cM;function ice(){if(cM)return Wh;cM=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.fromMiliseconds=Wh.toMiliseconds=void 0;const t=Aj();function e(r){return r*t.ONE_THOUSAND}Wh.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Wh.fromMiliseconds=n,Wh}var lM;function oce(){return lM||(lM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=SI;e.__exportStar(nce(),t),e.__exportStar(ice(),t)})(WS)),WS}var nm={},uM;function ace(){if(uM)return nm;uM=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return nm.Watch=t,nm.default=t,nm}var QS={},p0={},dM;function cce(){if(dM)return p0;dM=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.IWatch=void 0;class t{}return p0.IWatch=t,p0}var hM;function lce(){return hM||(hM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),SI.__exportStar(cce(),t)})(QS)),QS}var fM;function uce(){return fM||(fM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=SI;e.__exportStar(oce(),t),e.__exportStar(ace(),t),e.__exportStar(lce(),t),e.__exportStar(Aj(),t)})(zS)),zS}var Ve=uce();class Ep{}let dce=class extends Ep{constructor(e){super()}};const pM=Ve.FIVE_SECONDS,Ap={pulse:"heartbeat_pulse"};let hce=class Cj extends dce{constructor(e){super(e),this.events=new ya.EventEmitter,this.interval=pM,this.interval=e?.interval||pM}static async init(e){const n=new Cj(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ve.toMiliseconds(this.interval))}pulse(){this.events.emit(Ap.pulse)}};const fce=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,pce=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,mce=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function gce(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){yce(t);return}return e}function yce(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function lE(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!mce.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(fce.test(t)||pce.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,gce)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function wce(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function ys(t,...e){try{return wce(t(...e))}catch(n){return Promise.reject(n)}}function vce(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function bce(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function XE(t){if(vce(t))return String(t);if(bce(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return XE(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const EP="base64:";function _ce(t){return typeof t=="string"?t:EP+Cce(t)}function Ece(t){return typeof t!="string"||!t.startsWith(EP)?t:Ace(t.slice(EP.length))}function Ace(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Cce(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Mi(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Ice(...t){return Mi(t.join(":"))}function uE(t){return t=Mi(t),t?t+":":""}function Tce(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Sce(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const xce="memory",Pce=()=>{const t=new Map;return{name:xce,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Rce(t={}){const e={mounts:{"":t.driver||Pce()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Mi(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await mM(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=m=>{let g=h.get(m.base);return g||(g={driver:m.driver,base:m.base,items:[]},h.set(m.base,g)),g};for(const m of l){const g=typeof m=="string",y=Mi(g?m:m.key),v=g?void 0:m.value,_=g||!m.options?u:{...u,...m.options},A=n(y);f(A).items.push({key:y,value:v,relativeKey:A.relativeKey,options:_})}return Promise.all([...h.values()].map(m=>d(m))).then(m=>m.flat())},c={hasItem(l,u={}){l=Mi(l);const{relativeKey:d,driver:h}=n(l);return ys(h.hasItem,d,u)},getItem(l,u={}){l=Mi(l);const{relativeKey:d,driver:h}=n(l);return ys(h.getItem,d,u).then(f=>lE(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?ys(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:Ice(d.base,f.key),value:lE(f.value)}))):Promise.all(d.items.map(h=>ys(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:lE(f)})))))},getItemRaw(l,u={}){l=Mi(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?ys(h.getItemRaw,d,u):ys(h.getItem,d,u).then(f=>Ece(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Mi(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await ys(f.setItem,h,XE(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return ys(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:XE(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>ys(d.driver.setItem,h.relativeKey,XE(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Mi(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await ys(f.setItemRaw,h,u,d);else if(f.setItem)await ys(f.setItem,h,_ce(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Mi(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await ys(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await ys(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Mi(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await ys(h.getMeta,d,u)),!u.nativeOnly){const m=await ys(h.getItem,d+"$",u).then(g=>lE(g));m&&typeof m=="object"&&(typeof m.atime=="string"&&(m.atime=new Date(m.atime)),typeof m.mtime=="string"&&(m.mtime=new Date(m.mtime)),Object.assign(f,m))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=uE(l);const d=r(l,!0);let h=[];const f=[];let m=!0;for(const y of d){y.driver.flags?.maxDepth||(m=!1);const v=await ys(y.driver.getKeys,y.relativeBase,u);for(const _ of v){const A=y.mountpoint+Mi(_);h.some(k=>A.startsWith(k))||f.push(A)}h=[y.mountpoint,...h.filter(_=>!_.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!m;return f.filter(y=>(!g||Tce(y,u.maxDepth))&&Sce(y,l))},async clear(l,u={}){l=uE(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return ys(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>gM(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=uE(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(mM(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){l=uE(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await gM(e.mounts[l]),e.mountpoints=e.mountpoints.filter(d=>d!==l),delete e.mounts[l])},getMount(l=""){l=Mi(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Mi(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function mM(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function gM(t){typeof t.dispose=="function"&&await ys(t.dispose)}function Cp(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Ij(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Cp(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let YS;function $b(){return YS||(YS=Ij("keyval-store","keyval")),YS}function yM(t,e=$b()){return e("readonly",n=>Cp(n.get(t)))}function Nce(t,e,n=$b()){return n("readwrite",r=>(r.put(e,t),Cp(r.transaction)))}function Oce(t,e=$b()){return e("readwrite",n=>(n.delete(t),Cp(n.transaction)))}function kce(t=$b()){return t("readwrite",e=>(e.clear(),Cp(e.transaction)))}function Dce(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Cp(t.transaction)}function Mce(t=$b()){return t("readonly",e=>{if(e.getAllKeys)return Cp(e.getAllKeys());const n=[];return Dce(e,r=>n.push(r.key)).then(()=>n)})}const Bce=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Lce=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function zf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Lce(t)}catch{return t}}function pu(t){return typeof t=="string"?t:Bce(t)||""}const $ce="idb-keyval";var Uce=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=Ij(t.dbName,t.storeName)),{name:$ce,options:t,async hasItem(s){return!(typeof await yM(n(s),r)>"u")},async getItem(s){return await yM(n(s),r)??null},setItem(s,i){return Nce(n(s),i,r)},removeItem(s){return Oce(n(s),r)},getKeys(){return Mce(r)},clear(){return kce(r)}}};const Fce="WALLET_CONNECT_V2_INDEXED_DB",jce="keyvaluestorage";let Vce=class{constructor(){this.indexedDb=Rce({driver:Uce({dbName:Fce,storeName:jce})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,pu(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var ZS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e1={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ZS<"u"&&ZS.localStorage?e1.exports=ZS.localStorage:typeof window<"u"&&window.localStorage?e1.exports=window.localStorage:e1.exports=new e})();function Hce(t){var e;return[t[0],zf((e=t[1])!=null?e:"")]}let qce=class{constructor(){this.localStorage=e1.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Hce)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return zf(n)}async setItem(e,n){this.localStorage.setItem(e,pu(n))}async removeItem(e){this.localStorage.removeItem(e)}};const zce="wc_storage_version",wM=1,Wce=async(t,e,n)=>{const r=zce,s=await e.getItem(r);if(s&&s>=wM){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,wM),n(e),Gce(t,o)},Gce=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Kce=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new qce;this.storage=e;try{const n=new Vce;Wce(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var JS,vM;function Qce(){if(vM)return JS;vM=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}JS=e;function e(n,r,s){var i=s&&s.stringify||t,o=1;if(typeof n=="object"&&n!==null){var a=r.length+o;if(a===1)return n;var c=new Array(a);c[0]=i(n);for(var l=1;l<a;l++)c[l]=i(r[l]);return c.join(" ")}if(typeof n!="string")return n;var u=r.length;if(u===0)return n;for(var d="",h=1-o,f=-1,m=n&&n.length||0,g=0;g<m;){if(n.charCodeAt(g)===37&&g+1<m){switch(f=f>-1?f:0,n.charCodeAt(g+1)){case 100:case 102:if(h>=u||r[h]==null)break;f<g&&(d+=n.slice(f,g)),d+=Number(r[h]),f=g+2,g++;break;case 105:if(h>=u||r[h]==null)break;f<g&&(d+=n.slice(f,g)),d+=Math.floor(Number(r[h])),f=g+2,g++;break;case 79:case 111:case 106:if(h>=u||r[h]===void 0)break;f<g&&(d+=n.slice(f,g));var y=typeof r[h];if(y==="string"){d+="'"+r[h]+"'",f=g+2,g++;break}if(y==="function"){d+=r[h].name||"<anonymous>",f=g+2,g++;break}d+=i(r[h]),f=g+2,g++;break;case 115:if(h>=u)break;f<g&&(d+=n.slice(f,g)),d+=String(r[h]),f=g+2,g++;break;case 37:f<g&&(d+=n.slice(f,g)),d+="%",f=g+2,g++,h--;break}++h}++g}return f===-1?n:(f<m&&(d+=n.slice(f)),d)}return JS}var XS,bM;function Yce(){if(bM)return XS;bM=1;const t=Qce();XS=s;const e=S().console||{},n={mapHttpRequest:m,mapHttpResponse:m,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:m,res:m,err:h};function r(R,T){return Array.isArray(R)?R.filter(function(E){return E!=="!stdSerializers.err"}):R===!0?Object.keys(T):!1}function s(R){R=R||{},R.browser=R.browser||{};const T=R.browser.transmit;if(T&&typeof T.send!="function")throw Error("pino: transmit option must have a send function");const b=R.browser.write||e;R.browser.write&&(R.browser.asObject=!0);const E=R.serializers||{},x=r(R.browser.serialize,E);let D=R.browser.serialize;Array.isArray(R.browser.serialize)&&R.browser.serialize.indexOf("!stdSerializers.err")>-1&&(D=!1);const M=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),R.enabled===!1&&(R.level="silent");const $=R.level||"info",X=Object.create(b);X.log||(X.log=y),Object.defineProperty(X,"levelVal",{get:L}),Object.defineProperty(X,"level",{get:W,set:Y});const P={transmit:T,serialize:x,asObject:R.browser.asObject,levels:M,timestamp:f(R)};X.levels=s.levels,X.level=$,X.setMaxListeners=X.getMaxListeners=X.emit=X.addListener=X.on=X.prependListener=X.once=X.prependOnceListener=X.removeListener=X.removeAllListeners=X.listeners=X.listenerCount=X.eventNames=X.write=X.flush=y,X.serializers=E,X._serialize=x,X._stdErrSerialize=D,X.child=J,T&&(X._logEvent=d());function L(){return this.level==="silent"?1/0:this.levels.values[this.level]}function W(){return this._level}function Y(V){if(V!=="silent"&&!this.levels.values[V])throw Error("unknown level "+V);this._level=V,i(P,X,"error","log"),i(P,X,"fatal","error"),i(P,X,"warn","error"),i(P,X,"info","log"),i(P,X,"debug","log"),i(P,X,"trace","log")}function J(V,se){if(!V)throw new Error("missing bindings for child Pino");se=se||{},x&&V.serializers&&(se.serializers=V.serializers);const ue=se.serializers;if(x&&ue){var Ee=Object.assign({},E,ue),pe=R.browser.serialize===!0?Object.keys(Ee):x;delete V.serializers,c([V],pe,Ee,this._stdErrSerialize)}function Se(Me){this._childLevel=(Me._childLevel|0)+1,this.error=l(Me,V,"error"),this.fatal=l(Me,V,"fatal"),this.warn=l(Me,V,"warn"),this.info=l(Me,V,"info"),this.debug=l(Me,V,"debug"),this.trace=l(Me,V,"trace"),Ee&&(this.serializers=Ee,this._serialize=pe),T&&(this._logEvent=d([].concat(Me._logEvent.bindings,V)))}return Se.prototype=this,new Se(this)}return X}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=n,s.stdTimeFunctions=Object.assign({},{nullTime:v,epochTime:_,unixTime:A,isoTime:k});function i(R,T,b,E){const x=Object.getPrototypeOf(T);T[b]=T.levelVal>T.levels.values[b]?y:x[b]?x[b]:e[b]||e[E]||y,o(R,T,b)}function o(R,T,b){!R.transmit&&T[b]===y||(T[b]=(function(E){return function(){const D=R.timestamp(),M=new Array(arguments.length),$=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var X=0;X<M.length;X++)M[X]=arguments[X];if(R.serialize&&!R.asObject&&c(M,this._serialize,this.serializers,this._stdErrSerialize),R.asObject?E.call($,a(this,b,M,D)):E.apply($,M),R.transmit){const P=R.transmit.level||T.level,L=s.levels.values[P],W=s.levels.values[b];if(W<L)return;u(this,{ts:D,methodLevel:b,methodValue:W,transmitValue:s.levels.values[R.transmit.level||T.level],send:R.transmit.send,val:T.levelVal},M)}}})(T[b]))}function a(R,T,b,E){R._serialize&&c(b,R._serialize,R.serializers,R._stdErrSerialize);const x=b.slice();let D=x[0];const M={};E&&(M.time=E),M.level=s.levels.values[T];let $=(R._childLevel|0)+1;if($<1&&($=1),D!==null&&typeof D=="object"){for(;$--&&typeof x[0]=="object";)Object.assign(M,x.shift());D=x.length?t(x.shift(),x):void 0}else typeof D=="string"&&(D=t(x.shift(),x));return D!==void 0&&(M.msg=D),M}function c(R,T,b,E){for(const x in R)if(E&&R[x]instanceof Error)R[x]=s.stdSerializers.err(R[x]);else if(typeof R[x]=="object"&&!Array.isArray(R[x]))for(const D in R[x])T&&T.indexOf(D)>-1&&D in b&&(R[x][D]=b[D](R[x][D]))}function l(R,T,b){return function(){const E=new Array(1+arguments.length);E[0]=T;for(var x=1;x<E.length;x++)E[x]=arguments[x-1];return R[b].apply(this,E)}}function u(R,T,b){const E=T.send,x=T.ts,D=T.methodLevel,M=T.methodValue,$=T.val,X=R._logEvent.bindings;c(b,R._serialize||Object.keys(R.serializers),R.serializers,R._stdErrSerialize===void 0?!0:R._stdErrSerialize),R._logEvent.ts=x,R._logEvent.messages=b.filter(function(P){return X.indexOf(P)===-1}),R._logEvent.level.label=D,R._logEvent.level.value=M,E(D,R._logEvent,$),R._logEvent=d(X)}function d(R){return{ts:0,messages:[],bindings:R||[],level:{label:"",value:0}}}function h(R){const T={type:R.constructor.name,msg:R.message,stack:R.stack};for(const b in R)T[b]===void 0&&(T[b]=R[b]);return T}function f(R){return typeof R.timestamp=="function"?R.timestamp:R.timestamp===!1?v:_}function m(){return{}}function g(R){return R}function y(){}function v(){return!1}function _(){return Date.now()}function A(){return Math.round(Date.now()/1e3)}function k(){return new Date(Date.now()).toISOString()}function S(){function R(T){return typeof T<"u"&&T}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return R(self)||R(window)||R(this)||{}}}return XS}var Sm=Yce();const Ub=ny(Sm),Zce={level:"info"},Fb="custom_context",zO=1e3*1024;let Jce=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},_M=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Jce(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},Tj=class{constructor(e,n=zO){this.level=e??"error",this.levelValue=Sm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new _M(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Sm.levels.values.error?console.error(e):n===Sm.levels.values.warn?console.warn(e):n===Sm.levels.values.debug?console.debug(e):n===Sm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(pu({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new _M(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(pu({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Xce=class{constructor(e,n=zO){this.baseChunkLogger=new Tj(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},ele=class{constructor(e,n=zO){this.baseChunkLogger=new Tj(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var tle=Object.defineProperty,nle=Object.defineProperties,rle=Object.getOwnPropertyDescriptors,EM=Object.getOwnPropertySymbols,sle=Object.prototype.hasOwnProperty,ile=Object.prototype.propertyIsEnumerable,AM=(t,e,n)=>e in t?tle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iA=(t,e)=>{for(var n in e||(e={}))sle.call(e,n)&&AM(t,n,e[n]);if(EM)for(var n of EM(e))ile.call(e,n)&&AM(t,n,e[n]);return t},oA=(t,e)=>nle(t,rle(e));function cy(t){return oA(iA({},t),{level:t?.level||Zce.level})}function ole(t,e=Fb){return t[e]||""}function ale(t,e,n=Fb){return t[n]=e,t}function so(t,e=Fb){let n="";return typeof t.bindings>"u"?n=ole(t,e):n=t.bindings().context||"",n}function cle(t,e,n=Fb){const r=so(t,n);return r.trim()?`${r}/${e}`:e}function si(t,e,n=Fb){const r=cle(t,e,n),s=t.child({context:r});return ale(s,r,n)}function lle(t){var e,n;const r=new Xce((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ub(oA(iA({},t.opts),{level:"trace",browser:oA(iA({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function ule(t){var e;const n=new ele((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ub(oA(iA({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function WO(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?lle(t):ule(t)}function dle(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Sj(t,...e){if(!dle(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function CM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hle(t,e){Sj(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const rm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ex=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function fle(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function xj(t){return typeof t=="string"&&(t=fle(t)),Sj(t),t}let ple=class{clone(){return this._cloneInto()}};function mle(t){const e=r=>t().update(xj(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Pj(t=32){if(rm&&typeof rm.getRandomValues=="function")return rm.getRandomValues(new Uint8Array(t));if(rm&&typeof rm.randomBytes=="function")return rm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function gle(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let yle=class extends ple{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ex(this.buffer)}update(e){CM(this);const{view:n,buffer:r,blockLen:s}=this;e=xj(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=ex(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){CM(this),hle(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;gle(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=ex(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const dE=BigInt(2**32-1),AP=BigInt(32);function Rj(t,e=!1){return e?{h:Number(t&dE),l:Number(t>>AP&dE)}:{h:Number(t>>AP&dE)|0,l:Number(t&dE)|0}}function wle(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Rj(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const vle=(t,e)=>BigInt(t>>>0)<<AP|BigInt(e>>>0),ble=(t,e,n)=>t>>>n,_le=(t,e,n)=>t<<32-n|e>>>n,Ele=(t,e,n)=>t>>>n|e<<32-n,Ale=(t,e,n)=>t<<32-n|e>>>n,Cle=(t,e,n)=>t<<64-n|e>>>n-32,Ile=(t,e,n)=>t>>>n-32|e<<64-n,Tle=(t,e)=>e,Sle=(t,e)=>t,xle=(t,e,n)=>t<<n|e>>>32-n,Ple=(t,e,n)=>e<<n|t>>>32-n,Rle=(t,e,n)=>e<<n-32|t>>>64-n,Nle=(t,e,n)=>t<<n-32|e>>>64-n;function Ole(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const kle=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Dle=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Mle=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ble=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Lle=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),$le=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Xt={fromBig:Rj,split:wle,toBig:vle,shrSH:ble,shrSL:_le,rotrSH:Ele,rotrSL:Ale,rotrBH:Cle,rotrBL:Ile,rotr32H:Tle,rotr32L:Sle,rotlSH:xle,rotlSL:Ple,rotlBH:Rle,rotlBL:Nle,add:Ole,add3L:kle,add3H:Dle,add4L:Mle,add4H:Ble,add5H:$le,add5L:Lle},[Ule,Fle]=Xt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),td=new Uint32Array(80),nd=new Uint32Array(80);let jle=class extends yle{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:m,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,m,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,m,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=m|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let A=0;A<16;A++,n+=4)td[A]=e.getUint32(n),nd[A]=e.getUint32(n+=4);for(let A=16;A<80;A++){const k=td[A-15]|0,S=nd[A-15]|0,R=Xt.rotrSH(k,S,1)^Xt.rotrSH(k,S,8)^Xt.shrSH(k,S,7),T=Xt.rotrSL(k,S,1)^Xt.rotrSL(k,S,8)^Xt.shrSL(k,S,7),b=td[A-2]|0,E=nd[A-2]|0,x=Xt.rotrSH(b,E,19)^Xt.rotrBH(b,E,61)^Xt.shrSH(b,E,6),D=Xt.rotrSL(b,E,19)^Xt.rotrBL(b,E,61)^Xt.shrSL(b,E,6),M=Xt.add4L(T,D,nd[A-7],nd[A-16]),$=Xt.add4H(M,R,x,td[A-7],td[A-16]);td[A]=$|0,nd[A]=M|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:m,Gh:g,Gl:y,Hh:v,Hl:_}=this;for(let A=0;A<80;A++){const k=Xt.rotrSH(d,h,14)^Xt.rotrSH(d,h,18)^Xt.rotrBH(d,h,41),S=Xt.rotrSL(d,h,14)^Xt.rotrSL(d,h,18)^Xt.rotrBL(d,h,41),R=d&f^~d&g,T=h&m^~h&y,b=Xt.add5L(_,S,T,Fle[A],nd[A]),E=Xt.add5H(b,v,k,R,Ule[A],td[A]),x=b|0,D=Xt.rotrSH(r,s,28)^Xt.rotrBH(r,s,34)^Xt.rotrBH(r,s,39),M=Xt.rotrSL(r,s,28)^Xt.rotrBL(r,s,34)^Xt.rotrBL(r,s,39),$=r&i^r&a^i&a,X=s&o^s&c^o&c;v=g|0,_=y|0,g=f|0,y=m|0,f=d|0,m=h|0,{h:d,l:h}=Xt.add(l|0,u|0,E|0,x|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const P=Xt.add3L(x,M,X);r=Xt.add3H(P,E,D,$),s=P|0}({h:r,l:s}=Xt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Xt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Xt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Xt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Xt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:m}=Xt.add(this.Fh|0,this.Fl|0,f|0,m|0),{h:g,l:y}=Xt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:v,l:_}=Xt.add(this.Hh|0,this.Hl|0,v|0,_|0),this.set(r,s,i,o,a,c,l,u,d,h,f,m,g,y,v,_)}roundClean(){td.fill(0),nd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Vle=mle(()=>new jle);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const GO=BigInt(0),Nj=BigInt(1),Hle=BigInt(2);function KO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function QO(t){if(!KO(t))throw new Error("Uint8Array expected")}function tx(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const qle=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function YO(t){QO(t);let e="";for(let n=0;n<t.length;n++)e+=qle[t[n]];return e}function Oj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?GO:BigInt("0x"+t)}const Il={_0:48,_9:57,A:65,F:70,a:97,f:102};function IM(t){if(t>=Il._0&&t<=Il._9)return t-Il._0;if(t>=Il.A&&t<=Il.F)return t-(Il.A-10);if(t>=Il.a&&t<=Il.f)return t-(Il.a-10)}function kj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=IM(t.charCodeAt(i)),a=IM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function zle(t){return Oj(YO(t))}function t1(t){return QO(t),Oj(YO(Uint8Array.from(t).reverse()))}function Dj(t,e){return kj(t.toString(16).padStart(e*2,"0"))}function CP(t,e){return Dj(t,e).reverse()}function Tl(t,e,n){let r;if(typeof e=="string")try{r=kj(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(KO(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function TM(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];QO(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const nx=t=>typeof t=="bigint"&&GO<=t;function Wle(t,e,n){return nx(t)&&nx(e)&&nx(n)&&e<=t&&t<n}function m0(t,e,n,r){if(!Wle(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Gle(t){let e;for(e=0;t>GO;t>>=Nj,e+=1);return e}const Kle=t=>(Hle<<BigInt(t-1))-Nj,Qle={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||KO(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ZO(t,e,n={}){const r=(s,i,o)=>{const a=Qle[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function SM(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Es=BigInt(0),Fr=BigInt(1),sf=BigInt(2),Yle=BigInt(3),IP=BigInt(4),xM=BigInt(5),PM=BigInt(8);function ns(t,e){const n=t%e;return n>=Es?n:e+n}function Zle(t,e,n){if(e<Es)throw new Error("invalid exponent, negatives unsupported");if(n<=Es)throw new Error("invalid modulus");if(n===Fr)return Es;let r=Fr;for(;e>Es;)e&Fr&&(r=r*t%n),t=t*t%n,e>>=Fr;return r}function fc(t,e,n){let r=t;for(;e-- >Es;)r*=r,r%=n;return r}function RM(t,e){if(t===Es)throw new Error("invert: expected non-zero number");if(e<=Es)throw new Error("invert: expected positive modulus, got "+e);let n=ns(t,e),r=e,s=Es,i=Fr;for(;n!==Es;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Fr)throw new Error("invert: does not exist");return ns(s,e)}function Jle(t){const e=(t-Fr)/sf;let n,r,s;for(n=t-Fr,r=0;n%sf===Es;n/=sf,r++);for(s=sf;s<t&&Zle(s,e,t)!==t-Fr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Fr)/IP;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Fr)/sf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let m=o.sqr(d);h<c&&!o.eql(m,o.ONE);h++)m=o.sqr(m);const f=o.pow(l,Fr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Xle(t){if(t%IP===Yle){const e=(t+Fr)/IP;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%PM===xM){const e=(t-xM)/PM;return function(n,r){const s=n.mul(r,sf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,sf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Jle(t)}const eue=(t,e)=>(ns(t,e)&Fr)===Fr,tue=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nue(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=tue.reduce((r,s)=>(r[s]="function",r),e);return ZO(t,n)}function rue(t,e,n){if(n<Es)throw new Error("invalid exponent, negatives unsupported");if(n===Es)return t.ONE;if(n===Fr)return e;let r=t.ONE,s=e;for(;n>Es;)n&Fr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Fr;return r}function sue(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Mj(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Bj(t,e,n=!1,r={}){if(t<=Es)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Mj(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Kle(s),ZERO:Es,ONE:Fr,create:c=>ns(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Es<=c&&c<t},is0:c=>c===Es,isOdd:c=>(c&Fr)===Fr,neg:c=>ns(-c,t),eql:(c,l)=>c===l,sqr:c=>ns(c*c,t),add:(c,l)=>ns(c+l,t),sub:(c,l)=>ns(c-l,t),mul:(c,l)=>ns(c*l,t),pow:(c,l)=>rue(a,c,l),div:(c,l)=>ns(c*RM(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>RM(c,t),sqrt:r.sqrt||(c=>(o||(o=Xle(t)),o(a,c))),invertBatch:c=>sue(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?CP(c,i):Dj(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?t1(c):zle(c)}});return Object.freeze(a)}const NM=BigInt(0),hE=BigInt(1);function rx(t,e){const n=e.negate();return t?n:e}function Lj(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function sx(t,e){Lj(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function iue(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function oue(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const ix=new WeakMap,$j=new WeakMap;function ox(t){return $j.get(t)||1}function aue(t,e){return{constTimeNegate:rx,hasPrecomputes(n){return ox(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>NM;)r&hE&&(s=s.add(i)),i=i.double(),r>>=hE;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=sx(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=sx(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let m=Number(s&l);s>>=d,m>o&&(m-=u,s+=hE);const g=f,y=f+Math.abs(m)-1,v=h%2!==0,_=m<0;m===0?c=c.add(rx(v,r[g])):a=a.add(rx(_,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=sx(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===NM)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=hE),f===0)continue;let m=r[h+Math.abs(f)-1];f<0&&(m=m.negate()),i=i.add(m)}return i},getPrecomputes(n,r,s){let i=ix.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&ix.set(r,s(i))),i},wNAFCached(n,r,s){const i=ox(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=ox(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){Lj(r,e),$j.set(n,r),ix.delete(n)}}}function cue(t,e,n,r){if(iue(n,t),oue(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Gle(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const m=r[f],g=Number(m>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,m=s;f>0;f--)m=m.add(c[f]),h=h.add(m);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function lue(t){return nue(t.Fp),ZO(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Mj(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Ia=BigInt(0),Oi=BigInt(1),fE=BigInt(2),uue=BigInt(8),due={zip215:!0};function hue(t){const e=lue(t);return ZO(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function fue(t){const e=hue(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=fE<<BigInt(a*8)-Oi,u=n.create,d=Bj(e.n,e.nBitLength),h=e.uvRatio||((P,L)=>{try{return{isValid:!0,value:n.sqrt(P*n.inv(L))}}catch{return{isValid:!1,value:Ia}}}),f=e.adjustScalarBytes||(P=>P),m=e.domain||((P,L,W)=>{if(tx("phflag",W),L.length||W)throw new Error("Contexts/pre-hash are not supported");return P});function g(P,L){m0("coordinate "+P,L,Ia,l)}function y(P){if(!(P instanceof A))throw new Error("ExtendedPoint expected")}const v=SM((P,L)=>{const{ex:W,ey:Y,ez:J}=P,V=P.is0();L==null&&(L=V?uue:n.inv(J));const se=u(W*L),ue=u(Y*L),Ee=u(J*L);if(V)return{x:Ia,y:Oi};if(Ee!==Oi)throw new Error("invZ was invalid");return{x:se,y:ue}}),_=SM(P=>{const{a:L,d:W}=e;if(P.is0())throw new Error("bad point: ZERO");const{ex:Y,ey:J,ez:V,et:se}=P,ue=u(Y*Y),Ee=u(J*J),pe=u(V*V),Se=u(pe*pe),Me=u(ue*L),ce=u(pe*u(Me+Ee)),oe=u(Se+u(W*u(ue*Ee)));if(ce!==oe)throw new Error("bad point: equation left != right (1)");const ge=u(Y*J),Ne=u(V*se);if(ge!==Ne)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(L,W,Y,J){this.ex=L,this.ey=W,this.ez=Y,this.et=J,g("x",L),g("y",W),g("z",Y),g("t",J),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(L){if(L instanceof A)throw new Error("extended point not allowed");const{x:W,y:Y}=L||{};return g("x",W),g("y",Y),new A(W,Y,Oi,u(W*Y))}static normalizeZ(L){const W=n.invertBatch(L.map(Y=>Y.ez));return L.map((Y,J)=>Y.toAffine(W[J])).map(A.fromAffine)}static msm(L,W){return cue(A,d,L,W)}_setWindowSize(L){R.setWindowSize(this,L)}assertValidity(){_(this)}equals(L){y(L);const{ex:W,ey:Y,ez:J}=this,{ex:V,ey:se,ez:ue}=L,Ee=u(W*ue),pe=u(V*J),Se=u(Y*ue),Me=u(se*J);return Ee===pe&&Se===Me}is0(){return this.equals(A.ZERO)}negate(){return new A(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:L}=e,{ex:W,ey:Y,ez:J}=this,V=u(W*W),se=u(Y*Y),ue=u(fE*u(J*J)),Ee=u(L*V),pe=W+Y,Se=u(u(pe*pe)-V-se),Me=Ee+se,ce=Me-ue,oe=Ee-se,ge=u(Se*ce),Ne=u(Me*oe),mt=u(Se*oe),Q=u(ce*Me);return new A(ge,Ne,Q,mt)}add(L){y(L);const{a:W,d:Y}=e,{ex:J,ey:V,ez:se,et:ue}=this,{ex:Ee,ey:pe,ez:Se,et:Me}=L;if(W===BigInt(-1)){const De=u((V-J)*(pe+Ee)),ke=u((V+J)*(pe-Ee)),Ie=u(ke-De);if(Ie===Ia)return this.double();const Qe=u(se*fE*Me),Le=u(ue*fE*Se),tt=Le+Qe,Je=ke+De,ft=Le-Qe,F=u(tt*Ie),C=u(Je*ft),N=u(tt*ft),G=u(Ie*Je);return new A(F,C,G,N)}const ce=u(J*Ee),oe=u(V*pe),ge=u(ue*Y*Me),Ne=u(se*Se),mt=u((J+V)*(Ee+pe)-ce-oe),Q=Ne-ge,Z=Ne+ge,te=u(oe-W*ce),me=u(mt*Q),we=u(Z*te),ve=u(mt*te),He=u(Q*Z);return new A(me,we,He,ve)}subtract(L){return this.add(L.negate())}wNAF(L){return R.wNAFCached(this,L,A.normalizeZ)}multiply(L){const W=L;m0("scalar",W,Oi,r);const{p:Y,f:J}=this.wNAF(W);return A.normalizeZ([Y,J])[0]}multiplyUnsafe(L,W=A.ZERO){const Y=L;return m0("scalar",Y,Ia,r),Y===Ia?S:this.is0()||Y===Oi?this:R.wNAFCachedUnsafe(this,Y,A.normalizeZ,W)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return R.unsafeLadder(this,r).is0()}toAffine(L){return v(this,L)}clearCofactor(){const{h:L}=e;return L===Oi?this:this.multiplyUnsafe(L)}static fromHex(L,W=!1){const{d:Y,a:J}=e,V=n.BYTES;L=Tl("pointHex",L,V),tx("zip215",W);const se=L.slice(),ue=L[V-1];se[V-1]=ue&-129;const Ee=t1(se),pe=W?l:n.ORDER;m0("pointHex.y",Ee,Ia,pe);const Se=u(Ee*Ee),Me=u(Se-Oi),ce=u(Y*Se-J);let{isValid:oe,value:ge}=h(Me,ce);if(!oe)throw new Error("Point.fromHex: invalid y coordinate");const Ne=(ge&Oi)===Oi,mt=(ue&128)!==0;if(!W&&ge===Ia&&mt)throw new Error("Point.fromHex: x=0 and x_0=1");return mt!==Ne&&(ge=u(-ge)),A.fromAffine({x:ge,y:Ee})}static fromPrivateKey(L){return E(L).point}toRawBytes(){const{x:L,y:W}=this.toAffine(),Y=CP(W,n.BYTES);return Y[Y.length-1]|=L&Oi?128:0,Y}toHex(){return YO(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,Oi,u(e.Gx*e.Gy)),A.ZERO=new A(Ia,Oi,Oi,Ia);const{BASE:k,ZERO:S}=A,R=aue(A,a*8);function T(P){return ns(P,r)}function b(P){return T(t1(P))}function E(P){const L=n.BYTES;P=Tl("private key",P,L);const W=Tl("hashed private key",i(P),2*L),Y=f(W.slice(0,L)),J=W.slice(L,2*L),V=b(Y),se=k.multiply(V),ue=se.toRawBytes();return{head:Y,prefix:J,scalar:V,point:se,pointBytes:ue}}function x(P){return E(P).pointBytes}function D(P=new Uint8Array,...L){const W=TM(...L);return b(i(m(W,Tl("context",P),!!s)))}function M(P,L,W={}){P=Tl("message",P),s&&(P=s(P));const{prefix:Y,scalar:J,pointBytes:V}=E(L),se=D(W.context,Y,P),ue=k.multiply(se).toRawBytes(),Ee=D(W.context,ue,V,P),pe=T(se+Ee*J);m0("signature.s",pe,Ia,r);const Se=TM(ue,CP(pe,n.BYTES));return Tl("result",Se,n.BYTES*2)}const $=due;function X(P,L,W,Y=$){const{context:J,zip215:V}=Y,se=n.BYTES;P=Tl("signature",P,2*se),L=Tl("message",L),W=Tl("publicKey",W,se),V!==void 0&&tx("zip215",V),s&&(L=s(L));const ue=t1(P.slice(se,2*se));let Ee,pe,Se;try{Ee=A.fromHex(W,V),pe=A.fromHex(P.slice(0,se),V),Se=k.multiplyUnsafe(ue)}catch{return!1}if(!V&&Ee.isSmallOrder())return!1;const Me=D(J,pe.toRawBytes(),Ee.toRawBytes(),L);return pe.add(Ee.multiplyUnsafe(Me)).subtract(Se).clearCofactor().equals(A.ZERO)}return k._setWindowSize(8),{CURVE:e,getPublicKey:x,sign:M,verify:X,ExtendedPoint:A,utils:{getExtendedPublicKey:E,randomPrivateKey:()=>o(n.BYTES),precompute(P=8,L=A.BASE){return L._setWindowSize(P),L.multiply(BigInt(3)),L}}}}BigInt(0),BigInt(1);const JO=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),OM=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const pue=BigInt(1),kM=BigInt(2);BigInt(3);const mue=BigInt(5),gue=BigInt(8);function yue(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=JO,o=t*t%i*t%i,a=fc(o,kM,i)*o%i,c=fc(a,pue,i)*t%i,l=fc(c,mue,i)*c%i,u=fc(l,e,i)*l%i,d=fc(u,n,i)*u%i,h=fc(d,r,i)*d%i,f=fc(h,s,i)*h%i,m=fc(f,s,i)*h%i,g=fc(m,e,i)*l%i;return{pow_p_5_8:fc(g,kM,i)*t%i,b2:o}}function wue(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function vue(t,e){const n=JO,r=ns(e*e*e,n),s=ns(r*r*e,n),i=yue(t*s).pow_p_5_8;let o=ns(t*r*i,n);const a=ns(e*o*o,n),c=o,l=ns(o*OM,n),u=a===t,d=a===ns(-t,n),h=a===ns(-t*OM,n);return u&&(o=c),(d||h)&&(o=l),eue(o,n)&&(o=ns(-o,n)),{isValid:u||d,value:o}}const bue=Bj(JO,void 0,!0),_ue={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:bue,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:gue,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Vle,randomBytes:Pj,adjustScalarBytes:wue,uvRatio:vue},Uj=fue(_ue),Eue="EdDSA",Aue="JWT",aA=".",xI="base64url",Fj="utf8",jj="utf8",Cue=":",Iue="did",Tue="key",DM="base58btc",Sue="z",xue="K36",Pue=32;function XO(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Vj(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?XO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Hj(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Vj(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return XO(n)}function Rue(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var g=0,y=0,v=0,_=m.length;v!==_&&m[v]===0;)v++,g++;for(var A=(_-v)*u+1>>>0,k=new Uint8Array(A);v!==_;){for(var S=m[v],R=0,T=A-1;(S!==0||R<y)&&T!==-1;T--,R++)S+=256*k[T]>>>0,k[T]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");y=R,v++}for(var b=A-y;b!==A&&k[b]===0;)b++;for(var E=c.repeat(g);b<A;++b)E+=t.charAt(k[b]);return E}function h(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var g=0;if(m[g]!==" "){for(var y=0,v=0;m[g]===c;)y++,g++;for(var _=(m.length-g)*l+1>>>0,A=new Uint8Array(_);m[g];){var k=n[m.charCodeAt(g)];if(k===255)return;for(var S=0,R=_-1;(k!==0||S<v)&&R!==-1;R--,S++)k+=a*A[R]>>>0,A[R]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");v=S,g++}if(m[g]!==" "){for(var T=_-v;T!==_&&A[T]===0;)T++;for(var b=new Uint8Array(y+(_-T)),E=y;T!==_;)b[E++]=A[T++];return b}}}function f(m){var g=h(m);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Nue=Rue,Oue=Nue;const qj=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},kue=t=>new TextEncoder().encode(t),Due=t=>new TextDecoder().decode(t);let Mue=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Bue=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return zj(this,e)}},Lue=class{constructor(e){this.decoders=e}or(e){return zj(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const zj=(t,e)=>new Lue({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let $ue=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Mue(e,n,r),this.decoder=new Bue(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const PI=({name:t,prefix:e,encode:n,decode:r})=>new $ue(t,e,n,r),jb=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Oue(n,e);return PI({prefix:t,name:e,encode:r,decode:i=>qj(s(i))})},Uue=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Fue=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ls=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>PI({prefix:e,name:t,encode(s){return Fue(s,r,n)},decode(s){return Uue(s,r,n,t)}}),jue=PI({prefix:"\0",name:"identity",encode:t=>Due(t),decode:t=>kue(t)});var Vue=Object.freeze({__proto__:null,identity:jue});const Hue=Ls({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var que=Object.freeze({__proto__:null,base2:Hue});const zue=Ls({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Wue=Object.freeze({__proto__:null,base8:zue});const Gue=jb({prefix:"9",name:"base10",alphabet:"0123456789"});var Kue=Object.freeze({__proto__:null,base10:Gue});const Que=Ls({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Yue=Ls({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Zue=Object.freeze({__proto__:null,base16:Que,base16upper:Yue});const Jue=Ls({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xue=Ls({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ede=Ls({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tde=Ls({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),nde=Ls({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rde=Ls({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),sde=Ls({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ide=Ls({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ode=Ls({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ade=Object.freeze({__proto__:null,base32:Jue,base32upper:Xue,base32pad:ede,base32padupper:tde,base32hex:nde,base32hexupper:rde,base32hexpad:sde,base32hexpadupper:ide,base32z:ode});const cde=jb({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lde=jb({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ude=Object.freeze({__proto__:null,base36:cde,base36upper:lde});const dde=jb({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hde=jb({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var fde=Object.freeze({__proto__:null,base58btc:dde,base58flickr:hde});const pde=Ls({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mde=Ls({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gde=Ls({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yde=Ls({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wde=Object.freeze({__proto__:null,base64:pde,base64pad:mde,base64url:gde,base64urlpad:yde});const Wj=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),vde=Wj.reduce((t,e,n)=>(t[n]=e,t),[]),bde=Wj.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function _de(t){return t.reduce((e,n)=>(e+=vde[n],e),"")}function Ede(t){const e=[];for(const n of t){const r=bde[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Ade=PI({prefix:"🚀",name:"base256emoji",encode:_de,decode:Ede});var Cde=Object.freeze({__proto__:null,base256emoji:Ade}),Ide=Gj,MM=128,Tde=-128,Sde=Math.pow(2,31);function Gj(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Sde;)e[n++]=t&255|MM,t/=128;for(;t&Tde;)e[n++]=t&255|MM,t>>>=7;return e[n]=t|0,Gj.bytes=n-r+1,e}var xde=TP,Pde=128,BM=127;function TP(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw TP.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&BM)<<s:(o&BM)*Math.pow(2,s),s+=7}while(o>=Pde);return TP.bytes=i-r,n}var Rde=Math.pow(2,7),Nde=Math.pow(2,14),Ode=Math.pow(2,21),kde=Math.pow(2,28),Dde=Math.pow(2,35),Mde=Math.pow(2,42),Bde=Math.pow(2,49),Lde=Math.pow(2,56),$de=Math.pow(2,63),Ude=function(t){return t<Rde?1:t<Nde?2:t<Ode?3:t<kde?4:t<Dde?5:t<Mde?6:t<Bde?7:t<Lde?8:t<$de?9:10},Fde={encode:Ide,decode:xde,encodingLength:Ude},Kj=Fde;const LM=(t,e,n=0)=>(Kj.encode(t,e,n),e),$M=t=>Kj.encodingLength(t),SP=(t,e)=>{const n=e.byteLength,r=$M(t),s=r+$M(n),i=new Uint8Array(s+n);return LM(t,i,0),LM(n,i,r),i.set(e,s),new jde(t,n,e,i)};let jde=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const Qj=({name:t,code:e,encode:n})=>new Vde(t,e,n);let Vde=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?SP(this.code,n):n.then(r=>SP(this.code,r))}else throw Error("Unknown type, must be binary type")}};const Yj=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Hde=Qj({name:"sha2-256",code:18,encode:Yj("SHA-256")}),qde=Qj({name:"sha2-512",code:19,encode:Yj("SHA-512")});var zde=Object.freeze({__proto__:null,sha256:Hde,sha512:qde});const Zj=0,Wde="identity",Jj=qj,Gde=t=>SP(Zj,Jj(t)),Kde={code:Zj,name:Wde,encode:Jj,digest:Gde};var Qde=Object.freeze({__proto__:null,identity:Kde});new TextEncoder,new TextDecoder;const UM={...Vue,...que,...Wue,...Kue,...Zue,...ade,...ude,...fde,...wde,...Cde};({...zde,...Qde});function Xj(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const FM=Xj("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ax=Xj("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Vj(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),eV={utf8:FM,"utf-8":FM,hex:UM.base16,latin1:ax,ascii:ax,binary:ax,...UM};function RI(t,e="utf8"){const n=eV[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function ly(t,e="utf8"){const n=eV[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?XO(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function jM(t){return zf(RI(ly(t,xI),Fj))}function cA(t){return RI(ly(pu(t),Fj),xI)}function tV(t){const e=ly(xue,DM),n=Sue+RI(Hj([e,t]),DM);return[Iue,Tue,n].join(Cue)}function Yde(t){return RI(t,xI)}function Zde(t){return ly(t,xI)}function Jde(t){return ly([cA(t.header),cA(t.payload)].join(aA),jj)}function Xde(t){return[cA(t.header),cA(t.payload),Yde(t.signature)].join(aA)}function xP(t){const e=t.split(aA),n=jM(e[0]),r=jM(e[1]),s=Zde(e[2]),i=ly(e.slice(0,2).join(aA),jj);return{header:n,payload:r,signature:s,data:i}}function VM(t=Pj(Pue)){const e=Uj.getPublicKey(t);return{secretKey:Hj([t,e]),publicKey:e}}async function ehe(t,e,n,r,s=Ve.fromMiliseconds(Date.now())){const i={alg:Eue,typ:Aue},o=tV(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=Jde({header:i,payload:c}),u=Uj.sign(l,r.secretKey.slice(0,32));return Xde({header:i,payload:c,signature:u})}var HM=function(t,e,n){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},the=(function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t})(),nhe=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os="browser"}return t})(),rhe=(function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t})(),she=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),ihe=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),ohe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ahe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,qM=3,che=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ohe]],zM=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function lhe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ihe:typeof navigator<"u"?dhe(navigator.userAgent):fhe()}function uhe(t){return t!==""&&che.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function dhe(t){var e=uhe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new she;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<qM&&(s=HM(HM([],s,!0),phe(qM-s.length))):s=[];var i=s.join("."),o=hhe(t),a=ahe.exec(t);return a&&a[1]?new rhe(n,i,o,a[1]):new the(n,i,o)}function hhe(t){for(var e=0,n=zM.length;e<n;e++){var r=zM[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function fhe(){var t=typeof process<"u"&&"v16.0.0";return t?new nhe("v16.0.0".slice(1)):null}function phe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var rr={},WM;function nV(){if(WM)return rr;WM=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.getLocalStorage=rr.getLocalStorageOrThrow=rr.getCrypto=rr.getCryptoOrThrow=rr.getLocation=rr.getLocationOrThrow=rr.getNavigator=rr.getNavigatorOrThrow=rr.getDocument=rr.getDocumentOrThrow=rr.getFromWindowOrThrow=rr.getFromWindow=void 0;function t(h){let f;return typeof window<"u"&&typeof window[h]<"u"&&(f=window[h]),f}rr.getFromWindow=t;function e(h){const f=t(h);if(!f)throw new Error(`${h} is not defined in Window`);return f}rr.getFromWindowOrThrow=e;function n(){return e("document")}rr.getDocumentOrThrow=n;function r(){return t("document")}rr.getDocument=r;function s(){return e("navigator")}rr.getNavigatorOrThrow=s;function i(){return t("navigator")}rr.getNavigator=i;function o(){return e("location")}rr.getLocationOrThrow=o;function a(){return t("location")}rr.getLocation=a;function c(){return e("crypto")}rr.getCryptoOrThrow=c;function l(){return t("crypto")}rr.getCrypto=l;function u(){return e("localStorage")}rr.getLocalStorageOrThrow=u;function d(){return t("localStorage")}return rr.getLocalStorage=d,rr}var mu=nV(),g0={},GM;function mhe(){if(GM)return g0;GM=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.getWindowMetadata=void 0;const t=nV();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function s(){const f=n.getElementsByTagName("link"),m=[];for(let g=0;g<f.length;g++){const y=f[g],v=y.getAttribute("rel");if(v&&v.toLowerCase().indexOf("icon")>-1){const _=y.getAttribute("href");if(_)if(_.toLowerCase().indexOf("https:")===-1&&_.toLowerCase().indexOf("http:")===-1&&_.indexOf("//")!==0){let A=r.protocol+"//"+r.host;if(_.indexOf("/")===0)A+=_;else{const k=r.pathname.split("/");k.pop();const S=k.join("/");A+=S+"/"+_}m.push(A)}else if(_.indexOf("//")===0){const A=r.protocol+_;m.push(A)}else m.push(_)}}return m}function i(...f){const m=n.getElementsByTagName("meta");for(let g=0;g<m.length;g++){const y=m[g],v=["itemprop","property","name"].map(_=>y.getAttribute(_)).filter(_=>_?f.includes(_):!1);if(v.length&&v){const _=y.getAttribute("content");if(_)return _}}return""}function o(){let f=i("name","og:site_name","og:title","twitter:title");return f||(f=n.title),f}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),l=a(),u=r.origin,d=s();return{description:l,url:u,icons:d,name:c}}return g0.getWindowMetadata=e,g0}var ghe=mhe();function yhe(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if((s&4294967168)===0){n++;continue}else if((s&4294965248)===0)n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?n+=3:n+=4}}return n}function whe(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const vhe=new TextEncoder,bhe=50;function _he(t,e,n){vhe.encodeInto(t,e.subarray(n))}function Ehe(t,e,n){t.length>bhe?_he(t,e,n):whe(t,e,n)}const Ahe=4096;function rV(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if((a&128)===0)i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=Ahe&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const Che=new TextDecoder,Ihe=200;function The(t,e,n){const r=t.subarray(e,e+n);return Che.decode(r)}function She(t,e,n){return n>Ihe?The(t,e,n):rV(t,e,n)}class pE{constructor(e,n){this.type=e,this.data=n}}class po extends Error{constructor(e){super(e);const n=Object.create(po.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:po.name})}}const y0=4294967295;function xhe(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function sV(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function iV(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function Phe(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const Rhe=-1,Nhe=4294967296-1,Ohe=17179869184-1;function khe({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=Ohe)if(e===0&&t<=Nhe){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),sV(r,4,t),n}}function Dhe(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function Mhe(t){if(t instanceof Date){const e=Dhe(t);return khe(e)}else return null}function Bhe(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=iV(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new po(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function Lhe(t){const e=Bhe(t);return new Date(e.sec*1e3+e.nsec/1e6)}const $he={type:Rhe,encode:Mhe,decode:Lhe};class lA{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register($he)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new pE(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new pE(o,i)}}}return e instanceof pE?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new pE(n,e)}}lA.defaultCodec=new lA;function Uhe(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function PP(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Uhe(t)?new Uint8Array(t):Uint8Array.from(t)}const Fhe=100,jhe=2048;let Vhe=class oV{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??lA.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??Fhe,this.initialBufferSize=e?.initialBufferSize??jhe,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new oV({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=yhe(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Ehe(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=PP(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),xhe(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),sV(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Hhe(t,e){return new Vhe(e).encodeSharedRef(t)}function cx(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const qhe=16,zhe=16;class Whe{constructor(e=qhe,n=zhe){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=rV(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const RP="array",ow="map_key",aV="map_value",Ghe=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new po("The type of key must be string or number but "+typeof t)};class Khe{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=RP,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=ow,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===RP){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===ow||e.type===aV){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const w0=-1,ek=new DataView(new ArrayBuffer(0)),Qhe=new Uint8Array(ek.buffer);try{ek.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const KM=new RangeError("Insufficient data"),Yhe=new Whe;let Zhe=class cV{constructor(e){this.totalPos=0,this.pos=0,this.view=ek,this.bytes=Qhe,this.headByte=w0,this.stack=new Khe,this.entered=!1,this.extensionCodec=e?.extensionCodec??lA.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??y0,this.maxBinLength=e?.maxBinLength??y0,this.maxArrayLength=e?.maxArrayLength??y0,this.maxMapLength=e?.maxMapLength??y0,this.maxExtLength=e?.maxExtLength??y0,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:Yhe,this.mapKeyConverter=e?.mapKeyConverter??Ghe}clone(){return new cV({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=w0,this.stack.reset()}setBuffer(e){const n=PP(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===w0&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=PP(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${cx(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new po(`Unrecognized type byte: ${cx(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===RP)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===ow){if(n==="__proto__")throw new po("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=aV;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=ow;continue e}}return n}}readHeadByte(){return this.headByte===w0&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=w0}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new po(`Unrecognized array type byte: ${cx(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new po(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new po(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new po(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw KM;const r=this.pos+n;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,r,e):s=She(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===ow:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new po(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw KM;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new po(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=Phe(this.view,this.pos);return this.pos+=8,e}readI64(){const e=iV(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Jhe(t,e){return new Zhe(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xhe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lV(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function uA(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function tk(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function NP(t){if(!Array.isArray(t))throw new Error("array expected")}function dA(t,e){if(!lV(!0,e))throw new Error(`${t}: array of strings expected`)}function efe(t,e){if(!lV(!1,e))throw new Error(`${t}: array of numbers expected`)}function tfe(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function nfe(t){const e=typeof t=="string"?t.split(""):t,n=e.length;dA("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(NP(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(NP(s),s.map(i=>{uA("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function rfe(t=""){return uA("join",t),{encode:e=>(dA("join.decode",e),e.join(t)),decode:e=>(uA("join.decode",e),e.split(t))}}function sfe(t,e="="){return tk(t),uA("padding",e),{encode(n){for(dA("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){dA("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const uV=(t,e)=>e===0?t:uV(e,t%e),hA=(t,e)=>t+(e-uV(t,e)),lx=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function QM(t,e,n,r){if(NP(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(hA(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${hA(e,n)}`);let s=0,i=0;const o=lx[e],a=lx[n]-1,c=[];for(const l of t){if(tk(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=lx[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function ife(t,e=!1){if(tk(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(hA(8,t)>32||hA(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Xhe(n))throw new Error("radix2.encode input should be Uint8Array");return QM(Array.from(n),8,t,!e)},decode:n=>(efe("radix2.decode",n),Uint8Array.from(QM(n,t,8,e)))}}const ofe=tfe(ife(5),nfe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),sfe(5),rfe(""));function nk(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function dV(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?nk(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function aw(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=dV(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return nk(n)}function afe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var g=0,y=0,v=0,_=m.length;v!==_&&m[v]===0;)v++,g++;for(var A=(_-v)*u+1>>>0,k=new Uint8Array(A);v!==_;){for(var S=m[v],R=0,T=A-1;(S!==0||R<y)&&T!==-1;T--,R++)S+=256*k[T]>>>0,k[T]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");y=R,v++}for(var b=A-y;b!==A&&k[b]===0;)b++;for(var E=c.repeat(g);b<A;++b)E+=t.charAt(k[b]);return E}function h(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var g=0;if(m[g]!==" "){for(var y=0,v=0;m[g]===c;)y++,g++;for(var _=(m.length-g)*l+1>>>0,A=new Uint8Array(_);m[g];){var k=n[m.charCodeAt(g)];if(k===255)return;for(var S=0,R=_-1;(k!==0||S<v)&&R!==-1;R--,S++)k+=a*A[R]>>>0,A[R]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");v=S,g++}if(m[g]!==" "){for(var T=_-v;T!==_&&A[T]===0;)T++;for(var b=new Uint8Array(y+(_-T)),E=y;T!==_;)b[E++]=A[T++];return b}}}function f(m){var g=h(m);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var cfe=afe,lfe=cfe;const ufe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},dfe=t=>new TextEncoder().encode(t),hfe=t=>new TextDecoder().decode(t);class ffe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class pfe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hV(this,e)}}class mfe{constructor(e){this.decoders=e}or(e){return hV(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const hV=(t,e)=>new mfe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class gfe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new ffe(e,n,r),this.decoder=new pfe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const NI=({name:t,prefix:e,encode:n,decode:r})=>new gfe(t,e,n,r),Vb=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=lfe(n,e);return NI({prefix:t,name:e,encode:r,decode:i=>ufe(s(i))})},yfe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},wfe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},$s=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>NI({prefix:e,name:t,encode(s){return wfe(s,r,n)},decode(s){return yfe(s,r,n,t)}}),vfe=NI({prefix:"\0",name:"identity",encode:t=>hfe(t),decode:t=>dfe(t)}),bfe=Object.freeze(Object.defineProperty({__proto__:null,identity:vfe},Symbol.toStringTag,{value:"Module"})),_fe=$s({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Efe=Object.freeze(Object.defineProperty({__proto__:null,base2:_fe},Symbol.toStringTag,{value:"Module"})),Afe=$s({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Cfe=Object.freeze(Object.defineProperty({__proto__:null,base8:Afe},Symbol.toStringTag,{value:"Module"})),Ife=Vb({prefix:"9",name:"base10",alphabet:"0123456789"}),Tfe=Object.freeze(Object.defineProperty({__proto__:null,base10:Ife},Symbol.toStringTag,{value:"Module"})),Sfe=$s({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xfe=$s({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Pfe=Object.freeze(Object.defineProperty({__proto__:null,base16:Sfe,base16upper:xfe},Symbol.toStringTag,{value:"Module"})),Rfe=$s({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Nfe=$s({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ofe=$s({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kfe=$s({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Dfe=$s({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Mfe=$s({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Bfe=$s({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Lfe=$s({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$fe=$s({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ufe=Object.freeze(Object.defineProperty({__proto__:null,base32:Rfe,base32hex:Dfe,base32hexpad:Bfe,base32hexpadupper:Lfe,base32hexupper:Mfe,base32pad:Ofe,base32padupper:kfe,base32upper:Nfe,base32z:$fe},Symbol.toStringTag,{value:"Module"})),Ffe=Vb({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jfe=Vb({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Vfe=Object.freeze(Object.defineProperty({__proto__:null,base36:Ffe,base36upper:jfe},Symbol.toStringTag,{value:"Module"})),Hfe=Vb({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qfe=Vb({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),zfe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Hfe,base58flickr:qfe},Symbol.toStringTag,{value:"Module"})),Wfe=$s({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Gfe=$s({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Kfe=$s({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Qfe=$s({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Yfe=Object.freeze(Object.defineProperty({__proto__:null,base64:Wfe,base64pad:Gfe,base64url:Kfe,base64urlpad:Qfe},Symbol.toStringTag,{value:"Module"})),fV=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Zfe=fV.reduce((t,e,n)=>(t[n]=e,t),[]),Jfe=fV.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Xfe(t){return t.reduce((e,n)=>(e+=Zfe[n],e),"")}function epe(t){const e=[];for(const n of t){const r=Jfe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const tpe=NI({prefix:"🚀",name:"base256emoji",encode:Xfe,decode:epe}),npe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:tpe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const YM={...bfe,...Efe,...Cfe,...Tfe,...Pfe,...Ufe,...Vfe,...zfe,...Yfe,...npe};function pV(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const ZM=pV("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ux=pV("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=dV(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),mV={utf8:ZM,"utf-8":ZM,hex:YM.base16,latin1:ux,ascii:ux,binary:ux,...YM};function oa(t,e="utf8"){const n=mV[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?nk(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Ji(t,e="utf8"){const n=mV[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const rpe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var dx,JM;function gV(){if(JM)return dx;JM=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function n(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let l=`
`+o+" = ";for(let u=0;u<a.length;u+=2){if(c===32)l+=r(a[u]).toUpperCase(),l+=" ",l+=r(a[u+1]).toUpperCase();else if(c===64)l+=r(a[u+1]).toUpperCase(),l+=r(a[u]).toUpperCase();else throw new Error("Invalid size "+c);u%6===4?l+=`
`+new Array(o.length+4).join(" "):u<a.length-2&&(l+=" ")}console.log(l)}function i(o,a,c){let l=new Date().getTime();const u=new Uint8Array(a);for(let h=0;h<a;h++)u[h]=h%256;const d=new Date().getTime();console.log("Generated random input in "+(d-l)+"ms"),l=d;for(let h=0;h<c;h++){const f=o(u),m=new Date().getTime(),g=m-l;l=m,console.log("Hashed in "+g+"ms: "+f.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(g/1e3)*100)/100+" MB PER SECOND")}}return dx={normalizeInput:e,toHex:n,debugPrint:s,testSpeed:i},dx}var hx,XM;function spe(){if(XM)return hx;XM=1;const t=gV();function e(v,_,A){const k=v[_]+v[A];let S=v[_+1]+v[A+1];k>=4294967296&&S++,v[_]=k,v[_+1]=S}function n(v,_,A,k){let S=v[_]+A;A<0&&(S+=4294967296);let R=v[_+1]+k;S>=4294967296&&R++,v[_]=S,v[_+1]=R}function r(v,_){return v[_]^v[_+1]<<8^v[_+2]<<16^v[_+3]<<24}function s(v,_,A,k,S,R){const T=l[S],b=l[S+1],E=l[R],x=l[R+1];e(c,v,_),n(c,v,T,b);let D=c[k]^c[v],M=c[k+1]^c[v+1];c[k]=M,c[k+1]=D,e(c,A,k),D=c[_]^c[A],M=c[_+1]^c[A+1],c[_]=D>>>24^M<<8,c[_+1]=M>>>24^D<<8,e(c,v,_),n(c,v,E,x),D=c[k]^c[v],M=c[k+1]^c[v+1],c[k]=D>>>16^M<<16,c[k+1]=M>>>16^D<<16,e(c,A,k),D=c[_]^c[A],M=c[_+1]^c[A+1],c[_]=M>>>31^D<<1,c[_+1]=D>>>31^M<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(v){return v*2})),c=new Uint32Array(32),l=new Uint32Array(32);function u(v,_){let A=0;for(A=0;A<16;A++)c[A]=v.h[A],c[A+16]=i[A];for(c[24]=c[24]^v.t,c[25]=c[25]^v.t/4294967296,_&&(c[28]=~c[28],c[29]=~c[29]),A=0;A<32;A++)l[A]=r(v.b,4*A);for(A=0;A<12;A++)s(0,8,16,24,a[A*16+0],a[A*16+1]),s(2,10,18,26,a[A*16+2],a[A*16+3]),s(4,12,20,28,a[A*16+4],a[A*16+5]),s(6,14,22,30,a[A*16+6],a[A*16+7]),s(0,10,20,30,a[A*16+8],a[A*16+9]),s(2,12,22,24,a[A*16+10],a[A*16+11]),s(4,14,16,26,a[A*16+12],a[A*16+13]),s(6,8,18,28,a[A*16+14],a[A*16+15]);for(A=0;A<16;A++)v.h[A]=v.h[A]^c[A]^c[A+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function h(v,_,A,k){if(v===0||v>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(_&&_.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(A&&A.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(k&&k.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const S={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:v};d.fill(0),d[0]=v,_&&(d[1]=_.length),d[2]=1,d[3]=1,A&&d.set(A,32),k&&d.set(k,48);for(let R=0;R<16;R++)S.h[R]=i[R]^r(d,R*4);return _&&(f(S,_),S.c=128),S}function f(v,_){for(let A=0;A<_.length;A++)v.c===128&&(v.t+=v.c,u(v,!1),v.c=0),v.b[v.c++]=_[A]}function m(v){for(v.t+=v.c;v.c<128;)v.b[v.c++]=0;u(v,!0);const _=new Uint8Array(v.outlen);for(let A=0;A<v.outlen;A++)_[A]=v.h[A>>2]>>8*(A&3);return _}function g(v,_,A,k,S){A=A||64,v=t.normalizeInput(v),k&&(k=t.normalizeInput(k)),S&&(S=t.normalizeInput(S));const R=h(A,_,k,S);return f(R,v),m(R)}function y(v,_,A,k,S){const R=g(v,_,A,k,S);return t.toHex(R)}return hx={blake2b:g,blake2bHex:y,blake2bInit:h,blake2bUpdate:f,blake2bFinal:m},hx}var fx,eB;function ipe(){if(eB)return fx;eB=1;const t=gV();function e(m,g){return m[g]^m[g+1]<<8^m[g+2]<<16^m[g+3]<<24}function n(m,g,y,v,_,A){o[m]=o[m]+o[g]+_,o[v]=r(o[v]^o[m],16),o[y]=o[y]+o[v],o[g]=r(o[g]^o[y],12),o[m]=o[m]+o[g]+A,o[v]=r(o[v]^o[m],8),o[y]=o[y]+o[v],o[g]=r(o[g]^o[y],7)}function r(m,g){return m>>>g^m<<32-g}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(m,g){let y=0;for(y=0;y<8;y++)o[y]=m.h[y],o[y+8]=s[y];for(o[12]^=m.t,o[13]^=m.t/4294967296,g&&(o[14]=~o[14]),y=0;y<16;y++)a[y]=e(m.b,4*y);for(y=0;y<10;y++)n(0,4,8,12,a[i[y*16+0]],a[i[y*16+1]]),n(1,5,9,13,a[i[y*16+2]],a[i[y*16+3]]),n(2,6,10,14,a[i[y*16+4]],a[i[y*16+5]]),n(3,7,11,15,a[i[y*16+6]],a[i[y*16+7]]),n(0,5,10,15,a[i[y*16+8]],a[i[y*16+9]]),n(1,6,11,12,a[i[y*16+10]],a[i[y*16+11]]),n(2,7,8,13,a[i[y*16+12]],a[i[y*16+13]]),n(3,4,9,14,a[i[y*16+14]],a[i[y*16+15]]);for(y=0;y<8;y++)m.h[y]^=o[y]^o[y+8]}function l(m,g){if(!(m>0&&m<=32))throw new Error("Incorrect output length, should be in [1, 32]");const y=g?g.length:0;if(g&&!(y>0&&y<=32))throw new Error("Incorrect key length, should be in [1, 32]");const v={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:m};return v.h[0]^=16842752^y<<8^m,y>0&&(u(v,g),v.c=64),v}function u(m,g){for(let y=0;y<g.length;y++)m.c===64&&(m.t+=m.c,c(m,!1),m.c=0),m.b[m.c++]=g[y]}function d(m){for(m.t+=m.c;m.c<64;)m.b[m.c++]=0;c(m,!0);const g=new Uint8Array(m.outlen);for(let y=0;y<m.outlen;y++)g[y]=m.h[y>>2]>>8*(y&3)&255;return g}function h(m,g,y){y=y||32,m=t.normalizeInput(m);const v=l(y,g);return u(v,m),d(v)}function f(m,g,y){const v=h(m,g,y);return t.toHex(v)}return fx={blake2s:h,blake2sHex:f,blake2sInit:l,blake2sUpdate:u,blake2sFinal:d},fx}var px,tB;function ope(){if(tB)return px;tB=1;const t=spe(),e=ipe();return px={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},px}var ape=ope();const cpe="PARSE_ERROR",lpe="INVALID_REQUEST",upe="METHOD_NOT_FOUND",dpe="INVALID_PARAMS",yV="INTERNAL_ERROR",rk="SERVER_ERROR",hpe=[-32700,-32600,-32601,-32602,-32603],cw={[cpe]:{code:-32700,message:"Parse error"},[lpe]:{code:-32600,message:"Invalid Request"},[upe]:{code:-32601,message:"Method not found"},[dpe]:{code:-32602,message:"Invalid params"},[yV]:{code:-32603,message:"Internal error"},[rk]:{code:-32e3,message:"Server error"}},wV=rk;function fpe(t){return hpe.includes(t)}function nB(t){return Object.keys(cw).includes(t)?cw[t]:cw[wV]}function ppe(t){const e=Object.values(cw).find(n=>n.code===t);return e||cw[wV]}function vV(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var mx={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OP=function(t,e){return OP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},OP(t,e)};function mpe(t,e){OP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var kP=function(){return kP=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kP.apply(this,arguments)};function gpe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ype(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function wpe(t,e){return function(n,r){e(n,r,t)}}function vpe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function bpe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function _pe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Epe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Ape(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function DP(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bV(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Cpe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bV(arguments[e]));return t}function Ipe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function fv(t){return this instanceof fv?(this.v=t,this):new fv(t)}function Tpe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(m,g){i.push([h,f,m,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(m){d(i[0][3],m)}}function c(h){h.value instanceof fv?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Spe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:fv(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function xpe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof DP=="function"?DP(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Ppe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Rpe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Npe(t){return t&&t.__esModule?t:{default:t}}function Ope(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function kpe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Dpe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return kP},__asyncDelegator:Spe,__asyncGenerator:Tpe,__asyncValues:xpe,__await:fv,__awaiter:bpe,__classPrivateFieldGet:Ope,__classPrivateFieldSet:kpe,__createBinding:Epe,__decorate:ype,__exportStar:Ape,__extends:mpe,__generator:_pe,__importDefault:Npe,__importStar:Rpe,__makeTemplateObject:Ppe,__metadata:vpe,__param:wpe,__read:bV,__rest:gpe,__spread:Cpe,__spreadArrays:Ipe,__values:DP},Symbol.toStringTag,{value:"Module"})),Mpe=wF(Dpe);var Sl={},rB;function Bpe(){if(rB)return Sl;rB=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.isBrowserCryptoAvailable=Sl.getSubtleCrypto=Sl.getBrowerCrypto=void 0;function t(){return globalThis?.crypto||globalThis?.msCrypto||{}}Sl.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Sl.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Sl.isBrowserCryptoAvailable=n,Sl}var xl={},sB;function Lpe(){if(sB)return xl;sB=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.isBrowser=xl.isNode=xl.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}xl.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}xl.isNode=e;function n(){return!t()&&!e()}return xl.isBrowser=n,xl}var iB;function $pe(){return iB||(iB=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Mpe;e.__exportStar(Bpe(),t),e.__exportStar(Lpe(),t)})(mx)),mx}var Upe=$pe();function _c(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function kd(t=6){return BigInt(_c(t))}function Sc(t,e,n){return{id:n||_c(),jsonrpc:"2.0",method:t,params:e}}function pv(t,e){return{id:t,jsonrpc:"2.0",result:e}}function OI(t,e,n){return{id:t,jsonrpc:"2.0",error:Fpe(e)}}function Fpe(t,e){return typeof t>"u"?nB(yV):(typeof t=="string"&&(t=Object.assign(Object.assign({},nB(rk)),{message:t})),fpe(t.code)&&(t=ppe(t.code)),t)}let jpe=class{},Vpe=class extends jpe{constructor(){super()}},Hpe=class extends Vpe{constructor(e){super()}};const qpe="^https?:",zpe="^wss?:";function Wpe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function _V(t,e){const n=Wpe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function oB(t){return _V(t,qpe)}function aB(t){return _V(t,zpe)}function Gpe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function EV(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function sk(t){return EV(t)&&"method"in t}function kI(t){return EV(t)&&(Ec(t)||Yo(t))}function Ec(t){return"result"in t}function Yo(t){return"error"in t}let wa=class extends Hpe{constructor(e){super(e),this.events=new ya.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Sc(e.method,e.params||[],e.id||kd().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Yo(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),kI(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Kpe=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Qpe=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",cB=t=>t.split("?")[0],lB=10,Ype=Kpe();let Zpe=class{constructor(e){if(this.url=e,this.events=new ya.EventEmitter,this.registering=!1,!aB(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(pu(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!aB(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=Upe.isReactNative()?void 0:{rejectUnauthorized:!Gpe(e)},i=new Ype(e,[],s);Qpe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?zf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=OI(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return vV(e,cB(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>lB&&this.events.setMaxListeners(lB)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${cB(this.url)}`));return this.events.emit("register_error",n),n}};var mE={exports:{}},uB;function Jpe(){return uB||(uB=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,r=(function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i})();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof i<"u"&&i||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(P){return P&&DataView.prototype.isPrototypeOf(P)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(P){return P&&u.indexOf(Object.prototype.toString.call(P))>-1};function h(P){if(typeof P!="string"&&(P=String(P)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(P)||P==="")throw new TypeError('Invalid character in header field name: "'+P+'"');return P.toLowerCase()}function f(P){return typeof P!="string"&&(P=String(P)),P}function m(P){var L={next:function(){var W=P.shift();return{done:W===void 0,value:W}}};return c.iterable&&(L[Symbol.iterator]=function(){return L}),L}function g(P){this.map={},P instanceof g?P.forEach(function(L,W){this.append(W,L)},this):Array.isArray(P)?P.forEach(function(L){if(L.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+L.length);this.append(L[0],L[1])},this):P&&Object.getOwnPropertyNames(P).forEach(function(L){this.append(L,P[L])},this)}g.prototype.append=function(P,L){P=h(P),L=f(L);var W=this.map[P];this.map[P]=W?W+", "+L:L},g.prototype.delete=function(P){delete this.map[h(P)]},g.prototype.get=function(P){return P=h(P),this.has(P)?this.map[P]:null},g.prototype.has=function(P){return this.map.hasOwnProperty(h(P))},g.prototype.set=function(P,L){this.map[h(P)]=f(L)},g.prototype.forEach=function(P,L){for(var W in this.map)this.map.hasOwnProperty(W)&&P.call(L,this.map[W],W,this)},g.prototype.keys=function(){var P=[];return this.forEach(function(L,W){P.push(W)}),m(P)},g.prototype.values=function(){var P=[];return this.forEach(function(L){P.push(L)}),m(P)},g.prototype.entries=function(){var P=[];return this.forEach(function(L,W){P.push([W,L])}),m(P)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(P){if(!P._noBody){if(P.bodyUsed)return Promise.reject(new TypeError("Already read"));P.bodyUsed=!0}}function v(P){return new Promise(function(L,W){P.onload=function(){L(P.result)},P.onerror=function(){W(P.error)}})}function _(P){var L=new FileReader,W=v(L);return L.readAsArrayBuffer(P),W}function A(P){var L=new FileReader,W=v(L),Y=/charset=([A-Za-z0-9_-]+)/.exec(P.type),J=Y?Y[1]:"utf-8";return L.readAsText(P,J),W}function k(P){for(var L=new Uint8Array(P),W=new Array(L.length),Y=0;Y<L.length;Y++)W[Y]=String.fromCharCode(L[Y]);return W.join("")}function S(P){if(P.slice)return P.slice(0);var L=new Uint8Array(P.byteLength);return L.set(new Uint8Array(P)),L.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(P){this.bodyUsed=this.bodyUsed,this._bodyInit=P,P?typeof P=="string"?this._bodyText=P:c.blob&&Blob.prototype.isPrototypeOf(P)?this._bodyBlob=P:c.formData&&FormData.prototype.isPrototypeOf(P)?this._bodyFormData=P:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(P)?this._bodyText=P.toString():c.arrayBuffer&&c.blob&&l(P)?(this._bodyArrayBuffer=S(P.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(P)||d(P))?this._bodyArrayBuffer=S(P):this._bodyText=P=Object.prototype.toString.call(P):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof P=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(P)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var P=y(this);if(P)return P;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var P=y(this);return P||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(_);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var P=y(this);if(P)return P;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function b(P){var L=P.toUpperCase();return T.indexOf(L)>-1?L:P}function E(P,L){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');L=L||{};var W=L.body;if(P instanceof E){if(P.bodyUsed)throw new TypeError("Already read");this.url=P.url,this.credentials=P.credentials,L.headers||(this.headers=new g(P.headers)),this.method=P.method,this.mode=P.mode,this.signal=P.signal,!W&&P._bodyInit!=null&&(W=P._bodyInit,P.bodyUsed=!0)}else this.url=String(P);if(this.credentials=L.credentials||this.credentials||"same-origin",(L.headers||!this.headers)&&(this.headers=new g(L.headers)),this.method=b(L.method||this.method||"GET"),this.mode=L.mode||this.mode||null,this.signal=L.signal||this.signal||(function(){if("AbortController"in a){var V=new AbortController;return V.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&W)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(W),(this.method==="GET"||this.method==="HEAD")&&(L.cache==="no-store"||L.cache==="no-cache")){var Y=/([?&])_=[^&]*/;if(Y.test(this.url))this.url=this.url.replace(Y,"$1_="+new Date().getTime());else{var J=/\?/;this.url+=(J.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function x(P){var L=new FormData;return P.trim().split("&").forEach(function(W){if(W){var Y=W.split("="),J=Y.shift().replace(/\+/g," "),V=Y.join("=").replace(/\+/g," ");L.append(decodeURIComponent(J),decodeURIComponent(V))}}),L}function D(P){var L=new g,W=P.replace(/\r?\n[\t ]+/g," ");return W.split("\r").map(function(Y){return Y.indexOf(`
`)===0?Y.substr(1,Y.length):Y}).forEach(function(Y){var J=Y.split(":"),V=J.shift().trim();if(V){var se=J.join(":").trim();try{L.append(V,se)}catch(ue){console.warn("Response "+ue.message)}}}),L}R.call(E.prototype);function M(P,L){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(L||(L={}),this.type="default",this.status=L.status===void 0?200:L.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=L.statusText===void 0?"":""+L.statusText,this.headers=new g(L.headers),this.url=L.url||"",this._initBody(P)}R.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},M.error=function(){var P=new M(null,{status:200,statusText:""});return P.ok=!1,P.status=0,P.type="error",P};var $=[301,302,303,307,308];M.redirect=function(P,L){if($.indexOf(L)===-1)throw new RangeError("Invalid status code");return new M(null,{status:L,headers:{location:P}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(L,W){this.message=L,this.name=W;var Y=Error(L);this.stack=Y.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function X(P,L){return new Promise(function(W,Y){var J=new E(P,L);if(J.signal&&J.signal.aborted)return Y(new o.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function se(){V.abort()}V.onload=function(){var pe={statusText:V.statusText,headers:D(V.getAllResponseHeaders()||"")};J.url.indexOf("file://")===0&&(V.status<200||V.status>599)?pe.status=200:pe.status=V.status,pe.url="responseURL"in V?V.responseURL:pe.headers.get("X-Request-URL");var Se="response"in V?V.response:V.responseText;setTimeout(function(){W(new M(Se,pe))},0)},V.onerror=function(){setTimeout(function(){Y(new TypeError("Network request failed"))},0)},V.ontimeout=function(){setTimeout(function(){Y(new TypeError("Network request timed out"))},0)},V.onabort=function(){setTimeout(function(){Y(new o.DOMException("Aborted","AbortError"))},0)};function ue(pe){try{return pe===""&&a.location.href?a.location.href:pe}catch{return pe}}if(V.open(J.method,ue(J.url),!0),J.credentials==="include"?V.withCredentials=!0:J.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&(c.blob?V.responseType="blob":c.arrayBuffer&&(V.responseType="arraybuffer")),L&&typeof L.headers=="object"&&!(L.headers instanceof g||a.Headers&&L.headers instanceof a.Headers)){var Ee=[];Object.getOwnPropertyNames(L.headers).forEach(function(pe){Ee.push(h(pe)),V.setRequestHeader(pe,f(L.headers[pe]))}),J.headers.forEach(function(pe,Se){Ee.indexOf(Se)===-1&&V.setRequestHeader(Se,pe)})}else J.headers.forEach(function(pe,Se){V.setRequestHeader(Se,pe)});J.signal&&(J.signal.addEventListener("abort",se),V.onreadystatechange=function(){V.readyState===4&&J.signal.removeEventListener("abort",se)}),V.send(typeof J._bodyInit>"u"?null:J._bodyInit)})}return X.polyfill=!0,a.fetch||(a.fetch=X,a.Headers=g,a.Request=E,a.Response=M),o.Headers=g,o.Request=E,o.Response=M,o.fetch=X,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(mE,mE.exports)),mE.exports}var Xpe=Jpe();const dB=ny(Xpe);var eme=Object.defineProperty,tme=Object.defineProperties,nme=Object.getOwnPropertyDescriptors,hB=Object.getOwnPropertySymbols,rme=Object.prototype.hasOwnProperty,sme=Object.prototype.propertyIsEnumerable,fB=(t,e,n)=>e in t?eme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pB=(t,e)=>{for(var n in e||(e={}))rme.call(e,n)&&fB(t,n,e[n]);if(hB)for(var n of hB(e))sme.call(e,n)&&fB(t,n,e[n]);return t},mB=(t,e)=>tme(t,nme(e));const ime={Accept:"application/json","Content-Type":"application/json"},ome="POST",gB={headers:ime,method:ome},yB=10;let tc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ya.EventEmitter,this.isAvailable=!1,this.registering=!1,!oB(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=pu(e),r=await(await dB(this.url,mB(pB({},gB),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!oB(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=pu({id:1,jsonrpc:"2.0",method:"test",params:[]});await dB(e,mB(pB({},gB),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?zf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=OI(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return vV(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>yB&&this.events.setMaxListeners(yB)}},Kh=null;const ea={getSIWX(){return be.state.siwx},async initializeIfEnabled(t=K.getActiveCaipAddress()){const e=be.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(K.checkIfSupportedNetwork(n,`${n}:${r}`))try{if(be.state.remoteFeatures?.emailCapture){const o=K.getAccountData(n)?.user;await vn.open({view:"DataCapture",data:{email:o?.email??void 0}});return}if(Kh&&await Kh,(await e.getSessions(`${n}:${r}`,s)).length)return;await vn.open({view:"SIWXSignMessage"})}catch(i){console.error("SIWXUtil:initializeIfEnabled",i),xn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await qe._getClient()?.disconnect().catch(console.error),Pt.reset("Connect"),kc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=be.state.siwx,e=ot.getPlainAddress(K.getActiveCaipAddress()),n=Jl(),r=qe._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ue.getConnectorId(n.chainNamespace)===le.CONNECTOR_ID.AUTH&&Pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),K.setLastConnectedSIWECaipNetwork(n),vn.close(),xn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!vn.state.open||Pt.state.view==="ApproveTransaction")&&await vn.open({view:"SIWXSignMessage"}),kc.showError("Error signing message"),xn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const n=K.getLastConnectedSIWECaipNetwork();if(n){const r=await t?.getSessions(n?.caipNetworkId,ot.getPlainAddress(K.getActiveCaipAddress())||"");r&&r.length>0?await K.switchActiveNetwork(n):await qe.disconnect()}else await qe.disconnect()}else vn.close();vn.close(),xn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=K.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await t?.getSessions(r.caipNetworkId,ot.getPlainAddress(K.getActiveCaipAddress())||"");s&&n.push(...s)})),n},async getSessions(t){const e=be.state.siwx;let n=t?.address;if(!n){const s=K.getActiveCaipAddress();n=ot.getPlainAddress(s)}let r=t?.caipNetworkId;return r||(r=K.getActiveCaipNetwork()?.caipNetworkId),e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=Pt.state.view==="ApproveTransaction",n=Pt.state.view==="SIWXSignMessage";if(e||n)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){const i=ea.getSIWX(),o=Jl();if(!i||!s.includes(le.CHAIN.EVM)||be.state.remoteFeatures?.emailCapture){const d=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),l={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},u=await t.connect({chainId:e,socialUri:n,siwxMessage:l,preferredAccountType:r});return l.accountAddress=u.address,l.serializedMessage=u.message||"",u.signature&&u.message&&await ea.addEmbeddedWalletSession(l,u.message,u.signature),K.setLastConnectedSIWECaipNetwork(o),{address:u.address,chainId:u.chainId,accounts:u.accounts}},async addEmbeddedWalletSession(t,e,n){if(Kh)return Kh;const r=ea.getSIWX();return r?(Kh=r.addSession({data:t,message:e,signature:n}).finally(()=>{Kh=null}),Kh):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){const r=ea.getSIWX(),s=Jl(),i=new Set(e.map(c=>c.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const o=await r.createMessage({chainId:Jl()?.caipNetworkId||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(c=>c!==o.chainId)]});if(kc.showLoading("Authenticating...",{autoClose:!1}),ut.setConnectedWalletInfo({...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:a.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),a?.auths?.length){const c=a.auths.map(l=>{const u=t.client.formatAuthMessage({request:l.p,iss:l.p.iss});return{data:{...l.p,accountAddress:l.p.iss.split(":").slice(-1).join(""),chainId:l.p.iss.split(":").slice(2,4).join(":"),uri:l.p.aud,version:l.p.version||o.version,expirationTime:l.p.exp,issuedAt:l.p.iat,notBefore:l.p.nbf},message:u,signature:l.s.s,cacao:l}});try{await r.setSessions(c),s&&K.setLastConnectedSIWECaipNetwork(s),xn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:ea.getSIWXEventProperties()})}catch(l){throw console.error("SIWX:universalProviderAuth - failed to set sessions",l),xn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:ea.getSIWXEventProperties()}),await t.disconnect().catch(console.error),l}finally{kc.hide()}}return!0},getSIWXEventProperties(){const t=K.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:K.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:To(t)===as.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},pr={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",EIP155:le.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},mo={ConnectorExplorerIds:{[le.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[le.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[le.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[le.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[le.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[pr.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[pr.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[pr.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[pr.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[pr.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[pr.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[pr.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[pr.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[pr.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[pr.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[pr.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[pr.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[le.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[le.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[le.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[le.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[le.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[le.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[le.CONNECTOR_ID.INJECTED]:"Browser Wallet",[le.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[le.CONNECTOR_ID.COINBASE]:"Coinbase",[le.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[le.CONNECTOR_ID.LEDGER]:"Ledger",[le.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[le.CONNECTOR_ID.INJECTED]:"INJECTED",[le.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[le.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[le.CONNECTOR_ID.AUTH]:"AUTH",[pr.CONNECTOR_TYPE_AUTH]:"AUTH"}},ks={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${pr.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=K.state.activeChain;return le.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Ue.getConnectorId(e)===le.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},ame=new AbortController,Ir={EmbeddedWalletAbortController:ame,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Um()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your system’s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`}}},cme={createLogger(t,e="error"){const n=cy({level:e}),{logger:r}=WO({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},lme="rpc.walletconnect.org";function wB(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const gx=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Pc={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===lme}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:le.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${le.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){const r=t.rpcUrls?.default?.http?.[0];return gx.includes(e)?wB(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,i,n),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,l=r?.[i]?.map(h=>h.url)||[],u=[...l,...a?[a]:[]],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:mo.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Pc.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){const r=[];return n?.forEach(s=>{r.push(Fm(s.url,s.config))}),gx.includes(t.caipNetworkId)&&r.push(Fm(wB(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{r.push(Fm(s))}),eM(r)},extendWagmiTransports(t,e,n){if(gx.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return eM([n,Fm(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:le.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=Te.getActiveCaipNetworkId(),n=K.getAllRequestedCaipNetworks(),r=Array.from(K.state.chains?.keys()||[]),s=e?.split(":")[0],i=s?r.includes(s):!1,o=n?.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||n?.[0]}},ume=Symbol(),vB=Object.getPrototypeOf,bB=new WeakMap,dme=t=>t&&(bB.has(t)?bB.get(t):vB(t)===Object.prototype||vB(t)===Array.prototype),hme=t=>dme(t)&&t[ume]||null,MP={},ik=t=>typeof t=="object"&&t!==null,fme=t=>ik(t)&&!ok.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),pme=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(_B(l,o)||pA.has(o)&&_B(l,pA.get(o))))return!0;n(i),ik(o)&&(o=hme(o)||o);const u=!fA.has(o)&&gme(o)?AV(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),fA=new WeakMap,ok=new WeakSet,gE=[1,1],pA=new WeakMap;let _B=Object.is,mme=(t,e)=>new Proxy(t,e),gme=fme,yme=pme;function AV(t={}){if(!ik(t))throw new Error("object required");const e=pA.get(t);if(e)return e;let n=gE[0];const r=new Set,s=(y,v=++gE[0])=>{n!==v&&(n=v,r.forEach(_=>_(y,v)))};let i=gE[1];const o=(y=++gE[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([v])=>{const _=v[1](y);_>n&&(n=_)})),n),a=y=>(v,_)=>{const A=[...v];A[1]=[y,...A[1]],s(A,_)},c=new Map,l=(y,v)=>{const _=!ok.has(v)&&fA.get(v);if(_){if((MP?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const A=_[2](a(y));c.set(y,[_,A])}else c.set(y,[_])}},u=y=>{var v;const _=c.get(y);_&&(c.delete(y),(v=_[1])==null||v.call(_))},d=y=>(r.add(y),r.size===1&&c.forEach(([_,A],k)=>{if((MP?"production":void 0)!=="production"&&A)throw new Error("remove already exists");const S=_[2](a(k));c.set(k,[_,S])}),()=>{r.delete(y),r.size===0&&c.forEach(([_,A],k)=>{A&&(A(),c.set(k,[_]))})});let h=!0;const f=yme(()=>h,l,u,s),m=mme(t,f);pA.set(t,m);const g=[t,o,d];return fA.set(m,g),Reflect.ownKeys(t).forEach(y=>{const v=Object.getOwnPropertyDescriptor(t,y);"value"in v&&v.writable&&(m[y]=t[y])}),h=!1,m}function BP(t,e,n){const r=fA.get(t);(MP?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function wme(t){return ok.add(t),t}function vme(t,e,n,r){let s=t[e];return BP(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const mA={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},ki=AV({providers:{...mA},providerIds:{...mA}}),tr={state:ki,subscribeKey(t,e){return vme(ki,t,e)},subscribe(t){return BP(ki,()=>{t(ki)})},subscribeProviders(t){return BP(ki.providers,()=>t(ki.providers))},setProvider(t,e){t&&e&&(ki.providers[t]=wme(e))},getProvider(t){if(t)return ki.providers[t]},setProviderId(t,e){e&&(ki.providerIds[t]=e)},getProviderId(t){if(t)return ki.providerIds[t]},reset(){ki.providers={...mA},ki.providerIds={...mA}},resetChain(t){ki.providers[t]=void 0,ki.providerIds[t]=void 0}},EB={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Rs={set(t,e){go.isClient&&localStorage.setItem(`${lt.STORAGE_KEY}${t}`,e)},get(t){return go.isClient?localStorage.getItem(`${lt.STORAGE_KEY}${t}`):null},delete(t,e){go.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${lt.STORAGE_KEY}${t}`))}},yE=30*1e3,go={checkIfAllowedToTriggerEmail(){const t=Rs.get(lt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<yE){const n=Math.ceil((yE-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Rs.get(lt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<yE)return Math.ceil((yE-e)/1e3)}return 0},checkIfRequestExists(t){return as.NOT_SAFE_RPC_METHODS.includes(t.method)||as.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(EB.transactionHash)||t?.match(EB.signedMessage))?lt.RPC_RESPONSE_TYPE_TX:lt.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return as.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Dn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Dn||(Dn={}));var LP;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(LP||(LP={}));const Xe=Dn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cd=t=>{switch(typeof t){case"undefined":return Xe.undefined;case"string":return Xe.string;case"number":return isNaN(t)?Xe.nan:Xe.number;case"boolean":return Xe.boolean;case"function":return Xe.function;case"bigint":return Xe.bigint;case"symbol":return Xe.symbol;case"object":return Array.isArray(t)?Xe.array:t===null?Xe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Xe.promise:typeof Map<"u"&&t instanceof Map?Xe.map:typeof Set<"u"&&t instanceof Set?Xe.set:typeof Date<"u"&&t instanceof Date?Xe.date:Xe.object;default:return Xe.unknown}},Be=Dn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),bme=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");let Va=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Dn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};Va.create=t=>new Va(t);const mv=(t,e)=>{let n;switch(t.code){case Be.invalid_type:t.received===Xe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Be.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Dn.jsonStringifyReplacer)}`;break;case Be.unrecognized_keys:n=`Unrecognized key(s) in object: ${Dn.joinValues(t.keys,", ")}`;break;case Be.invalid_union:n="Invalid input";break;case Be.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Dn.joinValues(t.options)}`;break;case Be.invalid_enum_value:n=`Invalid enum value. Expected ${Dn.joinValues(t.options)}, received '${t.received}'`;break;case Be.invalid_arguments:n="Invalid function arguments";break;case Be.invalid_return_type:n="Invalid function return type";break;case Be.invalid_date:n="Invalid date";break;case Be.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Dn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Be.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Be.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Be.custom:n="Invalid input";break;case Be.invalid_intersection_types:n="Intersection results could not be merged";break;case Be.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Be.not_finite:n="Number must be finite";break;default:n=e.defaultError,Dn.assertNever(t)}return{message:n}};let CV=mv;function _me(t){CV=t}function gA(){return CV}const yA=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},Eme=[];function it(t,e){const n=yA({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,gA(),mv].filter(r=>!!r)});t.common.issues.push(n)}let to=class IV{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return qt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return IV.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return qt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}};const qt=Object.freeze({status:"aborted"}),TV=t=>({status:"dirty",value:t}),Ei=t=>({status:"valid",value:t}),$P=t=>t.status==="aborted",UP=t=>t.status==="dirty",gv=t=>t.status==="valid",wA=t=>typeof Promise<"u"&&t instanceof Promise;var _t;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(_t||(_t={}));let el=class{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}};const AB=(t,e)=>{if(gv(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Va(t.common.issues);return this._error=n,this._error}}};function Qt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}let en=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Cd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Cd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new to,ctx:{common:e.parent.common,data:e.data,parsedType:Cd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(wA(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cd(e)},i=this._parseSync({data:e,path:s.path,parent:s});return AB(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cd(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(wA(s)?s:Promise.resolve(s));return AB(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Be.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Ga({schema:this,typeName:Ot.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return su.create(this,this._def)}nullable(){return Gf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wf.create(this,this._def)}promise(){return Ag.create(this,this._def)}or(e){return Av.create([this,e],this._def)}and(e){return Cv.create(this,e,this._def)}transform(e){return new Ga({...Qt(this._def),schema:this,typeName:Ot.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new xv({...Qt(this._def),innerType:this,defaultValue:n,typeName:Ot.ZodDefault})}brand(){return new DV({typeName:Ot.ZodBranded,type:this,...Qt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new AA({...Qt(this._def),innerType:this,catchValue:n,typeName:Ot.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ak.create(this,e)}readonly(){return IA.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const Ame=/^c[^\s-]{8,}$/i,Cme=/^[a-z][a-z0-9]*$/,Ime=/^[0-9A-HJKMNP-TV-Z]{26}$/,Tme=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Sme=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xme="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let yx;const Pme=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Rme=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Nme=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Ome(t,e){return!!((e==="v4"||!e)&&Pme.test(t)||(e==="v6"||!e)&&Rme.test(t))}let _g=class $0 extends en{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Xe.string){const i=this._getOrReturnCtx(e);return it(i,{code:Be.invalid_type,expected:Xe.string,received:i.parsedType}),qt}const r=new to;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),it(s,{code:Be.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),it(s,{code:Be.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?it(s,{code:Be.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&it(s,{code:Be.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Sme.test(e.data)||(s=this._getOrReturnCtx(e,s),it(s,{validation:"email",code:Be.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")yx||(yx=new RegExp(xme,"u")),yx.test(e.data)||(s=this._getOrReturnCtx(e,s),it(s,{validation:"emoji",code:Be.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Tme.test(e.data)||(s=this._getOrReturnCtx(e,s),it(s,{validation:"uuid",code:Be.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Ame.test(e.data)||(s=this._getOrReturnCtx(e,s),it(s,{validation:"cuid",code:Be.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Cme.test(e.data)||(s=this._getOrReturnCtx(e,s),it(s,{validation:"cuid2",code:Be.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Ime.test(e.data)||(s=this._getOrReturnCtx(e,s),it(s,{validation:"ulid",code:Be.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),it(s,{validation:"url",code:Be.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),it(s,{validation:"regex",code:Be.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),it(s,{code:Be.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),it(s,{code:Be.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),it(s,{code:Be.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Nme(i).test(e.data)||(s=this._getOrReturnCtx(e,s),it(s,{code:Be.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Ome(e.data,i.version)||(s=this._getOrReturnCtx(e,s),it(s,{validation:"ip",code:Be.invalid_string,message:i.message}),r.dirty()):Dn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Be.invalid_string,..._t.errToObj(r)})}_addCheck(e){return new $0({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._t.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._t.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._t.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._t.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._t.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._t.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._t.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._t.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,..._t.errToObj(e?.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,..._t.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,..._t.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,..._t.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,..._t.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,..._t.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,..._t.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,..._t.errToObj(n)})}nonempty(e){return this.min(1,_t.errToObj(e))}trim(){return new $0({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $0({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $0({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};_g.create=t=>{var e;return new _g({checks:[],typeName:Ot.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Qt(t)})};function kme(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}let yv=class FP extends en{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Xe.number){const i=this._getOrReturnCtx(e);return it(i,{code:Be.invalid_type,expected:Xe.number,received:i.parsedType}),qt}let r;const s=new to;for(const i of this._def.checks)i.kind==="int"?Dn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),it(r,{code:Be.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),it(r,{code:Be.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),it(r,{code:Be.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?kme(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),it(r,{code:Be.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),it(r,{code:Be.not_finite,message:i.message}),s.dirty()):Dn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,_t.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_t.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_t.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_t.toString(n))}setLimit(e,n,r,s){return new FP({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:_t.toString(s)}]})}_addCheck(e){return new FP({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_t.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_t.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_t.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_t.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_t.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_t.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:_t.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_t.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_t.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Dn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};yv.create=t=>new yv({checks:[],typeName:Ot.ZodNumber,coerce:t?.coerce||!1,...Qt(t)});let wv=class jP extends en{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Xe.bigint){const i=this._getOrReturnCtx(e);return it(i,{code:Be.invalid_type,expected:Xe.bigint,received:i.parsedType}),qt}let r;const s=new to;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),it(r,{code:Be.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),it(r,{code:Be.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),it(r,{code:Be.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Dn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,_t.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_t.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_t.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_t.toString(n))}setLimit(e,n,r,s){return new jP({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:_t.toString(s)}]})}_addCheck(e){return new jP({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_t.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_t.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_t.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_t.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_t.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};wv.create=t=>{var e;return new wv({checks:[],typeName:Ot.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Qt(t)})};let vv=class extends en{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Xe.boolean){const r=this._getOrReturnCtx(e);return it(r,{code:Be.invalid_type,expected:Xe.boolean,received:r.parsedType}),qt}return Ei(e.data)}};vv.create=t=>new vv({typeName:Ot.ZodBoolean,coerce:t?.coerce||!1,...Qt(t)});let bv=class SV extends en{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Xe.date){const i=this._getOrReturnCtx(e);return it(i,{code:Be.invalid_type,expected:Xe.date,received:i.parsedType}),qt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return it(i,{code:Be.invalid_date}),qt}const r=new to;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),it(s,{code:Be.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),it(s,{code:Be.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Dn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new SV({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:_t.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:_t.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};bv.create=t=>new bv({checks:[],coerce:t?.coerce||!1,typeName:Ot.ZodDate,...Qt(t)});let vA=class extends en{_parse(e){if(this._getType(e)!==Xe.symbol){const r=this._getOrReturnCtx(e);return it(r,{code:Be.invalid_type,expected:Xe.symbol,received:r.parsedType}),qt}return Ei(e.data)}};vA.create=t=>new vA({typeName:Ot.ZodSymbol,...Qt(t)});let _v=class extends en{_parse(e){if(this._getType(e)!==Xe.undefined){const r=this._getOrReturnCtx(e);return it(r,{code:Be.invalid_type,expected:Xe.undefined,received:r.parsedType}),qt}return Ei(e.data)}};_v.create=t=>new _v({typeName:Ot.ZodUndefined,...Qt(t)});let Ev=class extends en{_parse(e){if(this._getType(e)!==Xe.null){const r=this._getOrReturnCtx(e);return it(r,{code:Be.invalid_type,expected:Xe.null,received:r.parsedType}),qt}return Ei(e.data)}};Ev.create=t=>new Ev({typeName:Ot.ZodNull,...Qt(t)});let Eg=class extends en{constructor(){super(...arguments),this._any=!0}_parse(e){return Ei(e.data)}};Eg.create=t=>new Eg({typeName:Ot.ZodAny,...Qt(t)});let Sf=class extends en{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ei(e.data)}};Sf.create=t=>new Sf({typeName:Ot.ZodUnknown,...Qt(t)});let gu=class extends en{_parse(e){const n=this._getOrReturnCtx(e);return it(n,{code:Be.invalid_type,expected:Xe.never,received:n.parsedType}),qt}};gu.create=t=>new gu({typeName:Ot.ZodNever,...Qt(t)});let bA=class extends en{_parse(e){if(this._getType(e)!==Xe.undefined){const r=this._getOrReturnCtx(e);return it(r,{code:Be.invalid_type,expected:Xe.void,received:r.parsedType}),qt}return Ei(e.data)}};bA.create=t=>new bA({typeName:Ot.ZodVoid,...Qt(t)});let Wf=class n1 extends en{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Xe.array)return it(n,{code:Be.invalid_type,expected:Xe.array,received:n.parsedType}),qt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(it(n,{code:o?Be.too_big:Be.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(it(n,{code:Be.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(it(n,{code:Be.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new el(n,o,n.path,a)))).then(o=>to.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new el(n,o,n.path,a)));return to.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new n1({...this._def,minLength:{value:e,message:_t.toString(n)}})}max(e,n){return new n1({...this._def,maxLength:{value:e,message:_t.toString(n)}})}length(e,n){return new n1({...this._def,exactLength:{value:e,message:_t.toString(n)}})}nonempty(e){return this.min(1,e)}};Wf.create=(t,e)=>new Wf({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ot.ZodArray,...Qt(e)});function xm(t){if(t instanceof fa){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=su.create(xm(r))}return new fa({...t._def,shape:()=>e})}else return t instanceof Wf?new Wf({...t._def,type:xm(t.element)}):t instanceof su?su.create(xm(t.unwrap())):t instanceof Gf?Gf.create(xm(t.unwrap())):t instanceof th?th.create(t.items.map(e=>xm(e))):t}let fa=class xa extends en{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Dn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Xe.object){const l=this._getOrReturnCtx(e);return it(l,{code:Be.invalid_type,expected:Xe.object,received:l.parsedType}),qt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof gu&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new el(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof gu){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(it(s,{code:Be.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new el(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>to.mergeObjectSync(r,l)):to.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return _t.errToObj,new xa({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=_t.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new xa({...this._def,unknownKeys:"strip"})}passthrough(){return new xa({...this._def,unknownKeys:"passthrough"})}extend(e){return new xa({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xa({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ot.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new xa({...this._def,catchall:e})}pick(e){const n={};return Dn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new xa({...this._def,shape:()=>n})}omit(e){const n={};return Dn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new xa({...this._def,shape:()=>n})}deepPartial(){return xm(this)}partial(e){const n={};return Dn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new xa({...this._def,shape:()=>n})}required(e){const n={};return Dn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof su;)i=i._def.innerType;n[r]=i}}),new xa({...this._def,shape:()=>n})}keyof(){return kV(Dn.objectKeys(this.shape))}};fa.create=(t,e)=>new fa({shape:()=>t,unknownKeys:"strip",catchall:gu.create(),typeName:Ot.ZodObject,...Qt(e)});fa.strictCreate=(t,e)=>new fa({shape:()=>t,unknownKeys:"strict",catchall:gu.create(),typeName:Ot.ZodObject,...Qt(e)});fa.lazycreate=(t,e)=>new fa({shape:t,unknownKeys:"strip",catchall:gu.create(),typeName:Ot.ZodObject,...Qt(e)});let Av=class extends en{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Va(a.ctx.common.issues));return it(n,{code:Be.invalid_union,unionErrors:o}),qt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Va(c));return it(n,{code:Be.invalid_union,unionErrors:a}),qt}}get options(){return this._def.options}};Av.create=(t,e)=>new Av({options:t,typeName:Ot.ZodUnion,...Qt(e)});const r1=t=>t instanceof Iv?r1(t.schema):t instanceof Ga?r1(t.innerType()):t instanceof Tv?[t.value]:t instanceof Hb?t.options:t instanceof Sv?Object.keys(t.enum):t instanceof xv?r1(t._def.innerType):t instanceof _v?[void 0]:t instanceof Ev?[null]:null;let xV=class PV extends en{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Xe.object)return it(n,{code:Be.invalid_type,expected:Xe.object,received:n.parsedType}),qt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(it(n,{code:Be.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),qt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=r1(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new PV({typeName:Ot.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Qt(r)})}};function VP(t,e){const n=Cd(t),r=Cd(e);if(t===e)return{valid:!0,data:t};if(n===Xe.object&&r===Xe.object){const s=Dn.objectKeys(e),i=Dn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=VP(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Xe.array&&r===Xe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=VP(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Xe.date&&r===Xe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}let Cv=class extends en{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if($P(i)||$P(o))return qt;const a=VP(i.value,o.value);return a.valid?((UP(i)||UP(o))&&n.dirty(),{status:n.value,value:a.data}):(it(r,{code:Be.invalid_intersection_types}),qt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};Cv.create=(t,e,n)=>new Cv({left:t,right:e,typeName:Ot.ZodIntersection,...Qt(n)});let th=class RV extends en{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Xe.array)return it(r,{code:Be.invalid_type,expected:Xe.array,received:r.parsedType}),qt;if(r.data.length<this._def.items.length)return it(r,{code:Be.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qt;!this._def.rest&&r.data.length>this._def.items.length&&(it(r,{code:Be.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new el(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>to.mergeArray(n,o)):to.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new RV({...this._def,rest:e})}};th.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new th({items:t,typeName:Ot.ZodTuple,rest:null,...Qt(e)})};let NV=class HP extends en{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Xe.object)return it(r,{code:Be.invalid_type,expected:Xe.object,received:r.parsedType}),qt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new el(r,a,r.path,a)),value:o._parse(new el(r,r.data[a],r.path,a))});return r.common.async?to.mergeObjectAsync(n,s):to.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof en?new HP({keyType:e,valueType:n,typeName:Ot.ZodRecord,...Qt(r)}):new HP({keyType:_g.create(),valueType:e,typeName:Ot.ZodRecord,...Qt(n)})}},_A=class extends en{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Xe.map)return it(r,{code:Be.invalid_type,expected:Xe.map,received:r.parsedType}),qt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new el(r,a,r.path,[l,"key"])),value:i._parse(new el(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return qt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return qt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}};_A.create=(t,e,n)=>new _A({valueType:e,keyType:t,typeName:Ot.ZodMap,...Qt(n)});let EA=class qP extends en{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Xe.set)return it(r,{code:Be.invalid_type,expected:Xe.set,received:r.parsedType}),qt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(it(r,{code:Be.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(it(r,{code:Be.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return qt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new el(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new qP({...this._def,minSize:{value:e,message:_t.toString(n)}})}max(e,n){return new qP({...this._def,maxSize:{value:e,message:_t.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};EA.create=(t,e)=>new EA({valueType:t,minSize:null,maxSize:null,typeName:Ot.ZodSet,...Qt(e)});let OV=class s1 extends en{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Xe.function)return it(n,{code:Be.invalid_type,expected:Xe.function,received:n.parsedType}),qt;function r(a,c){return yA({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gA(),mv].filter(l=>!!l),issueData:{code:Be.invalid_arguments,argumentsError:c}})}function s(a,c){return yA({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gA(),mv].filter(l=>!!l),issueData:{code:Be.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Ag){const a=this;return Ei(async function(...c){const l=new Va([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ei(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Va([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Va([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new s1({...this._def,args:th.create(e).rest(Sf.create())})}returns(e){return new s1({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new s1({args:e||th.create([]).rest(Sf.create()),returns:n||Sf.create(),typeName:Ot.ZodFunction,...Qt(r)})}},Iv=class extends en{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};Iv.create=(t,e)=>new Iv({getter:t,typeName:Ot.ZodLazy,...Qt(e)});let Tv=class extends en{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return it(n,{received:n.data,code:Be.invalid_literal,expected:this._def.value}),qt}return{status:"valid",value:e.data}}get value(){return this._def.value}};Tv.create=(t,e)=>new Tv({value:t,typeName:Ot.ZodLiteral,...Qt(e)});function kV(t,e){return new Hb({values:t,typeName:Ot.ZodEnum,...Qt(e)})}let Hb=class zP extends en{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return it(n,{expected:Dn.joinValues(r),received:n.parsedType,code:Be.invalid_type}),qt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return it(n,{received:n.data,code:Be.invalid_enum_value,options:r}),qt}return Ei(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return zP.create(e)}exclude(e){return zP.create(this.options.filter(n=>!e.includes(n)))}};Hb.create=kV;let Sv=class extends en{_parse(e){const n=Dn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Xe.string&&r.parsedType!==Xe.number){const s=Dn.objectValues(n);return it(r,{expected:Dn.joinValues(s),received:r.parsedType,code:Be.invalid_type}),qt}if(n.indexOf(e.data)===-1){const s=Dn.objectValues(n);return it(r,{received:r.data,code:Be.invalid_enum_value,options:s}),qt}return Ei(e.data)}get enum(){return this._def.values}};Sv.create=(t,e)=>new Sv({values:t,typeName:Ot.ZodNativeEnum,...Qt(e)});let Ag=class extends en{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Xe.promise&&n.common.async===!1)return it(n,{code:Be.invalid_type,expected:Xe.promise,received:n.parsedType}),qt;const r=n.parsedType===Xe.promise?n.data:Promise.resolve(n.data);return Ei(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}};Ag.create=(t,e)=>new Ag({type:t,typeName:Ot.ZodPromise,...Qt(e)});let Ga=class extends en{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ot.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{it(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?qt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?qt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!gv(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>gv(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Dn.assertNever(s)}};Ga.create=(t,e,n)=>new Ga({schema:t,typeName:Ot.ZodEffects,effect:e,...Qt(n)});Ga.createWithPreprocess=(t,e,n)=>new Ga({schema:e,effect:{type:"preprocess",transform:t},typeName:Ot.ZodEffects,...Qt(n)});let su=class extends en{_parse(e){return this._getType(e)===Xe.undefined?Ei(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};su.create=(t,e)=>new su({innerType:t,typeName:Ot.ZodOptional,...Qt(e)});let Gf=class extends en{_parse(e){return this._getType(e)===Xe.null?Ei(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Gf.create=(t,e)=>new Gf({innerType:t,typeName:Ot.ZodNullable,...Qt(e)});let xv=class extends en{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Xe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};xv.create=(t,e)=>new xv({innerType:t,typeName:Ot.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Qt(e)});let AA=class extends en{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return wA(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Va(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Va(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};AA.create=(t,e)=>new AA({innerType:t,typeName:Ot.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Qt(e)});let CA=class extends en{_parse(e){if(this._getType(e)!==Xe.nan){const r=this._getOrReturnCtx(e);return it(r,{code:Be.invalid_type,expected:Xe.nan,received:r.parsedType}),qt}return{status:"valid",value:e.data}}};CA.create=t=>new CA({typeName:Ot.ZodNaN,...Qt(t)});const Dme=Symbol("zod_brand");let DV=class extends en{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},ak=class MV extends en{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?qt:i.status==="dirty"?(n.dirty(),TV(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?qt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new MV({in:e,out:n,typeName:Ot.ZodPipeline})}},IA=class extends en{_parse(e){const n=this._def.innerType._parse(e);return gv(n)&&(n.value=Object.freeze(n.value)),n}};IA.create=(t,e)=>new IA({innerType:t,typeName:Ot.ZodReadonly,...Qt(e)});const BV=(t,e={},n)=>t?Eg.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Eg.create(),Mme={object:fa.lazycreate};var Ot;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ot||(Ot={}));const Bme=(t,e={message:`Input not instance of ${t.name}`})=>BV(n=>n instanceof t,e),LV=_g.create,$V=yv.create,Lme=CA.create,$me=wv.create,UV=vv.create,Ume=bv.create,Fme=vA.create,jme=_v.create,Vme=Ev.create,Hme=Eg.create,qme=Sf.create,zme=gu.create,Wme=bA.create,Gme=Wf.create,Kme=fa.create,Qme=fa.strictCreate,Yme=Av.create,Zme=xV.create,Jme=Cv.create,Xme=th.create,ege=NV.create,tge=_A.create,nge=EA.create,rge=OV.create,sge=Iv.create,ige=Tv.create,oge=Hb.create,age=Sv.create,cge=Ag.create,CB=Ga.create,lge=su.create,uge=Gf.create,dge=Ga.createWithPreprocess,hge=ak.create,fge=()=>LV().optional(),pge=()=>$V().optional(),mge=()=>UV().optional(),gge={string:(t=>_g.create({...t,coerce:!0})),number:(t=>yv.create({...t,coerce:!0})),boolean:(t=>vv.create({...t,coerce:!0})),bigint:(t=>wv.create({...t,coerce:!0})),date:(t=>bv.create({...t,coerce:!0}))},yge=qt;var j=Object.freeze({__proto__:null,defaultErrorMap:mv,setErrorMap:_me,getErrorMap:gA,makeIssue:yA,EMPTY_PATH:Eme,addIssueToContext:it,ParseStatus:to,INVALID:qt,DIRTY:TV,OK:Ei,isAborted:$P,isDirty:UP,isValid:gv,isAsync:wA,get util(){return Dn},get objectUtil(){return LP},ZodParsedType:Xe,getParsedType:Cd,ZodType:en,ZodString:_g,ZodNumber:yv,ZodBigInt:wv,ZodBoolean:vv,ZodDate:bv,ZodSymbol:vA,ZodUndefined:_v,ZodNull:Ev,ZodAny:Eg,ZodUnknown:Sf,ZodNever:gu,ZodVoid:bA,ZodArray:Wf,ZodObject:fa,ZodUnion:Av,ZodDiscriminatedUnion:xV,ZodIntersection:Cv,ZodTuple:th,ZodRecord:NV,ZodMap:_A,ZodSet:EA,ZodFunction:OV,ZodLazy:Iv,ZodLiteral:Tv,ZodEnum:Hb,ZodNativeEnum:Sv,ZodPromise:Ag,ZodEffects:Ga,ZodTransformer:Ga,ZodOptional:su,ZodNullable:Gf,ZodDefault:xv,ZodCatch:AA,ZodNaN:CA,BRAND:Dme,ZodBranded:DV,ZodPipeline:ak,ZodReadonly:IA,custom:BV,Schema:en,ZodSchema:en,late:Mme,get ZodFirstPartyTypeKind(){return Ot},coerce:gge,any:Hme,array:Gme,bigint:$me,boolean:UV,date:Ume,discriminatedUnion:Zme,effect:CB,enum:oge,function:rge,instanceof:Bme,intersection:Jme,lazy:sge,literal:ige,map:tge,nan:Lme,nativeEnum:age,never:zme,null:Vme,nullable:uge,number:$V,object:Kme,oboolean:mge,onumber:pge,optional:lge,ostring:fge,pipeline:hge,preprocess:dge,promise:cge,record:ege,set:nge,strictObject:Qme,string:LV,symbol:Fme,transformer:CB,tuple:Xme,undefined:jme,union:Yme,unknown:qme,void:Wme,NEVER:yge,ZodIssueCode:Be,quotelessJson:bme,ZodError:Va});const kr=j.object({message:j.string()});function nt(t){return j.literal(lt[t])}const DI=j.object({serializedMessage:j.string().optional(),accountAddress:j.string(),chainId:j.string(),notBefore:j.string().optional(),domain:j.string(),uri:j.string(),version:j.string(),nonce:j.string(),statement:j.string().optional(),resources:j.array(j.string()).optional(),requestId:j.string().optional(),issuedAt:j.string().optional(),expirationTime:j.string().optional()});j.object({accessList:j.array(j.string()),blockHash:j.string().nullable(),blockNumber:j.string().nullable(),chainId:j.string().or(j.number()),from:j.string(),gas:j.string(),hash:j.string(),input:j.string().nullable(),maxFeePerGas:j.string(),maxPriorityFeePerGas:j.string(),nonce:j.string(),r:j.string(),s:j.string(),to:j.string(),transactionIndex:j.string().nullable(),type:j.string(),v:j.string(),value:j.string()});const wge=j.object({chainId:j.string().or(j.number()),rpcUrl:j.optional(j.string())}),vge=j.object({email:j.string().email()}),bge=j.object({otp:j.string()}),_ge=j.object({uri:j.string(),preferredAccountType:j.optional(j.string()),chainId:j.optional(j.string().or(j.number())),siwxMessage:j.optional(DI),rpcUrl:j.optional(j.string())}),Ege=j.object({chainId:j.optional(j.string().or(j.number())),preferredAccountType:j.optional(j.string()),socialUri:j.optional(j.string()),siwxMessage:j.optional(DI),rpcUrl:j.optional(j.string())}),Age=j.object({provider:j.enum(["google","github","apple","facebook","x","discord"])}),Cge=j.object({email:j.string().email()}),Ige=j.object({otp:j.string()}),Tge=j.object({otp:j.string()}),Sge=j.object({themeMode:j.optional(j.enum(["light","dark"])),themeVariables:j.optional(j.record(j.string(),j.string().or(j.number()))),w3mThemeVariables:j.optional(j.record(j.string(),j.string()))}),xge=j.object({metadata:j.object({name:j.string(),description:j.string(),url:j.string(),icons:j.array(j.string())}).optional(),sdkVersion:j.string().optional(),sdkType:j.string().optional(),projectId:j.string()}),Pge=j.object({type:j.string()}),Rge=j.object({action:j.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Nge=j.object({url:j.string()}),Oge=j.object({userName:j.string()}),kge=j.object({email:j.string().optional().nullable(),address:j.string(),chainId:j.string().or(j.number()),accounts:j.array(j.object({address:j.string(),type:j.enum([as.ACCOUNT_TYPES.EOA,as.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:j.string().optional().nullable(),preferredAccountType:j.optional(j.string()),signature:j.string().optional(),message:j.string().optional(),siwxMessage:j.optional(DI)}),Dge=j.object({action:j.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Mge=j.object({email:j.string().email().optional().nullable(),address:j.string(),chainId:j.string().or(j.number()),smartAccountDeployed:j.optional(j.boolean()),accounts:j.array(j.object({address:j.string(),type:j.enum([as.ACCOUNT_TYPES.EOA,as.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:j.optional(j.string()),signature:j.string().optional(),message:j.string().optional(),siwxMessage:j.optional(DI)}),Bge=j.object({uri:j.string()}),Lge=j.object({isConnected:j.boolean()}),$ge=j.object({chainId:j.string().or(j.number())}),Uge=j.object({chainId:j.string().or(j.number())}),Fge=j.object({newEmail:j.string().email()}),jge=j.object({smartAccountEnabledNetworks:j.array(j.number())});j.object({address:j.string(),isDeployed:j.boolean()});const Vge=j.object({version:j.string().optional()}),Hge=j.object({type:j.string(),address:j.string()}),qge=j.any(),zge=j.object({method:j.literal("eth_accounts")}),Wge=j.object({method:j.literal("eth_blockNumber")}),Gge=j.object({method:j.literal("eth_call"),params:j.array(j.any())}),Kge=j.object({method:j.literal("eth_chainId")}),Qge=j.object({method:j.literal("eth_estimateGas"),params:j.array(j.any())}),Yge=j.object({method:j.literal("eth_feeHistory"),params:j.array(j.any())}),Zge=j.object({method:j.literal("eth_gasPrice")}),Jge=j.object({method:j.literal("eth_getAccount"),params:j.array(j.any())}),Xge=j.object({method:j.literal("eth_getBalance"),params:j.array(j.any())}),eye=j.object({method:j.literal("eth_getBlockByHash"),params:j.array(j.any())}),tye=j.object({method:j.literal("eth_getBlockByNumber"),params:j.array(j.any())}),nye=j.object({method:j.literal("eth_getBlockReceipts"),params:j.array(j.any())}),rye=j.object({method:j.literal("eth_getBlockTransactionCountByHash"),params:j.array(j.any())}),sye=j.object({method:j.literal("eth_getBlockTransactionCountByNumber"),params:j.array(j.any())}),iye=j.object({method:j.literal("eth_getCode"),params:j.array(j.any())}),oye=j.object({method:j.literal("eth_getFilterChanges"),params:j.array(j.any())}),aye=j.object({method:j.literal("eth_getFilterLogs"),params:j.array(j.any())}),cye=j.object({method:j.literal("eth_getLogs"),params:j.array(j.any())}),lye=j.object({method:j.literal("eth_getProof"),params:j.array(j.any())}),uye=j.object({method:j.literal("eth_getStorageAt"),params:j.array(j.any())}),dye=j.object({method:j.literal("eth_getTransactionByBlockHashAndIndex"),params:j.array(j.any())}),hye=j.object({method:j.literal("eth_getTransactionByBlockNumberAndIndex"),params:j.array(j.any())}),fye=j.object({method:j.literal("eth_getTransactionByHash"),params:j.array(j.any())}),pye=j.object({method:j.literal("eth_getTransactionCount"),params:j.array(j.any())}),mye=j.object({method:j.literal("eth_getTransactionReceipt"),params:j.array(j.any())}),gye=j.object({method:j.literal("eth_getUncleCountByBlockHash"),params:j.array(j.any())}),yye=j.object({method:j.literal("eth_getUncleCountByBlockNumber"),params:j.array(j.any())}),wye=j.object({method:j.literal("eth_maxPriorityFeePerGas")}),vye=j.object({method:j.literal("eth_newBlockFilter")}),bye=j.object({method:j.literal("eth_newFilter"),params:j.array(j.any())}),_ye=j.object({method:j.literal("eth_newPendingTransactionFilter")}),Eye=j.object({method:j.literal("eth_sendRawTransaction"),params:j.array(j.any())}),Aye=j.object({method:j.literal("eth_syncing"),params:j.array(j.any())}),Cye=j.object({method:j.literal("eth_uninstallFilter"),params:j.array(j.any())}),IB=j.object({method:j.literal("personal_sign"),params:j.array(j.any())}),Iye=j.object({method:j.literal("eth_signTypedData_v4"),params:j.array(j.any())}),Tye=j.object({method:j.literal("eth_sendTransaction"),params:j.array(j.any())}),Sye=j.object({method:j.literal("solana_signMessage"),params:j.object({message:j.string(),pubkey:j.string()})}),xye=j.object({method:j.literal("solana_signTransaction"),params:j.object({transaction:j.string()})}),Pye=j.object({method:j.literal("solana_signAllTransactions"),params:j.object({transactions:j.array(j.string())})}),Rye=j.object({method:j.literal("solana_signAndSendTransaction"),params:j.object({transaction:j.string(),options:j.object({skipPreflight:j.boolean().optional(),preflightCommitment:j.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:j.number().optional(),minContextSlot:j.number().optional()}).optional()})}),Nye=j.object({method:j.literal("wallet_sendCalls"),params:j.array(j.object({chainId:j.string().or(j.number()).optional(),from:j.string().optional(),version:j.string().optional(),capabilities:j.any().optional(),calls:j.array(j.object({to:j.string().startsWith("0x"),data:j.string().startsWith("0x").optional(),value:j.string().optional()}))}))}),Oye=j.object({method:j.literal("wallet_getCallsStatus"),params:j.array(j.string())}),kye=j.object({method:j.literal("wallet_getCapabilities"),params:j.array(j.string().or(j.number()).optional()).optional()}),Dye=j.object({method:j.literal("wallet_grantPermissions"),params:j.array(j.any())}),Mye=j.object({method:j.literal("wallet_revokePermissions"),params:j.any()}),Bye=j.object({method:j.literal("wallet_getAssets"),params:j.any()}),TB=j.object({token:j.string()}),rt=j.object({id:j.string().optional()}),wx={appEvent:rt.extend({type:nt("APP_SWITCH_NETWORK"),payload:wge}).or(rt.extend({type:nt("APP_CONNECT_EMAIL"),payload:vge})).or(rt.extend({type:nt("APP_CONNECT_DEVICE")})).or(rt.extend({type:nt("APP_CONNECT_OTP"),payload:bge})).or(rt.extend({type:nt("APP_CONNECT_SOCIAL"),payload:_ge})).or(rt.extend({type:nt("APP_GET_FARCASTER_URI")})).or(rt.extend({type:nt("APP_CONNECT_FARCASTER")})).or(rt.extend({type:nt("APP_GET_USER"),payload:j.optional(Ege)})).or(rt.extend({type:nt("APP_GET_SOCIAL_REDIRECT_URI"),payload:Age})).or(rt.extend({type:nt("APP_SIGN_OUT")})).or(rt.extend({type:nt("APP_IS_CONNECTED"),payload:j.optional(TB)})).or(rt.extend({type:nt("APP_GET_CHAIN_ID")})).or(rt.extend({type:nt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(rt.extend({type:nt("APP_INIT_SMART_ACCOUNT")})).or(rt.extend({type:nt("APP_SET_PREFERRED_ACCOUNT"),payload:Pge})).or(rt.extend({type:nt("APP_RPC_REQUEST"),payload:IB.or(Bye).or(zge).or(Wge).or(Gge).or(Kge).or(Qge).or(Yge).or(Zge).or(Jge).or(Xge).or(eye).or(tye).or(nye).or(rye).or(sye).or(iye).or(oye).or(aye).or(cye).or(lye).or(uye).or(dye).or(hye).or(fye).or(pye).or(mye).or(gye).or(yye).or(wye).or(vye).or(bye).or(_ye).or(Eye).or(Aye).or(Cye).or(IB).or(Iye).or(Tye).or(Sye).or(xye).or(Pye).or(Rye).or(Oye).or(Nye).or(kye).or(Dye).or(Mye).and(j.object({chainId:j.string().or(j.number()).optional(),chainNamespace:j.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:j.string().optional()}))})).or(rt.extend({type:nt("APP_UPDATE_EMAIL"),payload:Cge})).or(rt.extend({type:nt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Ige})).or(rt.extend({type:nt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Tge})).or(rt.extend({type:nt("APP_SYNC_THEME"),payload:Sge})).or(rt.extend({type:nt("APP_SYNC_DAPP_DATA"),payload:xge})).or(rt.extend({type:nt("APP_RELOAD")})).or(rt.extend({type:nt("APP_RPC_ABORT")})),frameEvent:rt.extend({type:nt("FRAME_SWITCH_NETWORK_ERROR"),payload:kr}).or(rt.extend({type:nt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Uge})).or(rt.extend({type:nt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Rge})).or(rt.extend({type:nt("FRAME_CONNECT_EMAIL_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Nge})).or(rt.extend({type:nt("FRAME_GET_FARCASTER_URI_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Oge})).or(rt.extend({type:nt("FRAME_CONNECT_FARCASTER_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_CONNECT_OTP_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_CONNECT_OTP_SUCCESS")})).or(rt.extend({type:nt("FRAME_CONNECT_DEVICE_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(rt.extend({type:nt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:kge})).or(rt.extend({type:nt("FRAME_CONNECT_SOCIAL_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_GET_USER_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_GET_USER_SUCCESS"),payload:Mge})).or(rt.extend({type:nt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Bge})).or(rt.extend({type:nt("FRAME_SIGN_OUT_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_SIGN_OUT_SUCCESS")})).or(rt.extend({type:nt("FRAME_IS_CONNECTED_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_IS_CONNECTED_SUCCESS"),payload:Lge})).or(rt.extend({type:nt("FRAME_GET_CHAIN_ID_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:$ge})).or(rt.extend({type:nt("FRAME_RPC_REQUEST_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_RPC_REQUEST_SUCCESS"),payload:qge})).or(rt.extend({type:nt("FRAME_SESSION_UPDATE"),payload:TB})).or(rt.extend({type:nt("FRAME_UPDATE_EMAIL_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Dge})).or(rt.extend({type:nt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(rt.extend({type:nt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Fge})).or(rt.extend({type:nt("FRAME_SYNC_THEME_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_SYNC_THEME_SUCCESS")})).or(rt.extend({type:nt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(rt.extend({type:nt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:jge})).or(rt.extend({type:nt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Hge})).or(rt.extend({type:nt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_READY"),payload:Vge})).or(rt.extend({type:nt("FRAME_RELOAD_ERROR"),payload:kr})).or(rt.extend({type:nt("FRAME_RELOAD_SUCCESS")}))};function vx(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function Lye({projectId:t,chainId:e,enableLogger:n,rpcUrl:r=le.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL($ne);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",Fne),i.searchParams.set("enableLogger",String(n)),i.searchParams.set("rpcUrl",r),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class $ye{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=le.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,l)=>{function u({data:d}){if(!vx(lt.FRAME_EVENT_KEY,d))return;const h=wx.frameEvent.safeParse(d);if(!h.success){console.warn("W3mFrame: invalid frame event",h.error.message);return}h.data?.id===a&&(c(h.data),window.removeEventListener("message",u))}go.isClient&&(window.addEventListener("message",u),l.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:a=>{go.isClient&&window.addEventListener("message",({data:c})=>{if(!vx(lt.FRAME_EVENT_KEY,c))return;const l=wx.frameEvent.safeParse(c);l.success?a(l.data):console.warn("W3mFrame: invalid frame event",l.error.message)})},onAppEvent:a=>{go.isClient&&window.addEventListener("message",({data:c})=>{if(!vx(lt.APP_EVENT_KEY,c))return;const l=wx.appEvent.safeParse(c);l.success||console.warn("W3mFrame: invalid app event",l.error.message),a(c)})},postAppEvent:a=>{if(go.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(go.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),go.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=Lye({projectId:e,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=a,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Uye{constructor(e){const n=cy({level:Une}),{logger:r,chunkLoggerController:s}=WO({opts:n});this.logger=si(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Fye{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Uye(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const l=this.getRpcUrl(n);this.w3mFrame=new $ye({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:l,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===lt.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Rs.get(lt.EMAIL_LOGIN_USED_KEY)}getEmail(){return Rs.get(lt.EMAIL)}getUsername(){return Rs.get(lt.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:lt.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{go.checkIfAllowedToTriggerEmail(),await this.init();const n=await this.appEvent({type:lt.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){try{return this.appEvent({type:lt.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:lt.APP_CONNECT_OTP,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:lt.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:lt.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:lt.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){try{const n=await this.appEvent({type:lt.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:lt.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){try{const n=await this.appEvent({type:lt.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){try{return this.appEvent({type:lt.APP_SYNC_THEME,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){try{return this.appEvent({type:lt.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:lt.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:lt.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){if(e?.socialUri)try{await this.init();const n=this.getRpcUrl(e.chainId),r=await this.appEvent({type:lt.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:n}});return r.userName&&this.setSocialLoginSuccess(r.userName),this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting social"),n}else try{const n=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:n,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(n)});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting"),n}}async getUser(e){try{await this.init();const n=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:lt.APP_GET_USER,payload:{...e,chainId:n,rpcUrl:this.getRpcUrl(n)}});return this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting"),n}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){try{await this.init();const s=this.getRpcUrl(n),i=await this.appEvent({type:lt.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:s,preferredAccountType:r}});return i.userName&&this.setSocialLoginSuccess(i.userName),i}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:lt.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:lt.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const n=this.getRpcUrl(e),r=await this.appEvent({type:lt.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:n}});return this.setLastUsedChainId(r.chainId),r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error switching network"),n}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async n=>{const r=setTimeout(()=>{n()},3e3);await this.appEvent({type:lt.APP_SIGN_OUT}),clearTimeout(r),n()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const n=e;try{if(as.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const r=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(r)?.id;n.chainNamespace=r,n.chainId=s,n.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const i=await this.appEvent({type:lt.APP_RPC_REQUEST,payload:n});return this.rpcSuccessHandler?.(i,n),i}catch(r){throw this.rpcErrorHandler?.(r,n),this.w3mLogger?.logger.error({error:r},"Error requesting"),r}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===lt.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===lt.FRAME_IS_CONNECTED_ERROR&&e(),n.type===lt.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===lt.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===lt.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===lt.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===lt.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:as.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(this.openRpcRequests.map(async({abortController:e,method:n})=>{as.SAFE_RPC_METHODS.includes(n)||e.abort(),await this.appEvent({type:lt.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[lt.APP_SYNC_DAPP_DATA,lt.APP_SYNC_THEME,lt.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[lt.APP_CONNECT_EMAIL,lt.APP_CONNECT_DEVICE,lt.APP_CONNECT_OTP,lt.APP_CONNECT_SOCIAL,lt.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{const u=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const f=e;this.openRpcRequests=[...this.openRpcRequests,{...f.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(f,m){f.id===u&&(m?.logger.info?.({framEvent:f,id:u},"Received frame response"),f.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in f&&c(f.payload),c(void 0)):f.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in f&&l(new Error(f.payload?.message||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,f=>h(f,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Rs.set(lt.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Rs.set(lt.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Rs.set(lt.EMAIL,e),Rs.set(lt.EMAIL_LOGIN_USED_KEY,"true"),Rs.delete(lt.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Rs.delete(lt.EMAIL_LOGIN_USED_KEY),Rs.delete(lt.EMAIL),Rs.delete(lt.LAST_USED_CHAIN_KEY),Rs.delete(lt.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Rs.set(lt.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Rs.get(lt.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Rs.set(lt.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=qi.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getCaipNetworks(n);return(e?r.find(i=>String(i.id)===String(e)||i.caipNetworkId===e):r[0])?.rpcUrls.default.http?.[0]}}class xf{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){return xf.instance||(xf.instance=new Fye({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!be.state.remoteFeatures?.emailCapture})),xf.instance}}var jye=Object.defineProperty,Vye=(t,e,n)=>e in t?jye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SB=(t,e,n)=>Vye(t,typeof e!="symbol"?e+"":e,n);let Hye=class extends Ep{constructor(e){super(),this.opts=e,SB(this,"protocol","wc"),SB(this,"version",2)}};var qye=Object.defineProperty,zye=(t,e,n)=>e in t?qye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wye=(t,e,n)=>zye(t,e+"",n);let Gye=class extends Ep{constructor(e,n){super(),this.core=e,this.logger=n,Wye(this,"records",new Map)}},Kye=class{constructor(e,n){this.logger=e,this.core=n}},Qye=class extends Ep{constructor(e,n){super(),this.relayer=e,this.logger=n}},Yye=class extends Ep{constructor(e){super()}},Zye=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},Jye=class extends Ep{constructor(e,n){super(),this.relayer=e,this.logger=n}},Xye=class extends Ep{constructor(e,n){super(),this.core=e,this.logger=n}},e0e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},t0e=class{constructor(e,n){this.projectId=e,this.logger=n}},n0e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var r0e=Object.defineProperty,s0e=(t,e,n)=>e in t?r0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xB=(t,e,n)=>s0e(t,typeof e!="symbol"?e+"":e,n);let i0e=class{constructor(e){this.opts=e,xB(this,"protocol","wc"),xB(this,"version",2)}},o0e=class{constructor(e){this.client=e}};function Pv(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function WP(t){return Pv(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const FV="2.31.0";let bx={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${FV}`},MI=class GP extends Error{constructor(e,n={}){const r=n.cause instanceof GP?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof GP&&n.cause.docsPath||n.docsPath,i=bx.getDocsUrl?.({...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...bx.version?[`Version: ${bx.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=FV}walk(e){return jV(this,e)}};function jV(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?jV(t.cause,e):e?null:t}let VV=class extends MI{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function uy(t,{dir:e,size:n=32}={}){return typeof t=="string"?a0e(t,{dir:e,size:n}):c0e(t,{dir:e,size:n})}function a0e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new VV({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function c0e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new VV({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let l0e=class extends MI{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},u0e=class extends MI{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function dy(t,{size:e}){if(WP(t)>e)throw new u0e({givenSize:WP(t),maxSize:e})}function KP(t,e={}){const{signed:n}=e;e.size&&dy(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function d0e(t,e={}){return Number(KP(t,e))}const h0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function QP(t,e={}){return typeof t=="number"||typeof t=="bigint"?qV(t,e):typeof t=="string"?m0e(t,e):typeof t=="boolean"?f0e(t,e):HV(t,e)}function f0e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(dy(n,{size:e.size}),uy(n,{size:e.size})):n}function HV(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=h0e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(dy(r,{size:e.size}),uy(r,{dir:"right",size:e.size})):r}function qV(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new l0e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?uy(a,{size:r}):a}const p0e=new TextEncoder;function m0e(t,e={}){const n=p0e.encode(t);return HV(n,e)}const g0e=new TextEncoder;function y0e(t,e={}){return typeof t=="number"||typeof t=="bigint"?v0e(t,e):typeof t=="boolean"?w0e(t,e):Pv(t)?zV(t,e):WV(t,e)}function w0e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(dy(n,{size:e.size}),uy(n,{size:e.size})):n}const Pl={zero:48,nine:57,A:65,F:70,a:97,f:102};function PB(t){if(t>=Pl.zero&&t<=Pl.nine)return t-Pl.zero;if(t>=Pl.A&&t<=Pl.F)return t-(Pl.A-10);if(t>=Pl.a&&t<=Pl.f)return t-(Pl.a-10)}function zV(t,e={}){let n=t;e.size&&(dy(n,{size:e.size}),n=uy(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=PB(r.charCodeAt(a++)),l=PB(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new MI(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function v0e(t,e){const n=qV(t,e);return zV(n)}function WV(t,e={}){const n=g0e.encode(t);return typeof e.size=="number"?(dy(n,{size:e.size}),uy(n,{dir:"right",size:e.size})):n}function GV(t,e){const n=e||"hex",r=EO(Pv(t,{strict:!1})?y0e(t):t);return n==="bytes"?r:QP(r)}let b0e=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const _x=new b0e(8192);function _0e(t,e){if(_x.has(`${t}.${e}`))return _x.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=GV(WV(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return _x.set(`${t}.${e}`,i),i}function E0e(t){const e=GV(`0x${t.substring(4)}`).substring(26);return _0e(`0x${e}`)}async function A0e({hash:t,signature:e}){const n=Pv(t)?t:QP(t),{secp256k1:r}=await un(async()=>{const{secp256k1:o}=await import("./secp256k1-C21G73AV.js");return{secp256k1:o}},__vite__mapDeps([4,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),m=RB(f);return new r.Signature(KP(l),KP(u)).addRecoveryBit(m)}const o=Pv(e)?e:QP(e);if(WP(o)!==65)throw new Error("invalid signature length");const a=d0e(`0x${o.slice(130)}`),c=RB(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function RB(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function C0e({hash:t,signature:e}){return E0e(await A0e({hash:t,signature:e}))}function I0e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const m=(f-h)*i+1>>>0,g=new Uint8Array(m);for(;h!==f;){let _=l[h],A=0;for(let k=m-1;(_!==0||A<d)&&k!==-1;k--,A++)_+=256*g[k]>>>0,g[k]=_%n>>>0,_=_/n>>>0;if(_!==0)throw new Error("Non-zero carry");d=A,h++}let y=m-d;for(;y!==m&&g[y]===0;)y++;let v=r.repeat(u);for(;y<m;++y)v+=t.charAt(g[y]);return v}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,m=new Uint8Array(f);for(;u<l.length;){const _=l.charCodeAt(u);if(_>255)return;let A=e[_];if(A===255)return;let k=0;for(let S=f-1;(A!==0||k<h)&&S!==-1;S--,k++)A+=n*m[S]>>>0,m[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");h=k,u++}let g=f-h;for(;g!==f&&m[g]===0;)g++;const y=new Uint8Array(d+(f-g));let v=d;for(;g!==f;)y[v++]=m[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var T0e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const hy=I0e(T0e);var S0e={};const x0e=":";function Pf(t){const[e,n]=t.split(x0e);return{namespace:e,reference:n}}function KV(t,e){return t.includes(":")?[t]:e.chains||[]}var P0e=Object.defineProperty,R0e=Object.defineProperties,N0e=Object.getOwnPropertyDescriptors,NB=Object.getOwnPropertySymbols,O0e=Object.prototype.hasOwnProperty,k0e=Object.prototype.propertyIsEnumerable,YP=(t,e,n)=>e in t?P0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OB=(t,e)=>{for(var n in e||(e={}))O0e.call(e,n)&&YP(t,n,e[n]);if(NB)for(var n of NB(e))k0e.call(e,n)&&YP(t,n,e[n]);return t},D0e=(t,e)=>R0e(t,N0e(e)),kB=(t,e,n)=>YP(t,typeof e!="symbol"?e+"":e,n);const M0e="ReactNative",bo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},B0e="js";function TA(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function mh(){return!mu.getDocument()&&!!mu.getNavigator()&&navigator.product===M0e}function L0e(){return mh()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="android"}function $0e(){return mh()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="ios"}function fy(){return!TA()&&!!mu.getNavigator()&&!!mu.getDocument()}function qb(){return mh()?bo.reactNative:TA()?bo.node:fy()?bo.browser:bo.unknown}function DB(){var t;try{return mh()&&typeof globalThis<"u"&&typeof globalThis?.Application<"u"?(t=globalThis.Application)==null?void 0:t.applicationId:void 0}catch{return}}function U0e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function F0e(t){var e,n;const r=QV();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),D0e(OB(OB({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function QV(){return ghe.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function j0e(){if(qb()===bo.reactNative&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"){const{OS:n,Version:r}=globalThis.Platform;return[n,r].join("-")}const t=lhe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function V0e(){var t;const e=qb();return e===bo.browser?[e,((t=mu.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function YV(t,e,n){const r=j0e(),s=V0e();return[[t,e].join("-"),[B0e,n].join("-"),r,s].join("/")}function H0e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=YV(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=U0e(l[1]||"",d);return l[0]+"?"+h}function df(t,e){return t.filter(n=>e.includes(n)).length===t.length}function ZP(t){return Object.fromEntries(t.entries())}function JP(t){return new Map(Object.entries(t))}function tf(t=Ve.FIVE_MINUTES,e){const n=Ve.toMiliseconds(t||Ve.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Dc(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function ZV(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function q0e(t){return ZV("topic",t)}function z0e(t){return ZV("id",t)}function JV(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function es(t,e){return Ve.fromMiliseconds(Date.now()+Ve.toMiliseconds(t))}function yd(t){return Date.now()>=Ve.toMiliseconds(t)}function Un(t,e){return`${t}${e?`:${e}`:""}`}function $c(t=[],e=[]){return[...new Set([...t,...e])]}async function W0e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s?.href;if(typeof i!="string")return;const o=G0e(i,t,e),a=qb();if(a===bo.browser){if(!((r=mu.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}K0e(o)}else a===bo.reactNative&&typeof globalThis?.Linking<"u"&&await globalThis.Linking.openURL(o)}catch(s){console.error(s)}}function G0e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${J0e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function K0e(t){let e="_self";Z0e()?e="_top":(Y0e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Q0e(t,e){let n="";try{if(fy()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function MB(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function BB(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ck(){return typeof process<"u"&&S0e.IS_VITEST==="true"}function Y0e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Z0e(){try{return window.self!==window.top}catch{return!1}}function J0e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function XV(t){return Buffer.from(t,"base64").toString("utf-8")}function X0e(t){return new Promise(e=>setTimeout(e,t))}let ewe=class{constructor({limit:e}){kB(this,"limit"),kB(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const wE=BigInt(2**32-1),LB=BigInt(32);function eH(t,e=!1){return e?{h:Number(t&wE),l:Number(t>>LB&wE)}:{h:Number(t>>LB&wE)|0,l:Number(t&wE)|0}}function tH(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=eH(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const $B=(t,e,n)=>t>>>n,UB=(t,e,n)=>t<<32-n|e>>>n,wd=(t,e,n)=>t>>>n|e<<32-n,vd=(t,e,n)=>t<<32-n|e>>>n,U0=(t,e,n)=>t<<64-n|e>>>n-32,F0=(t,e,n)=>t>>>n-32|e<<64-n,twe=(t,e)=>e,nwe=(t,e)=>t,rwe=(t,e,n)=>t<<n|e>>>32-n,swe=(t,e,n)=>e<<n|t>>>32-n,iwe=(t,e,n)=>e<<n-32|t>>>64-n,owe=(t,e,n)=>t<<n-32|e>>>64-n;function Ra(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const lk=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),uk=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,awe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),cwe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,lwe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),uwe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,sm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function dk(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function yu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pa(t,...e){if(!dk(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function hk(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");yu(t.outputLen),yu(t.blockLen)}function nh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fk(t,e){pa(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Rv(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ma(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ex(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function pc(t,e){return t<<32-e|t>>>e}const nH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function rH(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const $l=nH?t=>t:t=>rH(t);function dwe(t){for(let e=0;e<t.length;e++)t[e]=rH(t[e]);return t}const bd=nH?t=>t:dwe,sH=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hwe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Nv(t){if(pa(t),sH)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=hwe[t[n]];return e}const Rl={_0:48,_9:57,A:65,F:70,a:97,f:102};function FB(t){if(t>=Rl._0&&t<=Rl._9)return t-Rl._0;if(t>=Rl.A&&t<=Rl.F)return t-(Rl.A-10);if(t>=Rl.a&&t<=Rl.f)return t-(Rl.a-10)}function pk(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(sH)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=FB(t.charCodeAt(i)),a=FB(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function fwe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ha(t){return typeof t=="string"&&(t=fwe(t)),pa(t),t}function hf(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];pa(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let BI=class{};function zb(t){const e=r=>t().update(Ha(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function pwe(t){const e=(r,s)=>t(s).update(Ha(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function py(t=32){if(sm&&typeof sm.getRandomValues=="function")return sm.getRandomValues(new Uint8Array(t));if(sm&&typeof sm.randomBytes=="function")return Uint8Array.from(sm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const mwe=BigInt(0),v0=BigInt(1),gwe=BigInt(2),ywe=BigInt(7),wwe=BigInt(256),vwe=BigInt(113),iH=[],oH=[],aH=[];for(let t=0,e=v0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],iH.push(2*(5*r+n)),oH.push((t+1)*(t+2)/2%64);let s=mwe;for(let i=0;i<7;i++)e=(e<<v0^(e>>ywe)*vwe)%wwe,e&gwe&&(s^=v0<<(v0<<BigInt(i))-v0);aH.push(s)}const cH=tH(aH,!0),bwe=cH[0],_we=cH[1],jB=(t,e,n)=>n>32?iwe(t,e,n):rwe(t,e,n),VB=(t,e,n)=>n>32?owe(t,e,n):swe(t,e,n);function Ewe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=jB(l,u,1)^n[a],h=VB(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=oH[o],c=jB(s,i,a),l=VB(s,i,a),u=iH[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=bwe[r],t[1]^=_we[r]}ma(n)}let Awe=class lH extends BI{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,yu(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Rv(this.state)}clone(){return this._cloneInto()}keccak(){bd(this.state32),Ewe(this.state32,this.rounds),bd(this.state32),this.posOut=0,this.pos=0}update(e){nh(this),e=Ha(e),pa(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){nh(this,!1),pa(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return yu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ma(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new lH(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Cwe=(t,e,n)=>zb(()=>new Awe(e,t,n)),Iwe=Cwe(1,136,256/8);function Twe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Swe(t,e,n){return t&e^~t&n}function xwe(t,e,n){return t&e^t&n^e&n}let uH=class extends BI{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Ex(this.buffer)}update(e){nh(this),e=Ha(e),pa(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Ex(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){nh(this),fk(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ma(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Twe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Ex(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const rd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vs=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Hs=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Pwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sd=new Uint32Array(64);let Rwe=class extends uH{constructor(e=32){super(64,e,8,!1),this.A=rd[0]|0,this.B=rd[1]|0,this.C=rd[2]|0,this.D=rd[3]|0,this.E=rd[4]|0,this.F=rd[5]|0,this.G=rd[6]|0,this.H=rd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)sd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=sd[d-15],f=sd[d-2],m=pc(h,7)^pc(h,18)^h>>>3,g=pc(f,17)^pc(f,19)^f>>>10;sd[d]=g+sd[d-7]+m+sd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=pc(a,6)^pc(a,11)^pc(a,25),f=u+h+Swe(a,c,l)+Pwe[d]+sd[d]|0,m=(pc(r,2)^pc(r,13)^pc(r,22))+xwe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){ma(sd)}destroy(){this.set(0,0,0,0,0,0,0,0),ma(this.buffer)}};const dH=tH(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Nwe=dH[0],Owe=dH[1],id=new Uint32Array(80),od=new Uint32Array(80);let mk=class extends uH{constructor(e=64){super(128,e,16,!1),this.Ah=Hs[0]|0,this.Al=Hs[1]|0,this.Bh=Hs[2]|0,this.Bl=Hs[3]|0,this.Ch=Hs[4]|0,this.Cl=Hs[5]|0,this.Dh=Hs[6]|0,this.Dl=Hs[7]|0,this.Eh=Hs[8]|0,this.El=Hs[9]|0,this.Fh=Hs[10]|0,this.Fl=Hs[11]|0,this.Gh=Hs[12]|0,this.Gl=Hs[13]|0,this.Hh=Hs[14]|0,this.Hl=Hs[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:m,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,m,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,m,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=m|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let A=0;A<16;A++,n+=4)id[A]=e.getUint32(n),od[A]=e.getUint32(n+=4);for(let A=16;A<80;A++){const k=id[A-15]|0,S=od[A-15]|0,R=wd(k,S,1)^wd(k,S,8)^$B(k,S,7),T=vd(k,S,1)^vd(k,S,8)^UB(k,S,7),b=id[A-2]|0,E=od[A-2]|0,x=wd(b,E,19)^U0(b,E,61)^$B(b,E,6),D=vd(b,E,19)^F0(b,E,61)^UB(b,E,6),M=awe(T,D,od[A-7],od[A-16]),$=cwe(M,R,x,id[A-7],id[A-16]);id[A]=$|0,od[A]=M|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:m,Gh:g,Gl:y,Hh:v,Hl:_}=this;for(let A=0;A<80;A++){const k=wd(d,h,14)^wd(d,h,18)^U0(d,h,41),S=vd(d,h,14)^vd(d,h,18)^F0(d,h,41),R=d&f^~d&g,T=h&m^~h&y,b=lwe(_,S,T,Owe[A],od[A]),E=uwe(b,v,k,R,Nwe[A],id[A]),x=b|0,D=wd(r,s,28)^U0(r,s,34)^U0(r,s,39),M=vd(r,s,28)^F0(r,s,34)^F0(r,s,39),$=r&i^r&a^i&a,X=s&o^s&c^o&c;v=g|0,_=y|0,g=f|0,y=m|0,f=d|0,m=h|0,{h:d,l:h}=Ra(l|0,u|0,E|0,x|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const P=lk(x,M,X);r=uk(P,E,D,$),s=P|0}({h:r,l:s}=Ra(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ra(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ra(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ra(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ra(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:m}=Ra(this.Fh|0,this.Fl|0,f|0,m|0),{h:g,l:y}=Ra(this.Gh|0,this.Gl|0,g|0,y|0),{h:v,l:_}=Ra(this.Hh|0,this.Hl|0,v|0,_|0),this.set(r,s,i,o,a,c,l,u,d,h,f,m,g,y,v,_)}roundClean(){ma(id,od)}destroy(){ma(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},kwe=class extends mk{constructor(){super(48),this.Ah=Vs[0]|0,this.Al=Vs[1]|0,this.Bh=Vs[2]|0,this.Bl=Vs[3]|0,this.Ch=Vs[4]|0,this.Cl=Vs[5]|0,this.Dh=Vs[6]|0,this.Dl=Vs[7]|0,this.Eh=Vs[8]|0,this.El=Vs[9]|0,this.Fh=Vs[10]|0,this.Fl=Vs[11]|0,this.Gh=Vs[12]|0,this.Gl=Vs[13]|0,this.Hh=Vs[14]|0,this.Hl=Vs[15]|0}};const qs=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Dwe extends mk{constructor(){super(32),this.Ah=qs[0]|0,this.Al=qs[1]|0,this.Bh=qs[2]|0,this.Bl=qs[3]|0,this.Ch=qs[4]|0,this.Cl=qs[5]|0,this.Dh=qs[6]|0,this.Dl=qs[7]|0,this.Eh=qs[8]|0,this.El=qs[9]|0,this.Fh=qs[10]|0,this.Fl=qs[11]|0,this.Gh=qs[12]|0,this.Gl=qs[13]|0,this.Hh=qs[14]|0,this.Hl=qs[15]|0}}const LI=zb(()=>new Rwe),Mwe=zb(()=>new mk),Bwe=zb(()=>new kwe),Lwe=zb(()=>new Dwe),$we=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Xr=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ge=new Uint32Array(32);function ad(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Ge[2*t],l=Ge[2*t+1],u=Ge[2*e],d=Ge[2*e+1],h=Ge[2*n],f=Ge[2*n+1],m=Ge[2*r],g=Ge[2*r+1],y=lk(c,u,o);l=uk(y,l,d,a),c=y|0,{Dh:g,Dl:m}={Dh:g^l,Dl:m^c},{Dh:g,Dl:m}={Dh:twe(g,m),Dl:nwe(g)},{h:f,l:h}=Ra(f,h,g,m),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:wd(d,u,24),Bl:vd(d,u,24)},Ge[2*t]=c,Ge[2*t+1]=l,Ge[2*e]=u,Ge[2*e+1]=d,Ge[2*n]=h,Ge[2*n+1]=f,Ge[2*r]=m,Ge[2*r+1]=g}function cd(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Ge[2*t],l=Ge[2*t+1],u=Ge[2*e],d=Ge[2*e+1],h=Ge[2*n],f=Ge[2*n+1],m=Ge[2*r],g=Ge[2*r+1],y=lk(c,u,o);l=uk(y,l,d,a),c=y|0,{Dh:g,Dl:m}={Dh:g^l,Dl:m^c},{Dh:g,Dl:m}={Dh:wd(g,m,16),Dl:vd(g,m,16)},{h:f,l:h}=Ra(f,h,g,m),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:U0(d,u,63),Bl:F0(d,u,63)},Ge[2*t]=c,Ge[2*t+1]=l,Ge[2*e]=u,Ge[2*e+1]=d,Ge[2*n]=h,Ge[2*n+1]=f,Ge[2*r]=m,Ge[2*r+1]=g}function Uwe(t,e={},n,r,s){if(yu(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class Fwe extends BI{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,yu(e),yu(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Rv(this.buffer)}update(e){nh(this),e=Ha(e),pa(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(bd(s),this.compress(s,0,!1),bd(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));bd(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);bd(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){nh(this),fk(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,ma(this.buffer.subarray(n)),bd(r),this.compress(r,0,!0),bd(r);const s=Rv(e);this.get().forEach((i,o)=>s[o]=$l(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class jwe extends Fwe{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Xr[0]|0,this.v0h=Xr[1]|0,this.v1l=Xr[2]|0,this.v1h=Xr[3]|0,this.v2l=Xr[4]|0,this.v2h=Xr[5]|0,this.v3l=Xr[6]|0,this.v3h=Xr[7]|0,this.v4l=Xr[8]|0,this.v4h=Xr[9]|0,this.v5l=Xr[10]|0,this.v5h=Xr[11]|0,this.v6l=Xr[12]|0,this.v6h=Xr[13]|0,this.v7l=Xr[14]|0,this.v7h=Xr[15]|0,Uwe(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Ha(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Ha(i);const a=Rv(i);this.v4l^=$l(a[0]),this.v4h^=$l(a[1]),this.v5l^=$l(a[2]),this.v5h^=$l(a[3])}if(s!==void 0){s=Ha(s);const a=Rv(s);this.v6l^=$l(a[0]),this.v6h^=$l(a[1]),this.v7l^=$l(a[2]),this.v7h^=$l(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:m,v7l:g,v7h:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,m,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,m,g,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=m|0,this.v7l=g|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,l)=>Ge[l]=c),Ge.set(Xr,16);let{h:s,l:i}=eH(BigInt(this.length));Ge[24]=Xr[8]^i,Ge[25]=Xr[9]^s,r&&(Ge[28]=~Ge[28],Ge[29]=~Ge[29]);let o=0;const a=$we;for(let c=0;c<12;c++)ad(0,4,8,12,e,n+2*a[o++]),cd(0,4,8,12,e,n+2*a[o++]),ad(1,5,9,13,e,n+2*a[o++]),cd(1,5,9,13,e,n+2*a[o++]),ad(2,6,10,14,e,n+2*a[o++]),cd(2,6,10,14,e,n+2*a[o++]),ad(3,7,11,15,e,n+2*a[o++]),cd(3,7,11,15,e,n+2*a[o++]),ad(0,5,10,15,e,n+2*a[o++]),cd(0,5,10,15,e,n+2*a[o++]),ad(1,6,11,12,e,n+2*a[o++]),cd(1,6,11,12,e,n+2*a[o++]),ad(2,7,8,13,e,n+2*a[o++]),cd(2,7,8,13,e,n+2*a[o++]),ad(3,4,9,14,e,n+2*a[o++]),cd(3,4,9,14,e,n+2*a[o++]);this.v0l^=Ge[0]^Ge[16],this.v0h^=Ge[1]^Ge[17],this.v1l^=Ge[2]^Ge[18],this.v1h^=Ge[3]^Ge[19],this.v2l^=Ge[4]^Ge[20],this.v2h^=Ge[5]^Ge[21],this.v3l^=Ge[6]^Ge[22],this.v3h^=Ge[7]^Ge[23],this.v4l^=Ge[8]^Ge[24],this.v4h^=Ge[9]^Ge[25],this.v5l^=Ge[10]^Ge[26],this.v5h^=Ge[11]^Ge[27],this.v6l^=Ge[12]^Ge[28],this.v6h^=Ge[13]^Ge[29],this.v7l^=Ge[14]^Ge[30],this.v7h^=Ge[15]^Ge[31],ma(Ge)}destroy(){this.destroyed=!0,ma(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Vwe=pwe(t=>new jwe(t)),Hwe="https://rpc.walletconnect.org/v1";function hH(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Iwe(n)).toString("hex")}async function qwe(t,e,n,r,s,i){switch(n.t){case"eip191":return await zwe(t,e,n.s);case"eip1271":return await Wwe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function zwe(t,e,n){return(await C0e({hash:hH(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Wwe(t,e,n,r,s,i){const o=Pf(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:hH(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||Hwe}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Gwe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:m}=await f.json();return m?m.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Gwe(){return Date.now()+Math.floor(Math.random()*1e3)}function Kwe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return hy.encode(i)}function Qwe(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=Vwe(r,{dkLen:32});return hy.encode(s)}function HB(t){const e=new Uint8Array(LI(Ywe(t)));return hy.encode(e)}function Ywe(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function qB(t){const e=Buffer.from(t,"base64"),n=Jhe(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Hhe(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=Lwe(i);return ofe.encode(o).replace(/=+$/,"")}function Ax(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function Zwe(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(Ax(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(Ax(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(Ax(r.length)),s.push(r);const i=Buffer.concat(s),o=LI(i);return Buffer.from(o).toString("hex").toUpperCase()}var Jwe=Object.defineProperty,Xwe=Object.defineProperties,eve=Object.getOwnPropertyDescriptors,zB=Object.getOwnPropertySymbols,tve=Object.prototype.hasOwnProperty,nve=Object.prototype.propertyIsEnumerable,WB=(t,e,n)=>e in t?Jwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rve=(t,e)=>{for(var n in e||(e={}))tve.call(e,n)&&WB(t,n,e[n]);if(zB)for(var n of zB(e))nve.call(e,n)&&WB(t,n,e[n]);return t},sve=(t,e)=>Xwe(t,eve(e));const ive="did:pkh:",gk=t=>t?.split(":"),ove=t=>{const e=t&&gk(t);if(e)return t.includes(ive)?e[3]:e[1]},XP=t=>{const e=t&&gk(t);if(e)return e[2]+":"+e[3]},SA=t=>{const e=t&&gk(t);if(e)return e.pop()};async function GB(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=fH(s,s.iss),o=SA(s.iss);return await qwe(o,i,r,XP(s.iss),n)}const fH=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=SA(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${ove(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,m=i1(t.resources);if(m){const g=Ov(m);s=mve(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function ave(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function cve(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Kf(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function lve(t,e,n,r={}){return n?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:uve(e,n,r)}}}function uve(t,e,n={}){e=e?.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function pH(t){return Kf(t),`urn:recap:${ave(t).replace(/=/g,"")}`}function Ov(t){const e=cve(t.replace("urn:recap:",""));return Kf(e),e}function dve(t,e,n){const r=lve(t,e,n);return pH(r)}function hve(t){return t&&t.includes("urn:recap:")}function fve(t,e){const n=Ov(t),r=Ov(e),s=pve(n,r);return pH(s)}function pve(t,e){Kf(t),Kf(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=sve(rve({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function mve(t="",e){Kf(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function KB(t){var e;const n=Ov(t);Kf(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function QB(t){const e=Ov(t);Kf(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function i1(t){if(!t)return;const e=t?.[t.length-1];return hve(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function mH(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function eR(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Cx(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ji(t,...e){if(!mH(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function YB(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function gve(t,e){ji(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function jd(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Cg(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function yve(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const wve=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function vve(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function tR(t){if(typeof t=="string")t=vve(t);else if(mH(t))t=nR(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function bve(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function _ve(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Eve=(t,e)=>{function n(r,...s){if(ji(r),!wve)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?ji(l):ji(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ji(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");ji(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ji(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(ji(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function ZB(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Cve(e))throw new Error("invalid output, must be aligned");return e}function JB(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Ave(t,e,n){eR(n);const r=new Uint8Array(16),s=yve(r);return JB(s,0,BigInt(e),n),JB(s,8,BigInt(t),n),r}function Cve(t){return t.byteOffset%4===0}function nR(t){return Uint8Array.from(t)}const gH=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Ive=gH("expand 16-byte k"),Tve=gH("expand 32-byte k"),Sve=jd(Ive),xve=jd(Tve);function Nn(t,e){return t<<e|t>>>32-e}function rR(t){return t.byteOffset%4===0}const vE=64,Pve=16,yH=2**32-1,XB=new Uint32Array;function Rve(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(vE),u=jd(l),d=rR(s)&&rR(i),h=d?jd(s):XB,f=d?jd(i):XB;for(let m=0;m<c;o++){if(t(e,n,r,u,o,a),o>=yH)throw new Error("arx: counter overflow");const g=Math.min(vE,c-m);if(d&&g===vE){const y=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let v=0,_;v<Pve;v++)_=y+v,f[_]=h[_]^u[v];m+=vE;continue}for(let y=0,v;y<g;y++)v=m+y,i[v]=s[v]^l[y];m+=g}}function Nve(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=bve({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Cx(s),Cx(o),eR(i),eR(n),(a,c,l,u,d=0)=>{ji(a),ji(c),ji(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),ji(u),Cx(d),d<0||d>=yH)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let m=a.length,g,y;if(m===32)f.push(g=nR(a)),y=xve;else if(m===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=Sve,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);rR(c)||f.push(c=nR(c));const v=jd(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,v,jd(c.subarray(0,16)),v),c=c.subarray(16)}const _=16-s;if(_!==c.length)throw new Error(`arx: nonce must be ${_} or 16 bytes`);if(_!==12){const k=new Uint8Array(12);k.set(c,i?0:12-c.length),c=k,f.push(c)}const A=jd(c);return Rve(t,y,v,A,l,u,d,o),Cg(...f),u}}const Ts=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Ove{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=tR(e),ji(e,32);const n=Ts(e,0),r=Ts(e,2),s=Ts(e,4),i=Ts(e,6),o=Ts(e,8),a=Ts(e,10),c=Ts(e,12),l=Ts(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ts(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],m=o[7],g=o[8],y=o[9],v=Ts(e,n+0),_=Ts(e,n+2),A=Ts(e,n+4),k=Ts(e,n+6),S=Ts(e,n+8),R=Ts(e,n+10),T=Ts(e,n+12),b=Ts(e,n+14);let E=i[0]+(v&8191),x=i[1]+((v>>>13|_<<3)&8191),D=i[2]+((_>>>10|A<<6)&8191),M=i[3]+((A>>>7|k<<9)&8191),$=i[4]+((k>>>4|S<<12)&8191),X=i[5]+(S>>>1&8191),P=i[6]+((S>>>14|R<<2)&8191),L=i[7]+((R>>>11|T<<5)&8191),W=i[8]+((T>>>8|b<<8)&8191),Y=i[9]+(b>>>5|s),J=0,V=J+E*a+x*(5*y)+D*(5*g)+M*(5*m)+$*(5*f);J=V>>>13,V&=8191,V+=X*(5*h)+P*(5*d)+L*(5*u)+W*(5*l)+Y*(5*c),J+=V>>>13,V&=8191;let se=J+E*c+x*a+D*(5*y)+M*(5*g)+$*(5*m);J=se>>>13,se&=8191,se+=X*(5*f)+P*(5*h)+L*(5*d)+W*(5*u)+Y*(5*l),J+=se>>>13,se&=8191;let ue=J+E*l+x*c+D*a+M*(5*y)+$*(5*g);J=ue>>>13,ue&=8191,ue+=X*(5*m)+P*(5*f)+L*(5*h)+W*(5*d)+Y*(5*u),J+=ue>>>13,ue&=8191;let Ee=J+E*u+x*l+D*c+M*a+$*(5*y);J=Ee>>>13,Ee&=8191,Ee+=X*(5*g)+P*(5*m)+L*(5*f)+W*(5*h)+Y*(5*d),J+=Ee>>>13,Ee&=8191;let pe=J+E*d+x*u+D*l+M*c+$*a;J=pe>>>13,pe&=8191,pe+=X*(5*y)+P*(5*g)+L*(5*m)+W*(5*f)+Y*(5*h),J+=pe>>>13,pe&=8191;let Se=J+E*h+x*d+D*u+M*l+$*c;J=Se>>>13,Se&=8191,Se+=X*a+P*(5*y)+L*(5*g)+W*(5*m)+Y*(5*f),J+=Se>>>13,Se&=8191;let Me=J+E*f+x*h+D*d+M*u+$*l;J=Me>>>13,Me&=8191,Me+=X*c+P*a+L*(5*y)+W*(5*g)+Y*(5*m),J+=Me>>>13,Me&=8191;let ce=J+E*m+x*f+D*h+M*d+$*u;J=ce>>>13,ce&=8191,ce+=X*l+P*c+L*a+W*(5*y)+Y*(5*g),J+=ce>>>13,ce&=8191;let oe=J+E*g+x*m+D*f+M*h+$*d;J=oe>>>13,oe&=8191,oe+=X*u+P*l+L*c+W*a+Y*(5*y),J+=oe>>>13,oe&=8191;let ge=J+E*y+x*g+D*m+M*f+$*h;J=ge>>>13,ge&=8191,ge+=X*d+P*u+L*l+W*c+Y*a,J+=ge>>>13,ge&=8191,J=(J<<2)+J|0,J=J+V|0,V=J&8191,J=J>>>13,se+=J,i[0]=V,i[1]=se,i[2]=ue,i[3]=Ee,i[4]=pe,i[5]=Se,i[6]=Me,i[7]=ce,i[8]=oe,i[9]=ge}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Cg(r)}update(e){YB(this),e=tR(e),ji(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Cg(this.h,this.r,this.buffer,this.pad)}digestInto(e){YB(this),gve(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function kve(t){const e=(r,s)=>t(s).update(tR(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Dve=kve(t=>new Ove(t));function Mve(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],m=e[4],g=e[5],y=e[6],v=e[7],_=s,A=n[0],k=n[1],S=n[2],R=o,T=a,b=c,E=l,x=u,D=d,M=h,$=f,X=m,P=g,L=y,W=v,Y=_,J=A,V=k,se=S;for(let Ee=0;Ee<i;Ee+=2)R=R+x|0,Y=Nn(Y^R,16),X=X+Y|0,x=Nn(x^X,12),R=R+x|0,Y=Nn(Y^R,8),X=X+Y|0,x=Nn(x^X,7),T=T+D|0,J=Nn(J^T,16),P=P+J|0,D=Nn(D^P,12),T=T+D|0,J=Nn(J^T,8),P=P+J|0,D=Nn(D^P,7),b=b+M|0,V=Nn(V^b,16),L=L+V|0,M=Nn(M^L,12),b=b+M|0,V=Nn(V^b,8),L=L+V|0,M=Nn(M^L,7),E=E+$|0,se=Nn(se^E,16),W=W+se|0,$=Nn($^W,12),E=E+$|0,se=Nn(se^E,8),W=W+se|0,$=Nn($^W,7),R=R+D|0,se=Nn(se^R,16),L=L+se|0,D=Nn(D^L,12),R=R+D|0,se=Nn(se^R,8),L=L+se|0,D=Nn(D^L,7),T=T+M|0,Y=Nn(Y^T,16),W=W+Y|0,M=Nn(M^W,12),T=T+M|0,Y=Nn(Y^T,8),W=W+Y|0,M=Nn(M^W,7),b=b+$|0,J=Nn(J^b,16),X=X+J|0,$=Nn($^X,12),b=b+$|0,J=Nn(J^b,8),X=X+J|0,$=Nn($^X,7),E=E+x|0,V=Nn(V^E,16),P=P+V|0,x=Nn(x^P,12),E=E+x|0,V=Nn(V^E,8),P=P+V|0,x=Nn(x^P,7);let ue=0;r[ue++]=o+R|0,r[ue++]=a+T|0,r[ue++]=c+b|0,r[ue++]=l+E|0,r[ue++]=u+x|0,r[ue++]=d+D|0,r[ue++]=h+M|0,r[ue++]=f+$|0,r[ue++]=m+X|0,r[ue++]=g+P|0,r[ue++]=y+L|0,r[ue++]=v+W|0,r[ue++]=_+Y|0,r[ue++]=A+J|0,r[ue++]=k+V|0,r[ue++]=S+se|0}const Bve=Nve(Mve,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Lve=new Uint8Array(16),eL=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Lve.subarray(n))},$ve=new Uint8Array(32);function tL(t,e,n,r,s){const i=t(e,n,$ve),o=Dve.create(i);s&&eL(o,s),eL(o,r);const a=Ave(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Cg(i,a),c}const Uve=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=ZB(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=tL(t,e,n,a,r);return i.set(c,o),Cg(c),i},decrypt(s,i){i=ZB(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=tL(t,e,n,o,r);if(!_ve(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Cg(c),i}}),wH=Eve({blockSize:64,nonceLength:12,tagLength:16},Uve(Bve));let vH=class extends BI{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,hk(e);const r=Ha(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ma(i)}update(e){return nh(this),this.iHash.update(e),this}digestInto(e){nh(this),pa(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const $I=(t,e,n)=>new vH(t,e).update(n).digest();$I.create=(t,e)=>new vH(t,e);function Fve(t,e,n){return hk(t),n===void 0&&(n=new Uint8Array(t.outputLen)),$I(t,Ha(n),Ha(e))}const Ix=Uint8Array.from([0]),nL=Uint8Array.of();function jve(t,e,n,r=32){hk(t),yu(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=nL);const o=new Uint8Array(i*s),a=$I.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)Ix[0]=u+1,c.update(u===0?nL:l).update(n).update(Ix).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),ma(l,Ix),o.slice(0,r)}const Vve=(t,e,n,r,s)=>jve(t,Fve(t,e,n),r,s),UI=LI,yk=BigInt(0),sR=BigInt(1);function xA(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function bE(t){const e=t.toString(16);return e.length&1?"0"+e:e}function bH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?yk:BigInt("0x"+t)}function FI(t){return bH(Nv(t))}function PA(t){return pa(t),bH(Nv(Uint8Array.from(t).reverse()))}function wk(t,e){return pk(t.toString(16).padStart(e*2,"0"))}function vk(t,e){return wk(t,e).reverse()}function Ui(t,e,n){let r;if(typeof e=="string")try{r=pk(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(dk(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const Tx=t=>typeof t=="bigint"&&yk<=t;function Hve(t,e,n){return Tx(t)&&Tx(e)&&Tx(n)&&e<=t&&t<n}function iR(t,e,n,r){if(!Hve(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function qve(t){let e;for(e=0;t>yk;t>>=sR,e+=1);return e}const jI=t=>(sR<<BigInt(t))-sR;function zve(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const m=i.slice();f.push(m),h+=i.length}return hf(...f)};return(h,f)=>{c(),u(h);let m;for(;!(m=f(d()));)u();return c(),m}}function VI(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function rL(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Ki=BigInt(0),yi=BigInt(1),ff=BigInt(2),Wve=BigInt(3),_H=BigInt(4),EH=BigInt(5),AH=BigInt(8);function Xo(t,e){const n=t%e;return n>=Ki?n:e+n}function Pa(t,e,n){let r=t;for(;e-- >Ki;)r*=r,r%=n;return r}function sL(t,e){if(t===Ki)throw new Error("invert: expected non-zero number");if(e<=Ki)throw new Error("invert: expected positive modulus, got "+e);let n=Xo(t,e),r=e,s=Ki,i=yi;for(;n!==Ki;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==yi)throw new Error("invert: does not exist");return Xo(s,e)}function CH(t,e){const n=(t.ORDER+yi)/_H,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Gve(t,e){const n=(t.ORDER-EH)/AH,r=t.mul(e,ff),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,ff),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Kve(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-yi,n=0;for(;e%ff===Ki;)e/=ff,n++;let r=ff;const s=my(t);for(;iL(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return CH;let i=s.pow(r,e);const o=(e+yi)/ff;return function(a,c){if(a.is0(c))return c;if(iL(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,m=a.sqr(d);for(;!a.eql(m,a.ONE);)if(f++,m=a.sqr(m),f===l)throw new Error("Cannot find square root");const g=yi<<BigInt(l-f-1),y=a.pow(u,g);l=f,u=a.sqr(y),d=a.mul(d,u),h=a.mul(h,y)}return h}}function Qve(t){return t%_H===Wve?CH:t%AH===EH?Gve:Kve(t)}const Yve=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zve(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Yve.reduce((r,s)=>(r[s]="function",r),e);return VI(t,n),t}function Jve(t,e,n){if(n<Ki)throw new Error("invalid exponent, negatives unsupported");if(n===Ki)return t.ONE;if(n===yi)return e;let r=t.ONE,s=e;for(;n>Ki;)n&yi&&(r=t.mul(r,s)),s=t.sqr(s),n>>=yi;return r}function IH(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function iL(t,e){const n=(t.ORDER-yi)/ff,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Xve(t,e){e!==void 0&&yu(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function my(t,e,n=!1,r={}){if(t<=Ki)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=Xve(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:jI(o),ZERO:Ki,ONE:yi,create:u=>Xo(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Ki<=u&&u<t},is0:u=>u===Ki,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&yi)===yi,neg:u=>Xo(-u,t),eql:(u,d)=>u===d,sqr:u=>Xo(u*u,t),add:(u,d)=>Xo(u+d,t),sub:(u,d)=>Xo(u-d,t),mul:(u,d)=>Xo(u*d,t),pow:(u,d)=>Jve(l,u,d),div:(u,d)=>Xo(u*sL(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>sL(u,t),sqrt:i||(u=>(c||(c=Qve(t)),c(l,u))),toBytes:u=>n?vk(u,a):wk(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?PA(u):FI(u)},invertBatch:u=>IH(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function TH(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function SH(t){const e=TH(t);return e+Math.ceil(e/2)}function ebe(t,e,n=!1){const r=t.length,s=TH(e),i=SH(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?PA(t):FI(t),a=Xo(o,e-yi)+yi;return n?vk(a,s):wk(a,s)}const Ig=BigInt(0),pf=BigInt(1);function lw(t,e){const n=e.negate();return t?n:e}function tbe(t,e,n){const r=i=>i.pz,s=IH(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function xH(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Sx(t,e){xH(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=jI(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function oL(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=pf);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function nbe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function rbe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const xx=new WeakMap,PH=new WeakMap;function Px(t){return PH.get(t)||1}function aL(t){if(t!==Ig)throw new Error("invalid wNAF")}function sbe(t,e){return{constTimeNegate:lw,hasPrecomputes(n){return Px(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Ig;)r&pf&&(s=s.add(i)),i=i.double(),r>>=pf;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Sx(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Sx(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:m}=oL(s,c,a);s=l,d?o=o.add(lw(f,r[m])):i=i.add(lw(h,r[u]))}return aL(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Sx(n,e);for(let a=0;a<o.windows&&s!==Ig;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=oL(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return aL(s),i},getPrecomputes(n,r,s){let i=xx.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),xx.set(r,i))),i},wNAFCached(n,r,s){const i=Px(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Px(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){xH(r,e),PH.set(n,r),xx.delete(n)}}}function ibe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Ig||r>Ig;)n&pf&&(i=i.add(s)),r&pf&&(o=o.add(s)),s=s.double(),n>>=pf,r>>=pf;return{p1:i,p2:o}}function obe(t,e,n,r){nbe(n,t),rbe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=qve(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=jI(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],v=Number(y>>BigInt(f)&l);u[v]=u[v].add(n[g])}let m=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),m=m.add(y);if(h=h.add(m),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function cL(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Zve(e),e}else return my(t)}function abe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>Ig))throw new Error(`CURVE.${o} must be positive bigint`)}const r=cL(e.p,n.Fp),s=cL(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const b0=BigInt(0),im=BigInt(1),_E=BigInt(2);function cbe(t){return VI(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function lbe(t){const e=cbe(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||py,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?_E**BigInt(254):_E**BigInt(447),m=a?BigInt(8)*_E**BigInt(251)-im:BigInt(4)*_E**BigInt(445)-im,g=f+m+im,y=E=>Xo(E,n),v=_(d);function _(E){return vk(y(E),u)}function A(E){const x=Ui("u coordinate",E,u);return a&&(x[31]&=127),y(PA(x))}function k(E){return PA(s(Ui("scalar",E,u)))}function S(E,x){const D=b(A(x),k(E));if(D===b0)throw new Error("invalid private or public key received");return _(D)}function R(E){return S(E,v)}function T(E,x,D){const M=y(E*(x-D));return x=y(x-M),D=y(D+M),{x_2:x,x_3:D}}function b(E,x){iR("u",E,b0,n),iR("scalar",x,f,g);const D=x,M=E;let $=im,X=b0,P=E,L=im,W=b0;for(let J=BigInt(l-1);J>=b0;J--){const V=D>>J&im;W^=V,{x_2:$,x_3:P}=T(W,$,P),{x_2:X,x_3:L}=T(W,X,L),W=V;const se=$+X,ue=y(se*se),Ee=$-X,pe=y(Ee*Ee),Se=ue-pe,Me=P+L,ce=P-L,oe=y(ce*se),ge=y(Me*Ee),Ne=oe+ge,mt=oe-ge;P=y(Ne*Ne),L=y(M*y(mt*mt)),$=y(ue*pe),X=y(Se*(ue+y(h*Se)))}({x_2:$,x_3:P}=T(W,$,P)),{x_2:X,x_3:L}=T(W,X,L);const Y=i(X);return y($*Y)}return{scalarMult:S,scalarMultBase:R,getSharedSecret:(E,x)=>S(E,x),getPublicKey:E=>R(E),utils:{randomPrivateKey:()=>c(u)},GuBytes:v.slice()}}BigInt(0);const ube=BigInt(1),lL=BigInt(2),dbe=BigInt(3),hbe=BigInt(5);BigInt(8);const RH={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function fbe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=RH.p,o=t*t%i*t%i,a=Pa(o,lL,i)*o%i,c=Pa(a,ube,i)*t%i,l=Pa(c,hbe,i)*c%i,u=Pa(l,e,i)*l%i,d=Pa(u,n,i)*u%i,h=Pa(d,r,i)*d%i,f=Pa(h,s,i)*h%i,m=Pa(f,s,i)*h%i,g=Pa(m,e,i)*l%i;return{pow_p_5_8:Pa(g,lL,i)*t%i,b2:o}}function pbe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const oR=(()=>{const t=RH.p;return lbe({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=fbe(e);return Xo(Pa(n,dbe,t)*r,t)},adjustScalarBytes:pbe})})();function uL(t){t.lowS!==void 0&&xA("lowS",t.lowS),t.prehash!==void 0&&xA("prehash",t.prehash)}class mbe extends Error{constructor(e=""){super(e)}}const ql={Err:mbe,_tlv:{encode:(t,e)=>{const{Err:n}=ql;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=bE(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?bE(s.length/2|128):"";return bE(t)+i+s+e},decode(t,e){const{Err:n}=ql;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=ql;if(t<uw)throw new e("integer: negative integers are not allowed");let n=bE(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ql;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return FI(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ql,s=Ui("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=ql,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},uw=BigInt(0),dw=BigInt(1),gbe=BigInt(2),EE=BigInt(3),ybe=BigInt(4);function wbe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function NH(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Ui("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function vbe(t,e={}){const{Fp:n,Fn:r}=abe("weierstrass",t,e),{h:s,n:i}=t;VI(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(b,E,x){const{x:D,y:M}=E.toAffine(),$=n.toBytes(D);if(xA("isCompressed",x),x){a();const X=!n.isOdd(M);return hf(OH(X),$)}else return hf(Uint8Array.of(4),$,n.toBytes(M))}function l(b){pa(b);const E=n.BYTES,x=E+1,D=2*E+1,M=b.length,$=b[0],X=b.subarray(1);if(M===x&&($===2||$===3)){const P=n.fromBytes(X);if(!n.isValid(P))throw new Error("bad point: is not on curve, wrong x");const L=h(P);let W;try{W=n.sqrt(L)}catch(J){const V=J instanceof Error?": "+J.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}a();const Y=n.isOdd(W);return($&1)===1!==Y&&(W=n.neg(W)),{x:P,y:W}}else if(M===D&&$===4){const P=n.fromBytes(X.subarray(E*0,E*1)),L=n.fromBytes(X.subarray(E*1,E*2));if(!f(P,L))throw new Error("bad point: is not on curve");return{x:P,y:L}}else throw new Error(`bad point: got length ${M}, expected compressed=${x} or uncompressed=${D}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=wbe(n,t.a,t.b);function f(b,E){const x=n.sqr(E),D=h(b);return n.eql(x,D)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const m=n.mul(n.pow(t.a,EE),ybe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(m,g)))throw new Error("bad curve params: a or b");function y(b,E,x=!1){if(!n.isValid(E)||x&&n.is0(E))throw new Error(`bad point coordinate ${b}`);return E}function v(b){if(!(b instanceof S))throw new Error("ProjectivePoint expected")}const _=rL((b,E)=>{const{px:x,py:D,pz:M}=b;if(n.eql(M,n.ONE))return{x,y:D};const $=b.is0();E==null&&(E=$?n.ONE:n.inv(M));const X=n.mul(x,E),P=n.mul(D,E),L=n.mul(M,E);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(L,n.ONE))throw new Error("invZ was invalid");return{x:X,y:P}}),A=rL(b=>{if(b.is0()){if(e.allowInfinityPoint&&!n.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:E,y:x}=b.toAffine();if(!n.isValid(E)||!n.isValid(x))throw new Error("bad point: x or y not field elements");if(!f(E,x))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function k(b,E,x,D,M){return x=new S(n.mul(x.px,b),x.py,x.pz),E=lw(D,E),x=lw(M,x),E.add(x)}class S{constructor(E,x,D){this.px=y("x",E),this.py=y("y",x,!0),this.pz=y("z",D),Object.freeze(this)}static fromAffine(E){const{x,y:D}=E||{};if(!E||!n.isValid(x)||!n.isValid(D))throw new Error("invalid affine point");if(E instanceof S)throw new Error("projective point not allowed");return n.is0(x)&&n.is0(D)?S.ZERO:new S(x,D,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){return tbe(S,"pz",E)}static fromBytes(E){return pa(E),S.fromHex(E)}static fromHex(E){const x=S.fromAffine(d(Ui("pointHex",E)));return x.assertValidity(),x}static fromPrivateKey(E){const x=NH(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return S.BASE.multiply(x(E))}static msm(E,x){return obe(S,r,E,x)}precompute(E=8,x=!0){return T.setWindowSize(this,E),x||this.multiply(EE),this}_setWindowSize(E){this.precompute(E)}assertValidity(){A(this)}hasEvenY(){const{y:E}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(E)}equals(E){v(E);const{px:x,py:D,pz:M}=this,{px:$,py:X,pz:P}=E,L=n.eql(n.mul(x,P),n.mul($,M)),W=n.eql(n.mul(D,P),n.mul(X,M));return L&&W}negate(){return new S(this.px,n.neg(this.py),this.pz)}double(){const{a:E,b:x}=t,D=n.mul(x,EE),{px:M,py:$,pz:X}=this;let P=n.ZERO,L=n.ZERO,W=n.ZERO,Y=n.mul(M,M),J=n.mul($,$),V=n.mul(X,X),se=n.mul(M,$);return se=n.add(se,se),W=n.mul(M,X),W=n.add(W,W),P=n.mul(E,W),L=n.mul(D,V),L=n.add(P,L),P=n.sub(J,L),L=n.add(J,L),L=n.mul(P,L),P=n.mul(se,P),W=n.mul(D,W),V=n.mul(E,V),se=n.sub(Y,V),se=n.mul(E,se),se=n.add(se,W),W=n.add(Y,Y),Y=n.add(W,Y),Y=n.add(Y,V),Y=n.mul(Y,se),L=n.add(L,Y),V=n.mul($,X),V=n.add(V,V),Y=n.mul(V,se),P=n.sub(P,Y),W=n.mul(V,J),W=n.add(W,W),W=n.add(W,W),new S(P,L,W)}add(E){v(E);const{px:x,py:D,pz:M}=this,{px:$,py:X,pz:P}=E;let L=n.ZERO,W=n.ZERO,Y=n.ZERO;const J=t.a,V=n.mul(t.b,EE);let se=n.mul(x,$),ue=n.mul(D,X),Ee=n.mul(M,P),pe=n.add(x,D),Se=n.add($,X);pe=n.mul(pe,Se),Se=n.add(se,ue),pe=n.sub(pe,Se),Se=n.add(x,M);let Me=n.add($,P);return Se=n.mul(Se,Me),Me=n.add(se,Ee),Se=n.sub(Se,Me),Me=n.add(D,M),L=n.add(X,P),Me=n.mul(Me,L),L=n.add(ue,Ee),Me=n.sub(Me,L),Y=n.mul(J,Se),L=n.mul(V,Ee),Y=n.add(L,Y),L=n.sub(ue,Y),Y=n.add(ue,Y),W=n.mul(L,Y),ue=n.add(se,se),ue=n.add(ue,se),Ee=n.mul(J,Ee),Se=n.mul(V,Se),ue=n.add(ue,Ee),Ee=n.sub(se,Ee),Ee=n.mul(J,Ee),Se=n.add(Se,Ee),se=n.mul(ue,Se),W=n.add(W,se),se=n.mul(Me,Se),L=n.mul(pe,L),L=n.sub(L,se),se=n.mul(pe,ue),Y=n.mul(Me,Y),Y=n.add(Y,se),new S(L,W,Y)}subtract(E){return this.add(E.negate())}is0(){return this.equals(S.ZERO)}multiply(E){const{endo:x}=e;if(!r.isValidNot0(E))throw new Error("invalid scalar: out of range");let D,M;const $=X=>T.wNAFCached(this,X,S.normalizeZ);if(x){const{k1neg:X,k1:P,k2neg:L,k2:W}=x.splitScalar(E),{p:Y,f:J}=$(P),{p:V,f:se}=$(W);M=J.add(se),D=k(x.beta,Y,V,X,L)}else{const{p:X,f:P}=$(E);D=X,M=P}return S.normalizeZ([D,M])[0]}multiplyUnsafe(E){const{endo:x}=e,D=this;if(!r.isValid(E))throw new Error("invalid scalar: out of range");if(E===uw||D.is0())return S.ZERO;if(E===dw)return D;if(T.hasPrecomputes(this))return this.multiply(E);if(x){const{k1neg:M,k1:$,k2neg:X,k2:P}=x.splitScalar(E),{p1:L,p2:W}=ibe(S,D,$,P);return k(x.beta,L,W,M,X)}else return T.wNAFCachedUnsafe(D,E)}multiplyAndAddUnsafe(E,x,D){const M=this.multiplyUnsafe(x).add(E.multiplyUnsafe(D));return M.is0()?void 0:M}toAffine(E){return _(this,E)}isTorsionFree(){const{isTorsionFree:E}=e;return s===dw?!0:E?E(S,this):T.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:E}=e;return s===dw?this:E?E(S,this):this.multiplyUnsafe(s)}toBytes(E=!0){return xA("isCompressed",E),this.assertValidity(),u(S,this,E)}toRawBytes(E=!0){return this.toBytes(E)}toHex(E=!0){return Nv(this.toBytes(E))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}S.BASE=new S(t.Gx,t.Gy,n.ONE),S.ZERO=new S(n.ZERO,n.ONE,n.ZERO),S.Fp=n,S.Fn=r;const R=r.BITS,T=sbe(S,e.endo?Math.ceil(R/2):R);return S}function OH(t){return Uint8Array.of(t?2:3)}function bbe(t,e,n={}){VI(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||py,s=e.hmac||((D,...M)=>$I(e.hash,D,hf(...M))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(D){const M=a>>dw;return D>M}function u(D){return l(D)?o.neg(D):D}function d(D,M){if(!o.isValidNot0(M))throw new Error(`invalid signature ${D}: out of range 1..CURVE.n`)}class h{constructor(M,$,X){d("r",M),d("s",$),this.r=M,this.s=$,X!=null&&(this.recovery=X),Object.freeze(this)}static fromCompact(M){const $=o.BYTES,X=Ui("compactSignature",M,$*2);return new h(o.fromBytes(X.subarray(0,$)),o.fromBytes(X.subarray($,$*2)))}static fromDER(M){const{r:$,s:X}=ql.toSig(Ui("DER",M));return new h($,X)}assertValidity(){}addRecoveryBit(M){return new h(this.r,this.s,M)}recoverPublicKey(M){const $=i.ORDER,{r:X,s:P,recovery:L}=this;if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");if(a*gbe<$&&L>1)throw new Error("recovery id is ambiguous for h>1 curve");const W=L===2||L===3?X+a:X;if(!i.isValid(W))throw new Error("recovery id 2 or 3 invalid");const Y=i.toBytes(W),J=t.fromHex(hf(OH((L&1)===0),Y)),V=o.inv(W),se=A(Ui("msgHash",M)),ue=o.create(-se*V),Ee=o.create(P*V),pe=t.BASE.multiplyUnsafe(ue).add(J.multiplyUnsafe(Ee));if(pe.is0())throw new Error("point at infinify");return pe.assertValidity(),pe}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(M){if(M==="compact")return hf(o.toBytes(this.r),o.toBytes(this.s));if(M==="der")return pk(ql.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Nv(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Nv(this.toBytes("compact"))}}const f=NH(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),m={isValidPrivateKey(D){try{return f(D),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const D=a;return ebe(r(SH(D)),D)},precompute(D=8,M=t.BASE){return M.precompute(D,!1)}};function g(D,M=!0){return t.fromPrivateKey(D).toBytes(M)}function y(D){if(typeof D=="bigint")return!1;if(D instanceof t)return!0;const M=Ui("key",D).length,$=i.BYTES,X=$+1,P=2*$+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===X))return M===X||M===P}function v(D,M,$=!0){if(y(D)===!0)throw new Error("first arg must be private key");if(y(M)===!1)throw new Error("second arg must be public key");return t.fromHex(M).multiply(f(D)).toBytes($)}const _=e.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const M=FI(D),$=D.length*8-c;return $>0?M>>BigInt($):M},A=e.bits2int_modN||function(D){return o.create(_(D))},k=jI(c);function S(D){return iR("num < 2^"+c,D,uw,k),o.toBytes(D)}function R(D,M,$=T){if(["recovered","canonical"].some(pe=>pe in $))throw new Error("sign() legacy options not supported");const{hash:X}=e;let{lowS:P,prehash:L,extraEntropy:W}=$;P==null&&(P=!0),D=Ui("msgHash",D),uL($),L&&(D=Ui("prehashed msgHash",X(D)));const Y=A(D),J=f(M),V=[S(J),S(Y)];if(W!=null&&W!==!1){const pe=W===!0?r(i.BYTES):W;V.push(Ui("extraEntropy",pe))}const se=hf(...V),ue=Y;function Ee(pe){const Se=_(pe);if(!o.isValidNot0(Se))return;const Me=o.inv(Se),ce=t.BASE.multiply(Se).toAffine(),oe=o.create(ce.x);if(oe===uw)return;const ge=o.create(Me*o.create(ue+oe*J));if(ge===uw)return;let Ne=(ce.x===oe?0:2)|Number(ce.y&dw),mt=ge;return P&&l(ge)&&(mt=u(ge),Ne^=1),new h(oe,mt,Ne)}return{seed:se,k2sig:Ee}}const T={lowS:e.lowS,prehash:!1},b={lowS:e.lowS,prehash:!1};function E(D,M,$=T){const{seed:X,k2sig:P}=R(D,M,$);return zve(e.hash.outputLen,o.BYTES,s)(X,P)}t.BASE.precompute(8);function x(D,M,$,X=b){const P=D;M=Ui("msgHash",M),$=Ui("publicKey",$),uL(X);const{lowS:L,prehash:W,format:Y}=X;if("strict"in X)throw new Error("options.strict was renamed to lowS");if(Y!==void 0&&!["compact","der","js"].includes(Y))throw new Error('format must be "compact", "der" or "js"');const J=typeof P=="string"||dk(P),V=!J&&!Y&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!J&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let se,ue;try{if(V)if(Y===void 0||Y==="js")se=new h(P.r,P.s);else throw new Error("invalid format");if(J){try{Y!=="compact"&&(se=h.fromDER(P))}catch(Ne){if(!(Ne instanceof ql.Err))throw Ne}!se&&Y!=="der"&&(se=h.fromCompact(P))}ue=t.fromHex($)}catch{return!1}if(!se||L&&se.hasHighS())return!1;W&&(M=e.hash(M));const{r:Ee,s:pe}=se,Se=A(M),Me=o.inv(pe),ce=o.create(Se*Me),oe=o.create(Ee*Me),ge=t.BASE.multiplyUnsafe(ce).add(ue.multiplyUnsafe(oe));return ge.is0()?!1:o.create(ge.x)===Ee}return Object.freeze({getPublicKey:g,getSharedSecret:v,sign:E,verify:x,utils:m,Point:t,Signature:h})}function _be(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=my(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Ebe(t){const{CURVE:e,curveOpts:n}=_be(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Abe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Cbe(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Ebe(t),s=vbe(e,n),i=bbe(s,r,n);return Abe(t,i)}function aR(t,e){const n=r=>Cbe({...t,hash:r});return{...n(e),create:n}}const kH={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},DH={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},MH={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Ibe=my(kH.p),Tbe=my(DH.p),Sbe=my(MH.p),xbe=aR({...kH,Fp:Ibe,lowS:!1},LI);aR({...DH,Fp:Tbe,lowS:!1},Bwe),aR({...MH,Fp:Sbe,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Mwe);const Pbe=xbe,BH="base10",wi="base16",Vi="base64pad",Id="base64url",Wb="utf8",LH=0,iu=1,Gb=2,Rbe=0,dL=1,hw=12,bk=32;function Nbe(){const t=oR.utils.randomPrivateKey(),e=oR.getPublicKey(t);return{privateKey:Ji(t,wi),publicKey:Ji(e,wi)}}function cR(){const t=py(bk);return Ji(t,wi)}function Obe(t,e){const n=oR.getSharedSecret(oa(t,wi),oa(e,wi)),r=Vve(UI,n,void 0,void 0,bk);return Ji(r,wi)}function o1(t){const e=UI(oa(t,wi));return Ji(e,wi)}function Zo(t){const e=UI(oa(t,Wb));return Ji(e,wi)}function $H(t){return oa(`${t}`,BH)}function Qf(t){return Number(Ji(t,BH))}function UH(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function FH(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function kbe(t){const e=$H(typeof t.type<"u"?t.type:LH);if(Qf(e)===iu&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?oa(t.senderPublicKey,wi):void 0,r=typeof t.iv<"u"?oa(t.iv,wi):py(hw),s=oa(t.symKey,wi),i=wH(s,r).encrypt(oa(t.message,Wb)),o=jH({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Id?UH(o):o}function Dbe(t){const e=oa(t.symKey,wi),{sealed:n,iv:r}=kv({encoded:t.encoded,encoding:t.encoding}),s=wH(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Ji(s,Wb)}function Mbe(t,e){const n=$H(Gb),r=py(hw),s=oa(t,Wb),i=jH({type:n,sealed:s,iv:r});return e===Id?UH(i):i}function Bbe(t,e){const{sealed:n}=kv({encoded:t,encoding:e});return Ji(n,Wb)}function jH(t){if(Qf(t.type)===Gb)return Ji(aw([t.type,t.sealed]),Vi);if(Qf(t.type)===iu){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ji(aw([t.type,t.senderPublicKey,t.iv,t.sealed]),Vi)}return Ji(aw([t.type,t.iv,t.sealed]),Vi)}function kv(t){const e=(t.encoding||Vi)===Id?FH(t.encoded):t.encoded,n=oa(e,Vi),r=n.slice(Rbe,dL),s=dL;if(Qf(r)===iu){const c=s+bk,l=c+hw,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Qf(r)===Gb){const c=n.slice(s),l=py(hw);return{type:r,sealed:c,iv:l}}const i=s+hw,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Lbe(t,e){const n=kv({encoded:t,encoding:e?.encoding});return VH({type:Qf(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ji(n.senderPublicKey,wi):void 0,receiverPublicKey:e?.receiverPublicKey})}function VH(t){const e=t?.type||LH;if(e===iu){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function hL(t){return t.type===iu&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function fL(t){return t.type===Gb}function $be(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return aw([new Uint8Array([4]),e,n])}function Ube(t,e){const[n,r,s]=t.split("."),i=Buffer.from(FH(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=UI(c),u=$be(e);if(!Pbe.verify(aw([o,a]),l,u))throw new Error("Invalid signature");return xP(t).payload}const Fbe="irn";function RA(t){return t?.relay||{protocol:Fbe}}function jm(t){const e=rpe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function jbe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function pL(t){if(!t.includes("wc:")){const l=XV(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Vbe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:jbe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Vbe(t){return t.startsWith("//")?t.substring(2):t}function Hbe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function mL(t){const e=new URLSearchParams,n=Hbe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function AE(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var qbe=Object.defineProperty,zbe=Object.defineProperties,Wbe=Object.getOwnPropertyDescriptors,gL=Object.getOwnPropertySymbols,Gbe=Object.prototype.hasOwnProperty,Kbe=Object.prototype.propertyIsEnumerable,yL=(t,e,n)=>e in t?qbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qbe=(t,e)=>{for(var n in e||(e={}))Gbe.call(e,n)&&yL(t,n,e[n]);if(gL)for(var n of gL(e))Kbe.call(e,n)&&yL(t,n,e[n]);return t},Ybe=(t,e)=>zbe(t,Wbe(e));function gy(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function Zbe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...gy(n.accounts))}),e}function Jbe(t,e){const n=[];return Object.values(t).forEach(r=>{gy(r.accounts).includes(e)&&n.push(...r.methods)}),n}function Xbe(t,e){const n=[];return Object.values(t).forEach(r=>{gy(r.accounts).includes(e)&&n.push(...r.events)}),n}function HI(t){return t.includes(":")}function Vm(t){return HI(t)?t.split(":")[0]:t}function wL(t){var e,n,r;const s={};if(!Uc(t))return s;for(const[i,o]of Object.entries(t)){const a=HI(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Vm(i);s[u]=Ybe(Qbe({},s[u]),{chains:$c(a,(e=s[u])==null?void 0:e.chains),methods:$c(c,(n=s[u])==null?void 0:n.methods),events:$c(l,(r=s[u])==null?void 0:r.events)})}return s}function e_e(t){const e={};return t?.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function vL(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=e_e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=$c(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function t_e(t,e){var n,r,s,i,o,a;const c=wL(t),l=wL(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:$c((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:$c((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:$c((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const n_e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},r_e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function je(t,e){const{message:n,code:r}=r_e[t];return{message:e?`${n} ${e}`:n,code:r}}function Tr(t,e){const{message:n,code:r}=n_e[t];return{message:e?`${n} ${e}`:n,code:r}}function ou(t,e){return!!Array.isArray(t)}function Uc(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function rs(t){return typeof t>"u"}function Gr(t,e){return e&&rs(t)?!0:typeof t=="string"&&!!t.trim().length}function _k(t,e){return e&&rs(t)?!0:typeof t=="number"&&!isNaN(t)}function s_e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return df(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=gy(a),d=n[o];(!df(KV(o,d),u)||!df(d.methods,c)||!df(d.events,l))&&(i=!1)}),i):!1}function NA(t){return Gr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function i_e(t){if(Gr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&NA(n)}}return!1}function o_e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Gr(t,!1)){if(e(t))return!0;const n=XV(t);return e(n)}}catch{}return!1}function a_e(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function c_e(t){return t?.topic}function l_e(t,e){let n=null;return Gr(t?.publicKey,!1)||(n=je("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function bL(t){let e=!0;return ou(t)?t.length&&(e=t.every(n=>Gr(n,!1))):e=!1,e}function u_e(t,e,n){let r=null;return ou(e)&&e.length?e.forEach(s=>{r||NA(s)||(r=Tr("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):NA(t)||(r=Tr("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function d_e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=u_e(s,KV(s,i),`${e} ${n}`);o&&(r=o)}),r}function h_e(t,e){let n=null;return ou(t)?t.forEach(r=>{n||i_e(r)||(n=Tr("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Tr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function f_e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=h_e(r?.accounts,`${e} namespace`);s&&(n=s)}),n}function p_e(t,e){let n=null;return bL(t?.methods)?bL(t?.events)||(n=Tr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Tr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function HH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=p_e(r,`${e}, namespace`);s&&(n=s)}),n}function m_e(t,e,n){let r=null;if(t&&Uc(t)){const s=HH(t,e);s&&(r=s);const i=d_e(t,e,n);i&&(r=i)}else r=je("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Rx(t,e){let n=null;if(t&&Uc(t)){const r=HH(t,e);r&&(n=r);const s=f_e(t,e);s&&(n=s)}else n=je("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function qH(t){return Gr(t.protocol,!0)}function g_e(t,e){let n=!1;return t?t&&ou(t)&&t.length&&t.forEach(r=>{n=qH(r)}):n=!0,n}function y_e(t){return typeof t=="number"}function Bi(t){return typeof t<"u"&&typeof t!==null}function w_e(t){return!(!t||typeof t!="object"||!t.code||!_k(t.code,!1)||!t.message||!Gr(t.message,!1))}function v_e(t){return!(rs(t)||!Gr(t.method,!1))}function b_e(t){return!(rs(t)||rs(t.result)&&rs(t.error)||!_k(t.id,!1)||!Gr(t.jsonrpc,!1))}function __e(t){return!(rs(t)||!Gr(t.name,!1))}function _L(t,e){return!(!NA(e)||!Zbe(t).includes(e))}function E_e(t,e,n){return Gr(n,!1)?Jbe(t,e).includes(n):!1}function A_e(t,e,n){return Gr(n,!1)?Xbe(t,e).includes(n):!1}function EL(t,e,n){let r=null;const s=C_e(t),i=I_e(e),o=Object.keys(s),a=Object.keys(i),c=AL(Object.keys(t)),l=AL(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),df(o,a)||(r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=gy(e[d].accounts);h.includes(d)||(r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(df(s[d].methods,i[d].methods)?df(s[d].events,i[d].events)||(r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function C_e(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function AL(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function I_e(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:gy(t[n].accounts)?.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}),e}function T_e(t,e){return _k(t,!1)&&t<=e.max&&t>=e.min}function CL(){const t=qb();return new Promise(e=>{switch(t){case bo.browser:e(S_e());break;case bo.reactNative:e(x_e());break;case bo.node:e(P_e());break;default:e(!0)}})}function S_e(){return fy()&&navigator?.onLine}async function x_e(){return mh()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo?(await globalThis?.NetInfo.fetch())?.isConnected:!0}function P_e(){return!0}function R_e(t){switch(qb()){case bo.browser:N_e(t);break;case bo.reactNative:O_e(t);break}}function N_e(t){!mh()&&fy()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function O_e(t){mh()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&globalThis?.NetInfo.addEventListener(e=>t(e?.isConnected))}function k_e(){var t;return fy()&&mu.getDocument()?((t=mu.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const Nx={};class _0{static get(e){return Nx[e]}static set(e,n){Nx[e]=n}static delete(e){delete Nx[e]}}function D_e(t){const e=hy.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function M_e({publicKey:t,signature:e,payload:n}){var r;const s=lR(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=$_e(n.address),a=n.era==="00"?new Uint8Array([0]):lR(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${L_e(n.tip)}`),d=F_e(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=U_e(h.length+1);return new Uint8Array([...f,i,...h])}function B_e(t){const e=lR(t),n=ape.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function lR(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function L_e(t){return t.startsWith("0x")?t.slice(2):t}function $_e(t){const e=hy.decode(t)[0];return e===42?0:e===60?2:1}function U_e(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function F_e(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function j_e(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=D_e(t.transaction.address),r=M_e({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return B_e(s)}var V_e={};const zH="wc",WH=2,uR="core",tl=`${zH}@2:${uR}:`,H_e={logger:"error"},q_e={database:":memory:"},z_e="crypto",IL="client_ed25519_seed",W_e=Ve.ONE_DAY,G_e="keychain",K_e="0.3",Q_e="messages",Y_e="0.3",Z_e=Ve.SIX_HOURS,J_e="publisher",GH="irn",X_e="error",KH="wss://relay.walletconnect.org",eEe="relayer",$r={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},tEe="_subscription",Ho={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},nEe=.1,dR="2.21.7",yr={link_mode:"link_mode",relay:"relay"},a1={inbound:"inbound",outbound:"outbound"},rEe="0.3",sEe="WALLETCONNECT_CLIENT_ID",TL="WALLETCONNECT_LINK_MODE_APPS",fo={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},iEe="subscription",oEe="0.3",aEe="pairing",cEe="0.3",E0={wc_pairingDelete:{req:{ttl:Ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ve.ONE_DAY,prompt:!1,tag:0}}},of={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ta={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lEe="history",uEe="0.3",dEe="expirer",Qo={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},hEe="0.3",fEe="verify-api",pEe="https://verify.walletconnect.com",QH="https://verify.walletconnect.org",fw=QH,mEe=`${fw}/v3`,gEe=[pEe,QH],yEe="echo",wEe="https://echo.walletconnect.com",vc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ul={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ld={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},A0={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Qh={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},C0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},vEe=.1,bEe="event-client",_Ee=86400,EEe="https://pulse.walletconnect.org/batch";function AEe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var g=0,y=0,v=0,_=m.length;v!==_&&m[v]===0;)v++,g++;for(var A=(_-v)*u+1>>>0,k=new Uint8Array(A);v!==_;){for(var S=m[v],R=0,T=A-1;(S!==0||R<y)&&T!==-1;T--,R++)S+=256*k[T]>>>0,k[T]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");y=R,v++}for(var b=A-y;b!==A&&k[b]===0;)b++;for(var E=c.repeat(g);b<A;++b)E+=t.charAt(k[b]);return E}function h(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var g=0;if(m[g]!==" "){for(var y=0,v=0;m[g]===c;)y++,g++;for(var _=(m.length-g)*l+1>>>0,A=new Uint8Array(_);m[g];){var k=n[m.charCodeAt(g)];if(k===255)return;for(var S=0,R=_-1;(k!==0||S<v)&&R!==-1;R--,S++)k+=a*A[R]>>>0,A[R]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");v=S,g++}if(m[g]!==" "){for(var T=_-v;T!==_&&A[T]===0;)T++;for(var b=new Uint8Array(y+(_-T)),E=y;T!==_;)b[E++]=A[T++];return b}}}function f(m){var g=h(m);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var CEe=AEe,IEe=CEe;const YH=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},TEe=t=>new TextEncoder().encode(t),SEe=t=>new TextDecoder().decode(t);class xEe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class PEe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ZH(this,e)}}class REe{constructor(e){this.decoders=e}or(e){return ZH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ZH=(t,e)=>new REe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class NEe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new xEe(e,n,r),this.decoder=new PEe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const qI=({name:t,prefix:e,encode:n,decode:r})=>new NEe(t,e,n,r),Kb=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=IEe(n,e);return qI({prefix:t,name:e,encode:r,decode:i=>YH(s(i))})},OEe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},kEe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Us=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>qI({prefix:e,name:t,encode(s){return kEe(s,r,n)},decode(s){return OEe(s,r,n,t)}}),DEe=qI({prefix:"\0",name:"identity",encode:t=>SEe(t),decode:t=>TEe(t)});var MEe=Object.freeze({__proto__:null,identity:DEe});const BEe=Us({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var LEe=Object.freeze({__proto__:null,base2:BEe});const $Ee=Us({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var UEe=Object.freeze({__proto__:null,base8:$Ee});const FEe=Kb({prefix:"9",name:"base10",alphabet:"0123456789"});var jEe=Object.freeze({__proto__:null,base10:FEe});const VEe=Us({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),HEe=Us({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qEe=Object.freeze({__proto__:null,base16:VEe,base16upper:HEe});const zEe=Us({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),WEe=Us({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),GEe=Us({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),KEe=Us({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),QEe=Us({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),YEe=Us({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZEe=Us({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),JEe=Us({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),XEe=Us({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var e1e=Object.freeze({__proto__:null,base32:zEe,base32upper:WEe,base32pad:GEe,base32padupper:KEe,base32hex:QEe,base32hexupper:YEe,base32hexpad:ZEe,base32hexpadupper:JEe,base32z:XEe});const t1e=Kb({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),n1e=Kb({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var r1e=Object.freeze({__proto__:null,base36:t1e,base36upper:n1e});const s1e=Kb({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i1e=Kb({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var o1e=Object.freeze({__proto__:null,base58btc:s1e,base58flickr:i1e});const a1e=Us({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),c1e=Us({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),l1e=Us({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),u1e=Us({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var d1e=Object.freeze({__proto__:null,base64:a1e,base64pad:c1e,base64url:l1e,base64urlpad:u1e});const JH=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),h1e=JH.reduce((t,e,n)=>(t[n]=e,t),[]),f1e=JH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function p1e(t){return t.reduce((e,n)=>(e+=h1e[n],e),"")}function m1e(t){const e=[];for(const n of t){const r=f1e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const g1e=qI({prefix:"🚀",name:"base256emoji",encode:p1e,decode:m1e});var y1e=Object.freeze({__proto__:null,base256emoji:g1e}),w1e=XH,SL=128,v1e=-128,b1e=Math.pow(2,31);function XH(t,e,n){e=e||[],n=n||0;for(var r=n;t>=b1e;)e[n++]=t&255|SL,t/=128;for(;t&v1e;)e[n++]=t&255|SL,t>>>=7;return e[n]=t|0,XH.bytes=n-r+1,e}var _1e=hR,E1e=128,xL=127;function hR(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw hR.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&xL)<<s:(o&xL)*Math.pow(2,s),s+=7}while(o>=E1e);return hR.bytes=i-r,n}var A1e=Math.pow(2,7),C1e=Math.pow(2,14),I1e=Math.pow(2,21),T1e=Math.pow(2,28),S1e=Math.pow(2,35),x1e=Math.pow(2,42),P1e=Math.pow(2,49),R1e=Math.pow(2,56),N1e=Math.pow(2,63),O1e=function(t){return t<A1e?1:t<C1e?2:t<I1e?3:t<T1e?4:t<S1e?5:t<x1e?6:t<P1e?7:t<R1e?8:t<N1e?9:10},k1e={encode:w1e,decode:_1e,encodingLength:O1e},eq=k1e;const PL=(t,e,n=0)=>(eq.encode(t,e,n),e),RL=t=>eq.encodingLength(t),fR=(t,e)=>{const n=e.byteLength,r=RL(t),s=r+RL(n),i=new Uint8Array(s+n);return PL(t,i,0),PL(n,i,r),i.set(e,s),new D1e(t,n,e,i)};class D1e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const tq=({name:t,code:e,encode:n})=>new M1e(t,e,n);let M1e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?fR(this.code,n):n.then(r=>fR(this.code,r))}else throw Error("Unknown type, must be binary type")}};const nq=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),B1e=tq({name:"sha2-256",code:18,encode:nq("SHA-256")}),L1e=tq({name:"sha2-512",code:19,encode:nq("SHA-512")});var $1e=Object.freeze({__proto__:null,sha256:B1e,sha512:L1e});const rq=0,U1e="identity",sq=YH,F1e=t=>fR(rq,sq(t)),j1e={code:rq,name:U1e,encode:sq,digest:F1e};var V1e=Object.freeze({__proto__:null,identity:j1e});new TextEncoder,new TextDecoder;const NL={...MEe,...LEe,...UEe,...jEe,...qEe,...e1e,...r1e,...o1e,...d1e,...y1e};({...$1e,...V1e});function iq(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function H1e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?iq(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function oq(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const OL=oq("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ox=oq("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=H1e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),q1e={utf8:OL,"utf-8":OL,hex:NL.base16,latin1:Ox,ascii:Ox,binary:Ox,...NL};function z1e(t,e="utf8"){const n=q1e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?iq(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var W1e=Object.defineProperty,G1e=(t,e,n)=>e in t?W1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mc=(t,e,n)=>G1e(t,typeof e!="symbol"?e+"":e,n);class K1e{constructor(e,n){this.core=e,this.logger=n,mc(this,"keychain",new Map),mc(this,"name",G_e),mc(this,"version",K_e),mc(this,"initialized",!1),mc(this,"storagePrefix",tl),mc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),mc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),mc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),mc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=je("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),mc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=si(n,this.name)}get context(){return so(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ZP(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?JP(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Q1e=Object.defineProperty,Y1e=(t,e,n)=>e in t?Q1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ss=(t,e,n)=>Y1e(t,typeof e!="symbol"?e+"":e,n);class Z1e{constructor(e,n,r){this.core=e,this.logger=n,Ss(this,"name",z_e),Ss(this,"keychain"),Ss(this,"randomSessionIdentifier",cR()),Ss(this,"initialized",!1),Ss(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ss(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ss(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=VM(s);return tV(i.publicKey)}),Ss(this,"generateKeyPair",()=>{this.isInitialized();const s=Nbe();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ss(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=VM(i),a=this.randomSessionIdentifier;return await ehe(a,s,W_e,o)}),Ss(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Obe(a,i);return this.setSymKey(c,o)}),Ss(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||o1(s);return await this.keychain.set(o,s),o}),Ss(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ss(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ss(this,"encode",async(s,i,o)=>{this.isInitialized();const a=VH(o),c=pu(i);if(fL(a))return Mbe(c,o?.encoding);if(hL(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return kbe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o?.encoding})}),Ss(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Lbe(i,o);if(fL(a)){const c=Bbe(i,o?.encoding);return zf(c)}if(hL(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=Dbe({symKey:c,encoded:i,encoding:o?.encoding});return zf(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ss(this,"getPayloadType",(s,i=Vi)=>{const o=kv({encoded:s,encoding:i});return Qf(o.type)}),Ss(this,"getPayloadSenderPublicKey",(s,i=Vi)=>{const o=kv({encoded:s,encoding:i});return o.senderPublicKey?Ji(o.senderPublicKey,wi):void 0}),this.core=e,this.logger=si(n,this.name),this.keychain=r||new K1e(this.core,this.logger)}get context(){return so(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(IL)}catch{e=cR(),await this.keychain.set(IL,e)}return z1e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var J1e=Object.defineProperty,X1e=Object.defineProperties,eAe=Object.getOwnPropertyDescriptors,kL=Object.getOwnPropertySymbols,tAe=Object.prototype.hasOwnProperty,nAe=Object.prototype.propertyIsEnumerable,pR=(t,e,n)=>e in t?J1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rAe=(t,e)=>{for(var n in e||(e={}))tAe.call(e,n)&&pR(t,n,e[n]);if(kL)for(var n of kL(e))nAe.call(e,n)&&pR(t,n,e[n]);return t},sAe=(t,e)=>X1e(t,eAe(e)),uo=(t,e,n)=>pR(t,typeof e!="symbol"?e+"":e,n);class iAe extends Kye{constructor(e,n){super(e,n),this.logger=e,this.core=n,uo(this,"messages",new Map),uo(this,"messagesWithoutClientAck",new Map),uo(this,"name",Q_e),uo(this,"version",Y_e),uo(this,"initialized",!1),uo(this,"storagePrefix",tl),uo(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),uo(this,"set",async(r,s,i)=>{this.isInitialized();const o=Zo(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===a1.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,sAe(rAe({},c),{[o]:s}))}return await this.persist(),o}),uo(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),uo(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),uo(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Zo(s);return typeof i[o]<"u"}),uo(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Zo(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),uo(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=si(e,this.name),this.core=n}get context(){return so(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ZP(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,ZP(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?JP(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?JP(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oAe=Object.defineProperty,aAe=Object.defineProperties,cAe=Object.getOwnPropertyDescriptors,DL=Object.getOwnPropertySymbols,lAe=Object.prototype.hasOwnProperty,uAe=Object.prototype.propertyIsEnumerable,mR=(t,e,n)=>e in t?oAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,om=(t,e)=>{for(var n in e||(e={}))lAe.call(e,n)&&mR(t,n,e[n]);if(DL)for(var n of DL(e))uAe.call(e,n)&&mR(t,n,e[n]);return t},ML=(t,e)=>aAe(t,cAe(e)),qo=(t,e,n)=>mR(t,typeof e!="symbol"?e+"":e,n);class dAe extends Qye{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,qo(this,"events",new ya.EventEmitter),qo(this,"name",J_e),qo(this,"queue",new Map),qo(this,"publishTimeout",Ve.toMiliseconds(Ve.ONE_MINUTE)),qo(this,"initialPublishTimeout",Ve.toMiliseconds(Ve.ONE_SECOND*15)),qo(this,"needsTransportRestart",!1),qo(this,"publish",async(r,s,i)=>{var o,a,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=i?.ttl||Z_e,h=i?.prompt||!1,f=i?.tag||0,m=i?.id||kd().toString(),g=jm(RA().protocol),y={id:m,method:i?.publishMethod||g.publish,params:om({topic:r,message:s,ttl:d,prompt:h,tag:f,attestation:i?.attestation},i?.tvf&&{tvf:i.tvf})},v=`Failed to publish payload, please try again. id:${m} tag:${f}`;try{rs((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),rs((c=y.params)==null?void 0:c.tag)&&((l=y.params)==null||delete l.tag);const _=new Promise(async A=>{const k=({id:R})=>{var T;((T=y.id)==null?void 0:T.toString())===R.toString()&&(this.removeRequestFromQueue(R),this.relayer.events.removeListener($r.publish,k),A())};this.relayer.events.on($r.publish,k);const S=Dc(new Promise((R,T)=>{this.rpcPublish(y,i).then(R).catch(b=>{this.logger.warn(b,b?.message),T(b)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${m} tag:${f}`);try{await S,this.events.removeListener($r.publish,k)}catch(R){this.queue.set(m,{request:y,opts:i,attempt:1}),this.logger.warn(R,R?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:m,topic:r,message:s,opts:i}}),await Dc(_,this.publishTimeout,v)}catch(_){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(_),(u=i?.internal)!=null&&u.throwOnFailedPublish)throw _}finally{this.queue.delete(m)}}),qo(this,"publishCustom",async r=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:l,opts:u={}}=r,{attestation:d,tvf:h,publishMethod:f,prompt:m,tag:g,ttl:y=Ve.FIVE_MINUTES}=u,v=u.id||kd().toString(),_=jm(RA().protocol),A=f||_.publish,k={id:v,method:A,params:om(ML(om({},l),{ttl:y,prompt:m,tag:g,attestation:d}),h)},S=`Failed to publish custom payload, please try again. id:${v} tag:${g}`;try{rs((s=k.params)==null?void 0:s.prompt)&&((i=k.params)==null||delete i.prompt),rs((o=k.params)==null?void 0:o.tag)&&((a=k.params)==null||delete a.tag);const R=new Promise(async T=>{const b=({id:x})=>{var D;((D=k.id)==null?void 0:D.toString())===x.toString()&&(this.removeRequestFromQueue(x),this.relayer.events.removeListener($r.publish,b),T())};this.relayer.events.on($r.publish,b);const E=Dc(new Promise((x,D)=>{this.rpcPublish(k,u).then(x).catch(M=>{this.logger.warn(M,M?.message),D(M)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${A} id:${v} tag:${g}`);try{await E,this.events.removeListener($r.publish,b)}catch(x){this.queue.set(v,{request:k,opts:u,attempt:1}),this.logger.warn(x,x?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:v,payload:l,opts:u}}),await Dc(R,this.publishTimeout,S)}catch(R){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(R),(c=u?.internal)!=null&&c.throwOnFailedPublish)throw R}finally{this.queue.delete(v)}}),qo(this,"on",(r,s)=>{this.events.on(r,s)}),qo(this,"once",(r,s)=>{this.events.once(r,s)}),qo(this,"off",(r,s)=>{this.events.off(r,s)}),qo(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=si(n,this.name),this.registerEventListeners()}get context(){return so(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit($r.publish,om(om({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const s=e.attempt+1;this.queue.set(n,ML(om({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ap.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit($r.connection_stalled);return}this.checkQueue()}),this.relayer.on($r.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var hAe=Object.defineProperty,fAe=(t,e,n)=>e in t?hAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,am=(t,e,n)=>fAe(t,typeof e!="symbol"?e+"":e,n);class pAe{constructor(){am(this,"map",new Map),am(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),am(this,"get",e=>this.map.get(e)||[]),am(this,"exists",(e,n)=>this.get(e).includes(n)),am(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),am(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var mAe=Object.defineProperty,gAe=Object.defineProperties,yAe=Object.getOwnPropertyDescriptors,BL=Object.getOwnPropertySymbols,wAe=Object.prototype.hasOwnProperty,vAe=Object.prototype.propertyIsEnumerable,gR=(t,e,n)=>e in t?mAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I0=(t,e)=>{for(var n in e||(e={}))wAe.call(e,n)&&gR(t,n,e[n]);if(BL)for(var n of BL(e))vAe.call(e,n)&&gR(t,n,e[n]);return t},kx=(t,e)=>gAe(t,yAe(e)),sr=(t,e,n)=>gR(t,typeof e!="symbol"?e+"":e,n);class bAe extends Jye{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,sr(this,"subscriptions",new Map),sr(this,"topicMap",new pAe),sr(this,"events",new ya.EventEmitter),sr(this,"name",iEe),sr(this,"version",oEe),sr(this,"pending",new Map),sr(this,"cached",[]),sr(this,"initialized",!1),sr(this,"storagePrefix",tl),sr(this,"subscribeTimeout",Ve.toMiliseconds(Ve.ONE_MINUTE)),sr(this,"initialSubscribeTimeout",Ve.toMiliseconds(Ve.ONE_SECOND*15)),sr(this,"clientId"),sr(this,"batchSubscribeTopicsLimit",500),sr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),sr(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=RA(s),a={topic:r,relay:o,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),sr(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),sr(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),sr(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),sr(this,"on",(r,s)=>{this.events.on(r,s)}),sr(this,"once",(r,s)=>{this.events.once(r,s)}),sr(this,"off",(r,s)=>{this.events.off(r,s)}),sr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),sr(this,"start",async()=>{await this.onConnect()}),sr(this,"stop",async()=>{await this.onDisconnect()}),sr(this,"restart",async()=>{await this.restore(),await this.onRestart()}),sr(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),sr(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ap.pulse,async()=>{await this.checkPending()}),this.events.on(fo.created,async r=>{const s=fo.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(fo.deleted,async r=>{const s=fo.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=si(n,this.name),this.clientId=""}get context(){return so(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=RA(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Tr("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s,i;const o=await this.getSubscriptionId(e);if((s=r?.internal)!=null&&s.skipSubscribe)return o;(!r||r?.transportType===yr.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const a={method:jm(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{if(r?.transportType===yr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},Ve.toMiliseconds(Ve.ONE_SECOND)),o;const l=new Promise(async d=>{const h=f=>{f.topic===e&&(this.events.removeListener(fo.created,h),d(f.id))};this.events.on(fo.created,h);try{const f=await Dc(new Promise((m,g)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y?.message),g(y)}).then(m)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(fo.created,h),d(f)}catch{}}),u=await Dc(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit($r.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:jm(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Dc(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit($r.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:jm(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Dc(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit($r.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:jm(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,kx(I0({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,I0({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,I0({},n)),this.topicMap.set(n.topic,e),this.events.emit(fo.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=je("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(fo.deleted,kx(I0({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(fo.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(fo.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=je("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>kx(I0({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await X0e(Ve.toMiliseconds(Ve.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Zo(e+await this.getClientId())}}var _Ae=Object.defineProperty,LL=Object.getOwnPropertySymbols,EAe=Object.prototype.hasOwnProperty,AAe=Object.prototype.propertyIsEnumerable,yR=(t,e,n)=>e in t?_Ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$L=(t,e)=>{for(var n in e||(e={}))EAe.call(e,n)&&yR(t,n,e[n]);if(LL)for(var n of LL(e))AAe.call(e,n)&&yR(t,n,e[n]);return t},On=(t,e,n)=>yR(t,typeof e!="symbol"?e+"":e,n);class CAe extends Yye{constructor(e){super(e),On(this,"protocol","wc"),On(this,"version",2),On(this,"core"),On(this,"logger"),On(this,"events",new ya.EventEmitter),On(this,"provider"),On(this,"messages"),On(this,"subscriber"),On(this,"publisher"),On(this,"name",eEe),On(this,"transportExplicitlyClosed",!1),On(this,"initialized",!1),On(this,"connectionAttemptInProgress",!1),On(this,"relayUrl"),On(this,"projectId"),On(this,"packageName"),On(this,"bundleId"),On(this,"hasExperiencedNetworkDisruption",!1),On(this,"pingTimeout"),On(this,"heartBeatTimeout",Ve.toMiliseconds(Ve.THIRTY_SECONDS+Ve.FIVE_SECONDS)),On(this,"reconnectTimeout"),On(this,"connectPromise"),On(this,"reconnectInProgress",!1),On(this,"requestsInFlight",[]),On(this,"connectTimeout",Ve.toMiliseconds(Ve.ONE_SECOND*15)),On(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||kd().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),On(this,"resetPingTimeout",()=>{TA()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),On(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),On(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit($r.connect)}),On(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),On(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit($r.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),On(this,"registerProviderListeners",()=>{this.provider.on(Ho.payload,this.onPayloadHandler),this.provider.on(Ho.connect,this.onConnectHandler),this.provider.on(Ho.disconnect,this.onDisconnectHandler),this.provider.on(Ho.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?si(e.logger,this.name):Ub(cy({level:e.logger||X_e})),this.messages=new iAe(this.logger,e.core),this.subscriber=new bAe(this,this.logger),this.publisher=new dAe(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||KH,L0e()?this.packageName=DB():$0e()&&(this.bundleId=DB()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return so(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:yr.relay},a1.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(fo.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(fo.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,$L({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Dc(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await CL())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=es(Ve.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit($r.message,e),await this.recordMessageEvent(e,a1.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ho.disconnect,i),await Dc(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ho.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ho.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ho.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Ve.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(TA())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new wa(new Zpe(H0e({sdkVersion:dR,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),sk(e)){if(!e.method.endsWith(tEe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:yr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($L({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else kI(e)&&this.events.emit($r.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,a1.inbound),this.events.emit($r.message,e))}async acknowledgePayload(e){const n=pv(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ho.payload,this.onPayloadHandler),this.provider.off(Ho.connect,this.onConnectHandler),this.provider.off(Ho.disconnect,this.onDisconnectHandler),this.provider.off(Ho.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await CL();R_e(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ap.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&k_e())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit($r.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Ve.toMiliseconds(nEe)))))}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function IAe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function UL(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function FL(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const TAe="[object RegExp]",SAe="[object String]",xAe="[object Number]",PAe="[object Boolean]",jL="[object Arguments]",RAe="[object Symbol]",NAe="[object Date]",OAe="[object Map]",kAe="[object Set]",DAe="[object Array]",MAe="[object Function]",BAe="[object ArrayBuffer]",Dx="[object Object]",LAe="[object Error]",$Ae="[object DataView]",UAe="[object Uint8Array]",FAe="[object Uint8ClampedArray]",jAe="[object Uint16Array]",VAe="[object Uint32Array]",HAe="[object BigUint64Array]",qAe="[object Int8Array]",zAe="[object Int16Array]",WAe="[object Int32Array]",GAe="[object BigInt64Array]",KAe="[object Float32Array]",QAe="[object Float64Array]";function YAe(){}function VL(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function ZAe(t,e,n){return j0(t,e,void 0,void 0,void 0,void 0,n)}function j0(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return pw(t,e,i,o)}return pw(t,e,i,o)}function pw(t,e,n,r){if(Object.is(t,e))return!0;let s=FL(t),i=FL(e);if(s===jL&&(s=Dx),i===jL&&(i=Dx),s!==i)return!1;switch(s){case SAe:return t.toString()===e.toString();case xAe:{const c=t.valueOf(),l=e.valueOf();return IAe(c,l)}case PAe:case NAe:case RAe:return Object.is(t.valueOf(),e.valueOf());case TAe:return t.source===e.source&&t.flags===e.flags;case MAe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case OAe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!j0(l,e.get(c),c,t,e,n,r))return!1;return!0}case kAe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>j0(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case DAe:case UAe:case FAe:case jAe:case VAe:case HAe:case qAe:case zAe:case WAe:case GAe:case KAe:case QAe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!j0(t[c],e[c],c,t,e,n,r))return!1;return!0}case BAe:return t.byteLength!==e.byteLength?!1:pw(new Uint8Array(t),new Uint8Array(e),n,r);case $Ae:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:pw(new Uint8Array(t),new Uint8Array(e),n,r);case LAe:return t.name===e.name&&t.message===e.message;case Dx:{if(!(pw(t.constructor,e.constructor,n,r)||VL(t)&&VL(e)))return!1;const c=[...Object.keys(t),...UL(t)],l=[...Object.keys(e),...UL(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!j0(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function JAe(t,e){return ZAe(t,e,YAe)}var XAe=Object.defineProperty,HL=Object.getOwnPropertySymbols,eCe=Object.prototype.hasOwnProperty,tCe=Object.prototype.propertyIsEnumerable,wR=(t,e,n)=>e in t?XAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qL=(t,e)=>{for(var n in e||(e={}))eCe.call(e,n)&&wR(t,n,e[n]);if(HL)for(var n of HL(e))tCe.call(e,n)&&wR(t,n,e[n]);return t},Di=(t,e,n)=>wR(t,typeof e!="symbol"?e+"":e,n);class Ip extends Zye{constructor(e,n,r,s=tl,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Di(this,"map",new Map),Di(this,"version",rEe),Di(this,"cached",[]),Di(this,"initialized",!1),Di(this,"getKey"),Di(this,"storagePrefix",tl),Di(this,"recentlyDeleted",[]),Di(this,"recentlyDeletedLimit",200),Di(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!rs(o)?this.map.set(this.getKey(o),o):a_e(o)?this.map.set(o.id,o):c_e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Di(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Di(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Di(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>JAe(a[c],o[c]))):this.values)),Di(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=qL(qL({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Di(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=si(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return so(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=je("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=je("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=je("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nCe=Object.defineProperty,rCe=(t,e,n)=>e in t?nCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yn=(t,e,n)=>rCe(t,typeof e!="symbol"?e+"":e,n);class sCe{constructor(e,n){this.core=e,this.logger=n,yn(this,"name",aEe),yn(this,"version",cEe),yn(this,"events",new qO),yn(this,"pairings"),yn(this,"initialized",!1),yn(this,"storagePrefix",tl),yn(this,"ignoredPayloadTypes",[iu]),yn(this,"registeredMethods",[]),yn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),yn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),yn(this,"create",async r=>{this.isInitialized();const s=cR(),i=await this.core.crypto.setSymKey(s),o=es(Ve.FIVE_MINUTES),a={protocol:GH},c={topic:i,expiry:o,relay:a,active:!1,methods:r?.methods},l=mL({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(of.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r?.transportType,internal:r?.internal}),{topic:i,uri:l}}),yn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[vc.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=pL(r.uri);s.props.properties.topic=i,s.addTrace(vc.pairing_uri_validation_success),s.addTrace(vc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(vc.existing_pairing),u.active)throw s.setError(Ul.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(vc.pairing_not_expired)}const d=c||es(Ve.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(vc.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(of.create,h),s.addTrace(vc.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(vc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Ul.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Ul.subscribe_pairing_topic_failure),f}return s.addTrace(vc.subscribe_pairing_topic_success),h}),yn(this,"activate",async({topic:r})=>{this.isInitialized();const s=es(Ve.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),yn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=tf();this.events.once(Un("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),yn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),yn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),yn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),yn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Tr("USER_DISCONNECTED")),await this.deletePairing(s))}),yn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return mL({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),yn(this,"sendRequest",async(r,s,i)=>{const o=Sc(s,i),a=await this.core.crypto.encode(r,o),c=E0[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),yn(this,"sendResult",async(r,s,i)=>{const o=pv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=E0[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),yn(this,"sendError",async(r,s,i)=>{const o=OI(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=E0[c]?E0[c].res:E0.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),yn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Tr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),yn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>yd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),yn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),yn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),yn(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(of.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),yn(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Ec(s)?this.events.emit(Un("pairing_ping",i),{}):Yo(s)&&this.events.emit(Un("pairing_ping",i),{error:s.error})},500)}),yn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(of.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),yn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Tr("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),yn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Tr("WC_METHOD_UNSUPPORTED",r))}),yn(this,"isValidPair",(r,s)=>{var i;if(!Bi(r)){const{message:a}=je("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Ul.malformed_pairing_uri),new Error(a)}if(!o_e(r.uri)){const{message:a}=je("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Ul.malformed_pairing_uri),new Error(a)}const o=pL(r?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=je("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Ul.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=je("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Ul.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Ve.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(Ul.pairing_expired);const{message:a}=je("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),yn(this,"isValidPing",async r=>{if(!Bi(r)){const{message:i}=je("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),yn(this,"isValidDisconnect",async r=>{if(!Bi(r)){const{message:i}=je("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),yn(this,"isValidPairingTopic",async r=>{if(!Gr(r,!1)){const{message:s}=je("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=je("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(yd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=je("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=si(n,this.name),this.pairings=new Ip(this.core,this.logger,this.name,this.storagePrefix)}get context(){return so(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on($r.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==yr.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);sk(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):kI(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Qo.expired,async e=>{const{topic:n}=JV(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(of.expire,{topic:n}))})}}var iCe=Object.defineProperty,oCe=(t,e,n)=>e in t?iCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xs=(t,e,n)=>oCe(t,typeof e!="symbol"?e+"":e,n);class aCe extends Gye{constructor(e,n){super(e,n),this.core=e,this.logger=n,xs(this,"records",new Map),xs(this,"events",new ya.EventEmitter),xs(this,"name",lEe),xs(this,"version",uEe),xs(this,"cached",[]),xs(this,"initialized",!1),xs(this,"storagePrefix",tl),xs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),xs(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:es(Ve.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Ta.created,o)}),xs(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Yo(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ta.updated,s))}),xs(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),xs(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Ta.deleted,i)}}),this.persist()}),xs(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),xs(this,"on",(r,s)=>{this.events.on(r,s)}),xs(this,"once",(r,s)=>{this.events.once(r,s)}),xs(this,"off",(r,s)=>{this.events.off(r,s)}),xs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=si(n,this.name)}get context(){return so(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Sc(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=je("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ta.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=je("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ta.created,e=>{const n=Ta.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Ta.updated,e=>{const n=Ta.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Ta.deleted,e=>{const n=Ta.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Ap.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Ve.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Ta.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var cCe=Object.defineProperty,lCe=(t,e,n)=>e in t?cCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zs=(t,e,n)=>lCe(t,typeof e!="symbol"?e+"":e,n);class uCe extends Xye{constructor(e,n){super(e,n),this.core=e,this.logger=n,zs(this,"expirations",new Map),zs(this,"events",new ya.EventEmitter),zs(this,"name",dEe),zs(this,"version",hEe),zs(this,"cached",[]),zs(this,"initialized",!1),zs(this,"storagePrefix",tl),zs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),zs(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),zs(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Qo.created,{target:i,expiration:o})}),zs(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),zs(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Qo.deleted,{target:s,expiration:i})}}),zs(this,"on",(r,s)=>{this.events.on(r,s)}),zs(this,"once",(r,s)=>{this.events.once(r,s)}),zs(this,"off",(r,s)=>{this.events.off(r,s)}),zs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=si(n,this.name)}get context(){return so(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return q0e(e);if(typeof e=="number")return z0e(e);const{message:n}=je("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Qo.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=je("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=je("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Ve.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Qo.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Ap.pulse,()=>this.checkExpirations()),this.events.on(Qo.created,e=>{const n=Qo.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Qo.expired,e=>{const n=Qo.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Qo.deleted,e=>{const n=Qo.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dCe=Object.defineProperty,hCe=(t,e,n)=>e in t?dCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qr=(t,e,n)=>hCe(t,typeof e!="symbol"?e+"":e,n);class fCe extends e0e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,qr(this,"name",fEe),qr(this,"abortController"),qr(this,"isDevEnv"),qr(this,"verifyUrlV3",mEe),qr(this,"storagePrefix",tl),qr(this,"version",WH),qr(this,"publicKey"),qr(this,"fetchPromise"),qr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ve.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),qr(this,"register",async s=>{if(!fy()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=mu.getDocument(),u=this.startAbortTimer(Ve.ONE_SECOND*5),d=await new Promise((h,f)=>{const m=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",m);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",m,{signal:this.abortController.signal});const y=v=>{if(v.data&&typeof v.data=="string")try{const _=JSON.parse(v.data);if(_.type==="verify_attestation"){if(xP(_.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",m),window.removeEventListener("message",y),h(_.attestation===null?"":_.attestation)}}catch(_){this.logger.warn(_)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),qr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(xP(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),qr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Ve.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),qr(this,"getVerifyUrl",s=>{let i=s||fw;return gEe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${fw}`),i=fw),i}),qr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Ve.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),qr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),qr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),qr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),qr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),qr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),qr(this,"validateAttestation",(s,i)=>{const o=Ube(s,i.publicKey),a={hasExpired:Ve.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=si(n,this.name),this.abortController=new AbortController,this.isDevEnv=ck(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return so(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ve.toMiliseconds(e))}}var pCe=Object.defineProperty,mCe=(t,e,n)=>e in t?pCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zL=(t,e,n)=>mCe(t,typeof e!="symbol"?e+"":e,n);class gCe extends t0e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,zL(this,"context",yEe),zL(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${wEe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=si(n,this.context)}}var yCe=Object.defineProperty,WL=Object.getOwnPropertySymbols,wCe=Object.prototype.hasOwnProperty,vCe=Object.prototype.propertyIsEnumerable,vR=(t,e,n)=>e in t?yCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T0=(t,e)=>{for(var n in e||(e={}))wCe.call(e,n)&&vR(t,n,e[n]);if(WL)for(var n of WL(e))vCe.call(e,n)&&vR(t,n,e[n]);return t},ms=(t,e,n)=>vR(t,typeof e!="symbol"?e+"":e,n);class bCe extends n0e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,ms(this,"context",bEe),ms(this,"storagePrefix",tl),ms(this,"storageVersion",vEe),ms(this,"events",new Map),ms(this,"shouldPersist",!1),ms(this,"init",async()=>{if(!ck())try{const s={eventId:BB(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:YV(this.core.relayer.protocol,this.core.relayer.version,dR)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),ms(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=BB(),u=this.core.projectId||"",d=Date.now(),h=T0({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),ms(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return T0(T0({},a),this.setMethods(a.eventId))}),ms(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),ms(this,"setEventListeners",()=>{this.core.heartbeat.on(Ap.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Ve.fromMiliseconds(Date.now())-Ve.fromMiliseconds(s.timestamp)>_Ee&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),ms(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),ms(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),ms(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),ms(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ms(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,T0(T0({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),ms(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),ms(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${EEe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${dR}${i}`,{method:"POST",body:JSON.stringify(s)})}),ms(this,"getAppDomain",()=>QV().url),this.logger=si(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var _Ce=Object.defineProperty,GL=Object.getOwnPropertySymbols,ECe=Object.prototype.hasOwnProperty,ACe=Object.prototype.propertyIsEnumerable,bR=(t,e,n)=>e in t?_Ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KL=(t,e)=>{for(var n in e||(e={}))ECe.call(e,n)&&bR(t,n,e[n]);if(GL)for(var n of GL(e))ACe.call(e,n)&&bR(t,n,e[n]);return t},dr=(t,e,n)=>bR(t,typeof e!="symbol"?e+"":e,n);let CCe=class aq extends Hye{constructor(e){var n;super(e),dr(this,"protocol",zH),dr(this,"version",WH),dr(this,"name",uR),dr(this,"relayUrl"),dr(this,"projectId"),dr(this,"customStoragePrefix"),dr(this,"events",new ya.EventEmitter),dr(this,"logger"),dr(this,"heartbeat"),dr(this,"relayer"),dr(this,"crypto"),dr(this,"storage"),dr(this,"history"),dr(this,"expirer"),dr(this,"pairing"),dr(this,"verify"),dr(this,"echoClient"),dr(this,"linkModeSupportedApps"),dr(this,"eventClient"),dr(this,"initialized",!1),dr(this,"logChunkController"),dr(this,"on",(a,c)=>this.events.on(a,c)),dr(this,"once",(a,c)=>this.events.once(a,c)),dr(this,"off",(a,c)=>this.events.off(a,c)),dr(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),dr(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:yr.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||KH,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=cy({level:typeof e?.logger=="string"&&e.logger?e.logger:H_e.logger,name:uR}),{logger:i,chunkLoggerController:o}=WO({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=si(i,this.name),this.heartbeat=new hce,this.crypto=new Z1e(this,this.logger,e?.keychain),this.history=new aCe(this,this.logger),this.expirer=new uCe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Kce(KL(KL({},q_e),e?.storageOptions)),this.relayer=new CAe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new sCe(this,this.logger),this.verify=new fCe(this,this.logger,this.storage),this.echoClient=new gCe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new bCe(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new aq(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(sEe,r),n}get context(){return so(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(TL,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(TL)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&V_e.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const ICe=CCe,cq="wc",lq=2,uq="client",Ek=`${cq}@${lq}:${uq}:`,Mx={name:uq,logger:"error"},QL="WALLETCONNECT_DEEPLINK_CHOICE",TCe="proposal",YL="Proposal expired",SCe="session",cm=Ve.SEVEN_DAYS,xCe="engine",Ps={wc_sessionPropose:{req:{ttl:Ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ve.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ve.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ve.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ve.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ve.FIVE_MINUTES,prompt:!1,tag:1119}}},Bx={min:Ve.FIVE_MINUTES,max:Ve.SEVEN_DAYS},gc={idle:"IDLE",active:"ACTIVE"},PCe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},RCe="request",NCe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],OCe="wc",kCe="auth",DCe="authKeys",MCe="pairingTopics",BCe="requests",zI=`${OCe}@${1.5}:${kCe}:`,c1=`${zI}:PUB_KEY`;var LCe=Object.defineProperty,$Ce=Object.defineProperties,UCe=Object.getOwnPropertyDescriptors,ZL=Object.getOwnPropertySymbols,FCe=Object.prototype.hasOwnProperty,jCe=Object.prototype.propertyIsEnumerable,_R=(t,e,n)=>e in t?LCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yn=(t,e)=>{for(var n in e||(e={}))FCe.call(e,n)&&_R(t,n,e[n]);if(ZL)for(var n of ZL(e))jCe.call(e,n)&&_R(t,n,e[n]);return t},Ws=(t,e)=>$Ce(t,UCe(e)),xe=(t,e,n)=>_R(t,typeof e!="symbol"?e+"":e,n);class VCe extends o0e{constructor(e){super(e),xe(this,"name",xCe),xe(this,"events",new qO),xe(this,"initialized",!1),xe(this,"requestQueue",{state:gc.idle,queue:[]}),xe(this,"sessionRequestQueue",{state:gc.idle,queue:[]}),xe(this,"emittedSessionRequests",new ewe({limit:500})),xe(this,"requestQueueDelay",Ve.ONE_SECOND),xe(this,"expectedPairingMethodMap",new Map),xe(this,"recentlyDeletedMap",new Map),xe(this,"recentlyDeletedLimit",200),xe(this,"relayMessageCache",[]),xe(this,"pendingSessions",new Map),xe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ps)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ve.toMiliseconds(this.requestQueueDelay)))}),xe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ws(Yn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=t_e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const R=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=R.active}}catch(R){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),R}if(!u||!h){const{topic:R,uri:T}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});u=R,d=T}if(!u){const{message:R}=je("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(R)}const f=await this.client.core.crypto.generateKeyPair(),m=Ps.wc_sessionPropose.req.ttl||Ve.FIVE_MINUTES,g=es(m),y=Ws(Yn(Yn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:GH}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:_c()}),v=Un("session_connect",y.id),{reject:_,resolve:A,done:k}=tf(m,YL),S=({id:R})=>{R===y.id&&(this.client.events.off("proposal_expire",S),this.pendingSessions.delete(y.id),this.events.emit(v,{error:{message:YL,code:0}}))};return this.client.events.on("proposal_expire",S),this.events.once(v,({error:R,session:T})=>{this.client.events.off("proposal_expire",S),R?_(R):T&&A(T)}),await this.sendProposeSession({proposal:y,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:y.id}}}),await this.setProposal(y.id,y),{uri:d,approval:k}}),xe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),xe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[ld.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(E){throw o.setError(A0.no_internet_connection),E}try{await this.isValidProposalId(n?.id)}catch(E){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),o.setError(A0.proposal_not_found),E}try{await this.isValidApprove(n)}catch(E){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(A0.session_approve_namespace_validation_failure),E}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:m,proposer:g,requiredNamespaces:y,optionalNamespaces:v}=f;let _=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:m});_||(_=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ld.session_approve_started,properties:{topic:m,trace:[ld.session_approve_started,ld.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),k=g.publicKey,S=await this.client.core.crypto.generateSharedKey(A,k),R=Yn(Yn(Yn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:A,metadata:this.client.metadata},expiry:es(cm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),T=yr.relay;_.addTrace(ld.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:T,internal:{skipSubscribe:!0}})}catch(E){throw _.setError(A0.subscribe_session_topic_failure),E}_.addTrace(ld.subscribe_session_topic_success);const b=Ws(Yn({},R),{topic:S,requiredNamespaces:y,optionalNamespaces:v,pairingTopic:m,acknowledged:!1,self:R.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:A,transportType:yr.relay});await this.client.session.set(S,b),_.addTrace(ld.store_session);try{await this.sendApproveSession({sessionTopic:S,proposal:f,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:A},sessionSettleRequest:R,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),_.addTrace(ld.session_approve_publish_success)}catch(E){throw this.client.logger.error(E),this.client.session.delete(S,Tr("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),E}return this.client.core.eventClient.deleteEvent({eventId:_.eventId}),await this.client.core.pairing.updateMetadata({topic:m,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:m}),await this.setExpiry(S,es(cm)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),xe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Ps.wc_sessionPropose.reject}),await this.deleteProposal(r)}),xe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=tf(),c=_c(),l=kd().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Un("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),xe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=_c(),{done:i,resolve:o,reject:a}=tf();return this.events.once(Un("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,es(cm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),xe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=Ps.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);a?.transportType===yr.relay&&await this.confirmOnlineStateOrThrow();const c=_c(),l=kd().toString(),{done:u,resolve:d,reject:h}=tf(o,"Request expired. Please try again.");this.events.once(Un("session_request",c),({error:y,result:v})=>{y?h(y):d(v)});const f="wc_sessionRequest",m=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(m)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Ws(Yn({},s),{expiryTimestamp:es(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:m}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Ws(Yn({},s),{expiryTimestamp:es(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(v=>h(v)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var v;if(!((v=a.sessionConfig)!=null&&v.disableDeepLink)){const _=await Q0e(this.client.core.storage,QL);await W0e({id:c,topic:i,wcDeepLink:_})}y()}),u()]).then(y=>y[2])}),xe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===yr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ec(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Yo(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),xe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=_c(),i=kd().toString(),{done:o,resolve:a,reject:c}=tf();this.events.once(Un("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),xe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=kd().toString(),a=_c();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),xe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Tr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=je("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),xe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>s_e(r,n)))),xe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),xe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?yr.link_mode:yr.relay;o===yr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:m,methods:g=[],expiry:y}=n,v=[...n.resources||[]],{topic:_,uri:A}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:_,uri:A}});const k=await this.client.core.crypto.generateKeyPair(),S=o1(k);if(await Promise.all([this.client.auth.authKeys.set(c1,{responseTopic:S,publicKey:k}),this.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:_})]),await this.client.core.relayer.subscribe(S,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${_}`),g.length>0){const{namespace:J}=Pf(a[0]);let V=dve(J,"request",g);i1(v)&&(V=fve(V,v.pop())),v.push(V)}const R=y&&y>Ps.wc_sessionAuthenticate.req.ttl?y:Ps.wc_sessionAuthenticate.req.ttl,T={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:m,resources:v},requester:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:es(R)},b={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},E={requiredNamespaces:{},optionalNamespaces:b,relays:[{protocol:"irn"}],pairingTopic:_,proposer:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:es(Ps.wc_sessionPropose.req.ttl),id:_c()},{done:x,resolve:D,reject:M}=tf(R,"Request expired"),$=_c(),X=Un("session_connect",E.id),P=Un("session_request",$),L=async({error:J,session:V})=>{this.events.off(P,W),J?M(J):V&&D({session:V})},W=async J=>{var V,se,ue;if(await this.deletePendingAuthRequest($,{message:"fulfilled",code:0}),J.error){const ge=Tr("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return J.error.code===ge.code?void 0:(this.events.off(X,L),M(J.error.message))}await this.deleteProposal(E.id),this.events.off(X,L);const{cacaos:Ee,responder:pe}=J.result,Se=[],Me=[];for(const ge of Ee){await GB({cacao:ge,projectId:this.client.core.projectId})||(this.client.logger.error(ge,"Signature verification failed"),M(Tr("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ne}=ge,mt=i1(Ne.resources),Q=[XP(Ne.iss)],Z=SA(Ne.iss);if(mt){const te=KB(mt),me=QB(mt);Se.push(...te),Q.push(...me)}for(const te of Q)Me.push(`${te}:${Z}`)}const ce=await this.client.core.crypto.generateSharedKey(k,pe.publicKey);let oe;Se.length>0&&(oe={topic:ce,acknowledged:!0,self:{publicKey:k,metadata:this.client.metadata},peer:pe,controller:pe.publicKey,expiry:es(cm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:_,namespaces:vL([...new Set(Se)],[...new Set(Me)]),transportType:o},await this.client.core.relayer.subscribe(ce,{transportType:o}),await this.client.session.set(ce,oe),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:pe.metadata}),oe=this.client.session.get(ce)),(V=this.client.metadata.redirect)!=null&&V.linkMode&&(se=pe.metadata.redirect)!=null&&se.linkMode&&(ue=pe.metadata.redirect)!=null&&ue.universal&&r&&(this.client.core.addLinkModeSupportedApp(pe.metadata.redirect.universal),this.client.session.update(ce,{transportType:yr.link_mode})),D({auths:Ee,session:oe})};this.events.once(X,L),this.events.once(P,W);let Y;try{if(i){const J=Sc("wc_sessionAuthenticate",T,$);this.client.core.history.set(_,J);const V=await this.client.core.crypto.encode("",J,{type:Gb,encoding:Id});Y=AE(r,_,V)}else await Promise.all([this.sendRequest({topic:_,method:"wc_sessionAuthenticate",params:T,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:$}),this.sendRequest({topic:_,method:"wc_sessionPropose",params:E,expiry:Ps.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:E.id})])}catch(J){throw this.events.off(X,L),this.events.off(P,W),J}return await this.setProposal(E.id,E),await this.setAuthRequest($,{request:Ws(Yn({},T),{verifyContext:{}}),pairingTopic:_,transportType:o}),{uri:Y??A,response:x}}),xe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Qh.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(C0.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(C0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||yr.relay;a===yr.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=o1(c),d={type:iu,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await GB({cacao:y,projectId:this.client.core.projectId})){i.setError(C0.invalid_cacao);const S=Tr("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:S,encodeOpts:d}),new Error(S.message)}i.addTrace(Qh.cacaos_verified);const{p:v}=y,_=i1(v.resources),A=[XP(v.iss)],k=SA(v.iss);if(_){const S=KB(_),R=QB(_);h.push(...S),A.push(...R)}for(const S of A)f.push(`${S}:${k}`)}const m=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Qh.create_authenticated_session_topic);let g;if(h?.length>0){g={topic:m,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:es(cm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:vL([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Qh.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(m,{transportType:a})}catch(y){throw i.setError(C0.subscribe_authenticated_session_topic_failure),y}i.addTrace(Qh.subscribe_authenticated_session_topic_success),await this.client.session.set(m,g),i.addTrace(Qh.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Qh.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(C0.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),xe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===yr.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=o1(o),l={type:iu,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Ps.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),xe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return fH(r,s)}),xe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),xe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),xe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Tr("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(QL).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Tr("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=gc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),xe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(A0.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Tr("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),xe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=gc.idle,this.client.events.emit("session_request_expire",{id:n}))}),xe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),xe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),xe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,es(Ps.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),xe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=yr.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),xe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||es(Ps.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),xe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d,publishOpts:h={}}=n,f=Sc(s,i,c);let m;const g=!!u;try{const _=g?Id:Vi;m=await this.client.core.crypto.encode(r,f,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),_}let y;if(NCe.includes(s)){const _=Zo(JSON.stringify(f)),A=Zo(m);y=await this.client.core.verify.register({id:A,decryptedId:_})}const v=Yn(Yn({},Ps[s].req),h);if(v.attestation=y,o&&(v.ttl=o),a&&(v.id=a),this.client.core.history.set(r,f),g){const _=AE(u,r,m);await globalThis.Linking.openURL(_,this.client.name)}else v.tvf=Ws(Yn({},d),{correlationId:f.id}),l?(v.internal=Ws(Yn({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,m,v)):this.client.core.relayer.publish(r,m,v).catch(_=>this.client.logger.error(_));return f.id}),xe(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=Sc("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const o=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:Vi}),a=Zo(JSON.stringify(i)),c=Zo(o),l=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:Ws(Yn({},s),{publishMethod:"wc_proposeSession",attestation:l})})}),xe(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=n,c=pv(i.id,s),l=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:Vi}),u=Sc("wc_sessionSettle",o,a?.id),d=await this.client.core.crypto.encode(r,u,{encoding:Vi});this.client.core.history.set(r,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:d},opts:Ws(Yn({},a),{publishMethod:"wc_approveSession"})})}),xe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=pv(r,i);let u;const d=c&&typeof globalThis?.Linking<"u";try{const m=d?Id:Vi;u=await this.client.core.crypto.encode(s,l,Ws(Yn({},a||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),m}let h,f;try{h=await this.client.core.history.get(s,r);const m=h.request;try{f=this.getTVFParams(r,m.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g?.message}`)}}catch(m){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),m}if(d){const m=AE(c,s,u);await globalThis.Linking.openURL(m,this.client.name)}else{const m=h.request.method,g=Ps[m].res;g.tvf=Ws(Yn({},f),{correlationId:r}),o?(g.internal=Ws(Yn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),xe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=OI(r,i);let u;const d=c&&typeof globalThis?.Linking<"u";try{const f=d?Id:Vi;u=await this.client.core.crypto.encode(s,l,Ws(Yn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=AE(c,s,u);await globalThis.Linking.openURL(f,this.client.name)}else{const f=h.request.method,m=a||Ps[f].res;this.client.core.relayer.publish(s,u,m)}await this.client.core.history.resolve(l)}),xe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;yd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{yd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),xe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),xe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),xe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===gc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=gc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=gc.idle}),xe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),xe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),xe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=je("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),xe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),xe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(Ul.proposal_listener_not_found)),this.isValidConnect(Yn({},s.params));const u=a.expiryTimestamp||es(Ps.wc_sessionPropose.req.ttl),d=Yn({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Zo(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l?.addTrace(vc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Ps.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),xe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Ec(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Yo(r)){await this.deleteProposal(i);const o=Un("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),xe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const m=this.client.proposal.get(f.proposalId),g=Ws(Yn(Yn(Yn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:m.requiredNamespaces,optionalNamespaces:m.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:yr.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Un("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),xe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Ec(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Un("session_approve",s),{})):Yo(r)&&(await this.client.session.delete(n,Tr("USER_DISCONNECTED")),this.events.emit(Un("session_approve",s),{error:r.error}))}),xe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=_0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Tr("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Yn({topic:n},s));try{_0.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw _0.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),xe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),xe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Un("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ec(r)?this.events.emit(Un("session_update",s),{}):Yo(r)&&this.events.emit(Un("session_update",s),{error:r.error})}),xe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,es(cm)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),xe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Un("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ec(r)?this.events.emit(Un("session_extend",s),{}):Yo(r)&&this.events.emit(Un("session_extend",s),{error:r.error})}),xe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),xe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Un("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ec(r)?this.events.emit(Un("session_ping",s),{}):Yo(r)&&this.events.emit(Un("session_ping",s),{error:r.error})},500)}),xe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once($r.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Tr("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),xe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Yn({topic:o},h));const f=this.client.session.get(o),m=await this.getVerifyContext({attestationId:c,hash:Zo(JSON.stringify(Sc("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:m};await this.setPendingSessionRequest(g),u===yr.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),xe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Un("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ec(r)?this.events.emit(Un("session_request",s),{result:r.result}):Yo(r)&&this.events.emit(Un("session_request",s),{error:r.error})}),xe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=_0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Yn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),_0.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),xe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Ec(r)?this.events.emit(Un("session_request",s),{result:r.result}):Yo(r)&&this.events.emit(Un("session_request",s),{error:r.error})}),xe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Zo(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===yr.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:iu,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Ps.wc_sessionAuthenticate.autoReject,appLink:h})}}),xe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),xe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=gc.idle,this.processSessionRequestQueue()},Ve.toMiliseconds(this.requestQueueDelay))}),xe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Un("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Un("session_request",i.request.id),{error:r})})}),xe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===gc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),xe(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=gc.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),xe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Sc("wc_sessionPropose",Ws(Yn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),xe(this,"isValidConnect",async n=>{if(!Bi(n)){const{message:l}=je("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(rs(r)||await this.isValidPairingTopic(r),!g_e(c)){const{message:l}=je("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!rs(s)&&Uc(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!rs(i)&&Uc(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),rs(o)||this.validateSessionProps(o,"sessionProperties"),!rs(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),xe(this,"validateNamespaces",(n,r)=>{const s=m_e(n,"connect()",r);if(s)throw new Error(s.message)}),xe(this,"isValidApprove",async n=>{if(!Bi(n))throw new Error(je("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Rx(s,"approve()");if(l)throw new Error(l.message);const u=EL(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Gr(i,!0)){const{message:d}=je("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(rs(o)||this.validateSessionProps(o,"sessionProperties"),!rs(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),xe(this,"isValidReject",async n=>{if(!Bi(n)){const{message:i}=je("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!w_e(s)){const{message:i}=je("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),xe(this,"isValidSessionSettleRequest",n=>{if(!Bi(n)){const{message:l}=je("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!qH(r)){const{message:l}=je("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=l_e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Rx(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(yd(o)){const{message:l}=je("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),xe(this,"isValidUpdate",async n=>{if(!Bi(n)){const{message:c}=je("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=Rx(s,"update()");if(o)throw new Error(o.message);const a=EL(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),xe(this,"isValidExtend",async n=>{if(!Bi(n)){const{message:s}=je("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),xe(this,"isValidRequest",async n=>{if(!Bi(n)){const{message:c}=je("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!_L(a,i)){const{message:c}=je("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!v_e(s)){const{message:c}=je("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!E_e(a,i,s.method)){const{message:c}=je("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!T_e(o,Bx)){const{message:c}=je("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Bx.min} and ${Bx.max}`);throw new Error(c)}}),xe(this,"isValidRespond",async n=>{var r;if(!Bi(n)){const{message:o}=je("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!b_e(i)){const{message:o}=je("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),xe(this,"isValidPing",async n=>{if(!Bi(n)){const{message:s}=je("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),xe(this,"isValidEmit",async n=>{if(!Bi(n)){const{message:a}=je("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!_L(o,i)){const{message:a}=je("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!__e(s)){const{message:a}=je("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!A_e(o,i,s.name)){const{message:a}=je("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),xe(this,"isValidDisconnect",async n=>{if(!Bi(n)){const{message:s}=je("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),xe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Gr(s,!1))throw new Error("uri is required parameter");if(!Gr(i,!1))throw new Error("domain is required parameter");if(!Gr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Pf(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Pf(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),xe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||fw,validation:"UNKNOWN",origin:o.url||""}};try{if(a===yr.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),xe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=je("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),xe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),xe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),xe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=je("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),xe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==yr.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n?.redirect)==null?void 0:u.universal)!==void 0&&((d=n?.redirect)==null?void 0:d.universal)!==""&&((h=n?.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof globalThis?.Linking<"u"}),xe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n?.redirect)==null?void 0:s.universal:void 0}),xe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=MB(n,"topic")||"",s=decodeURIComponent(MB(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:yr.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),xe(this,"registerLinkModeListeners",async()=>{var n;if(ck()||mh()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=globalThis?.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),xe(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),xe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=n?.data||((r=n?.[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),xe(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=PCe[i];if(i==="sui_signTransaction")return[Qwe(r.transactionBytes)];if(i==="near_signTransaction")return[HB(r)];if(i==="near_signTransactions")return r.map(c=>HB(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[j_e({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return ou(r)?r.map(c=>qB(c)):[qB(r)];if(i==="cosmos_signDirect")return[Zwe(r)];if(typeof r=="string")return[r];const a=r[o.key];if(ou(a))return i==="solana_signAllTransactions"?a.map(c=>Kwe(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on($r.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(c1)?this.client.auth.authKeys.get(c1):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===yr.link_mode?Id:Vi});sk(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Zo(r)})):kI(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Qo.expired,async e=>{const{topic:n,id:r}=JV(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,je("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,je("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(of.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(of.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Gr(e,!1)){const{message:n}=je("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=je("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(yd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=je("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Gr(e,!1)){const{message:n}=je("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=je("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(yd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=je("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=je("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gr(e,!1)){const{message:n}=je("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=je("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!y_e(e)){const{message:n}=je("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=je("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(yd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=je("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class HCe extends Ip{constructor(e,n){super(e,n,TCe,Ek),this.core=e,this.logger=n}}let qCe=class extends Ip{constructor(e,n){super(e,n,SCe,Ek),this.core=e,this.logger=n}};class zCe extends Ip{constructor(e,n){super(e,n,RCe,Ek,r=>r.id),this.core=e,this.logger=n}}class WCe extends Ip{constructor(e,n){super(e,n,DCe,zI,()=>c1),this.core=e,this.logger=n}}class GCe extends Ip{constructor(e,n){super(e,n,MCe,zI),this.core=e,this.logger=n}}class KCe extends Ip{constructor(e,n){super(e,n,BCe,zI,r=>r.id),this.core=e,this.logger=n}}var QCe=Object.defineProperty,YCe=(t,e,n)=>e in t?QCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lx=(t,e,n)=>YCe(t,typeof e!="symbol"?e+"":e,n);class ZCe{constructor(e,n){this.core=e,this.logger=n,Lx(this,"authKeys"),Lx(this,"pairingTopics"),Lx(this,"requests"),this.authKeys=new WCe(this.core,this.logger),this.pairingTopics=new GCe(this.core,this.logger),this.requests=new KCe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var JCe=Object.defineProperty,XCe=(t,e,n)=>e in t?JCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wn=(t,e,n)=>XCe(t,typeof e!="symbol"?e+"":e,n);let eIe=class dq extends i0e{constructor(e){super(e),wn(this,"protocol",cq),wn(this,"version",lq),wn(this,"name",Mx.name),wn(this,"metadata"),wn(this,"core"),wn(this,"logger"),wn(this,"events",new ya.EventEmitter),wn(this,"engine"),wn(this,"session"),wn(this,"proposal"),wn(this,"pendingRequest"),wn(this,"auth"),wn(this,"signConfig"),wn(this,"on",(r,s)=>this.events.on(r,s)),wn(this,"once",(r,s)=>this.events.once(r,s)),wn(this,"off",(r,s)=>this.events.off(r,s)),wn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),wn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),wn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),wn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),wn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),wn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||Mx.name,this.metadata=F0e(e?.metadata),this.signConfig=e?.signConfig;const n=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Ub(cy({level:e?.logger||Mx.logger}));this.core=e?.core||new ICe(e),this.logger=si(n,this.name),this.session=new qCe(this.core,this.logger),this.proposal=new HCe(this.core,this.logger),this.pendingRequest=new zCe(this.core,this.logger),this.engine=new VCe(this),this.auth=new ZCe(this.core,this.logger)}static async init(e){const n=new dq(e);return await n.initialize(),n}get context(){return so(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const JL="error",tIe="wss://relay.walletconnect.org",nIe="wc",rIe="universal_provider",CE=`${nIe}@2:${rIe}:`,hq="https://rpc.walletconnect.org/v1/",fq="generic",sIe=`${hq}bundler`,va={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Ak(t){return t==null||typeof t!="object"&&typeof t!="function"}function pq(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function mq(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const iIe="[object RegExp]",gq="[object String]",yq="[object Number]",wq="[object Boolean]",vq="[object Arguments]",oIe="[object Symbol]",aIe="[object Date]",cIe="[object Map]",lIe="[object Set]",uIe="[object Array]",dIe="[object ArrayBuffer]",hIe="[object Object]",fIe="[object DataView]",pIe="[object Uint8Array]",mIe="[object Uint8ClampedArray]",gIe="[object Uint16Array]",yIe="[object Uint32Array]",wIe="[object Int8Array]",vIe="[object Int16Array]",bIe="[object Int32Array]",_Ie="[object Float32Array]",EIe="[object Float64Array]";function Ck(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function AIe(t,e){return Hm(t,void 0,t,new Map,e)}function Hm(t,e,n,r=new Map,s=void 0){const i=s?.(t,e,n,r);if(i!=null)return i;if(Ak(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hm(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Hm(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Hm(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(Ck(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hm(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),af(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),af(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),af(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,af(o,t,n,r,s),o}if(typeof t=="object"&&CIe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),af(o,t,n,r,s),o}return t}function af(t,e,n=t,r,s){const i=[...Object.keys(e),...pq(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Hm(e[a],a,n,r,s))}}function CIe(t){switch(mq(t)){case vq:case uIe:case dIe:case fIe:case wq:case aIe:case _Ie:case EIe:case wIe:case vIe:case bIe:case cIe:case yq:case hIe:case iIe:case lIe:case gq:case oIe:case pIe:case mIe:case gIe:case yIe:return!0;default:return!1}}function IIe(t,e){return AIe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case yq:case gq:case wq:{const o=new t.constructor(t?.valueOf());return af(o,t),o}case vq:{const o={};return af(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function XL(t){return IIe(t)}function e$(t){return t!==null&&typeof t=="object"&&mq(t)==="[object Arguments]"}function t$(t){return typeof t=="object"&&t!==null}function TIe(){}function SIe(t){return Ck(t)}function xIe(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function PIe(t){if(Ak(t))return t;if(Array.isArray(t)||Ck(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function RIe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=ER(s,o,r,new Map)}return s}function ER(t,e,n,r){if(Ak(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return PIe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...pq(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(e$(a)&&(a={...a}),e$(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=XL(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||t$(c)&&t$(a)?t[o]=ER(c,a,n,r):c==null&&xIe(a)?t[o]=ER({},a,n,r):c==null&&SIe(a)?t[o]=XL(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function NIe(t,...e){return RIe(t,...e,TIe)}var OIe=Object.defineProperty,kIe=Object.defineProperties,DIe=Object.getOwnPropertyDescriptors,n$=Object.getOwnPropertySymbols,MIe=Object.prototype.hasOwnProperty,BIe=Object.prototype.propertyIsEnumerable,r$=(t,e,n)=>e in t?OIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,IE=(t,e)=>{for(var n in e||(e={}))MIe.call(e,n)&&r$(t,n,e[n]);if(n$)for(var n of n$(e))BIe.call(e,n)&&r$(t,n,e[n]);return t},LIe=(t,e)=>kIe(t,DIe(e));function So(t,e,n){var r;const s=Pf(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${hq}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Tp(t){return t.includes(":")?t.split(":")[1]:t}function bq(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function $Ie(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function s$(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n?.chains)==null?void 0:r.length)&&((s=n?.chains)==null?void 0:s.length)>0}))}function TE(t={},e={}){const n=s$(i$(t)),r=s$(i$(e));return NIe(n,r)}function i$(t){var e,n,r,s,i;const o={};if(!Uc(t))return o;for(const[a,c]of Object.entries(t)){const l=HI(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Vm(a);o[f]=LIe(IE(IE({},o[f]),c),{chains:$c(l,(e=o[f])==null?void 0:e.chains),methods:$c(u,(n=o[f])==null?void 0:n.methods),events:$c(d,(r=o[f])==null?void 0:r.events)}),(Uc(h)||Uc(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=IE(IE({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function o$(t){return t.includes(":")?t.split(":")[2]:t}function a$(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=HI(n)?[n]:r.chains?r.chains:bq(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function $x(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const _q={},Mn=t=>_q[t],Ux=(t,e)=>{_q[t]=e};var UIe=Object.defineProperty,c$=Object.getOwnPropertySymbols,FIe=Object.prototype.hasOwnProperty,jIe=Object.prototype.propertyIsEnumerable,l$=(t,e,n)=>e in t?UIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u$=(t,e)=>{for(var n in e||(e={}))FIe.call(e,n)&&l$(t,n,e[n]);if(c$)for(var n of c$(e))jIe.call(e,n)&&l$(t,n,e[n]);return t};const d$="eip155",VIe=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],HIe=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,Fx=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,h$=t=>Object.keys(t).filter(e=>VIe.includes(e)).reduce((e,n)=>(e[n]=t[n],e),{}),qIe=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!Uc(s)&&!Uc(r))return;const o=h$(r);for(const a of n){const c=HIe(a);if(!c)continue;i[Fx(c)]=o;const l=s?.[`${d$}:${c}`];if(l){const u=l?.[`${d$}:${c}:${e}`];i[Fx(c)]=u$(u$({},i[Fx(c)]),h$(u||l))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var zIe=Object.defineProperty,WIe=(t,e,n)=>e in t?zIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lm=(t,e,n)=>WIe(t,typeof e!="symbol"?e+"":e,n);class GIe{constructor(e){lm(this,"name","polkadot"),lm(this,"client"),lm(this,"httpProviders"),lm(this,"events"),lm(this,"namespace"),lm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wa(new tc(r,Mn("disableProviderPing")))}}var KIe=Object.defineProperty,QIe=Object.defineProperties,YIe=Object.getOwnPropertyDescriptors,f$=Object.getOwnPropertySymbols,ZIe=Object.prototype.hasOwnProperty,JIe=Object.prototype.propertyIsEnumerable,AR=(t,e,n)=>e in t?KIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p$=(t,e)=>{for(var n in e||(e={}))ZIe.call(e,n)&&AR(t,n,e[n]);if(f$)for(var n of f$(e))JIe.call(e,n)&&AR(t,n,e[n]);return t},m$=(t,e)=>QIe(t,YIe(e)),um=(t,e,n)=>AR(t,typeof e!="symbol"?e+"":e,n);class XIe{constructor(e){um(this,"name","eip155"),um(this,"client"),um(this,"chainId"),um(this,"namespace"),um(this,"httpProviders"),um(this,"events"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||So(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wa(new tc(r,Mn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Tp(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l?.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,h=u?.[d];if(h)return h;let f;try{f=qIe(l,a,c)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(f)return f;const m=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:m$(p$({},l.sessionProperties||{}),{capabilities:m$(p$({},u||{}),{[d]:m})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return m}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Sc("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${sIe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var eTe=Object.defineProperty,tTe=(t,e,n)=>e in t?eTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dm=(t,e,n)=>tTe(t,typeof e!="symbol"?e+"":e,n);class nTe{constructor(e){dm(this,"name","solana"),dm(this,"client"),dm(this,"httpProviders"),dm(this,"events"),dm(this,"namespace"),dm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wa(new tc(r,Mn("disableProviderPing")))}}var rTe=Object.defineProperty,sTe=(t,e,n)=>e in t?rTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hm=(t,e,n)=>sTe(t,typeof e!="symbol"?e+"":e,n);class iTe{constructor(e){hm(this,"name","cosmos"),hm(this,"client"),hm(this,"httpProviders"),hm(this,"events"),hm(this,"namespace"),hm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wa(new tc(r,Mn("disableProviderPing")))}}var oTe=Object.defineProperty,aTe=(t,e,n)=>e in t?oTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fm=(t,e,n)=>aTe(t,typeof e!="symbol"?e+"":e,n);class cTe{constructor(e){fm(this,"name","algorand"),fm(this,"client"),fm(this,"httpProviders"),fm(this,"events"),fm(this,"namespace"),fm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||So(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new wa(new tc(r,Mn("disableProviderPing")))}}var lTe=Object.defineProperty,uTe=(t,e,n)=>e in t?lTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pm=(t,e,n)=>uTe(t,typeof e!="symbol"?e+"":e,n);class dTe{constructor(e){pm(this,"name","cip34"),pm(this,"client"),pm(this,"httpProviders"),pm(this,"events"),pm(this,"namespace"),pm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Tp(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wa(new tc(r,Mn("disableProviderPing")))}}var hTe=Object.defineProperty,fTe=(t,e,n)=>e in t?hTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mm=(t,e,n)=>fTe(t,typeof e!="symbol"?e+"":e,n);class pTe{constructor(e){mm(this,"name","elrond"),mm(this,"client"),mm(this,"httpProviders"),mm(this,"events"),mm(this,"namespace"),mm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wa(new tc(r,Mn("disableProviderPing")))}}var mTe=Object.defineProperty,gTe=(t,e,n)=>e in t?mTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gm=(t,e,n)=>gTe(t,typeof e!="symbol"?e+"":e,n);class yTe{constructor(e){gm(this,"name","multiversx"),gm(this,"client"),gm(this,"httpProviders"),gm(this,"events"),gm(this,"namespace"),gm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wa(new tc(r,Mn("disableProviderPing")))}}var wTe=Object.defineProperty,vTe=(t,e,n)=>e in t?wTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ym=(t,e,n)=>vTe(t,typeof e!="symbol"?e+"":e,n);class bTe{constructor(e){ym(this,"name","near"),ym(this,"client"),ym(this,"httpProviders"),ym(this,"events"),ym(this,"namespace"),ym(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||So(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace);return typeof r>"u"?void 0:new wa(new tc(r,Mn("disableProviderPing")))}}var _Te=Object.defineProperty,ETe=(t,e,n)=>e in t?_Te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wm=(t,e,n)=>ETe(t,typeof e!="symbol"?e+"":e,n);class ATe{constructor(e){wm(this,"name","tezos"),wm(this,"client"),wm(this,"httpProviders"),wm(this,"events"),wm(this,"namespace"),wm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||So(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace);return typeof r>"u"?void 0:new wa(new tc(r))}}var CTe=Object.defineProperty,ITe=(t,e,n)=>e in t?CTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vm=(t,e,n)=>ITe(t,typeof e!="symbol"?e+"":e,n);class TTe{constructor(e){vm(this,"name",fq),vm(this,"client"),vm(this,"httpProviders"),vm(this,"events"),vm(this,"namespace"),vm(this,"chainId"),this.namespace=e.namespace,this.events=Mn("events"),this.client=Mn("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(va.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Pf(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Pf(s);r[i.reference]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||So(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wa(new tc(r,Mn("disableProviderPing")))}}var STe=Object.defineProperty,xTe=Object.defineProperties,PTe=Object.getOwnPropertyDescriptors,g$=Object.getOwnPropertySymbols,RTe=Object.prototype.hasOwnProperty,NTe=Object.prototype.propertyIsEnumerable,CR=(t,e,n)=>e in t?STe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SE=(t,e)=>{for(var n in e||(e={}))RTe.call(e,n)&&CR(t,n,e[n]);if(g$)for(var n of g$(e))NTe.call(e,n)&&CR(t,n,e[n]);return t},jx=(t,e)=>xTe(t,PTe(e)),zo=(t,e,n)=>CR(t,typeof e!="symbol"?e+"":e,n);let OTe=class Eq{constructor(e){zo(this,"client"),zo(this,"namespaces"),zo(this,"optionalNamespaces"),zo(this,"sessionProperties"),zo(this,"scopedProperties"),zo(this,"events",new qO),zo(this,"rpcProviders",{}),zo(this,"session"),zo(this,"providerOpts"),zo(this,"logger"),zo(this,"uri"),zo(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Ub(cy({level:e?.logger||JL})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new Eq(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:SE({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,pv(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Tr("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=a$(this.session.namespaces);this.namespaces=TE(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=a$(s.namespaces);return this.namespaces=TE(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!ou(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn("Failed to cleanup pending pairings",n)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await eIe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||JL,relayUrl:this.providerOpts.relayUrl||tIe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Vm(n)))];Ux("client",this.client),Ux("events",this.events),Ux("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=$Ie(n,this.session);if(r?.length===0)return;const s=bq(r),i=TE(this.namespaces,this.optionalNamespaces),o=jx(SE({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new XIe({namespace:o});break;case"algorand":this.rpcProviders[n]=new cTe({namespace:o});break;case"solana":this.rpcProviders[n]=new nTe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new iTe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new GIe({namespace:o});break;case"cip34":this.rpcProviders[n]=new dTe({namespace:o});break;case"elrond":this.rpcProviders[n]=new pTe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new yTe({namespace:o});break;case"near":this.rpcProviders[n]=new bTe({namespace:o});break;case"tezos":this.rpcProviders[n]=new ATe({namespace:o});break;default:this.rpcProviders[n]=new TTe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&ou(o)&&this.events.emit("accountsChanged",o.map(o$))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Vm(o),l=$x(o)!==$x(a)?`${c}:${$x(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=jx(SE({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",jx(SE({},Tr("USER_DISCONNECTED")),{data:e.topic})))}),this.on(va.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[fq]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=TE(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Vm(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Vm(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s);const i=this.getProvider(r).getDefaultChain();n?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e})):this.getProvider(r).setDefaultChain(s),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(o$);if(!ou(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${CE}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${CE}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${CE}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(CE)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var y$={};const kTe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof y$<"u"?y$.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},IR={filterOutDuplicatesByRDNS(t){const e=be.state.enableEIP6963?Ue.state.connectors:[],n=Te.getRecentWallets(),r=e.map(a=>a.info?.rdns).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ot.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&i.includes(String(a.rdns))||!a?.rdns&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Ue.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Te.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ue.state,{featuredWalletIds:n}=be.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n?.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const n=t?.connectMethodsOrder||be.state.features?.connectMethodsOrder,r=e||Ue.state.connectors;if(n)return n;const{injected:s,announced:i}=l1.getConnectorsByType(r,vt.state.recommended,vt.state.featured),o=s.filter(l1.showConnector),a=i.filter(l1.showConnector);return o.length||a.length?["wallet","email","social"]:kTe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&vt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&vt.state.excludedWallets.some(r=>ks.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},l1={getConnectorsByType(t,e,n){const{customWallets:r}=be.state,s=Te.getRecentWallets(),i=IR.filterOutDuplicateWallets(e),o=IR.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){const e=t.info?.rdns,n=!!e&&vt.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),r=!!t.name&&vt.state.excludedWallets.some(s=>ks.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ot.isMobile()||ot.isMobile()&&!e&&!qe.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(K.state.chains.values()).some(n=>Ue.getConnectorId(n.namespace)===le.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=be.state.features?.connectorTypeOrder??[]}){const d=[{type:"walletConnect",isEnabled:be.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(g=>g.isEnabled),h=new Set(d.map(g=>g.type)),f=c.filter(g=>h.has(g)).map(g=>({type:g,isEnabled:!0})),m=d.filter(({type:g})=>!f.some(({type:v})=>v===g));return Array.from(new Set([...f,...m].map(({type:g})=>g)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!ot.isMobile())return{accounts:[],chainId:void 0};if(t.id===le.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,n]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(r=>Number(r))]);return{accounts:e,chainId:n}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const u1=globalThis,Ik=u1.ShadowRoot&&(u1.ShadyCSS===void 0||u1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Tk=Symbol(),w$=new WeakMap;let Aq=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Tk)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Ik&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=w$.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&w$.set(n,e))}return e}toString(){return this.cssText}};const Ko=t=>new Aq(typeof t=="string"?t:t+"",void 0,Tk),Td=(t,...e)=>{const n=t.length===1?t[0]:e.reduce(((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1]),t[0]);return new Aq(n,t,Tk)},DTe=(t,e)=>{if(Ik)t.adoptedStyleSheets=e.map((n=>n instanceof CSSStyleSheet?n:n.styleSheet));else for(const n of e){const r=document.createElement("style"),s=u1.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},v$=Ik?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Ko(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:MTe,defineProperty:BTe,getOwnPropertyDescriptor:LTe,getOwnPropertyNames:$Te,getOwnPropertySymbols:UTe,getPrototypeOf:FTe}=Object,WI=globalThis,b$=WI.trustedTypes,jTe=b$?b$.emptyScript:"",VTe=WI.reactiveElementPolyfillSupport,mw=(t,e)=>t,TR={toAttribute(t,e){switch(e){case Boolean:t=t?jTe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Cq=(t,e)=>!MTe(t,e),_$={attribute:!0,type:String,converter:TR,reflect:!1,useDefault:!1,hasChanged:Cq};Symbol.metadata??=Symbol("metadata"),WI.litPropertyMetadata??=new WeakMap;let Pm=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=_$){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&BTe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=LTe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s?.call(this);i?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??_$}static _$Ei(){if(this.hasOwnProperty(mw("elementProperties")))return;const e=FTe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(mw("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(mw("properties"))){const n=this.properties,r=[...$Te(n),...UTe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(v$(s))}else e!==void 0&&n.push(v$(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return DTe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const i=(r.converter?.toAttribute!==void 0?r.converter:TR).toAttribute(n,r.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,n){const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const i=r.getPropertyOptions(s),o=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:TR;this._$Em=s;const a=o.fromAttribute(n,i.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,n,r){if(e!==void 0){const s=this.constructor,i=this[e];if(r??=s.getPropertyOptions(e),!((r.hasChanged??Cq)(i,n)||r.useDefault&&r.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,i]of r){const{wrapped:o}=i,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,i,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach((r=>r.hostUpdate?.())),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach((n=>n.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Pm.elementStyles=[],Pm.shadowRootOptions={mode:"open"},Pm[mw("elementProperties")]=new Map,Pm[mw("finalized")]=new Map,VTe?.({ReactiveElement:Pm}),(WI.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Sk=globalThis,OA=Sk.trustedTypes,E$=OA?OA.createPolicy("lit-html",{createHTML:t=>t}):void 0,Iq="$lit$",Sd=`lit$${Math.random().toFixed(9).slice(2)}$`,Tq="?"+Sd,HTe=`<${Tq}>`,Yf=document,Dv=()=>Yf.createComment(""),Mv=t=>t===null||typeof t!="object"&&typeof t!="function",xk=Array.isArray,qTe=t=>xk(t)||typeof t?.[Symbol.iterator]=="function",Vx=`[ 	
\f\r]`,S0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,A$=/-->/g,C$=/>/g,Yh=RegExp(`>|${Vx}(?:([^\\s"'>=/]+)(${Vx}*=${Vx}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),I$=/'/g,T$=/"/g,Sq=/^(?:script|style|textarea|title)$/i,xq=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),hYe=xq(1),fYe=xq(2),Tg=Symbol.for("lit-noChange"),bs=Symbol.for("lit-nothing"),S$=new WeakMap,mf=Yf.createTreeWalker(Yf,129);function Pq(t,e){if(!xk(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return E$!==void 0?E$.createHTML(e):e}const zTe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=S0;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===S0?u[1]==="!--"?o=A$:u[1]!==void 0?o=C$:u[2]!==void 0?(Sq.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Yh):u[3]!==void 0&&(o=Yh):o===Yh?u[0]===">"?(o=s??S0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Yh:u[3]==='"'?T$:I$):o===T$||o===I$?o=Yh:o===A$||o===C$?o=S0:(o=Yh,s=void 0);const f=o===Yh&&t[a+1].startsWith("/>")?" ":"";i+=o===S0?c+HTe:d>=0?(r.push(l),c.slice(0,d)+Iq+c.slice(d)+Sd+f):c+Sd+(d===-2?a:f)}return[Pq(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let SR=class Rq{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=zTe(e,n);if(this.el=Rq.createElement(l,r),mf.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=mf.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(Iq)){const h=u[o++],f=s.getAttribute(d).split(Sd),m=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:m[2],strings:f,ctor:m[1]==="."?GTe:m[1]==="?"?KTe:m[1]==="@"?QTe:GI}),s.removeAttribute(d)}else d.startsWith(Sd)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(Sq.test(s.tagName)){const d=s.textContent.split(Sd),h=d.length-1;if(h>0){s.textContent=OA?OA.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Dv()),mf.nextNode(),c.push({type:2,index:++i});s.append(d[h],Dv())}}}else if(s.nodeType===8)if(s.data===Tq)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Sd,d+1))!==-1;)c.push({type:7,index:i}),d+=Sd.length-1}i++}}static createElement(e,n){const r=Yf.createElement("template");return r.innerHTML=e,r}};function Sg(t,e,n=t,r){if(e===Tg)return e;let s=r!==void 0?n._$Co?.[r]:n._$Cl;const i=Mv(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??=[])[r]=s:n._$Cl=s),s!==void 0&&(e=Sg(t,s._$AS(t,e.values),s,r)),e}let WTe=class{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=(e?.creationScope??Yf).importNode(n,!0);mf.currentNode=s;let i=mf.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Qb(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new YTe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==c?.index&&(i=mf.nextNode(),o++)}return mf.currentNode=Yf,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}};class Qb{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=bs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Sg(this,e,n),Mv(e)?e===bs||e==null||e===""?(this._$AH!==bs&&this._$AR(),this._$AH=bs):e!==this._$AH&&e!==Tg&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):qTe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==bs&&Mv(this._$AH)?this._$AA.nextSibling.data=e:this.T(Yf.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=SR.createElement(Pq(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(n);else{const i=new WTe(s,this),o=i.u(this.options);i.p(n),this.T(o),this._$AH=i}}_$AC(e){let n=S$.get(e.strings);return n===void 0&&S$.set(e.strings,n=new SR(e)),n}k(e){xk(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Qb(this.O(Dv()),this.O(Dv()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}let GI=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=bs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=bs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Sg(this,e,n,0),o=!Mv(e)||e!==this._$AH&&e!==Tg,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Sg(this,a[r+c],n,c),l===Tg&&(l=this._$AH[c]),o||=!Mv(l)||l!==this._$AH[c],l===bs?e=bs:e!==bs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===bs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}};class GTe extends GI{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===bs?void 0:e}}class KTe extends GI{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==bs)}}let QTe=class extends GI{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Sg(this,e,n,0)??bs)===Tg)return;const r=this._$AH,s=e===bs&&r!==bs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==bs&&(r===bs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},YTe=class{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Sg(this,e)}};const ZTe=Sk.litHtmlPolyfillSupport;ZTe?.(SR,Qb),(Sk.litHtmlVersions??=[]).push("3.3.1");const JTe=(t,e,n)=>{const r=n?.renderBefore??e;let s=r._$litPart$;if(s===void 0){const i=n?.renderBefore??null;r._$litPart$=s=new Qb(e.insertBefore(Dv(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pk=globalThis;class d1 extends Pm{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=JTe(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Tg}}d1._$litElement$=!0,d1.finalized=!0,Pk.litElementHydrateSupport?.({LitElement:d1});const XTe=Pk.litElementPolyfillSupport;XTe?.({LitElement:d1});(Pk.litElementVersions??=[]).push("4.2.1");let gw,Vd,Hd;function wYe(t,e){gw=document.createElement("style"),Vd=document.createElement("style"),Hd=document.createElement("style"),gw.textContent=Xm(t).core.cssText,Vd.textContent=Xm(t).dark.cssText,Hd.textContent=Xm(t).light.cssText,document.head.appendChild(gw),document.head.appendChild(Vd),document.head.appendChild(Hd),Nq(e)}function Nq(t){Vd&&Hd&&(t==="light"?(Vd.removeAttribute("media"),Hd.media="enabled"):(Hd.removeAttribute("media"),Vd.media="enabled"))}function eSe(t){gw&&Vd&&Hd&&(gw.textContent=Xm(t).core.cssText,Vd.textContent=Xm(t).dark.cssText,Hd.textContent=Xm(t).light.cssText)}function Xm(t){return{core:Td`
      ${t?.["--w3m-font-family"]?Td``:Td`
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
          `}
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Ko(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Ko(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Ko(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${Ko(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${Ko(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Td`
      :root {
        --w3m-color-mix: ${Ko(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${Ko(Zl(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Ko(Zl(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Td`
      :root {
        --w3m-color-mix: ${Ko(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${Ko(Zl(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Ko(Zl(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const vYe=Td`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,bYe=Td`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,_Ye=Td`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,h1={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([h1.getAddresses(t),h1.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const n=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:h1.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[mo.NetworkImageIds[e.id]]}]})}},bm={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},xR=bj({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),PR=bj({id:97,name:"BNB Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0});function Yb(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const x$=Yb({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),P$=Yb({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Yb({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Yb({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Yb({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const tSe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},au={getMethodsByChainNamespace(t){return tSe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case x$.caipNetworkId:u.chains.push(x$.deprecatedCaipNetworkId);break;case P$.caipNetworkId:u.chains.push(P$.deprecatedCaipNetworkId);break}return u?.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{const e=await iw.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=au.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("accountsChanged",a=>{try{const c=t.session?.namespaces?.[e]?.accounts||[],l=t.rpcProviders?.[e]?.getDefaultChain(),u=a.map(d=>{const h=c.find(g=>g.includes(`${e}:${l}:${d}`));if(!h)return;const{chainId:f,chainNamespace:m}=qi.parseCaipAddress(h);return{address:d,chainId:f,chainNamespace:m}}).filter(d=>d!==void 0);u.length>0&&s(u)}catch(c){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,c)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const n=new Set,r=t?.session?.namespaces?.[e]?.accounts?.map(s=>qi.parseCaipAddress(s)).filter(({address:s})=>n.has(s.toLowerCase())?!1:(n.add(s.toLowerCase()),!0));return r&&r.length>0?r:[]}};class nSe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case le.CHAIN.EVM:await this.syncEVMConnections(e);break;case le.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case le.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===le.CONNECTOR_ID.WALLET_CONNECT){const c=au.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>u.chainNamespace===this.namespace&&u.id.toString()===c[0]?.chainId?.toString());c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await l1.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==le.CONNECTOR_ID.AUTH&&a.id!==le.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===le.CONNECTOR_ID.WALLET_CONNECT){const c=au.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n?.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===le.CONNECTOR_ID.WALLET_CONNECT){const h=au.getWalletConnectAccounts(r,this.namespace);h.length>0&&i({connectorId:a.id,accounts:h.map(f=>({address:f.address})),caipNetwork:n});return}const c=await a.connect();let u=(await a.getAccountAddresses())?.map(h=>ot.createAccount(le.CHAIN.BITCOIN,h.address,h.purpose||"payment",h.publicKey,h.path));if(u&&u.length>1&&(u=[{namespace:le.CHAIN.BITCOIN,publicKey:u[bm.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:u[bm.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:u[bm.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:le.CHAIN.BITCOIN,publicKey:u[bm.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:u[bm.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:u[bm.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(a.chains.find(h=>h.id===n?.id)||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(h=>({address:h.address,type:h.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>ks.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>ks.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>ks.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>ks.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>ks.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const V0={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class Rk{constructor({provider:e,namespace:n}){this.id=le.CONNECTOR_ID.WALLET_CONNECT,this.name=mo.ConnectorNamesMap[le.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=mo.ConnectorImageIds[le.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=K.getCaipNetworks.bind(K),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=be.state.universalProviderConfigOverride,s=au.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return ea.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:rSe})}}const rSe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],sSe=[le.CONNECTOR_ID.AUTH,le.CONNECTOR_ID.WALLET_CONNECT];class Oq{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>K.getCaipNetworks(n),this.getConnectorId=n=>Ue.getConnectorId(n),e&&this.construct(e),e?.namespace&&(this.connectionManager=new nSe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===n?.toString());e&&r&&this.addConnection({connectorId:le.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:le.CONNECTOR_ID.AUTH,type:"AUTH",name:le.CONNECTOR_NAMES.AUTH,provider:e,imageId:mo.ConnectorImageIds[le.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!ks.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){ut.setStatus(e,n)}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=To(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Rk);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ot.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===s?.toString()),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ot.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){if(e.length>0){const{address:s}=ot.getAccount(e[0]),i=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});s&&ks.isLowerCaseMatch(this.getConnectorId(le.CHAIN.EVM),n)&&this.emit("accountChanged",{address:s,chainId:i?.caipNetwork?.id,connector:i?.connector}),this.addConnection({connectorId:n,accounts:e.map(o=>{const{address:a}=ot.getAccount(o);return{address:a}}),caipNetwork:i?.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),ks.isLowerCaseMatch(this.getConnectorId(le.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){const r=typeof e=="string"&&e.startsWith("0x")?h1.hexStringToNumber(e).toString():e.toString(),s=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),ks.isLowerCaseMatch(this.getConnectorId(le.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(sSe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[n]=e.accounts;this.emit("accountChanged",{address:n?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class iSe extends Oq{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new Rk({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const r=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,i]=s.split(":");return i}).filter((s,i,o)=>o.indexOf(s)===i)||[];return Promise.resolve({accounts:r.map(s=>ot.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&En.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(ut.state.balanceLoading&&e.chainId===K.state.activeCaipNetwork?.id)return{balance:ut.state.balance||"0.00",symbol:ut.state.balanceSymbol||""};const s=(await ut.fetchTokenBalance()).find(i=>i.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&i.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return K.state.activeCaipNetwork?.chainNamespace===le.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:hy.encode(new TextEncoder().encode(r)),pubkey:s}},K.state.activeCaipNetwork?.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},K.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===le.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:gg(n.id)}]})}catch(s){if(s.code===V0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===V0.ERROR_INVALID_CHAIN_ID||s.code===V0.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===V0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:gg(n.id),rpcUrls:[n?.rpcUrls.chainDefault?.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(r=>r.type==="WALLET_CONNECT")?.provider}}const oSe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],xE={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?En.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?En.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?En.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>En.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>En.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>En.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?En.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},aSe={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=xE[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=xE[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return xE[t].processApi(e)},processFallbackFeature(t,e){return xE[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await vt.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?En.DEFAULT_REMOTE_FEATURES:En.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of oSe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),En.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;wr.open({debugMessage:Ir.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class cSe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{if(n){const s=K.getCaipNetworks(n)?.find(a=>a.id===r);if(s)return s;const i=K.getNetworkData(n)?.caipNetwork;return i||K.getRequestedCaipNetworks(n).filter(a=>a.chainNamespace===n)?.[0]}return K.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>K.getCaipNetworks(n),this.getActiveChainNamespace=()=>K.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{K.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>K.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>K.state.activeChain===n||!n?K.state.activeCaipAddress:K.state.chains.get(n)?.accountState?.caipAddress,this.setClientId=n=>{At.setClientId(n)},this.getProvider=n=>tr.getProvider(n),this.getProviderType=n=>tr.getProviderId(n),this.getPreferredAccountType=n=>To(n),this.setCaipAddress=(n,r)=>{ut.setCaipAddress(n,r)},this.setBalance=(n,r,s)=>{ut.setBalance(n,r,s)},this.setProfileName=(n,r)=>{ut.setProfileName(n,r)},this.setProfileImage=(n,r)=>{ut.setProfileImage(n,r)},this.setUser=(n,r)=>{ut.setUser(n,r)},this.resetAccount=n=>{ut.resetAccount(n)},this.setCaipNetwork=n=>{K.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{K.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{ut.setStatus(n,r),Ue.isConnected()?Te.setConnectionStatus("connected"):Te.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>K.state.chains.get(n)?.accountState?.address,this.setConnectors=n=>{const r=[...Ue.state.allConnectors,...n];Ue.setConnectors(r)},this.setConnections=(n,r)=>{Te.setConnections(n,r),qe.setConnections(n,r)},this.fetchIdentity=n=>At.fetchIdentity(n),this.getReownName=n=>iw.getNamesForAddress(n),this.getConnectors=()=>Ue.getConnectors(),this.getConnectorImage=n=>j9.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?K1.getConnectionsData(n).connections:(wr.open(le.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?K1.getConnectionsData(n).recentConnections:(wr.open(le.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){wr.open(le.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await qe.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){wr.open(le.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}Te.deleteAddressFromConnection(n),qe.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=tr.getProviderId(r),i=n?{...n,type:s}:void 0;ut.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!K.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{ut.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{ut.removeAddressLabel(n,r)},this.getAddress=n=>K.state.activeChain===n||!n?ut.state.address:K.state.chains.get(n)?.accountState?.address,this.setApprovedCaipNetworksData=n=>K.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{K.resetNetwork(n)},this.addConnector=n=>{Ue.addConnector(n)},this.resetWcConnection=()=>{qe.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{ut.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{ut.setSmartAccountDeployed(n,r)},this.setPreferredAccountType=(n,r)=>{K.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{be.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e?.map(i=>i.namespace).filter(i=>!!i);if(r?.length)return[...new Set(r)];const s=n?.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),be.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await aSe.fetchRemoteFeatures(e),be.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&wP.setOnrampProviders(this.remoteFeatures.onramp),(be.state.remoteFeatures?.email||Array.isArray(be.state.remoteFeatures?.socials)&&be.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),be.state.features?.reownAuthentication||be.state.remoteFeatures?.reownAuthentication){const{ReownAuthentication:n}=await un(async()=>{const{ReownAuthentication:s}=await import("./features--0clmnVL.js");return{ReownAuthentication:s}},[]),r=be.state.siwx;r instanceof n||(r&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),be.setSIWX(new n))}}async checkAllowedOrigins(){try{const e=await vt.fetchAllowedOrigins();if(!e||!ot.isClient()){wr.open(Ir.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;au.isOriginAllowed(n,e,V0.DEFAULT_ALLOWED_ANCESTORS)||wr.open(Ir.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){wr.open(Ir.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":wr.open(Ir.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;wr.open({displayMessage:Ir.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Ir.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}default:wr.open(Ir.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){const{...n}=e;delete n.adapters,delete n.universalProvider,xn.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(r=>r.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Li.setThemeMode(e.themeMode),e.themeVariables&&Li.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");K.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&K.setActiveCaipNetwork(n)}initializeConnectionController(e){qe.initialize(e.adapters??[]),qe.setWcBasic(e.basic??!1)}initializeConnectorController(){Ue.initialize(this.chainNamespaces)}initializeProjectSettings(e){be.setProjectId(e.projectId),be.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){be.setDebug(e.debug!==!1),be.setEnableWalletConnect(e.enableWalletConnect!==!1),be.setEnableWalletGuide(e.enableWalletGuide!==!1),be.setEnableWallets(e.enableWallets!==!1),be.setEIP6963Enabled(e.enableEIP6963!==!1),be.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),be.setEnableReconnect(e.enableReconnect!==!1),be.setEnableAuthLogger(e.enableAuthLogger!==!1),be.setCustomRpcUrls(e.customRpcUrls),be.setEnableEmbedded(e.enableEmbedded),be.setAllWallets(e.allWallets),be.setIncludeWalletIds(e.includeWalletIds),be.setExcludeWalletIds(e.excludeWalletIds),be.setFeaturedWalletIds(e.featuredWalletIds),be.setTokens(e.tokens),be.setTermsConditionsUrl(e.termsConditionsUrl),be.setPrivacyPolicyUrl(e.privacyPolicyUrl),be.setCustomWallets(e.customWallets),be.setFeatures(e.features),be.setAllowUnsupportedChain(e.allowUnsupportedChain),be.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),be.setPreferUniversalLinks(e.experimental_preferUniversalLinks),be.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),be.setMetadata(e.metadata),be.setDisableAppend(e.disableAppend),be.setEnableEmbedded(e.enableEmbedded),be.setSIWX(e.siwx),!e.projectId){wr.open(Ir.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===le.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");be.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return ot.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Pc.getUnsupportedNetwork(`${n}:${e}`);K.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Pc.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Pc.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Pc.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>s.id===e.defaultNetwork?.id);return n?Pc.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e);return(K.state.chains.get(e)?.accountState?.caipAddress||!be.state.enableReconnect)&&s?.disconnect&&(r=await s.disconnect({id:n})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=K.state.activeChain,n=this.getAdapter(e),r=this.getCaipNetwork(e)?.id,s=qe.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),Te.setConnectedNamespaces([...K.state.chains.keys()]),await this.syncWalletConnectAccount(),await ea.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:r,type:s,provider:i,chain:o,caipNetwork:a,socialUri:c})=>{const l=K.state.activeChain,u=o||l,d=this.getAdapter(u);if(o&&o!==l&&!a){const m=this.getCaipNetworks().find(g=>g.chainNamespace===o);m&&this.setCaipNetwork(m)}if(!u)throw new Error("connectExternal: namespace not found");if(!d)throw new Error("connectExternal: adapter not found");const h=this.getCaipNetwork(u),f=await d.connect({id:e,address:n,info:r,type:s,provider:i,socialUri:c,chainId:a?.id||h?.id,rpcUrl:a?.rpcUrls?.default?.http?.[0]||h?.rpcUrls?.default?.http?.[0]});if(f)return Te.addConnectedNamespace(u),this.syncProvider({...f,chainNamespace:u}),this.setStatus("connected",u),this.syncConnectedWalletInfo(u),Te.removeDisconnectedConnectorId(e,u),{address:f.address}},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{const i=K.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:n,type:r,provider:s,chainId:this.getCaipNetwork()?.id}),Te.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||K.state.activeChain,o=Ue.getConnectorId(i),a=n===le.CONNECTOR_ID.AUTH||o===le.CONNECTOR_ID.AUTH,c=n===le.CONNECTOR_ID.WALLET_CONNECT||o===le.CONNECTOR_ID.WALLET_CONNECT;try{const l=Array.from(K.state.chains.keys());let u=r?[r]:l;(c||a)&&(u=l);const d=u.map(async m=>{const g=Ue.getConnectorId(m),y=await this.disconnectNamespace(m,n||g);y&&(a&&Te.deleteConnectedSocialProvider(),y.connections.forEach(v=>{Te.addDisconnectedConnectorId(v.connectorId,m)})),s&&this.onDisconnectNamespace({chainNamespace:m,closeModal:!1})}),h=await Promise.allSettled(d);Ln.resetSend(),qe.resetWcConnection(),ea.getSIWX()?.signOutOnDisconnect&&await ea.clearSessions(),Ue.setFilterByNamespace(void 0),qe.syncStorageConnections();const f=h.filter(m=>m.status==="rejected");if(f.length>0)throw new Error(f.map(m=>m.reason.message).join(", "));xn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(l){throw new Error(`Failed to disconnect chains: ${l.message}`)}},checkInstalled:e=>e?e.some(n=>!!window.ethereum?.[String(n)]):!!window.ethereum,signMessage:async e=>{const n=K.state.activeChain,r=this.getAdapter(K.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");return(await r?.signMessage({message:e,address:ut.state.address,provider:tr.getProvider(n)}))?.signature||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(En.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=tr.getProvider(n);return(await r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===le.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=tr.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await r?.estimateGas({...e,provider:s,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=K.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:ut.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),ut.state.profileImage||!1},getEnsAddress:async e=>await au.resolveReownName(e),writeContract:async e=>{const n=K.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=tr.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await r?.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},parseUnits:(e,n)=>{const r=this.getAdapter(K.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return r?.parseUnits({value:e,decimals:n})??0n},formatUnits:(e,n)=>{const r=this.getAdapter(K.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return r?.formatUnits({value:e,decimals:n})??"0"},getCapabilities:async e=>{const n=this.getAdapter(K.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await n?.getCapabilities(e)},grantPermissions:async e=>{const n=this.getAdapter(K.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await n?.grantPermissions(e)},revokePermissions:async e=>{const n=this.getAdapter(K.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n?.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(K.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await n?.walletGetAssets(e)??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!ut.state.address||this.updateNativeBalance(ut.state.address,n?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},qe.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(tr.getProviderId(K.state.activeChain)===pr.CONNECTOR_TYPE_WALLET_CONNECT){const n=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(n)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=tr.getProvider(n),i=tr.getProviderId(n);if(e.chainNamespace===K.state.activeChain)await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:s,providerType:i});else if(this.setCaipNetwork(e),i===pr.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=qi.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{const s=e?.find(i=>i.namespace===r);return s?(s.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new iSe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Te.getConnectionStatus();be.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Te.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id.toString()===i.toString()||l.caipNetworkId.toString()===i.toString()),a=K.state.activeChain===e,c=K.state.chains.get(e)?.accountState?.address;if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(qe.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=ut.state.address,i=K.state.activeCaipNetwork;!s||!i?.id||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{const a=K.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):a&&K.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:K.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),Te.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>qe.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();xn.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:ot.isMobile()?"mobile":"qrcode",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0}})}async syncNamespaceConnection(e){try{e===le.CHAIN.EVM&&ot.isSafeApp()&&Ue.setConnectorId(le.CONNECTOR_ID.SAFE,e);const n=Ue.getConnectorId(e);switch(this.setStatus("connecting",e),n){case le.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case le.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};K.resetAccount(n),K.resetNetwork(n),Te.removeConnectedNamespace(n);const s=Array.from(K.state.chains.keys());(n?[n]:s).forEach(o=>Te.addDisconnectedConnectorId(Ue.getConnectorId(o)||"",o)),Ue.removeConnectorId(n),tr.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),r!==!1&&vn.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getCaipAddress(e),r=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!n,caipNetwork:r,getConnectorStorageInfo(s){const o=Te.getConnections()[e]??[];return{hasDisconnected:Te.isConnectorDisconnected(s,e),hasConnected:o.some(a=>ks.isLowerCaseMatch(a.connectorId,s))}}})}))}async syncAdapterConnection(e){const n=this.getAdapter(e),r=Ue.getConnectorId(e),s=this.getCaipNetwork(e),o=Ue.getConnectors(e).find(a=>a.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");const a=await n?.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),xn.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),n=this.chainNamespaces.map(async r=>{const s=this.getAdapter(r);if(!s)return;const i=this.universalProvider?.session?.namespaces?.[r]?.accounts||[],o=K.state.activeCaipNetwork?.id,a=i.find(c=>{const{chainId:l}=qi.parseCaipAddress(c);return l===o?.toString()})||i[0];if(a){const c=qi.validateCaipAddress(a),{chainId:l,address:u}=qi.parseCaipAddress(c);if(tr.setProviderId(r,pr.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&K.state.activeCaipNetwork&&s.namespace!==le.CHAIN.EVM){const d=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:K.state.activeCaipNetwork});tr.setProvider(r,d)}else tr.setProvider(r,this.universalProvider);Ue.setConnectorId(le.CONNECTOR_ID.WALLET_CONNECT,r),Te.addConnectedNamespace(r),await this.syncAccount({address:u,chainId:l,chainNamespace:r})}else e.includes(r)&&this.setStatus("disconnected",r);this.syncConnectedWalletInfo(r),await K.setApprovedCaipNetworksData(r)});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){tr.setProviderId(s,e),tr.setProvider(s,n),Ue.setConnectorId(r,s)}async syncAccount(e){const n=e.chainNamespace===K.state.activeChain,r=K.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Te.getActiveNetworkProps(),c=i||a,l=K.state.activeCaipNetwork?.name===le.UNSUPPORTED_NETWORK_NAME,u=K.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let d=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),h=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!u&&!d&&!h){const m=this.getApprovedCaipNetworkIds()||[],g=m.find(v=>qi.parseCaipNetworkId(v)?.chainId===c.toString()),y=m.find(v=>qi.parseCaipNetworkId(v)?.chainNamespace===o);d=this.getCaipNetworks().find(v=>v.caipNetworkId===g),h=this.getCaipNetworks().find(v=>v.caipNetworkId===y||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===y)}const f=d||h;f?.chainNamespace===K.state.activeChain?be.state.enableNetworkSwitch&&!be.state.allowUnsupportedChain&&K.state.activeCaipNetwork?.name===le.UNSUPPORTED_NETWORK_NAME?K.showUnsupportedChainUI():this.setCaipNetwork(f):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),ks.isLowerCaseMatch(s,ut.state.address)||this.syncAccountInfo(s,f?.id,o),n?await this.syncBalance({address:s,chainId:f?.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r?.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||s?.split(":")[1];if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){const n=Ue.getConnectorId(e),r=tr.getProviderId(e);if(r===pr.CONNECTOR_TYPE_ANNOUNCED||r===pr.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>{const a=o.id===n,c=o.info?.rdns===n,l=o.connectors?.some(u=>u.id===n||u.info?.rdns===n);return a||c||!!l});if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===pr.CONNECTOR_TYPE_WALLET_CONNECT){const s=tr.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(n&&(n===le.CONNECTOR_ID.COINBASE_SDK||n===le.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(c=>c.id===n),i=s?.name||"Coinbase Wallet",o=s?.imageUrl||this.getConnectorImage(s),a=s?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!Hw.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>r.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=K.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){const e=cme.createLogger((r,...s)=>{r&&this.handleAlertError(r),console.error(...s)}),n={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};be.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await OTe.init(n),be.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{au.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{qe.setUri(n)},onConnect:n=>{const{address:r}=ot.getAccount(n[0]);qe.finalizeWcConnection(r)},onDisconnect:()=>{K.state.noAdapters&&this.resetAccount(e),qe.resetWcConnection()},onChainChanged:n=>{const r=K.state.activeChain,s=r&&Ue.state.activeConnectorIds[r]===le.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(K.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=K.state.activeChain,s=r&&Ue.state.activeConnectorIds[r]===le.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(K.state.noAdapters||s)){const i=n?.[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&ot.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){xn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Ir.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Ir.ALERT_ERRORS[o];a&&(wr.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e?.uri&&qe.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return vn.open({...e,data:{swap:e.arguments}})}return vn.open(e)}async close(){await this.injectModalUi(),vn.close()}setLoading(e,n){vn.setLoading(e,n)}async disconnect(e){await qe.disconnect({namespace:e})}getSIWX(){return be.state.siwx}getError(){return""}getChainId(){return K.state.activeCaipNetwork?.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){wr.open(Ir.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await K.switchActiveNetwork(n)}getWalletProvider(){return K.state.activeChain?tr.state.providers[K.state.activeChain]:null}getWalletProviderType(){return tr.getProviderId(K.state.activeChain)}subscribeProviders(e){return tr.subscribeProviders(e)}getThemeMode(){return Li.state.themeMode}getThemeVariables(){return Li.state.themeVariables}setThemeMode(e){Li.setThemeMode(e),Nq(Li.state.themeMode)}setTermsConditionsUrl(e){be.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){be.setPrivacyPolicyUrl(e)}setThemeVariables(e){Li.setThemeVariables(e),eSe(Li.state.themeVariables)}subscribeTheme(e){return Li.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?qe.subscribe(e):(wr.open(le.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?K.state.chains.get(e)?.accountState?.connectedWalletInfo:ut.state.connectedWalletInfo}getAccount(e){const n=e||K.state.activeChain,r=Ue.getAuthConnector(n),s=K.getAccountData(n),i=Te.getConnectedConnectorId(K.state.activeChain),o=qe.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:l,type:u,publicKey:d})=>ot.createAccount(n,l,u||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:ot.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===le.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:Te.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:To(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?K.subscribeChainProp("accountState",r,n):K.subscribe(r),Ue.subscribe(r)}subscribeNetwork(e){return K.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n?.id,caipNetworkId:n?.caipNetworkId})})}subscribeWalletInfo(e,n){return n?ut.subscribeKey("connectedWalletInfo",e,n):ut.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ut.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){K.subscribeKey("activeCaipNetwork",e)}getState(){return La.state}getRemoteFeatures(){return be.state.remoteFeatures}subscribeState(e){return La.subscribe(e)}subscribeRemoteFeatures(e){return be.subscribeKey("remoteFeatures",e)}showErrorMessage(e){kc.showError(e)}showSuccessMessage(e){kc.showSuccess(e)}getEvent(){return{...xn.state}}subscribeEvents(e){return xn.subscribe(e)}replace(e){Pt.replace(e)}redirect(e){Pt.push(e)}popTransactionStack(e){Pt.popTransactionStack(e)}isOpen(){return vn.state.open}isTransactionStackEmpty(){return Pt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){be.setFeatures(e)}updateRemoteFeatures(e){be.setRemoteFeatures(e)}updateOptions(e){const r={...be.state||{},...e};be.setOptions(r)}setConnectMethodsOrder(e){be.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){be.setWalletFeaturesOrder(e)}setCollapseWallets(e){be.setCollapseWallets(e)}setSocialsOrder(e){be.setSocialsOrder(e)}getConnectMethodsOrder(){return IR.getConnectOrderMethod(be.state.features,Ue.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||K.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&K.removeNetwork(e,n)}}let R$=!1;class lSe extends cSe{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await ea.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const n=K.state.activeChain;if(!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===le.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=be.state.defaultAccountTypes[n],i=To(n),o=e.preferredAccountType||i||s;this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:l,...u}=e;this.setUser({...ut.state.user||{},...u},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{go.checkIfRequestExists(n)?go.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(as.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(as.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=go.checkIfRequestIsSafe(r),i=ut.state.address,o=K.state.activeCaipNetwork;s||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=K.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");Ue.getConnectorId(n)===le.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=K.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=Li.getSnapshot(),r=be.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:Zl(n.themeVariables,n.themeMode)})])}async syncAuthConnector(e,n){const r=le.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===K.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...ut.state?.user||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),n&&r&&s){const l=await e.getSmartAccountEnabledNetworks();if(K.setSmartAccountEnabledNetworks(l?.smartAccountEnabledNetworks||[],n),c&&this.connectionControllerClient?.connectExternal){await this.connectionControllerClient?.connectExternal({id:le.CONNECTOR_ID.AUTH,info:{name:le.CONNECTOR_ID.AUTH},type:pr.CONNECTOR_TYPE_AUTH,provider:e,chainId:K.state.activeCaipNetwork?.id,chain:n}),this.setStatus("connected",n);const u=Te.getConnectedSocialProvider();u?xn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:ut.state.address,properties:{provider:u,reconnect:!0}}):xn.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:ut.state.address,properties:{method:"email",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0}})}else Ue.getConnectorId(n)===le.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Te.removeConnectedNamespace(n))}this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){try{if(!ot.isTelegram())return;const n=Te.getTelegramSocialProvider();if(!n||!ot.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;ut.setSocialProvider(n,e),await this.authProvider?.init();const i=Ue.getAuthConnector();n&&i&&(this.setLoading(!0,e),await qe.connectExternal({id:i.id,type:i.type,socialUri:s},i.chain),Te.setConnectedSocialProvider(n),Te.removeTelegramSocialProvider(),xn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){if(!le.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=ks.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=xf.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:Ir.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?wr.open(Ir.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?wr.open(Ir.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&wr.open(Ir.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>Jl(l),getCaipNetworks:l=>K.getCaipNetworks(l)}),La.subscribeOpen(l=>{!l&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===K.state.activeChain&&be.state.enableReconnect;be.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&vt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const n=K.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const o=this.getAdapter(r),a=tr.getProvider(r),c=tr.getProviderId(r);await o?.switchNetwork({caipNetwork:e,provider:a,providerType:c}),this.setCaipNetwork(e)}else{const a=tr.getProviderId(n)===pr.CONNECTOR_TYPE_AUTH,c=tr.getProviderId(r),l=c===pr.CONNECTOR_TYPE_AUTH,u=le.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&c===void 0||l)&&u)try{K.state.activeChain=e.chainNamespace,s?await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c}):await this.connectionControllerClient?.connectExternal?.({id:le.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:pr.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c})}else if(c===pr.CONNECTOR_TYPE_WALLET_CONNECT){if(!K.state.noAdapters){const d=this.getAdapter(r),h=tr.getProvider(r),f=tr.getProviderId(r);await d?.switchNetwork({caipNetwork:e,provider:h,providerType:f})}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(n=>{this.createAuthProviderForAdapter(n)}),await this.injectModalUi(),La.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){const s=`${r}:${n}`;if(this.caipNetworks?.find(a=>a.caipNetworkId===s)?.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}const o=Ue.getConnectorId(r)===le.CONNECTOR_ID.AUTH;try{const{name:a,avatar:c}=await this.fetchIdentity({address:e});!a&&o?await this.syncReownName(e,r):(this.setProfileName(a,r),this.setProfileImage(c,r))}catch{n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=tr.getProviderId(e);if(n===pr.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Te.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ot.isClient()&&!R$)try{const e={...En.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ot.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!be.state.disableAppend&&!be.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}R$=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ot.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(un(()=>import("./embedded-wallet-BoqMkhSQ.js"),__vite__mapDeps([5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),n.email&&r.push(un(()=>import("./email-DsKz-m7q.js"),__vite__mapDeps([21,7,22,6,20,12,13,23,19,9,11,18,24,14,15]))),n.socials&&r.push(un(()=>import("./socials-iIgQaO8Z.js"),__vite__mapDeps([25,6,26,7,27,12,15,9,28,29,19,30,18,13,20,31,10,32]))),n.swaps&&n.swaps.length>0&&r.push(un(()=>import("./swaps-MO6GUFcp.js"),__vite__mapDeps([33,6,7,18,13,9,34,35,36,32,37,10,19,14,12,15,23]))),e.send&&r.push(un(()=>import("./send-BIgpas_a.js"),__vite__mapDeps([38,6,7,18,13,19,9,11,15,28,20,12,37,10,32,36,14,39,40,26]))),e.receive&&r.push(un(()=>import("./receive-BDwjxlbF.js"),__vite__mapDeps([41,6,26,7,42,9,10,31]))),n.onramp&&n.onramp.length>0&&r.push(un(()=>import("./onramp-D1mhNYnK.js"),__vite__mapDeps([43,6,26,7,44,12,9,10,13,19,27,15,28,45,20,18,30,14]))),n.payWithExchange&&r.push(un(()=>import("./pay-with-exchange-Glh_Wh5D.js"),__vite__mapDeps([46,6,7,18,13,16,9,10,44,12,19,32]))),n.activity&&r.push(un(()=>import("./transactions-D-txcsXI.js"),__vite__mapDeps([47,6,7,48,19,9,20,12,10,32]))),(e.pay||n.payments)&&r.push(un(()=>import("./index-DNTl5ytZ.js"),__vite__mapDeps([49,7,18,13,9,50,10,19,16,44,12,40,30]))),n.emailCapture&&r.push(un(()=>import("./data-capture-B-mcFTfm.js"),__vite__mapDeps([51,6,7,22,20,12,13,23,52]))),await Promise.all([...r,un(()=>import("./index-CA1tyvM0.js"),__vite__mapDeps([53,6,26,7,12,10,13,39,9,19,54,35,16,44,18,23,17,50,8,48,20,32,34,11,40,15,14,24,27,28,29,30,42,31,45])),un(()=>import("./w3m-modal-B5UR1fii.js"),__vite__mapDeps([55,6,26,7,9,16,10,19,17,13,35,54,36]))])}}let f1;function uSe(t){t&&(f1=t)}function dSe(){if(!f1)throw new Error('Please call "createAppKit" before using "useAppKit" composable');async function t(n){await f1?.open(n)}async function e(){await f1?.close()}return yp({open:t,close:e})}const hSe="1.7.20";let PE;function fSe(t){return PE||(PE=new lSe({...t,sdkVersion:ot.generateSdkVersion(t.adapters??[],"html",hSe)}),uSe(PE)),PE}function ua(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const p1="2.19.0",pSe=()=>`@wagmi/core@${p1}`;var kq=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},kA,Dq;let Ru=class RR extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return pSe()}constructor(e,n={}){super(),kA.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof RR?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof RR&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return kq(this,kA,"m",Dq).call(this,this,e)}};kA=new WeakSet,Dq=function t(e,n){return n?.(e)?e:e.cause?kq(this,kA,"m",t).call(this,e.cause,n):e};class Bv extends Ru{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class mSe extends Ru{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class gSe extends Ru{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class ySe extends Ru{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class wSe extends Ru{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class vSe extends Ru{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Hx(t,e){let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new mSe;try{t.setState(a=>({...a,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:r,...s}=e,i=await n.connect(s),o=i.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await t.storage?.setItem("recentConnectorId",n.id),t.setState(a=>({...a,connections:new Map(a.connections).set(n.uid,{accounts:o,chainId:i.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:o,chainId:i.chainId}}catch(r){throw t.setState(s=>({...s,status:s.current?"connected":"disconnected"})),r}}async function KI(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new vSe({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new gSe;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new wSe({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=cl(e.account??n.accounts[0]);if(o&&(o.address=L0(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new ySe({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return wj({account:o,chain:a,name:"Connector Client",transport:l=>gae(c)({...l,retryCount:0})})}async function NR(t,e={}){let n;if(e.connector)n=e.connector;else{const{connections:s,current:i}=t.state;n=s.get(i)?.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(s=>{if(r.size===0)return{...s,connections:new Map,current:null,status:"disconnected"};const i=r.values().next().value;return{...s,connections:new Map(r),current:i.connector.uid}});{const s=t.state.current;if(!s)return;const i=t.state.connections.get(s)?.connector;if(!i)return;await t.storage?.setItem("recentConnectorId",i.id)}}function Mq(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(Eie[t])}async function bSe(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await KI(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ua(o,ej,"estimateGas")({...s,account:i})}function eg(t){const e=t.state.current,n=t.state.connections.get(e),r=n?.accounts,s=r?.[0],i=t.chains.find(a=>a.id===n?.chainId),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function _Se(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ua(o,Aae,"multicall")({allowFailure:n,contracts:s,...i})}function ESe(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ua(s,pj,"readContract")(r)}async function ASe(t,e){const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const a={};for(const[d,h]of o.entries()){const f=h.chainId??t.state.chainId;a[f]||(a[f]=[]),a[f]?.push({contract:h,index:d})}const c=()=>Object.entries(a).map(([d,h])=>_Se(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(d),contracts:h.map(({contract:f})=>f)})),l=(await Promise.all(c())).flat(),u=Object.values(a).flatMap(d=>d.map(({index:h})=>h));return l.reduce((d,h,f)=>(d&&(d[u[f]]=h),d),[])}catch(a){if(a instanceof M7)throw a;const c=()=>o.map(l=>ESe(t,{...l,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(c())).map(l=>l.status==="fulfilled"?{result:l.value,status:"success"}:{error:l.reason,result:void 0,status:"failure"}):await Promise.all(c())}}async function CSe(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await N$(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await N$(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),m=f7(Ud(f.symbol,{dir:"right"}));return{...f,symbol:m}}throw h}const c=t.getClient({chainId:i}),u=await ua(c,X7,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Bb(u,Mq(a)),symbol:d.nativeCurrency.symbol,value:u}}async function N$(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await ASe(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Bb(c??"0",Mq(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function Lv(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Lv(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Lv(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let RE=[];function Ac(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Lv(RE,e)?RE:(RE=e,e)}async function ISe(t,e){const{account:n,chainId:r,...s}=e,i=n??eg(t).address,o=t.getClient({chainId:r});return ua(o,UO,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let qx=!1;async function OR(t,e={}){if(qx)return[];qx=!0,t.setState(l=>({...l,status:l.current?"reconnecting":"connecting"}));const n=[];if(e.connectors?.length)for(const l of e.connectors){let u;typeof l=="function"?u=t._internal.connectors.setup(l):u=l,n.push(u)}else n.push(...t.connectors);let r;try{r=await t.storage?.getItem("recentConnectorId")}catch{}const s={};for(const[,l]of t.state.connections)s[l.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((l,u)=>(s[l.id]??10)-(s[u.id]??10)):n;let o=!1;const a=[],c=[];for(const l of i){const u=await l.getProvider().catch(()=>{});if(!u||c.some(f=>f===u)||!await l.isAuthorized())continue;const h=await l.connect({isReconnecting:!0}).catch(()=>null);h&&(l.emitter.off("connect",t._internal.events.connect),l.emitter.on("change",t._internal.events.change),l.emitter.on("disconnect",t._internal.events.disconnect),t.setState(f=>{const m=new Map(o?f.connections:new Map).set(l.uid,{accounts:h.accounts,chainId:h.chainId,connector:l});return{...f,current:o?f.current:l.uid,connections:m}}),a.push({accounts:h.accounts,chainId:h.chainId,connector:l}),c.push(u),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(l=>({...l,status:"connected"})):t.setState(l=>({...l,connections:new Map,current:null,status:"disconnected"}))),qx=!1,a}async function TSe(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&n?.type==="local"?o=t.getClient({chainId:r}):o=await KI(t,{account:n??void 0,chainId:r,connector:s}),await ua(o,gj,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function SSe(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await KI(t,{account:n,connector:r}),ua(i,Sae,"signMessage")({...s,...n?{account:n}:{}})}class _d extends Ru{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class xSe extends Ru{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function O$(t,e){const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(e.connector?.uid??t.state.current);if(s){const o=s.connector;if(!o.switchChain)throw new xSe({connector:o});return await o.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(o=>o.id===r);if(!i)throw new Bv;return t.setState(o=>({...o,chainId:r})),i}async function PSe(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ua(i,Iae,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await ua(i,_j,"getTransaction")({hash:a.transactionHash}),d=await ua(i,fj,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d?.data?f7(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}function Bq(t,e){const{onChange:n}=e;return t.subscribe(()=>eg(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Lv(o,c)&&i?.id===a?.id&&i?.uid===a?.uid}})}function Lq(t,e){const{onChange:n}=e;return t.subscribe(()=>Ac(t),n,{equalityFn:Lv})}function RSe(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function NSe(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=ua(l,Tae,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o?.(),a?.()}}async function OSe(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&n?.type==="local"?o=t.getClient({chainId:r}):o=await KI(t,{account:n??void 0,chainId:r,connector:s}),await ua(o,uae,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function EYe(t){return t}QI.type="injected";function QI(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...kSe[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l?.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:QI.type,async setup(){const l=await this.getProvider();l?.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){const d=await this.getProvider();if(!d)throw new _d;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(m=>L0(m)),h.length>0&&(h=await this.getAccounts())}catch(f){const m=f;if(m.code===$i.code)throw new $i(m);if(m.code===Fd.code)throw m}try{!h?.length&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(g=>L0(g))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let f=await this.getChainId();return l&&f!==l&&(f=(await this.switchChain({chainId:l}).catch(g=>{if(g.code===$i.code)throw g;return{id:f}}))?.id??f),e&&await c.storage?.removeItem(`${this.id}.disconnected`),t.target||await c.storage?.setItem("injected.connected",!0),{accounts:h,chainId:f}}catch(f){const m=f;throw m.code===$i.code?new $i(m):m.code===Fd.code?new Fd(m):m}},async disconnect(){const l=await this.getProvider();if(!l)throw new _d;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await vj(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await c.storage?.setItem(`${this.id}.disconnected`,!0),t.target||await c.storage?.removeItem("injected.connected")},async getAccounts(){const l=await this.getProvider();if(!l)throw new _d;return(await l.request({method:"eth_accounts"})).map(d=>L0(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new _d;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=m1(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){try{if(e&&await c.storage?.getItem(`${this.id}.disconnected`)||!t.target&&!await c.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const h=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",h),!!await this.getProvider()),f=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(g=>window.addEventListener("ethereum#initialized",()=>g(h()),{once:!0}))]:[],new Promise(g=>setTimeout(()=>g(h()),f))]))return!0}throw new _d}return!!(await sA(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){const d=await this.getProvider();if(!d)throw new _d;const h=c.chains.find(m=>m.id===u);if(!h)throw new rv(new Bv);const f=new Promise(m=>{const g=(y=>{"chainId"in y&&y.chainId===u&&(c.emitter.off("change",g),m())});c.emitter.on("change",g)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:fn(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(m){const g=m;if(g.code===4902||g?.data?.originalError?.code===4902)try{const{default:y,...v}=h.blockExplorers??{};let _;l?.blockExplorerUrls?_=l.blockExplorerUrls:y&&(_=[y.url,...Object.values(v).map(S=>S.url)]);let A;l?.rpcUrls?.length?A=l.rpcUrls:A=[h.rpcUrls.default?.http[0]??""];const k={blockExplorerUrls:_,chainId:fn(u),chainName:l?.chainName??h.name,iconUrls:l?.iconUrls,nativeCurrency:l?.nativeCurrency??h.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[k]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new $i(new Error("User rejected switch after adding network."))}),f]),h}catch(y){throw new $i(y)}throw g.code===$i.code?new $i(g):new rv(g)}},async onAccountsChanged(l){if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const u=(await this.getChainId()).toString();this.onConnect({chainId:u}),e&&await c.storage?.removeItem(`${this.id}.disconnected`)}else c.emitter.emit("change",{accounts:l.map(u=>L0(u))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const kSe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t?.coinbaseWalletExtension?t.coinbaseWalletExtension:m1(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return m1(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){return t?.phantom?.ethereum?t.phantom?.ethereum:m1(t,"isPhantom")}}};function m1(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r?.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function DSe(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function MSe(){const t=new Set;let e=[];const n=()=>DSe(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r?.()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r?.(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const BSe=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=c?.equalityFn||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const m=d;a(d=f,m)}},c?.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},LSe=BSe;function $Se(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const kR=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return kR(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return kR(r)(n)}}}},USe=(t,e)=>(n,r,s)=>{let i={storage:$Se(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const m=()=>{var g,y;if(!l)return;o=!1,a.forEach(_=>{var A;return _((A=r())!=null?A:h)});const v=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return kR(l.getItem.bind(l))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return[!0,i.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var A;const[k,S]=_;if(f=i.merge(S,(A=r())!=null?A:h),n(f,!0),k)return u()}).then(()=>{v?.(f,void 0),f=r(),o=!0,c.forEach(_=>_(f))}).catch(_=>{v?.(void 0,_)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||m(),f||h},FSe=USe,k$=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},zx=t=>t?k$(t):k$;var Wx={exports:{}},D$;function jSe(){return D$||(D$=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),m=n?n+l:l;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],f]:c._events[m].push(f):(c._events[m]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,m){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],v=arguments.length,_,A;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,m),!0}for(A=1,_=new Array(v-1);A<v;A++)_[A-1]=arguments[A];y.fn.apply(y.context,_)}else{var k=y.length,S;for(A=0;A<k;A++)switch(y[A].once&&this.removeListener(l,y[A].fn,void 0,!0),v){case 1:y[A].fn.call(y[A].context);break;case 2:y[A].fn.call(y[A].context,u);break;case 3:y[A].fn.call(y[A].context,u,d);break;case 4:y[A].fn.call(y[A].context,u,d,h);break;default:if(!_)for(S=1,_=new Array(v-1);S<v;S++)_[S-1]=arguments[S];y[A].fn.apply(y[A].context,_)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var g=0,y=[],v=m.length;g<v;g++)(m[g].fn!==u||h&&!m[g].once||d&&m[g].context!==d)&&y.push(m[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Wx)),Wx.exports}var VSe=jSe();const Nk=ny(VSe);class HSe{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Nk})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function qSe(t){return new HSe(t)}function zSe(t,e){return JSON.parse(t,(n,r)=>{let s=r;return s?.__type==="bigint"&&(s=BigInt(s.value)),s?.__type==="Map"&&(s=new Map(s.value)),e?.(n,s)??s})}function M$(t,e){return t.slice(0,e).join(".")||"."}function B$(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function WSe(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=B$(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=B$(s,c);if(u!==0)return r?e.call(this,a,c,M$(i,u)):`[ref=${M$(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function GSe(t,e,n,r){return JSON.stringify(t,WSe((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),e?.(s,o)??o},r),n??void 0)}function KSe(t){const{deserialize:e=zSe,key:n="wagmi",serialize:r=GSe,storage:s=$q}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const $q={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function QSe(){const t=typeof window<"u"&&window.localStorage?window.localStorage:$q;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const DR=256;let NE=DR,OE;function YSe(t=11){if(!OE||NE+t>DR*2){OE="",NE=0;for(let e=0;e<DR;e++)OE+=(256+Math.random()*256|0).toString(16).substring(1)}return OE.substring(NE,NE+++t)}function Uq(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=KSe({storage:QSe()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?MSe():void 0,a=zx(()=>i.chains),c=zx(()=>{const S=[],R=new Set;for(const T of i.connectors??[]){const b=l(T);if(S.push(b),!s&&b.rdns){const E=typeof b.rdns=="string"?[b.rdns]:b.rdns;for(const x of E)R.add(x)}}if(!s&&o){const T=o.getProviders();for(const b of T)R.has(b.info.rdns)||S.push(l(u(b)))}return S});function l(S){const R=qSe(YSe()),T={...S({emitter:R,chains:a.getState(),storage:n,transports:i.transports}),emitter:R,uid:R.uid};return R.on("connect",A),T.setup?.(),T}function u(S){const{info:R}=S,T=S.provider;return QI({target:{...R,id:R.rdns,provider:T}})}const d=new Map;function h(S={}){const R=S.chainId??y.getState().chainId,T=a.getState().find(E=>E.id===R);if(S.chainId&&!T)throw new Bv;{const E=d.get(y.getState().chainId);if(E&&!T)return E;if(!T)throw new Bv}{const E=d.get(R);if(E)return E}let b;if(i.client)b=i.client({chain:T});else{const E=T.id,x=a.getState().map($=>$.id),D={},M=Object.entries(i);for(const[$,X]of M)if(!($==="chains"||$==="client"||$==="connectors"||$==="transports"))if(typeof X=="object")if(E in X)D[$]=X[E];else{if(x.some(L=>L in X))continue;D[$]=X}else D[$]=X;b=wj({...D,chain:T,batch:D.batch??{multicall:!0},transport:$=>i.transports[E]({...$,connectors:c})})}return d.set(R,b),b}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let m;const g="0.0.0-canary-";p1.startsWith(g)?m=Number.parseInt(p1.replace(g,"")):m=Number.parseInt(p1.split(".")[0]??"0");const y=zx(LSe(n?FSe(f,{migrate(S,R){if(R===m)return S;const T=f(),b=v(S,T.chainId);return{...T,chainId:b}},name:"store",partialize(S){return{connections:{__type:"Map",value:Array.from(S.connections.entries()).map(([R,T])=>{const{id:b,name:E,type:x,uid:D}=T.connector;return[R,{...T,connector:{id:b,name:E,type:x,uid:D}}]})},chainId:S.chainId,current:S.current}},merge(S,R){typeof S=="object"&&S&&"status"in S&&delete S.status;const T=v(S,R.chainId);return{...R,...S,chainId:T}},skipHydration:s,storage:n,version:m}):f));y.setState(f());function v(S,R){return S&&typeof S=="object"&&"chainId"in S&&typeof S.chainId=="number"&&a.getState().some(T=>T.id===S.chainId)?S.chainId:R}r&&y.subscribe(({connections:S,current:R})=>R?S.get(R)?.chainId:void 0,S=>{if(a.getState().some(T=>T.id===S))return y.setState(T=>({...T,chainId:S??T.chainId}))}),o?.subscribe(S=>{const R=new Set,T=new Set;for(const E of c.getState())if(R.add(E.id),E.rdns){const x=typeof E.rdns=="string"?[E.rdns]:E.rdns;for(const D of x)T.add(D)}const b=[];for(const E of S){if(T.has(E.info.rdns))continue;const x=l(u(E));R.has(x.id)||b.push(x)}n&&!y.persist.hasHydrated()||c.setState(E=>[...E,...b],!0)});function _(S){y.setState(R=>{const T=R.connections.get(S.uid);return T?{...R,connections:new Map(R.connections).set(S.uid,{accounts:S.accounts??T.accounts,chainId:S.chainId??T.chainId,connector:T.connector})}:R})}function A(S){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(R=>{const T=c.getState().find(b=>b.uid===S.uid);return T?(T.emitter.listenerCount("connect")&&T.emitter.off("connect",_),T.emitter.listenerCount("change")||T.emitter.on("change",_),T.emitter.listenerCount("disconnect")||T.emitter.on("disconnect",k),{...R,connections:new Map(R.connections).set(S.uid,{accounts:S.accounts,chainId:S.chainId,connector:T}),current:S.uid,status:"connected"}):R})}function k(S){y.setState(R=>{const T=R.connections.get(S.uid);if(T){const E=T.connector;E.emitter.listenerCount("change")&&T.connector.emitter.off("change",_),E.emitter.listenerCount("disconnect")&&T.connector.emitter.off("disconnect",k),E.emitter.listenerCount("connect")||T.connector.emitter.on("connect",A)}if(R.connections.delete(S.uid),R.connections.size===0)return{...R,connections:new Map,current:null,status:"disconnected"};const b=R.connections.values().next().value;return{...R,connections:new Map(R.connections),current:b.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(S){let R;typeof S=="function"?R=S(y.getState()):R=S;const T=f();typeof R!="object"&&(R=T),Object.keys(T).some(E=>!(E in R))&&(R=T),y.setState(R,!0)},subscribe(S,R,T){return y.subscribe(S,R,T?{...T,fireImmediately:T.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(S){const R=typeof S=="function"?S(a.getState()):S;if(R.length!==0)return a.setState(R,!0)},subscribe(S){return a.subscribe(S)}},connectors:{providerDetailToConnector:u,setup:l,setState(S){return c.setState(typeof S=="function"?S(c.getState()):S,!0)},subscribe(S){return c.subscribe(S)}},events:{change:_,connect:A,disconnect:k}}}}function ZSe(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{const i=new Set;for(const c of s??[])if(c.rdns){const l=Array.isArray(c.rdns)?c.rdns:[c.rdns];for(const u of l)i.add(u)}const o=[],a=t._internal.mipd?.getProviders()??[];for(const c of a){if(i.has(c.info.rdns))continue;const l=t._internal.connectors.providerDetailToConnector(c),u=t._internal.connectors.setup(l);o.push(u)}return[...s,...o]})),r?OR(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Ok(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function L$(t){return Ok(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Fq="2.31.0";let Gx={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Fq}`},gh=class MR extends Error{constructor(e,n={}){const r=n.cause instanceof MR?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof MR&&n.cause.docsPath||n.docsPath,i=Gx.getDocsUrl?.({...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Gx.version?[`Version: ${Gx.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Fq}walk(e){return jq(this,e)}};function jq(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?jq(t.cause,e):e?null:t}class Vq extends gh{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function YI(t,{dir:e,size:n=32}={}){return typeof t=="string"?JSe(t,{dir:e,size:n}):XSe(t,{dir:e,size:n})}function JSe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Vq({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function XSe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Vq({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class exe extends gh{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class txe extends gh{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function kk(t,{size:e}){if(L$(t)>e)throw new txe({givenSize:L$(t),maxSize:e})}function BR(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new exe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?YI(a,{size:r}):a}const nxe=new TextEncoder;function rxe(t,e={}){return typeof t=="number"||typeof t=="bigint"?ixe(t,e):typeof t=="boolean"?sxe(t,e):Ok(t)?Hq(t,e):qq(t,e)}function sxe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(kk(n,{size:e.size}),YI(n,{size:e.size})):n}const Nl={zero:48,nine:57,A:65,F:70,a:97,f:102};function $$(t){if(t>=Nl.zero&&t<=Nl.nine)return t-Nl.zero;if(t>=Nl.A&&t<=Nl.F)return t-(Nl.A-10);if(t>=Nl.a&&t<=Nl.f)return t-(Nl.a-10)}function Hq(t,e={}){let n=t;e.size&&(kk(n,{size:e.size}),n=YI(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=$$(r.charCodeAt(a++)),l=$$(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new gh(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function ixe(t,e){const n=BR(t,e);return Hq(n)}function qq(t,e={}){const n=nxe.encode(t);return typeof e.size=="number"?(kk(n,{size:e.size}),YI(n,{dir:"right",size:e.size})):n}function oxe(t,e){return EO(Ok(t,{strict:!1})?rxe(t):t)}let axe=class extends gh{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}};class zq extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Kx=new zq(8192);function Dk(t,e){if(Kx.has(`${t}.${e}`))return Kx.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=oxe(qq(n)),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Kx.set(`${t}.${e}`,i),i}function Wq(t,e){if(!lxe(t,{strict:!1}))throw new axe({address:t});return Dk(t,e)}const cxe=/^0x[a-fA-F0-9]{40}$/,Qx=new zq(8192);function lxe(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Qx.has(r))return Qx.get(r);const s=cxe.test(t)?t.toLowerCase()===t?!0:n?Dk(t)===t:!0:!1;return Qx.set(r,s),s}const uxe=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function dxe(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}const hxe=t=>t;class fxe extends gh{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${hxe(r)}`,`Request body: ${uxe(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}const pxe=-1;let mxe=class extends gh{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof fxe?e.code:n??pxe}};class Gq extends mxe{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Rf extends Gq{constructor(e){super(e,{code:Rf.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Rf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class xg extends Gq{constructor(e){super(e,{code:xg.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(xg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class gxe extends gh{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function yxe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new gxe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function wxe(t){let e=[],n,r;function s(a){return Hw.parseEvmChainId(a)||1}function i(){return n||(n=xf.getInstance({projectId:t.options.projectId,chainId:Jl()?.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:a=>{a==="iframe_load_failed"?wr.open(Ir.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):a==="iframe_request_timeout"?wr.open(Ir.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):a==="unverified_domain"&&wr.open(Ir.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Ir.EmbeddedWalletAbortController,getActiveCaipNetwork:a=>Jl(a),getCaipNetworks:a=>K.getCaipNetworks(a)})),n}async function o(a={}){const c=i();let l=a.chainId;if(a.isReconnecting){const g=Hw.parseEvmChainId(c.getLastUsedChainId()||""),y=t.chains?.[0].id;if(l=g||y,!l)throw new Error("ChainId not found in provider")}const u=To("eip155"),{address:d,chainId:h,accounts:f}=await ea.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:le.CHAIN.EVM});e=f?.map(g=>g.address)||[d];const m=s(h);return{accounts:e,account:d,chainId:m,chain:{id:m,unsuported:!1}}}return a=>({id:le.CONNECTOR_ID.AUTH,name:le.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:le.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e?.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=xf.getInstance({projectId:t.options.projectId,chainId:Jl()?.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Ir.EmbeddedWalletAbortController,onTimeout:c=>{c==="iframe_load_failed"?wr.open(Ir.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?wr.open(Ir.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&wr.open(Ir.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:c=>Jl(c),getCaipNetworks:c=>K.getCaipNetworks(c)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=K.state.activeChain===le.CHAIN.EVM;if(le.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Ue.getConnectorId(h)===le.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){try{const l=a.chains.find(f=>f.id===c);if(!l)throw new xg(new Error("chain not found on connector."));const u=await this.getProvider(),d=To("eip155"),h=await u.connect({chainId:c,preferredAccountType:d});return e=h?.accounts?.map(f=>f.address)||[h.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),l}catch(l){throw l instanceof Error?new xg(l):l}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Wq)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}Mk.type="walletConnect";function Mk(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:Mk.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){try{const h=K.getCaipNetworks(),f=await this.getProvider();if(!f)throw new _d;a||(a=this.onDisplayUri,f.on("display_uri",a));const m=await this.isChainsStale();f.session&&m&&await f.disconnect();const g=be.state.universalProviderConfigOverride;if(!f.session||m){const R=au.createNamespaces(h,g);await f.connect({optionalNamespaces:R,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(h.map(T=>Number(T.id)))}const y=await this.getAccounts(),v=await this.getChainId(),_=f.session?.namespaces?.eip155?.chains,A=_?.some(R=>Number(R.split(":")[1])===v);let k=1;A?k=v:_?.[0]&&(k=Number(_[0].split(":")[1])),a&&(f.removeListener("display_uri",a),a=void 0),o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),f.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),f.on("session_delete",c));const S=g?.defaultChain;return f.setDefaultChain(S??`eip155:${k}`),{accounts:y,chainId:k}}catch(h){throw/(user rejected|connection request reset)/i.test(h?.message)?new Rf(h):h}},async disconnect(){const d=await this.getProvider();try{await d?.disconnect()}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d?.removeListener("chainChanged",i),i=void 0),l&&(d?.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d?.on("connect",o)),s&&(d?.removeListener("accountsChanged",s),s=void 0),c&&(d?.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){const d=await this.getProvider();if(!d?.session?.namespaces)return[];const f=d?.session?.namespaces[le.CHAIN.EVM]?.accounts?.map(y=>y.split(":")[2])??[],m=new Set;return f.filter(y=>{const v=y?.toLowerCase();return m.has(v)?!1:(m.add(v),!0)})},async getProvider({chainId:d}={}){r||(r=await e.getUniversalProvider(),r?.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=Te.getActiveNamespace(),f=e.getCaipNetwork()?.id;if(d&&f!==d&&h){const m=Te.getStoredActiveCaipNetworkId(),y=(h?e.getCaipNetworks(h):[])?.find(v=>v.id===m);y&&y.chainNamespace===le.CHAIN.EVM&&await this.switchChain?.({chainId:Number(y.id)})}return r},async getChainId(){const d=e.getCaipNetwork(le.CHAIN.EVM)?.id;if(d)return d;const f=(await this.getProvider()).session?.namespaces[le.CHAIN.EVM]?.chains?.[0];return K.getCaipNetworks().find(g=>g.id===f)?.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){const f=await this.getProvider();if(!f)throw new _d;const m=K.getCaipNetworks().find(g=>g.id===h);if(!m)throw new xg(new Bv);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:BR(h)}]}),m?.caipNetworkId&&f.setDefaultChain(m?.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const g=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...g,h]),{...m,id:m.id}}catch(g){const y=g;if(/(?:user rejected)/iu.test(y.message))throw new Rf(y);try{let v;d?.blockExplorerUrls?v=d.blockExplorerUrls:v=m.blockExplorers?.default.url?[m.blockExplorers?.default.url]:[];const _=m.rpcUrls?.chainDefault?.http||[],A={blockExplorerUrls:v,chainId:BR(h),chainName:m.name,iconUrls:d?.iconUrls,nativeCurrency:m.nativeCurrency,rpcUrls:_};await f.request({method:"wallet_addEthereumChain",params:[A]});const k=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...k,h]),{...m,id:m.id}}catch(v){throw new Rf(v)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Wq(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(K.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return r?.session?.namespaces?r?.session?.namespaces[le.CHAIN.EVM]?.accounts?.map(f=>Number.parseInt(f.split(":")[1]??""))??[]:[]},async getRequestedChainsIds(){const d=await u.storage?.getItem(this.requestedChainsStorageKey)??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(m=>m.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(m=>d.includes(m)))return!1;const f=await this.getRequestedChainsIds();return!d.every(m=>f.includes(Number(m)))},async setRequestedChainsIds(d){await u.storage?.setItem(this.requestedChainsStorageKey,d)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const vxe=Symbol(),U$=Object.getPrototypeOf,F$=new WeakMap,bxe=t=>t&&(F$.has(t)?F$.get(t):U$(t)===Object.prototype||U$(t)===Array.prototype),_xe=t=>bxe(t)&&t[vxe]||null,LR={},Bk=t=>typeof t=="object"&&t!==null,Exe=t=>Bk(t)&&!Kq.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Axe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(j$(l,o)||MA.has(o)&&j$(l,MA.get(o))))return!0;n(i),Bk(o)&&(o=_xe(o)||o);const u=!DA.has(o)&&Ixe(o)?Qq(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),DA=new WeakMap,Kq=new WeakSet,kE=[1,1],MA=new WeakMap;let j$=Object.is,Cxe=(t,e)=>new Proxy(t,e),Ixe=Exe,Txe=Axe;function Qq(t={}){if(!Bk(t))throw new Error("object required");const e=MA.get(t);if(e)return e;let n=kE[0];const r=new Set,s=(y,v=++kE[0])=>{n!==v&&(n=v,r.forEach(_=>_(y,v)))};let i=kE[1];const o=(y=++kE[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([v])=>{const _=v[1](y);_>n&&(n=_)})),n),a=y=>(v,_)=>{const A=[...v];A[1]=[y,...A[1]],s(A,_)},c=new Map,l=(y,v)=>{const _=!Kq.has(v)&&DA.get(v);if(_){if((LR?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const A=_[2](a(y));c.set(y,[_,A])}else c.set(y,[_])}},u=y=>{var v;const _=c.get(y);_&&(c.delete(y),(v=_[1])==null||v.call(_))},d=y=>(r.add(y),r.size===1&&c.forEach(([_,A],k)=>{if((LR?"production":void 0)!=="production"&&A)throw new Error("remove already exists");const S=_[2](a(k));c.set(k,[_,S])}),()=>{r.delete(y),r.size===0&&c.forEach(([_,A],k)=>{A&&(A(),c.set(k,[_]))})});let h=!0;const f=Txe(()=>h,l,u,s),m=Cxe(t,f);MA.set(t,m);const g=[t,o,d];return DA.set(m,g),Reflect.ownKeys(t).forEach(y=>{const v=Object.getOwnPropertyDescriptor(t,y);"value"in v&&v.writable&&(m[y]=t[y])}),h=!1,m}function Sxe(t,e,n){const r=DA.get(t);(LR?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function xxe(t,e,n,r){let s=t[e];return Sxe(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const x0=Qq({pendingTransactions:0}),V$={state:x0,subscribeKey(t,e){return xxe(x0,t,e)},increase(t){x0[t]+=1},decrease(t){x0[t]-=1},reset(t){x0[t]=0}};async function Pxe(t){if(ot.isSafeApp()){const{safe:e}=await un(async()=>{const{safe:n}=await import("./index-CVUOi3yB.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Rxe(t){try{const{coinbaseWallet:e}=await un(async()=>{const{coinbaseWallet:n}=await import("./index-CVUOi3yB.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Nxe={enable:!1,pollingInterval:3e4};class Oxe extends Oq{constructor(e){const n=Pc.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=le.CHAIN.EVM,this.adapterType=le.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Nxe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===le.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!i?.user)return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ot.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=eg(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ot.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=eg(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===le.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{const i=e.transports?.[s.id],o=Pc.getCaipNetworkId(s);i?n[s.id]=Pc.extendWagmiTransports(s,e.projectId,i):n[s.id]=Pc.getViemTransport(s,e.projectId,e.customRpcUrls?.[o])}),this.wagmiConfig=Uq({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=NSe(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),V$.increase("pendingTransactions")}});const e=V$.subscribeKey("pendingTransactions",n=>{n>=le.LIMITS.PENDING_TRANSACTIONS&&(this.unwatchPendingTransactions?.(),e())})}setupWatchers(){Lq(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===le.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:this.toChecksummedAddress(i)})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:Te.getConnectedSocialProvider(),username:Te.getConnectedSocialUsername()}:void 0}}))}}),Bq(this.wagmiConfig,{onChange:(e,n)=>{if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e?.chainId&&e?.chainId!==n?.chainId&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const r=e.address!==n?.address,s=e.connector.id!==n.connector?.id,i=n.status!=="connected";(r||s||i)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Rxe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Pxe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){const r=[];e.enableWalletConnect!==!1&&r.push(Mk(e,n)),e.enableEIP6963!==!1&&r.push(QI({shimDisconnect:!0}));const s=n?.remoteFeatures?.email??!0,i=Array.isArray(n?.remoteFeatures?.socials)&&n?.remoteFeatures?.socials?.length>0;(s||i)&&r.push(wxe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(o=>{const a=this.wagmiConfig._internal.connectors.setup(o);this.wagmiConfig._internal.connectors.setState(c=>[...c,a])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:this.toChecksummedAddress(e),chainId:n,connector:{id:r.id,name:mo.ConnectorNamesMap[r.id]??r.name,imageId:mo.ConnectorImageIds[r.id],type:mo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===le.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await SSe(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=eg(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await ISe(this.wagmiConfig,s);const i=await TSe(this.wagmiConfig,s);return await PSe(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){const{caipNetwork:n,...r}=e,s=Number(Hw.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await OSe(this.wagmiConfig,{chain:this.wagmiChains?.[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await bSe(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return yxe(e.value,e.decimals)}formatUnits(e){return dxe(e.value,e.decimals)}async addWagmiConnector(e,n){if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===le.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===le.CONNECTOR_ID.AUTH||e.id===le.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:mo.ConnectorExplorerIds[e.id],imageUrl:n?.connectorImages?.[e.id]??e.icon,name:mo.ConnectorNamesMap[e.id]??e.name,imageId:mo.ConnectorImageIds[e.id],type:mo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===le.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){RSe(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){const{id:n,chainId:r}=e,i=Ac(this.wagmiConfig).find(l=>l.connector.id===n),a=await this.getWagmiConnector(n)?.getProvider();if(ot.isSafeApp()&&n===le.CONNECTOR_ID.SAFE&&!i?.accounts.length){const l=this.getWagmiConnector("safe");if(l){const u=await Hx(this.wagmiConfig,{connector:l,chainId:Number(r)}),d=await l.getProvider();return{chainId:Number(r),address:this.toChecksummedAddress(u.accounts[0]),provider:d,type:i?.connector.type?.toUpperCase(),id:i?.connector.id}}}return{chainId:Number(i?.chainId),address:this.toChecksummedAddress(i?.accounts[0]),provider:a,type:i?.connector.type?.toUpperCase(),id:i?.connector.id}}async connectWalletConnect(e){try{const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Hx(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await O$(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}catch(n){throw n instanceof Rf?new Error(n.shortMessage):n}}async connect(e){const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===le.CONNECTOR_ID.EIP6963&&l.setEip6963Wallet?.({provider:s,info:o});const u=this.wagmiConfig.state?.connections?.get(l.uid);if(u){await this.wagmiConfig.storage?.setItem("recentConnectorId",l.id);const h=[...u.accounts].sort((f,m)=>ks.isLowerCaseMatch(f,r)?-1:ks.isLowerCaseMatch(m,r)?1:0);return this.wagmiConfig?.setState(f=>({...f,connections:new Map(f.connections).set(l.uid,{accounts:h,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:this.toChecksummedAddress(h[0]),chainId:u.chainId,provider:s,type:i,id:n}}const d=await Hx(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:this.toChecksummedAddress(d.accounts[0]),chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:this.toChecksummedAddress(n)})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await OR(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=Te.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{try{const c=Number(e.chainId),l=await CSe(this.wagmiConfig,{address:e.address,chainId:c,token:e.tokens?.[r.caipNetworkId]?.address});Te.updateNativeBalanceCache({caipAddress:s,balance:l.formatted,symbol:l.symbol,timestamp:Date.now()}),a({balance:l.formatted,symbol:l.symbol})}catch(c){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",c),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Ac(this.wagmiConfig).find(i=>ks.isLowerCaseMatch(i.connector.id,e.id));return await NR(this.wagmiConfig,{connector:n}),be.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:this.toChecksummedAddress(i)})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Ac(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await NR(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:this.toChecksummedAddress(s)})),connectorId:r.connector.id}))}}async switchNetwork(e){const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(s=>s.id.toString()===n.id.toString());await O$(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:r?.name??n.name,nativeCurrency:r?.nativeCurrency??n.nativeCurrency,rpcUrls:[n.rpcUrls?.chainDefault?.http?.[0]??r?.rpcUrls?.default?.http?.[0]??""],blockExplorerUrls:[r?.blockExplorers?.default?.url??n.blockExplorers?.default?.url??""]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Ac(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Ac(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Ac(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Ac(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:le.CONNECTOR_ID.AUTH,type:"AUTH",name:le.CONNECTOR_NAMES.AUTH,provider:e,imageId:mo.ConnectorImageIds[le.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Ac(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(K.state.activeChain==="eip155")return;OR(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Rk({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}toChecksummedAddress(e){return Dk(e.toLowerCase())}}const kxe={id:"app"},H$="02a231b2406ed316c861abefc95c5e59",Dxe={__name:"App",setup(t){const e={name:"AppKit",description:"AppKit Example",url:"https://example.com",icons:["https://avatars.githubusercontent.com/u/179229932"]},n=[xR,PR],r=new Oxe({networks:n,projectId:H$});return fSe({adapters:[r],networks:n,projectId:H$,metadata:e,features:{analytics:!0,email:!1,socials:!1}}),(s,i)=>{const o=tu("router-view");return dt(),Ct("div",kxe,[cn(o)])}}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Rm=typeof document<"u";function Yq(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Mxe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Yq(t.default)}const Fn=Object.assign;function Yx(t,e){const n={};for(const r in e){const s=e[r];n[r]=Ka(s)?s.map(t):t(s)}return n}const yw=()=>{},Ka=Array.isArray,Zq=/#/g,Bxe=/&/g,Lxe=/\//g,$xe=/=/g,Uxe=/\?/g,Jq=/\+/g,Fxe=/%5B/g,jxe=/%5D/g,Xq=/%5E/g,Vxe=/%60/g,ez=/%7B/g,Hxe=/%7C/g,tz=/%7D/g,qxe=/%20/g;function Lk(t){return encodeURI(""+t).replace(Hxe,"|").replace(Fxe,"[").replace(jxe,"]")}function zxe(t){return Lk(t).replace(ez,"{").replace(tz,"}").replace(Xq,"^")}function $R(t){return Lk(t).replace(Jq,"%2B").replace(qxe,"+").replace(Zq,"%23").replace(Bxe,"%26").replace(Vxe,"`").replace(ez,"{").replace(tz,"}").replace(Xq,"^")}function Wxe(t){return $R(t).replace($xe,"%3D")}function Gxe(t){return Lk(t).replace(Zq,"%23").replace(Uxe,"%3F")}function Kxe(t){return t==null?"":Gxe(t).replace(Lxe,"%2F")}function $v(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Qxe=/\/$/,Yxe=t=>t.replace(Qxe,"");function Zx(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=e2e(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:$v(o)}}function Zxe(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function q$(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Jxe(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Pg(e.matched[r],n.matched[s])&&nz(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Pg(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function nz(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Xxe(t[n],e[n]))return!1;return!0}function Xxe(t,e){return Ka(t)?z$(t,e):Ka(e)?z$(e,t):t===e}function z$(t,e){return Ka(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function e2e(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const ud={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Uv;(function(t){t.pop="pop",t.push="push"})(Uv||(Uv={}));var ww;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ww||(ww={}));function t2e(t){if(!t)if(Rm){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Yxe(t)}const n2e=/^[^#]+#/;function r2e(t,e){return t.replace(n2e,"#")+e}function s2e(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ZI=()=>({left:window.scrollX,top:window.scrollY});function i2e(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=s2e(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function W$(t,e){return(history.state?history.state.position-e:-1)+t}const UR=new Map;function o2e(t,e){UR.set(t,e)}function a2e(t){const e=UR.get(t);return UR.delete(t),e}let c2e=()=>location.protocol+"//"+location.host;function rz(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),q$(c,"")}return q$(n,t)+r+s}function l2e(t,e,n,r){let s=[],i=[],o=null;const a=({state:h})=>{const f=rz(t,location),m=n.value,g=e.value;let y=0;if(h){if(n.value=f,e.value=h,o&&o===m){o=null;return}y=g?h.position-g.position:0}else r(f);s.forEach(v=>{v(n.value,m,{delta:y,type:Uv.pop,direction:y?y>0?ww.forward:ww.back:ww.unknown})})};function c(){o=n.value}function l(h){s.push(h);const f=()=>{const m=s.indexOf(h);m>-1&&s.splice(m,1)};return i.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(Fn({},h.state,{scroll:ZI()}),"")}function d(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:d}}function G$(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?ZI():null}}function u2e(t){const{history:e,location:n}=window,r={value:rz(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const d=t.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:c2e()+t+c;try{e[u?"replaceState":"pushState"](l,"",h),s.value=l}catch(f){console.error(f),n[u?"replace":"assign"](h)}}function o(c,l){const u=Fn({},e.state,G$(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=Fn({},s.value,e.state,{forward:c,scroll:ZI()});i(u.current,u,!0);const d=Fn({},G$(r.value,c,null),{position:u.position+1},l);i(c,d,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function d2e(t){t=t2e(t);const e=u2e(t),n=l2e(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Fn({location:"",base:t,go:r,createHref:r2e.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function h2e(t){return typeof t=="string"||t&&typeof t=="object"}function sz(t){return typeof t=="string"||typeof t=="symbol"}const iz=Symbol("");var K$;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(K$||(K$={}));function Rg(t,e){return Fn(new Error,{type:t,[iz]:!0},e)}function Ol(t,e){return t instanceof Error&&iz in t&&(e==null||!!(t.type&e))}const Q$="[^/]+?",f2e={sensitive:!1,strict:!1,start:!0,end:!0},p2e=/[.+*?^${}()[\]/\\]/g;function m2e(t,e){const n=Fn({},f2e,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let d=0;d<l.length;d++){const h=l[d];let f=40+(n.sensitive?.25:0);if(h.type===0)d||(s+="/"),s+=h.value.replace(p2e,"\\$&"),f+=40;else if(h.type===1){const{value:m,repeatable:g,optional:y,regexp:v}=h;i.push({name:m,repeatable:g,optional:y});const _=v||Q$;if(_!==Q$){f+=10;try{new RegExp(`(${_})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${m}" (${_}): `+k.message)}}let A=g?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(A=y&&l.length<2?`(?:/${A})`:"/"+A),y&&(A+="?"),s+=A,f+=20,y&&(f+=-8),g&&(f+=-20),_===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",m=i[h-1];d[m.name]=f&&m.repeatable?f.split("/"):f}return d}function c(l){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:m,repeatable:g,optional:y}=f,v=m in l?l[m]:"";if(Ka(v)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const _=Ka(v)?v.join("/"):v;if(!_)if(y)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=_}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function g2e(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function oz(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=g2e(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Y$(r))return 1;if(Y$(s))return-1}return s.length-r.length}function Y$(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const y2e={type:0,value:""},w2e=/[a-zA-Z0-9_]/;function v2e(t){if(!t)return[[]];if(t==="/")return[[y2e]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function d(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function h(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&d(),o()):c===":"?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:c==="("?n=2:w2e.test(c)?h():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),d(),o(),s}function b2e(t,e,n){const r=m2e(v2e(t.path),n),s=Fn(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function _2e(t,e){const n=[],r=new Map;e=e8({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,h,f){const m=!f,g=J$(d);g.aliasOf=f&&f.record;const y=e8(e,d),v=[g];if("alias"in d){const k=typeof d.alias=="string"?[d.alias]:d.alias;for(const S of k)v.push(J$(Fn({},g,{components:f?f.record.components:g.components,path:S,aliasOf:f?f.record:g})))}let _,A;for(const k of v){const{path:S}=k;if(h&&S[0]!=="/"){const R=h.record.path,T=R[R.length-1]==="/"?"":"/";k.path=h.record.path+(S&&T+S)}if(_=b2e(k,h,y),f?f.alias.push(_):(A=A||_,A!==_&&A.alias.push(_),m&&d.name&&!X$(_)&&o(d.name)),az(_)&&c(_),g.children){const R=g.children;for(let T=0;T<R.length;T++)i(R[T],_,f&&f.children[T])}f=f||_}return A?()=>{o(A)}:yw}function o(d){if(sz(d)){const h=r.get(d);h&&(r.delete(d),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(d);h>-1&&(n.splice(h,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function c(d){const h=C2e(d,n);n.splice(h,0,d),d.record.name&&!X$(d)&&r.set(d.record.name,d)}function l(d,h){let f,m={},g,y;if("name"in d&&d.name){if(f=r.get(d.name),!f)throw Rg(1,{location:d});y=f.record.name,m=Fn(Z$(h.params,f.keys.filter(A=>!A.optional).concat(f.parent?f.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),d.params&&Z$(d.params,f.keys.map(A=>A.name))),g=f.stringify(m)}else if(d.path!=null)g=d.path,f=n.find(A=>A.re.test(g)),f&&(m=f.parse(g),y=f.record.name);else{if(f=h.name?r.get(h.name):n.find(A=>A.re.test(h.path)),!f)throw Rg(1,{location:d,currentLocation:h});y=f.record.name,m=Fn({},h.params,d.params),g=f.stringify(m)}const v=[];let _=f;for(;_;)v.unshift(_.record),_=_.parent;return{name:y,path:g,params:m,matched:v,meta:A2e(v)}}t.forEach(d=>i(d));function u(){n.length=0,r.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function Z$(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function J$(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:E2e(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function E2e(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function X$(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function A2e(t){return t.reduce((e,n)=>Fn(e,n.meta),{})}function e8(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function C2e(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;oz(t,e[i])<0?r=i:n=i+1}const s=I2e(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function I2e(t){let e=t;for(;e=e.parent;)if(az(e)&&oz(t,e)===0)return e}function az({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function T2e(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Jq," "),o=i.indexOf("="),a=$v(o<0?i:i.slice(0,o)),c=o<0?null:$v(i.slice(o+1));if(a in e){let l=e[a];Ka(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function t8(t){let e="";for(let n in t){const r=t[n];if(n=Wxe(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Ka(r)?r.map(i=>i&&$R(i)):[r&&$R(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function S2e(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Ka(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const x2e=Symbol(""),n8=Symbol(""),JI=Symbol(""),cz=Symbol(""),FR=Symbol("");function P0(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ed(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=h=>{h===!1?c(Rg(4,{from:n,to:e})):h instanceof Error?c(h):h2e(h)?c(Rg(2,{from:e,to:h})):(o&&r.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},u=i(()=>t.call(r&&r.instances[s],e,n,l));let d=Promise.resolve(u);t.length<3&&(d=d.then(l)),d.catch(h=>c(h))})}function Jx(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Yq(c)){const u=(c.__vccOpts||c)[e];u&&i.push(Ed(u,n,r,o,a,s))}else{let l=c();i.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Mxe(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Ed(f,n,r,o,a,s)()}))}}return i}function r8(t){const e=Eo(JI),n=Eo(cz),r=_r(()=>{const c=_s(t.to);return e.resolve(c)}),s=_r(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],d=n.matched;if(!u||!d.length)return-1;const h=d.findIndex(Pg.bind(null,u));if(h>-1)return h;const f=s8(c[l-2]);return l>1&&s8(u)===f&&d[d.length-1].path!==f?d.findIndex(Pg.bind(null,c[l-2])):h}),i=_r(()=>s.value>-1&&k2e(n.params,r.value.params)),o=_r(()=>s.value>-1&&s.value===n.matched.length-1&&nz(n.params,r.value.params));function a(c={}){if(O2e(c)){const l=e[_s(t.replace)?"replace":"push"](_s(t.to)).catch(yw);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:_r(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function P2e(t){return t.length===1?t[0]:t}const R2e=Su({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:r8,setup(t,{slots:e}){const n=yp(r8(t)),{options:r}=Eo(JI),s=_r(()=>({[i8(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[i8(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&P2e(e.default(n));return t.custom?i:S9("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),N2e=R2e;function O2e(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function k2e(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Ka(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function s8(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const i8=(t,e,n)=>t??e??n,D2e=Su({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Eo(FR),s=_r(()=>t.route||r.value),i=Eo(n8,0),o=_r(()=>{let l=_s(i);const{matched:u}=s.value;let d;for(;(d=u[l])&&!d.components;)l++;return l}),a=_r(()=>s.value.matched[o.value]);KE(n8,_r(()=>o.value+1)),KE(x2e,a),KE(FR,s);const c=Lt();return Tf(()=>[c.value,a.value,t.name],([l,u,d],[h,f,m])=>{u&&(u.instances[d]=l,f&&f!==u&&l&&l===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Pg(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=s.value,u=t.name,d=a.value,h=d&&d.components[u];if(!h)return o8(n.default,{Component:h,route:l});const f=d.props[u],m=f?f===!0?l.params:typeof f=="function"?f(l):f:null,y=S9(h,Fn({},m,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(d.instances[u]=null)},ref:c}));return o8(n.default,{Component:y,route:l})||y}}});function o8(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const M2e=D2e;function B2e(t){const e=_2e(t.routes,t),n=t.parseQuery||T2e,r=t.stringifyQuery||t8,s=t.history,i=P0(),o=P0(),a=P0(),c=iee(ud);let l=ud;Rm&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Yx.bind(null,ce=>""+ce),d=Yx.bind(null,Kxe),h=Yx.bind(null,$v);function f(ce,oe){let ge,Ne;return sz(ce)?(ge=e.getRecordMatcher(ce),Ne=oe):Ne=ce,e.addRoute(Ne,ge)}function m(ce){const oe=e.getRecordMatcher(ce);oe&&e.removeRoute(oe)}function g(){return e.getRoutes().map(ce=>ce.record)}function y(ce){return!!e.getRecordMatcher(ce)}function v(ce,oe){if(oe=Fn({},oe||c.value),typeof ce=="string"){const te=Zx(n,ce,oe.path),me=e.resolve({path:te.path},oe),we=s.createHref(te.fullPath);return Fn(te,me,{params:h(me.params),hash:$v(te.hash),redirectedFrom:void 0,href:we})}let ge;if(ce.path!=null)ge=Fn({},ce,{path:Zx(n,ce.path,oe.path).path});else{const te=Fn({},ce.params);for(const me in te)te[me]==null&&delete te[me];ge=Fn({},ce,{params:d(te)}),oe.params=d(oe.params)}const Ne=e.resolve(ge,oe),mt=ce.hash||"";Ne.params=u(h(Ne.params));const Q=Zxe(r,Fn({},ce,{hash:zxe(mt),path:Ne.path})),Z=s.createHref(Q);return Fn({fullPath:Q,hash:mt,query:r===t8?S2e(ce.query):ce.query||{}},Ne,{redirectedFrom:void 0,href:Z})}function _(ce){return typeof ce=="string"?Zx(n,ce,c.value.path):Fn({},ce)}function A(ce,oe){if(l!==ce)return Rg(8,{from:oe,to:ce})}function k(ce){return T(ce)}function S(ce){return k(Fn(_(ce),{replace:!0}))}function R(ce){const oe=ce.matched[ce.matched.length-1];if(oe&&oe.redirect){const{redirect:ge}=oe;let Ne=typeof ge=="function"?ge(ce):ge;return typeof Ne=="string"&&(Ne=Ne.includes("?")||Ne.includes("#")?Ne=_(Ne):{path:Ne},Ne.params={}),Fn({query:ce.query,hash:ce.hash,params:Ne.path!=null?{}:ce.params},Ne)}}function T(ce,oe){const ge=l=v(ce),Ne=c.value,mt=ce.state,Q=ce.force,Z=ce.replace===!0,te=R(ge);if(te)return T(Fn(_(te),{state:typeof te=="object"?Fn({},mt,te.state):mt,force:Q,replace:Z}),oe||ge);const me=ge;me.redirectedFrom=oe;let we;return!Q&&Jxe(r,Ne,ge)&&(we=Rg(16,{to:me,from:Ne}),se(Ne,Ne,!0,!1)),(we?Promise.resolve(we):x(me,Ne)).catch(ve=>Ol(ve)?Ol(ve,2)?ve:V(ve):Y(ve,me,Ne)).then(ve=>{if(ve){if(Ol(ve,2))return T(Fn({replace:Z},_(ve.to),{state:typeof ve.to=="object"?Fn({},mt,ve.to.state):mt,force:Q}),oe||me)}else ve=M(me,Ne,!0,Z,mt);return D(me,Ne,ve),ve})}function b(ce,oe){const ge=A(ce,oe);return ge?Promise.reject(ge):Promise.resolve()}function E(ce){const oe=pe.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(ce):ce()}function x(ce,oe){let ge;const[Ne,mt,Q]=L2e(ce,oe);ge=Jx(Ne.reverse(),"beforeRouteLeave",ce,oe);for(const te of Ne)te.leaveGuards.forEach(me=>{ge.push(Ed(me,ce,oe))});const Z=b.bind(null,ce,oe);return ge.push(Z),Me(ge).then(()=>{ge=[];for(const te of i.list())ge.push(Ed(te,ce,oe));return ge.push(Z),Me(ge)}).then(()=>{ge=Jx(mt,"beforeRouteUpdate",ce,oe);for(const te of mt)te.updateGuards.forEach(me=>{ge.push(Ed(me,ce,oe))});return ge.push(Z),Me(ge)}).then(()=>{ge=[];for(const te of Q)if(te.beforeEnter)if(Ka(te.beforeEnter))for(const me of te.beforeEnter)ge.push(Ed(me,ce,oe));else ge.push(Ed(te.beforeEnter,ce,oe));return ge.push(Z),Me(ge)}).then(()=>(ce.matched.forEach(te=>te.enterCallbacks={}),ge=Jx(Q,"beforeRouteEnter",ce,oe,E),ge.push(Z),Me(ge))).then(()=>{ge=[];for(const te of o.list())ge.push(Ed(te,ce,oe));return ge.push(Z),Me(ge)}).catch(te=>Ol(te,8)?te:Promise.reject(te))}function D(ce,oe,ge){a.list().forEach(Ne=>E(()=>Ne(ce,oe,ge)))}function M(ce,oe,ge,Ne,mt){const Q=A(ce,oe);if(Q)return Q;const Z=oe===ud,te=Rm?history.state:{};ge&&(Ne||Z?s.replace(ce.fullPath,Fn({scroll:Z&&te&&te.scroll},mt)):s.push(ce.fullPath,mt)),c.value=ce,se(ce,oe,ge,Z),V()}let $;function X(){$||($=s.listen((ce,oe,ge)=>{if(!Se.listening)return;const Ne=v(ce),mt=R(Ne);if(mt){T(Fn(mt,{replace:!0,force:!0}),Ne).catch(yw);return}l=Ne;const Q=c.value;Rm&&o2e(W$(Q.fullPath,ge.delta),ZI()),x(Ne,Q).catch(Z=>Ol(Z,12)?Z:Ol(Z,2)?(T(Fn(_(Z.to),{force:!0}),Ne).then(te=>{Ol(te,20)&&!ge.delta&&ge.type===Uv.pop&&s.go(-1,!1)}).catch(yw),Promise.reject()):(ge.delta&&s.go(-ge.delta,!1),Y(Z,Ne,Q))).then(Z=>{Z=Z||M(Ne,Q,!1),Z&&(ge.delta&&!Ol(Z,8)?s.go(-ge.delta,!1):ge.type===Uv.pop&&Ol(Z,20)&&s.go(-1,!1)),D(Ne,Q,Z)}).catch(yw)}))}let P=P0(),L=P0(),W;function Y(ce,oe,ge){V(ce);const Ne=L.list();return Ne.length?Ne.forEach(mt=>mt(ce,oe,ge)):console.error(ce),Promise.reject(ce)}function J(){return W&&c.value!==ud?Promise.resolve():new Promise((ce,oe)=>{P.add([ce,oe])})}function V(ce){return W||(W=!ce,X(),P.list().forEach(([oe,ge])=>ce?ge(ce):oe()),P.reset()),ce}function se(ce,oe,ge,Ne){const{scrollBehavior:mt}=t;if(!Rm||!mt)return Promise.resolve();const Q=!ge&&a2e(W$(ce.fullPath,0))||(Ne||!ge)&&history.state&&history.state.scroll||null;return Pb().then(()=>mt(ce,oe,Q)).then(Z=>Z&&i2e(Z)).catch(Z=>Y(Z,ce,oe))}const ue=ce=>s.go(ce);let Ee;const pe=new Set,Se={currentRoute:c,listening:!0,addRoute:f,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:g,resolve:v,options:t,push:k,replace:S,go:ue,back:()=>ue(-1),forward:()=>ue(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:L.add,isReady:J,install(ce){const oe=this;ce.component("RouterLink",N2e),ce.component("RouterView",M2e),ce.config.globalProperties.$router=oe,Object.defineProperty(ce.config.globalProperties,"$route",{enumerable:!0,get:()=>_s(c)}),Rm&&!Ee&&c.value===ud&&(Ee=!0,k(s.location).catch(mt=>{}));const ge={};for(const mt in ud)Object.defineProperty(ge,mt,{get:()=>c.value[mt],enumerable:!0});ce.provide(JI,oe),ce.provide(cz,fO(ge)),ce.provide(FR,c);const Ne=ce.unmount;pe.add(ce),ce.unmount=function(){pe.delete(ce),pe.size<1&&(l=ud,$&&$(),$=null,c.value=ud,Ee=!1,W=!1),Ne()}}};function Me(ce){return ce.reduce((oe,ge)=>oe.then(()=>E(ge)),Promise.resolve())}return Se}function L2e(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>Pg(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Pg(l,c))||s.push(c))}return[n,r,s]}function lz(){return Eo(JI)}const $2e="/assets/planet-arrow-BTo6e6jt.png",U2e="/assets/pattern-blur-left-BLI5Zzee.png",F2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPcAAAAqCAYAAABvLM2iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA0vSURBVHgB7Z1rbtvGFsfPkLKVAAXiu4KoK4izgjArqL2COEAeKO6H2EBRx8mHKB/iFwrU/lBc1M6FlRUkWYHZFcRZQZQV3BQoUD9Ezj1/Dmm9yOHwJck1f0AiWSSHo+GcM2fOOTMSlJN2+2ih2bxYEsK+I6XvCCEXiESrf4bs8t/BPz7+B5Hnbmz82KWaIaJ25PZqcVveltL7KiWdvHjx9APNKFtb/2lZlrUkZeM2/pay9yeRj+fr0jUj6fmdn8+77fbDbzRFBGVkc/P3JX6wz/itQxnBl+b/9zc2nnSohnZ3DxalFMfcLgvjR6EUL+7PmkLc2Tl8xfVtxx0TgvbW1x+v0TUBSo4F+nh4UIsQXc/zl1++fHJCU8IyPXFr62Ble/vgCwv2e8oh2IAf/qIQ4mh7++0XlEfXHN+n9/GCDTASNI5ohkBnThJswMdWr9NzFWLuVbxgA9mybfErTZFG2glKOwWdzKHSQMcNhPxV2aMTl3mE8s3OFt3nzx89pIxsbx8em56LKcnGxtP26Ocw54h6Ld21UIY0U9hO2hlCWPf4pUPXAJ6K8tREe4qD5zwt81wr3Jubb9kEl0fJo0tRgtHpC5t6bTbnXlMp+E6yNh27P4RsLUvjo034Osf0fDbbunGfN5unC2m6tbp2zwf3hQWeRlCNwuT5fPedd4tfpiLciWY55lb8MN9PooPB1MP9aArcvHnuZDnfsugHKgFYKzwyax86H5/afC0O37dS68OWyp90bYDTOBk8359+evSVpkSscOucJlUxLQGX0s4orLAMysHzSGut+L7cpxliY+Oxq5yiSSA64u3RNcH3xb7+OE31+Y0JN8zOIoIthL/G19+nHExDwDFvMj33zZuDRXOTP50XLx7vSSkfDgpMOJpDiO7PZlSht8x1ezcs5EHYszOL3v0qiZ4fv3UjK6z//ORDVoZtmiJDEygVv2x8KmKKq0752GWnk6ScRGVQDuDRzyqApvfb2fl9VUorowdUdPI47WpqijI0csMrPgtOHHjSlTd5UpiZ2izYpcy3a2omwaW7NoxPOpQDmCLsRf0ghPeZHSpdfKbMFcmWgLjDZzjZlIZsNZvnq/ymTRMgDN9oCUNXDpUIt/ke3/tW0nEVRhs3zbe2Dh1WgA/irjk9tYe8/6g3Ow1XlGJCiFC08Ll6ZjCtrRMpz/dNzOnd3d8Wfb/5THcOP/d3Wayufv2Q6SgX2WHZGu4rUaZjUM+PWbPgovK5jHtcLvIsFqLy0QY8L2bHpjjxfe9j1qzAnZ3/sm8qOewKeVhffzrmg9C1o+f5+4OJL6P1H7RK8fxQd54OvY57fo1+RSjXXJdv8Pr0tLE3Gk4a7ZRQHuoe/crpQBYcf7G9CcUIU+OR8/OeQyXD7fGDLibPgo+XzviR4JqVuGtYKcI728b73d2DZ1L22izYobD0Z2FhB3dgtbDFtmoSjvQ8a4F9FCukRf5BBqj8CSSB9KB4cB3ag8bjxqLF/7Wiem5vv+1SMKeN79DJ5Ye1GygfbaByCaBUrBWUzQr1tamvA2nXpBkQ+b4uv4wJt64dbTuoazCNg//LtntH/ec3TFR3bhfUvTOq2IOS1KgtWpSRyGkQFYgGjcxpfu/g7+hc1WDBlzUsmxbC0btM3KQDSjsmkxQC03uPJw930qCecEyyN3fP1GKCM1MlAFUPlA58O3zXFcoMFBuua7SSztjZefsgX/kquYoto0+DfXeSwMELGcoeipYrzWbveHA6a6kC4028lGp0Ig2HhkDWFhJS+AaLqsxG8HeUaqo0qblnOqicymEvDbWAJemYcEhL0rzc/0gzBEy3nZ2D9/kiHnIFTkOqkKxKJx7RTTL9VRhXdoqUr9Kk546nIeCo940b3q95nh/qffNm79ICt8Iv4FBGMLfqF4rk+aQylDbM44XH+ZhfUrm4cR9yHe8lOfF0IbBZG7kBK6pMSnQY61VVzkwo+TLyJ2A6x5evz33PeJcp5vbnsWjCK4P8fiUzlkm+cBxzc+ILXmF+m5j0+TWpLNBRRxFcB/k59i7BNEBZHaM0GknppoKdMf7MCXcR0A5pU5Q8KMstn19nHM+N+zQcZMrEqdqSqQYlM1bRxQlnZzcq7dw8ot6hkoBnGl795DPiFYkmBOZS4OyZbULrwk1Ll+yfb5fW5v0yG0umfp1+ffvJIX0wHRx3pJn7jZBsIx8i2Yo0Ppg+1VkypmR9fhyhCqI/7C3PJzye593ll69wpm1uHq7x5P9ZmdlbEeWujPL/xX4Cl+dl3+IsCRZ+CPGQptaFwDjU8VHmTtWZBMNrwvFdbtzopS7ZZd9IiW2uCPuH9hzViXvLo8IbmpmItjwYnA4OYuI34uvX1tcf7Q18tMc+If5bPtPUKbJk9mji4PkFTms3+iStviEt/GeR8fLIYXy/r9FUGp53HxXxffmNSgSNW57mFLdUmcKNPy5bv/zy9vbgJ7oQ2N9/z7s0w4ymg0IRe55M3UyB26fUkcps6oZY9rhgA3Ru/sfz9d73cY60sH842tIFnXCob0xAOXzUphSmlbykwnLD3xf1TVtwFA1cVt7RFiMqXO+RRxEPBd7zKADPmvpumGde2GwPl82VBo+4iV5ztkiWB//WrAILttGRcm6qJpuG2G2t1PMxM+/KgqMeqZYAWwsf0hJpko43m6ep5ft+fFQjDOO6pK3bNNbVi25cvF31OTOZMt6JJfb2QcggCHcdKe3c5+efn5wgO4c1z11o3FnyKvOI20k6Nq6l40NgrLg+hq8zKdy6sJ8aJScHWwKttHN8nwqEFO1W2hmspBP7H7eVdlkmRsJRi656/M9JR9LqG1FIuAdut4K4Ns9l//fmzW+BlotegRrVIeT0jmYApf1E7MOGwoqmAboQWK/Xc2mmSRZg085RHlaqYJydNQoo//SpJU8jdaZsl1K4uJDf0wThKa6uPbpkgFWmiQYNZ1nzgWDY9vyn0b3S+AGups0X4vjrL7v0DQB4xI0d2UIHioP3uhDYy5f/nhlLJJ7Jjs56ZKp1U3Wase+fV1p+2bClUbi+FpuhFX7pKJ1PCXg4YrqUkSoevC4k5vsqWy0lBFZTUxncB4sLN7uQPlPF8Gi9FL1nr3rWUdilCoAXMsmK4DjhA50HVj+frRknvaMWiYiYjHKRRXmdsHSOhhRcUxObTd1u9F4IO5Pnm+celSmfJCtC5ff6mmyq+AypmnhMFHpSdqAJZqOcbvVdetJOMZ/AdLA4RPCBcsAecI5p91KdZMpLrvbVChePOJSlgpZ0qSJ0ITHuMqvx19BJ/csp2TAbQMz3phtf0GGkbDXKw9cqFgxi0/71kDxYYUd1KRuu8oAHXvAguYC15zKC7lESC4+K++H2RXcjYbCsxrMsOeZoVA6n5VI+JuRRbPz9apM8Iya7pmIFoIpOJINwK1a8qXXafUx2kh2Yag1hsi8eW49X8pkHmzUgZsvOIyfDddzIh5945F6OhJyUe/5SWDY2Hl2OfGo3iR52VF3NcA/S54EXB/Xe3j7oZkvkqbZO/0Tg30hK+Y3AsUZDHLPzdc33L05Y2MNBwlq0besOH3f4TydM9+2MXs+Kel8I65Wu/HA55GWGHvqlbV+8pxT42iv5zAPhRlJHKHzGo6rasgYJLIculAM3LrRzJOiR6YQNF+9xVHg1z6ow7LZB1YPkCaN14xgdnj/Pt3HjdSdN+IDaGUUccRj18rP43Vli79DBIo+U8rGTy1J/JV/PSU+1DdaOd+gKEiSxYD6Bxqd8ONgRNNqcIVpLivf4DOtr8y33jF/9UzZZrIOrap7NAmdn83t5chxMQV9JWuc9jGxhvbv6l94vzcqcTS4z1ND4k845TiZYzTSRRoUXNIPXvzbJc6IWrVClzxR9uNw05/5uQ1eRS+EOE0xmYn9ttRpmMh7pLIn4dQisGGr1YHUCrjzaveUyBin0CWw4SFeYodxyOD58nwp9IR4Fj4v9IIGY+O93R4tA9OfUIbAywIaa6GNFTHRsGZxc/o/d09O5QusYVB98fPcqhr8GGVs4UrV21QFtOehlnxQmIbE6BFYe6GP9HAmzUTbcGz8Ir8btBT4IhFKFaIOftXLJHFeFbyffB6sg9jdkoV3ZMZZ7L/OcuDz/XaaC6KYWth2/kQS0PX9f7e+bnZ3NJZjuHneIhubai27SkfRpUNK1affUZ1Rh91HLSv4Nbdv2v8WXeeOk2ezlbKdhQitoBe/hhLUsf9H3bY6u+LfhwRZCfsO6B4zSiJOfnjZOso6k4UYHrto4cY6jO+SMli+l91VK++T83Hazlo+NLzh+nuiUS+pvxdvR74R7omvR7nvDjd6ehIArM+ifoS1ramYFkXaC+ukaeVTR/mjQbK/jtr+pqakpRupmDTBtQgdFyfNw0cG8qxbsmppqSB25B1FZZw021eW9PCO5+uE1wU6Ui73a81xTUy2ZhHsQlYkmlljQ72BrovitgtWvKPI79jTLD3DyXPXwQk3NVSG3cI+CJPxm83RIwOvRuaZmevwf6Y1UOUuAKXUAAAAASUVORK5CYII=",j2e="/assets/association-brand2-BzqF2xG8.png",V2e="/assets/association-brand3-xe7ttjPV.png",H2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO0AAAAuCAYAAADEMZ6VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAyfSURBVHgB7V1dThvJFj7VtoFII11mBddZwcAKYlYQWEGMBBmN7gNBGg2QPOA8DJB5SfJ0lQQJswLICnBWkNwVxFnB5S04uLvu+VzdSWN3/XS7jfGd+iQLu/+q6tQ5p85fNYI8PGIcHr5pCRHs685Xq6L+++8bX8hjqqhSTrRaJ4ut1volzQj++uvtUhjKVd35KBLnz549/kQeHjMCZ6EF8zODv5Sy/5x/dmhGEIa0ZFo9gkB2+Y8XWo9bB1s2bebNR7rzu7ubIut4QA5ggd1igf0oBC3t7W12yMPDY2qwCu2LF+/2WWBf4buU8gN5eHhMFUahhcBKSa3kNwutNyM9PKYMrdAeHv67kRZYBdElDw+PqUIbiBKicpJxtEslghVDvddbuJylaHQa6D/+TnMMSR+m3Y/bBrIY8/NXi/i+t/dblyaMNJ1voz0TMoX28PBtkwW0ThOGlLWl+flvS/y1RTMAMMq9e/0ttkAa/LORHF9Y6MOVuJRSnEt5fcqT2knOHR0dn3FiaSn7iaLLEcIVKtgHBAb57+JoP+gTuzKnHDvv3BaDKVdKNk3XcKS0tbOzcZo+dnT07oI5oZ59R9DZ3d1YT37B+hOi9kgIucpZjMWEffkZ+NMpc8yqrbmH/LzVYVlAe6CxEILpHH3Y23vcJkccHb39nHzn+xf5OU7XJtjdfXw/U2iZGTQpEh1xiyEI6CFPJHKoLbrjQASdGaWVFpI01HHZFKLaZEFtX11VttWqJxf1ClCQK6Dp+dls/fQbyURnTXjcP2Y40SCqdVmY2js7m89pgoCSV66Ufjys0F6zAJ5mnKnr6aP4TSmq6xN+BvOKJA2jfx8z9+d5HkFKA2NR/I8+RaQbExQm94XTiQLzzQorcmwTz1UwCezwtWmM+LTQMDYilgWlMWnx8PBdg+4weFJOEEHXCewoZHN+vn8BZqMS8OLF8aMgqH6k1Oru2I86hIn7/zlt3pUJpUxo33yV6O7tbTyhAlBmcP9CCawLJPdHnLCyekk5gHaw6uPe/FamanOSdE5jRGjZl9UShzu2RCUh1s4xU0vHCbl9qMk3m31ZgCZmM3afxkRsdrbdFUYWwFS1i0kwFPPLhZnJRZddhlwuQBqgoVrV8oHp9cRVcEGXhYXrAkpxpNWJ0TmNjOix+EV3MQvtg7JWj7R2DgLxgO4gYsVSaIUAcG8RhktwcHC8OhrBL9ybAUOVNX8AFIptVQqCaK24jynq49IfNLRdZ1c8uVotnc7DyFhp9UwGbX/v3rcmjYmMya7THYTd7LOj6AoJbc0Mn8vEc+hNnQN/hYUgjR9+rB5Mv+0//hinrnt8d4zjJi9NAuSiePJD1suwsnQYEVobk0lZ2aIxkJX/Hc/0mwxcI+jMmEixdPhbm330cx5Nl0qAlNVVW/uqbdFGEAQfcqgJD4Jga9xVwMWPReCJA2CvqFSAtqKtPq7171BU15mrLcbhYsncpLN47TLHWOWzYzVJ//GxPSd97fdx59/lAyLAV+AJ2aacUKtH9cweNZs+2BV4ZLsGE8hR4tZwbvRmBLIYgkBumaPLohtF1yvDpufBwbsnWF1I22dajFfbFhVGldNYeusI6ZCigadswC+W6xyd7aSPKuVR43akcSGJ57I9ery2j2i0CZo5hkC2bIorbreTPnYzhYUNA6Kuuz99bRpOGwaGoZz8YytTp4EVFhHQu7iqDiNeiRqma3gcz8GYWcUMCP1LGa7Eq3BumCP4SfujAgs8fbr5Kl51teDV9iEVBMxJs5+OApz+GpUGFcjK2qiC8TNjs9Bi9TOikW1dRA3TTeY53mxFERkXLmRHJuHbZgitm3mHiKbyB8xAp7Eyc47xQiewzARj+D3lY37+yhI8Qgpjs2W6AgwVRZGNmTLBQmVrv20K7vR6c6/UPGZ/eO4WizBTGIZrNnNSp0yKQuU/zc/DSmhTkJw2ukFTFeEVdf0d9jmGgiSDma6smn5pGZcEGeZx8Mk1ABDnAJtKs9+sRIlXVo4K95/Y/WR5p96GAKExmfA83vfkAAhPXL2US0BYg3PSngzty1PT/fHKcJ9KR2AxB2l7d7fcCiyXggWM9+joLdNEGMzkEZ6ukxkdcgAqooQIGrrzHExcIip3//mI0AoRfpAysIbJf0AllvEoVUInLxMN5uq78nXndIfAQrMozMVKTpYBmOnw8LjLZlIubctM8E/T+VpNfKYpwKR8YEru7pYdeHJndlVWaLyifvN3pW66muXgP+TUboXb1TM6eIlKxoh5/PXrXJsKQk2qqFNuhB2aKbhvnOAJLeTXzhJU4MlsSk4eYTfP1RzoMwpTFAmneRPi2nKdmLzQxqZVh24NZv/sLoJNnjsfTLtNIDA17VJUKWs5XRBxS8q0fKWdmfKBqcMT0aBbAAcunIrZ//zz7VKlQme687yibe/s/FqKmc0pk0uLaV8nR8Q7cXKB/aQvbCJrz/d6vZ/5z63HARDs0ZnITLMzjmMsl6mA81STVSoh51z1NMOcUj44tW2Lf0wCmUKL8DoHmF7b8l/jAjkw10kOgpCJXq3rzkfRwG8sRWihhc2BoEHKxOq/xYUkuVdljhEYGaxarTbI4lfjdaim8wiS5d17G4Zinc3KTMWJccble8tl7elNNpO4vJcsnhMTuukf7Gt+4kVAC56DX8gB7NM+MOV6WVmUnhnRqiaE0eGr0MQgur1epeV6NTZ4G58mgsz6ZZvvku2fWn3shos5yGmuQqVsURR0TOdtDKqKO4J93UdVReUXrLk5+mjOTcr6wkL/jEqESynpwcEbBE4bpmv6/X43/fv6uta1pImsc6zSRubNLpz2KyxDurRcoL8Bk4okeTlleTehEuZ5GCfem9o1XDJCZAyaV3OjtRBF3zIS57/ZJhSa+ES3m0Nt8zrGmz8aVADfvlU6NobS5cgdSwwLWyS23GTctzJrphumegC82jcIhKU90X327F83hAf8ZFuUTHOs6IyNBqb7EaAr7i7ocrzGMkY0yJ1bKXcXRFLhUmgwyI9qhZCJdIEN6Em4ntvZsvV7eDITqFyoOe/HK+lntBdF4XshooGQKR/H3q4JKlX0jp9J2qqzOEdex5sy2Ar5hFevcNurSkmZ27bleW2Qsr9uqm5TFXNvvnCMwepCuLWn6gF4Xl8nKxdbGzzeykN2i5oOj+honmuJ3fyYY9CZD6BgZrFaxRstyFp/wH0zFtfAdOZnaOdYKY03p2lrsNernVvLGCFcKMnjh4810aoT8pzN7sLBCrcVQjZ5Ql/iYxcc+V7fVujIcLLJwnKGii9V9eXSrgv6Lfs1gzdlXLBJ+l8wl1vbg0qfDo0BzF8YkjGAiL4geEilARv6g5cJnUFz133OumBnTIcO2Z/QjNv9XKnMQVm17LEK0NlcGMJukMV0htKASyNOks9PP4X/cKo9xiTxAJso2i5oLnd4kCs7O4/XxglSuBPZDaxE2qRtC4pFFCpDLAOTan+cDelpwExWu5r0qFSCs3E2hBet3U7DFuzkmMd2Ge2MtivXbdeAn4u0nWvDADQHXiwFAVQrr0mAUeMqXuNavLysrP9MANOsHCKLti1FhGDceD79wKzpUEGoYvjylJQqgC8vJfP1a82ixFGFVD0rWjSvfM7x6G8LdmK/L5uxuXesmaDo7MbvRerTC+3yQYew8kKAr66qP8dCPPiw5lrGMZzDDomy/42IKsQfl8gDv9qaH1bBinClKOPgrQ00JpiWa2VE8WNGalGJUPQRxhUFudaFhbBwYIr9vrViSto92Kl2ZdlXRhfkpfPe3q+5szSFhDYNECUW4sEHmmvS795VRO7fL26quwfCEp8+T1tgMs71ro331gaFmL7LYAYqBDAvrUyqzFApZZsZL5suO8KyABoiP5xHcNUrZPMFO8fkKRqHzr1eNVfMaGyhnRbUXkqY6m5+dvwu4HVlquczEfO1JTia3F9++nSjcFoluw+bLTCV3S35DsQRnqvA32T/aZpLTh/Bm7x7sBOAlqCpjbHjii2sdIWCnTfn2dkt6Si+2rhflM6xYm6GoVx2mV9B/ydQrw6pLXFaYChiCb+y3Jd2Ix+MLVc3d3DAf6qdD1sZiKByHjHTp6tU5GXR1Rj5yX4/qKfHi1I9VVNbbLwqaKSvOjMxpe1eIGu86oXcQndfZ/hl7lnzjHFzZLVThmWTRvz61qXhuUZ7YVjpIp8+KasyaXv4+CB4RR4eU0ReofWYYfPYw+PvCi+0Hh4zBi+0Hh4zBi+0Hh4zBi+0Hh4zBi+0Hh4zBi+0Hh4zBi+0Hh4zBi+0Hh4zBi+0Hh4zhgL/Nc/DozyoHVQeefA/98UUo2ZHp88AAAAASUVORK5CYII=",q2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAAAhCAYAAAB0k1H/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAe8SURBVHgB7Zx/btpIFMffjKFs/lpusO4J2p5gzQmWnCBESlqt9o8kUtVA+kfhj+ZHVanZv1ZNIoWeoOkJ4p6g6Qni3oCVqm1YwLPvMSYBe2xsY4Lx+iMRyNjGeOY7M2/evBkGObE5OPhLxzd8afQOQogOY3an2/3pqtlc70DOwmBO4UQGC68zXnhJfc80Dg9PL1FCOiQIY2Jnd/fZRZhz9/ffVzWNreFVhhBQDvhWC/+YQvQ+NBq/mxCT/f2zKuf2u+lnDu+H8CshBl8BBibe14KQUPkxpl260+v1pw8hAoeHJ9futEKBG8+fb3zzv2Z6mQrBsNEAfImObQt8PtsMyteCfBimQySYVSrdVPDDmCALNbzxK4hIqfRvC9+a4a+gDGA6JIhtBwlU8ubNyRZmbpPEjK8QDAsK86RQOzw8s4SwW43G0zZEBHuAcsjndc6xDYYFgeWBgjlrY8VqhRd4qPvM4Tuml+nwkWAocPzMqliBXwXlK4eIUK3BzKq4M6vR2KRCb0HGQEE/Pjg4/WLb7Di4hQ5CYGvIzrEgzuP2bDHvSxXr+ujoNHKDsxzc5uu1O19jCFtU/FoAEjee8SdkhKOjszVsIS6xMj+GRCChFS/vV9zUykEzu+ImSOCT+RpJ2Dg4Wn/x4ulV0Dn1+sY2ZuQHmBtkS4qAl+IKRiaT/zWcC4+NL0Ut2kGttPxeMPFTm15Y6S/k/0F4CyEqd/edfOFv9S0bEjf2PAYsCc6zmO6X8+yqK3Q0vz6O/itA+BuFthG73cJ2qdR/lFxLd0e9vlkJOi4HL0wfT8PBxk4U+5bMD7wm6HwSUQt/i6k62Gyel0ulXlWOOSZ/i0SKG897Esd7QoXulw+ywhSaeO819zHqtvEt0mBwgez45e/BwUlNlbekNzpGZR2qxZaiJjMjHFRYKO6KXwuaZkiUOJj8qDpGrQXa2qskKswP0/871juUueRR8B93CH1lpXcOCUNmIv62mvq+Ql+mVtsPylv0/Cj1hZV3WKGnCjuqqEdQ4frdPM2srPS31K0ss2y7/2RvbyOUW3CEHFSLddUxtN+r8xKaU2am94ioQgagCoz5p8pXgxqnQGGTrRxH1JM3Xx5xUzdOtqjqGPqSV6P4hcehFgZ7gR3VsTgu0rCgq/CT4n46ZATqNVU2d7H4jx5oY5Odhs5zj60mfYfPmu50lX27XGiGKpV6rWmD5mns7W0eY17+hh8N1yGDWu0g0yYuaDZ1Rv7fO9jPkCHwGS0ctE+M5Th/UI7s7ssyI/vMlWoB9NuQAAH2dibMg0UgJ7C85MJ2ILsMvK0pYcY1QdzIVtlrlnHOfoU5wBj3fC/a+18hI0gPENPd6cUiu86F7VAq3ShdkyiEpH3yn7z3SN4tKgtd1BSHZjKp0gS6TBXjE2ZRXEou7FtkhJ4bdFsmKgS/SZS3b89+gYRAURuqgCbJwIQlh3pXnEl951NxTfoTeoIm+wwDcTypSYefCsEpQs2T3usJmjj5BqFgOk1EeFKZ9giHU9T6G6C8N7SSMqvmj0BX6Ik+noIzxGUhNJz461dVM8JynqE3HMfkwr5nGOt1Zs92GfzjTbcDrmE4cbPRhCUBn2/LnUaRffgXAqIrbytubor8DyDzhyIyIcNga72zu7t5PPo/F/Yto0D9SZK0fQnOuXKgSCN5SBgZYgwtCm9YHhMkMhS3UxkXNZGbIg44M3ilad70wWDwBELbvtMhG5G6UzdBK0yi4IgZW2j4fHNTOM7mEjVymXKTPFZ+E1u5sB16vaKlaX1POs5sGfgWKT4kGNtQDFJNiAYWal8Zf1KvZ6NlxomXVdu2PR6ksEsJc2E7UGbhlLcJLo8CTp6soXupmUTLJz0ZTHenx5k0ybBpMcS2eafReGZBTHIbewxV0BC5lVZW+okEKvkFPKGLqg0pJekxxn2RC3uMHz8etFXRYiju7VnDS+XSLKYrDpkvX/6x8NlAvx7AGWOE4vXrE+XA+Pt37W+4Z3Jhj0HmBtp1yjWbnMPHuMu5SNR+4bBpWgCNfmJPBXPGGKHQNL7lTWXWIgawubBddLsPjlWBSmSScF74oprx82M09esnalonOY9w1bigKfbZnUZjjDAVWu5LooxSNGEB5MJ2Qa0Lts6rPiZJmWb8UKyBAncE/Qpt82syY9RnMYv2/IAUgS32hTeNnjl48fFosx3VNPccgshCkXtFFNCiAhTujnraWkbjyf0sTs/JZywrAQW822UZqdfXgzfVGYo6dZMm1HuoPENyCr9wTRvw2PbgE23jJtM1XYbGKoORCHNRPVIsYWP39EgdhMNC7pKUfmg5Fz4j+Il7xN1KfOHEMkwjnaIeQf5x/93BRA1nTmuTHb26wGVAktrXfh/EMkVoESoVuPsVf6ekdCJXQ/cfJrhm00yzqAn6bWSKzfLMzh57C33O3MaeAhXO3TYKcQubWmmoyG0b0j+xQqZY3EXY0jQTlVnXiM5KFm1sylBrMkkd4BQFWq2Pg8JjuRHOcG2kEXS+jNlgFzKeYcOEmDjx2+ZkKp+7aJwK+FBuTjP9eWHYG9GzRt94ExRlZttiJhchOzp6vx1mt9H5wc00ubyiQDtG9ftcH19QKoXYu8ralLfcmqL4WNMG+kgvaLLQBkKdbrd4kbZgq/8A+3QBcq624K0AAAAASUVORK5CYII=";var aa;(function(t){t.NUMBER="NUMBER_NUMBER",t.HEX="NUMBER_HEX",t.STR="NUMBER_STR",t.BIGINT="NUMBER_BIGINT"})(aa||(aa={}));var wu;(function(t){t.HEX="BYTES_HEX",t.UINT8ARRAY="BYTES_UINT8ARRAY"})(wu||(wu={}));const vi={number:aa.BIGINT,bytes:wu.HEX},Ut={number:aa.HEX,bytes:wu.HEX};var Ql;(function(t){t.EARLIEST="earliest",t.LATEST="latest",t.PENDING="pending",t.SAFE="safe",t.FINALIZED="finalized",t.COMMITTED="committed"})(Ql||(Ql={}));var vw;(function(t){t.chainstart="chainstart",t.frontier="frontier",t.homestead="homestead",t.dao="dao",t.tangerineWhistle="tangerineWhistle",t.spuriousDragon="spuriousDragon",t.byzantium="byzantium",t.constantinople="constantinople",t.petersburg="petersburg",t.istanbul="istanbul",t.muirGlacier="muirGlacier",t.berlin="berlin",t.london="london",t.altair="altair",t.arrowGlacier="arrowGlacier",t.grayGlacier="grayGlacier",t.bellatrix="bellatrix",t.merge="merge",t.capella="capella",t.shanghai="shanghai"})(vw||(vw={}));const $k=Object.getPrototypeOf(Uint8Array);var a8=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const c8=Symbol.for("web3/base-provider");class Zb{static isWeb3Provider(e){return e instanceof Zb||!!(e&&e[c8])}get[c8](){return!0}send(e,n){this.request(e).then(r=>{n(null,r)}).catch(r=>{n(r)})}sendAsync(e){return a8(this,void 0,void 0,function*(){return this.request(e)})}asEIP1193Provider(){const e=Object.create(this),n=e.request;return e.request=function(s){return a8(this,void 0,void 0,function*(){return(yield n(s)).result})},e.asEIP1193Provider=void 0,e}}class z2e extends Array{constructor(e){super(),this._accountProvider=e}}const W2e=100,G2e=101,K2e=201,Q2e=202,Y2e=203,Z2e=204,J2e=205,X2e=206,ePe=207,tPe=208,nPe=300,rPe=301,sPe=310,iPe=311,oPe=400,aPe=402,cPe=405,lPe=407,uPe=408,dPe=410,hPe=411,fPe=412,pPe=413,mPe=414,gPe=415,yPe=416,wPe=417,vPe=418,bPe=419,_Pe=420,EPe=421,APe=422,CPe=423,IPe=424,TPe=425,SPe=426,xPe=427,PPe=428,RPe=429,NPe=430,OPe=431,kPe=432,DPe=433,MPe=434,BPe=435,LPe=436,$Pe=437,UPe=438,FPe=439,jPe=440,VPe=441,HPe=500,qPe=503,zPe=505,WPe=506,GPe=507,KPe=600,QPe=602,YPe=603,ZPe=604,JPe=701,XPe=702,eRe=703,tRe=704,nRe=705,rRe=706,sRe=707,iRe=709,oRe=801,aRe=802,cRe=4001,lRe=4100,uRe=4200,dRe=4900,hRe=4901,fRe=902,pRe=903,mRe=1001,gRe=1002,yRe=1003,wRe=1004,vRe=1005,bRe=1006,_Re=1008,ERe=1009,ARe=1010,CRe=1011,IRe=1012,TRe=1014,SRe=1015,xRe=1100,uz=1101,PRe=1200,BA=-32700,LA=-32600,$A=-32601,UA=-32602,FA=-32603,jA=-32e3,VA=-32001,HA=-32002,qA=-32003,zA=-32004,WA=-32005,GA=-32006;class Dt extends Error{get innerError(){return this.cause instanceof bw?this.cause.errors:this.cause}set innerError(e){Array.isArray(e)?this.cause=new bw(e):this.cause=e}constructor(e,n){super(e),Array.isArray(n)?this.cause=new bw(n):this.cause=n,this.name=this.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(new.target.constructor):this.stack=new Error().stack}static convertToString(e,n=!1){if(e==null)return"undefined";const r=JSON.stringify(e,(s,i)=>typeof i=="bigint"?i.toString():i);return n&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause,innerError:this.cause}}}class bw extends Dt{constructor(e){super(`Multiple errors occurred: [${e.map(n=>n.message).join("], [")}]`),this.code=tPe,this.errors=e}}class rn extends Dt{constructor(e,n){super(`Invalid value given "${Dt.convertToString(e,!0)}". Error: ${n}.`),this.name=this.constructor.name}}class l8 extends Dt{constructor(){super("Private key must be 32 bytes."),this.code=JPe}}class RRe extends Dt{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=XPe}}class NRe extends Dt{constructor(e){super(`"${e}"`),this.code=aRe}}class dz extends Dt{constructor(){super("Invalid key derivation function"),this.code=eRe}}class ORe extends Dt{constructor(){super("Key derivation failed - possibly wrong password"),this.code=tRe}}class kRe extends Dt{constructor(){super("Unsupported key store version"),this.code=nRe}}class DRe extends Dt{constructor(){super("Password cannot be empty"),this.code=rRe}}class MRe extends Dt{constructor(){super("Initialization vector must be 16 bytes"),this.code=sRe}}class BRe extends Dt{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=iRe}}class Jb extends Dt{constructor(e,n){super(e),this.code=HPe,n&&(this.errorCode=n.code,this.errorReason=n.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class jR extends Jb{constructor(e){super("Connection not open",e),this.code=qPe}}class LRe extends Jb{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=zPe}}class $Re extends Jb{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=WPe}}class URe extends Jb{constructor(e){super(`Request already sent with following id: ${e}`),this.code=GPe}}class bi extends Dt{constructor(e,n){super(e),this.code=nPe,this.receipt=n}}class u8 extends Dt{constructor(e,n){super(`The resolver at ${e} does not implement requested method: "${n}".`),this.address=e,this.name=n,this.code=rPe}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class XI extends bi{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,typeof e.data=="object"){let n;e.data&&"originalError"in e.data?n=e.data.originalError:n=e.data,this.data=n.data,this.cause=new XI(n)}else this.data=e.data}setDecodedProperties(e,n,r){this.errorName=e,this.errorSignature=n,this.errorArgs=r}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class Nf extends bi{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=sPe,this.cause=new XI(e)}}class FRe extends rn{constructor(e){var n,r;super(`data: ${(n=e.data)!==null&&n!==void 0?n:"undefined"}, input: ${(r=e.input)!==null&&r!==void 0?r:"undefined"}`,`You can't have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.`),this.code=iPe}}class jRe extends Dt{constructor(e){super(`ENS is not supported on network ${e}`),this.code=fRe}}class VRe extends Dt{constructor(){super("Network not synced"),this.code=pRe}}class d8 extends Dt{constructor(e){super(`Invalid parameters passed. "${typeof e<"u"?e:""}"`),this.hint=e,this.code=ePe}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class VR extends Dt{constructor(){super(...arguments),this.code=K2e}}class kl extends Dt{constructor(){super("The method you're trying to call is not implemented."),this.code=Q2e}}class hz extends Dt{constructor(){super(...arguments),this.code=Y2e}}class HRe extends Dt{constructor(){super(...arguments),this.code=Z2e}}class mn extends Dt{constructor(e,n){super(e),this.code=J2e,this.props=n??{}}}class qRe extends Dt{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=X2e}}class g1 extends Dt{constructor(){super(...arguments),this.code=KPe}}class HR extends Dt{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=QPe}}class Vl extends Dt{constructor(){super(...arguments),this.code=YPe}}class zRe extends Dt{constructor(){super(...arguments),this.code=ZPe}}class WRe extends rn{constructor(){super(...arguments),this.code=oRe}}class Uk extends Dt{constructor(e,n){super(e),this.receipt=n,this.code=oPe}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class KA extends Dt{constructor(e,n,r,s){super(`Transaction has been reverted by the EVM${r===void 0?"":`:
 ${Dt.convertToString(r)}`}`),this.reason=e,this.signature=n,this.receipt=r,this.data=s,this.code=aPe}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class fz extends KA{constructor(e,n,r,s,i,o,a){super(e),this.reason=e,this.customErrorName=n,this.customErrorDecodedSignature=r,this.customErrorArguments=s,this.signature=i,this.receipt=o,this.data=a,this.code=UPe}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class pz extends Uk{constructor(e){super(`Transaction has been reverted by the EVM${e===void 0?"":`:
 ${Dt.convertToString(e)}`}`,e),this.code=cPe}}class GRe extends Uk{constructor(){super("Raw transaction undefined"),this.code=lPe}}class h8 extends Uk{constructor(){super("Transaction not found"),this.code=NPe}}class KRe extends rn{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=uPe}}class QRe extends rn{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=$Pe}}class YRe extends rn{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=dPe}}class ZRe extends rn{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=hPe}}class JRe extends rn{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=fPe}}class XRe extends rn{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=BPe}}class eNe extends rn{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=LPe}}class tNe extends rn{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=pPe}}class nNe extends rn{constructor(e){var n,r;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${(n=e.chain)!==null&&n!==void 0?n:"undefined"}, "hardfork": ${(r=e.hardfork)!==null&&r!==void 0?r:"undefined"}`),this.code=mPe}}class rNe extends Dt{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=jPe}}class sNe extends rn{constructor(e){var n,r,s,i;super(`gas: ${(n=e.gas)!==null&&n!==void 0?n:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}, maxPriorityFeePerGas: ${(s=e.maxPriorityFeePerGas)!==null&&s!==void 0?s:"undefined"}, maxFeePerGas: ${(i=e.maxFeePerGas)!==null&&i!==void 0?i:"undefined"}`,'"gas" is missing'),this.code=gPe,this.cause=new rNe}}class iNe extends Dt{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=VPe}}class oNe extends rn{constructor(e){var n,r,s,i;super(`gas: ${(n=e.gas)!==null&&n!==void 0?n:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}, maxPriorityFeePerGas: ${(s=e.maxPriorityFeePerGas)!==null&&s!==void 0?s:"undefined"}, maxFeePerGas: ${(i=e.maxFeePerGas)!==null&&i!==void 0?i:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=MPe,this.cause=new iNe}}class aNe extends rn{constructor(e){var n,r;super(`gas: ${(n=e.gas)!==null&&n!==void 0?n:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=yPe}}class cNe extends rn{constructor(e){var n,r;super(`maxPriorityFeePerGas: ${(n=e.maxPriorityFeePerGas)!==null&&n!==void 0?n:"undefined"}, maxFeePerGas: ${(r=e.maxFeePerGas)!==null&&r!==void 0?r:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=wPe}}class lNe extends rn{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=vPe}}class mz extends rn{constructor(e){var n,r;super(`maxPriorityFeePerGas: ${(n=e.maxPriorityFeePerGas)!==null&&n!==void 0?n:"undefined"}, maxFeePerGas: ${(r=e.maxFeePerGas)!==null&&r!==void 0?r:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=bPe}}class uNe extends rn{constructor(e){super(e,"invalid transaction object"),this.code=_Pe}}class dNe extends rn{constructor(e){var n,r;super(`nonce: ${(n=e.nonce)!==null&&n!==void 0?n:"undefined"}, chainId: ${(r=e.chainId)!==null&&r!==void 0?r:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=EPe}}class hNe extends rn{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=APe}}class fNe extends rn{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=CPe}}class f8 extends rn{constructor(e){super(e,"unsupported transaction type"),this.code=IPe}}class gz extends rn{constructor(e){var n,r;super(`data: ${(n=e.data)!==null&&n!==void 0?n:"undefined"}, input: ${(r=e.input)!==null&&r!==void 0?r:"undefined"}`,`You can't have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.`),this.code=TPe}}class pNe extends Dt{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!
	Transaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=OPe}}function yz(t){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!
	Transaction Hash: ${t?t.toString():"not available"}`}class wz extends Dt{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${yz(e.transactionHash)}`),this.code=SPe}}class vz extends Dt{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${yz(e.transactionHash)}`),this.code=kPe}}class mNe extends rn{constructor(e){var n,r;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${(n=e.blockHash)===null||n===void 0?void 0:n.toString()}, transactionHash: ${(r=e.transactionHash)===null||r===void 0?void 0:r.toString()}`,"Receipt missing or blockHash null"),this.code=xPe}}class gNe extends rn{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=PPe}}class qR extends Dt{constructor(e){super(`Invalid signature. "${e}"`),this.code=DPe}}class p8 extends rn{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=RPe}}class yNe extends Dt{constructor(e,n){const r=[];e.forEach(s=>r.push(s.keyword)),super(`The following properties are invalid for the transaction type ${n}: ${r.join(", ")}`),this.code=FPe}}class tg extends rn{constructor(e){super(e,"can not parse as byte data"),this.code=gRe}}class Fk extends rn{constructor(e){super(e,"can not parse as number data"),this.code=yRe}}class jk extends rn{constructor(e){super(e,"invalid ethereum address"),this.code=vRe}}class wNe extends rn{constructor(e){super(e,"not a valid string"),this.code=mRe}}class bz extends rn{constructor(e){super(e,"invalid unit"),this.code=wRe}}class _z extends rn{constructor(e){super(e,"not a valid unit. Must be a positive integer"),this.code=SRe}}class vNe extends rn{constructor(e){super(e,"can not be converted to hex"),this.code=bRe}}class Ez extends rn{constructor(e){super(e,"value greater than the nibble width"),this.code=TRe}}class Vk extends rn{constructor(e){super(e,"not a valid boolean."),this.code=_Re}}class bNe extends rn{constructor(e){super(e,"not a valid unsigned integer."),this.code=ERe}}class m8 extends rn{constructor(e){super(e,"invalid size given."),this.code=ARe}}class g8 extends rn{constructor(e){super(e,"value is larger than size."),this.code=CRe}}class _Ne extends rn{constructor(e){super(e,"invalid string given"),this.code=IRe}}const ENe=t=>!Array.isArray(t)&&t.jsonrpc==="2.0"&&!!t&&(t.result===void 0||t.result===null)&&"error"in t&&(typeof t.id=="number"||typeof t.id=="string"),y8=t=>ENe(t)?t.error.message:"";class Rc extends Dt{constructor(e,n,r,s){var i;super(n??`Returned error: ${Array.isArray(e)?e.map(a=>y8(a)).join(","):y8(e)}`),this.code=W2e,n||(this.data=Array.isArray(e)?e.map(a=>{var c;return(c=a.error)===null||c===void 0?void 0:c.data}):(i=e?.error)===null||i===void 0?void 0:i.data),this.statusCode=s,this.request=r;let o;"error"in e?o=e.error:e instanceof Array&&(o=e.filter(a=>a.error).map(a=>a.error)),Array.isArray(o)&&o.length>0?this.cause=new bw(o):this.cause=o}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request,statusCode:this.statusCode})}}class eT extends Rc{constructor(e,n){super(e,void 0,n),this.code=G2e;let r;"error"in e?r=e.error:e instanceof Array&&(r=e.map(s=>s.error)),Array.isArray(r)?this.cause=new bw(r):this.cause=r}}class w8 extends Dt{constructor(e,n){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${n}`),this.code=uz}}class v8 extends Dt{constructor(e,n){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${n}`),this.code=uz}}const Az="An Rpc error has occured with a code of *code*",ti={[BA]:{message:"Parse error",description:"Invalid JSON"},[LA]:{message:"Invalid request",description:"JSON is not a valid request object	"},[$A]:{message:"Method not found",description:"Method does not exist	"},[UA]:{message:"Invalid params",description:"Invalid method parameters"},[FA]:{message:"Internal error",description:"Internal JSON-RPC error"},[jA]:{message:"Invalid input",description:"Missing or invalid parameters"},[VA]:{message:"Resource not found",description:"Requested resource not found"},[HA]:{message:"Resource unavailable",description:"Requested resource not available"},[qA]:{message:"Transaction rejected",description:"Transaction creation failed"},[zA]:{message:"Method not supported",description:"Method is not implemented"},[WA]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[GA]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[cRe]:{name:"User Rejected Request",message:"The user rejected the request."},[lRe]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[uRe]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[dRe]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[hRe]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class ko extends Dt{constructor(e,n){super(n??Az.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class ANe extends Dt{constructor(e,n){var r,s,i,o;if(!e)super();else if(!((r=ti[e])===null||r===void 0)&&r.message)super(ti[e].message);else{const a=Object.keys(ti).find(c=>typeof c=="string"&&e>=parseInt(c.split("-")[0],10)&&e<=parseInt(c.split("-")[1],10));super((i=(s=ti[a??""])===null||s===void 0?void 0:s.message)!==null&&i!==void 0?i:Az.replace("*code*",(o=e?.toString())!==null&&o!==void 0?o:'""'))}this.code=e,this.data=n}}class CNe extends ko{constructor(e){super(e,ti[BA].message),this.code=BA}}class INe extends ko{constructor(e){super(e,ti[LA].message),this.code=LA}}class TNe extends ko{constructor(e){super(e,ti[$A].message),this.code=$A}}class SNe extends ko{constructor(e){super(e,ti[UA].message),this.code=UA}}class xNe extends ko{constructor(e){super(e,ti[FA].message),this.code=FA}}class PNe extends ko{constructor(e){super(e,ti[jA].message),this.code=jA}}class RNe extends ko{constructor(e){super(e,ti[zA].message),this.code=zA}}class NNe extends ko{constructor(e){super(e,ti[HA].message),this.code=HA}}class ONe extends ko{constructor(e){super(e,ti[VA].message),this.code=VA}}class kNe extends ko{constructor(e){super(e,ti[GA].message),this.code=GA}}class DNe extends ko{constructor(e){super(e,ti[qA].message),this.code=qA}}class MNe extends ko{constructor(e){super(e,ti[WA].message),this.code=WA}}const Ai=new Map;Ai.set(BA,{error:CNe});Ai.set(LA,{error:INe});Ai.set($A,{error:TNe});Ai.set(UA,{error:SNe});Ai.set(FA,{error:xNe});Ai.set(jA,{error:PNe});Ai.set(zA,{error:RNe});Ai.set(HA,{error:NNe});Ai.set(qA,{error:DNe});Ai.set(VA,{error:ONe});Ai.set(GA,{error:kNe});Ai.set(WA,{error:MNe});class BNe extends Dt{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=PRe}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}function zi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function LNe(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function $Ne(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function yy(t,...e){if(!$Ne(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Hk(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zi(t.outputLen),zi(t.blockLen)}function Zf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qk(t,e){yy(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Cz={number:zi,bool:LNe,bytes:yy,hash:Hk,exists:Zf,output:qk},DE=BigInt(2**32-1),b8=BigInt(32);function UNe(t,e=!1){return e?{h:Number(t&DE),l:Number(t>>b8&DE)}:{h:Number(t>>b8&DE)|0,l:Number(t&DE)|0}}function FNe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=UNe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const jNe=(t,e,n)=>t<<n|e>>>32-n,VNe=(t,e,n)=>e<<n|t>>>32-n,HNe=(t,e,n)=>e<<n-32|t>>>64-n,qNe=(t,e,n)=>t<<n-32|e>>>64-n,y1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const w1=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),v1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),yc=(t,e)=>t<<32-e|t>>>e,kn=(t,e)=>t<<e|t>>>32-e>>>0,QA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,zNe=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function YA(t){for(let e=0;e<t.length;e++)t[e]=zNe(t[e])}function Ng(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Og(t){return typeof t=="string"&&(t=Ng(t)),yy(t),t}function ZA(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];yy(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class zk{clone(){return this._cloneInto()}}const WNe={}.toString;function Iz(t,e){if(e!==void 0&&WNe.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function Tz(t){const e=r=>t().update(Og(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Sz(t=32){if(y1&&typeof y1.getRandomValues=="function")return y1.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}const xz=[],Pz=[],Rz=[],GNe=BigInt(0),R0=BigInt(1),KNe=BigInt(2),QNe=BigInt(7),YNe=BigInt(256),ZNe=BigInt(113);for(let t=0,e=R0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],xz.push(2*(5*r+n)),Pz.push((t+1)*(t+2)/2%64);let s=GNe;for(let i=0;i<7;i++)e=(e<<R0^(e>>QNe)*ZNe)%YNe,e&KNe&&(s^=R0<<(R0<<BigInt(i))-R0);Rz.push(s)}const[JNe,XNe]=FNe(Rz,!0),_8=(t,e,n)=>n>32?HNe(t,e,n):jNe(t,e,n),E8=(t,e,n)=>n>32?qNe(t,e,n):VNe(t,e,n);function eOe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=_8(l,u,1)^n[a],h=E8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Pz[o],c=_8(s,i,a),l=E8(s,i,a),u=xz[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=JNe[r],t[1]^=XNe[r]}n.fill(0)}class Wk extends zk{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,zi(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=w1(this.state)}keccak(){QA||YA(this.state32),eOe(this.state32,this.rounds),QA||YA(this.state32),this.posOut=0,this.pos=0}update(e){Zf(this);const{blockLen:n,state:r}=this;e=Og(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Zf(this,!1),yy(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return zi(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(qk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Wk(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const tOe=(t,e,n)=>Tz(()=>new Wk(e,t,n)),A8=tOe(1,136,256/8),JA=Cz.bytes;function Nz(t){if(!(t instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof t}`);return new TextDecoder().decode(t)}function nOe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function rOe(t){return e=>(Cz.bytes(e),t(e))}(()=>{const t=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,e=typeof module<"u"&&typeof module.require=="function"&&module.require.bind(module);return{node:e&&!t?e("crypto"):void 0,web:t}})();const gi=(()=>{const t=rOe(A8);return t.create=A8.create,t})();var Cn;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Cn||(Cn={}));var zR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(zR||(zR={}));const et=Cn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zl=t=>{switch(typeof t){case"undefined":return et.undefined;case"string":return et.string;case"number":return Number.isNaN(t)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"symbol":return et.symbol;case"object":return Array.isArray(t)?et.array:t===null?et.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?et.promise:typeof Map<"u"&&t instanceof Map?et.map:typeof Set<"u"&&t instanceof Set?et.set:typeof Date<"u"&&t instanceof Date?et.date:et.object;default:return et.unknown}},Re=Cn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),sOe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ao extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof Ao))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Cn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ao.create=t=>new Ao(t);const kg=(t,e)=>{let n;switch(t.code){case Re.invalid_type:t.received===et.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Re.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Cn.jsonStringifyReplacer)}`;break;case Re.unrecognized_keys:n=`Unrecognized key(s) in object: ${Cn.joinValues(t.keys,", ")}`;break;case Re.invalid_union:n="Invalid input";break;case Re.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Cn.joinValues(t.options)}`;break;case Re.invalid_enum_value:n=`Invalid enum value. Expected ${Cn.joinValues(t.options)}, received '${t.received}'`;break;case Re.invalid_arguments:n="Invalid function arguments";break;case Re.invalid_return_type:n="Invalid function return type";break;case Re.invalid_date:n="Invalid date";break;case Re.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Cn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Re.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Re.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Re.custom:n="Invalid input";break;case Re.invalid_intersection_types:n="Intersection results could not be merged";break;case Re.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Re.not_finite:n="Number must be finite";break;default:n=e.defaultError,Cn.assertNever(t)}return{message:n}};let Oz=kg;function iOe(t){Oz=t}function XA(){return Oz}const eC=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},oOe=[];function ze(t,e){const n=XA(),r=eC({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===kg?void 0:kg].filter(s=>!!s)});t.common.issues.push(r)}class ni{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Tt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return ni.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Tt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Tt=Object.freeze({status:"aborted"}),qm=t=>({status:"dirty",value:t}),Ci=t=>({status:"valid",value:t}),WR=t=>t.status==="aborted",GR=t=>t.status==="dirty",Jf=t=>t.status==="valid",Fv=t=>typeof Promise<"u"&&t instanceof Promise;var ht;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ht||(ht={}));class nl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const C8=(t,e)=>{if(Jf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ao(t.common.issues);return this._error=n,this._error}}};function Yt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:s}}class tn{get description(){return this._def.description}_getType(e){return zl(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:zl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ni,ctx:{common:e.parent.common,data:e.data,parsedType:zl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Fv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zl(e)},s=this._parseSync({data:e,path:r.path,parent:r});return C8(r,s)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zl(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return Jf(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>Jf(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zl(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Fv(s)?s:Promise.resolve(s));return C8(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Re.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Qa({schema:this,typeName:kt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Fc.create(this,this._def)}nullable(){return oh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qa.create(this)}promise(){return Mg.create(this,this._def)}or(e){return qv.create([this,e],this._def)}and(e){return zv.create(this,e,this._def)}transform(e){return new Qa({...Yt(this._def),schema:this,typeName:kt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Yv({...Yt(this._def),innerType:this,defaultValue:n,typeName:kt.ZodDefault})}brand(){return new Gk({typeName:kt.ZodBranded,type:this,...Yt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Zv({...Yt(this._def),innerType:this,catchValue:n,typeName:kt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Xb.create(this,e)}readonly(){return Jv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const aOe=/^c[^\s-]{8,}$/i,cOe=/^[0-9a-z]+$/,lOe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uOe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,dOe=/^[a-z0-9_-]{21}$/i,hOe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,fOe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,pOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,mOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xx;const gOe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,yOe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wOe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,vOe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bOe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,_Oe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kz="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",EOe=new RegExp(`^${kz}$`);function Dz(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function AOe(t){return new RegExp(`^${Dz(t)}$`)}function Mz(t){let e=`${kz}T${Dz(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function COe(t,e){return!!((e==="v4"||!e)&&gOe.test(t)||(e==="v6"||!e)&&wOe.test(t))}function IOe(t,e){if(!hOe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function TOe(t,e){return!!((e==="v4"||!e)&&yOe.test(t)||(e==="v6"||!e)&&vOe.test(t))}class $a extends tn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==et.string){const i=this._getOrReturnCtx(e);return ze(i,{code:Re.invalid_type,expected:et.string,received:i.parsedType}),Tt}const r=new ni;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ze(s,{code:Re.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ze(s,{code:Re.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")pOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"email",code:Re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Xx||(Xx=new RegExp(mOe,"u")),Xx.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"emoji",code:Re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")uOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"uuid",code:Re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")dOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"nanoid",code:Re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")aOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"cuid",code:Re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")cOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"cuid2",code:Re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")lOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"ulid",code:Re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ze(s,{validation:"url",code:Re.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"regex",code:Re.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Mz(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?EOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?AOe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?fOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"duration",code:Re.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?COe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"ip",code:Re.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?IOe(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"jwt",code:Re.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?TOe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"cidr",code:Re.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?bOe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"base64",code:Re.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?_Oe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"base64url",code:Re.invalid_string,message:i.message}),r.dirty()):Cn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Re.invalid_string,...ht.errToObj(r)})}_addCheck(e){return new $a({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ht.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ht.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ht.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ht.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ht.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ht.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ht.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ht.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ht.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ht.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ht.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ht.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ht.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...ht.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ht.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ht.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ht.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...ht.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ht.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ht.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ht.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ht.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ht.errToObj(n)})}nonempty(e){return this.min(1,ht.errToObj(e))}trim(){return new $a({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $a({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $a({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$a.create=t=>new $a({checks:[],typeName:kt.ZodString,coerce:t?.coerce??!1,...Yt(t)});function SOe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class rh extends tn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==et.number){const i=this._getOrReturnCtx(e);return ze(i,{code:Re.invalid_type,expected:et.number,received:i.parsedType}),Tt}let r;const s=new ni;for(const i of this._def.checks)i.kind==="int"?Cn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ze(r,{code:Re.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Re.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Re.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?SOe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Re.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ze(r,{code:Re.not_finite,message:i.message}),s.dirty()):Cn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ht.toString(n))}setLimit(e,n,r,s){return new rh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ht.toString(s)}]})}_addCheck(e){return new rh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ht.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ht.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ht.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ht.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ht.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Cn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}rh.create=t=>new rh({checks:[],typeName:kt.ZodNumber,coerce:t?.coerce||!1,...Yt(t)});class sh extends tn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==et.bigint)return this._getInvalidInput(e);let r;const s=new ni;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Re.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Re.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Re.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Cn.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ze(n,{code:Re.invalid_type,expected:et.bigint,received:n.parsedType}),Tt}gte(e,n){return this.setLimit("min",e,!0,ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ht.toString(n))}setLimit(e,n,r,s){return new sh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ht.toString(s)}]})}_addCheck(e){return new sh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ht.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}sh.create=t=>new sh({checks:[],typeName:kt.ZodBigInt,coerce:t?.coerce??!1,...Yt(t)});class jv extends tn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==et.boolean){const r=this._getOrReturnCtx(e);return ze(r,{code:Re.invalid_type,expected:et.boolean,received:r.parsedType}),Tt}return Ci(e.data)}}jv.create=t=>new jv({typeName:kt.ZodBoolean,coerce:t?.coerce||!1,...Yt(t)});class Xf extends tn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==et.date){const i=this._getOrReturnCtx(e);return ze(i,{code:Re.invalid_type,expected:et.date,received:i.parsedType}),Tt}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ze(i,{code:Re.invalid_date}),Tt}const r=new ni;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Re.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Cn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ht.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ht.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Xf.create=t=>new Xf({checks:[],coerce:t?.coerce||!1,typeName:kt.ZodDate,...Yt(t)});class tC extends tn{_parse(e){if(this._getType(e)!==et.symbol){const r=this._getOrReturnCtx(e);return ze(r,{code:Re.invalid_type,expected:et.symbol,received:r.parsedType}),Tt}return Ci(e.data)}}tC.create=t=>new tC({typeName:kt.ZodSymbol,...Yt(t)});class Vv extends tn{_parse(e){if(this._getType(e)!==et.undefined){const r=this._getOrReturnCtx(e);return ze(r,{code:Re.invalid_type,expected:et.undefined,received:r.parsedType}),Tt}return Ci(e.data)}}Vv.create=t=>new Vv({typeName:kt.ZodUndefined,...Yt(t)});class Hv extends tn{_parse(e){if(this._getType(e)!==et.null){const r=this._getOrReturnCtx(e);return ze(r,{code:Re.invalid_type,expected:et.null,received:r.parsedType}),Tt}return Ci(e.data)}}Hv.create=t=>new Hv({typeName:kt.ZodNull,...Yt(t)});class Dg extends tn{constructor(){super(...arguments),this._any=!0}_parse(e){return Ci(e.data)}}Dg.create=t=>new Dg({typeName:kt.ZodAny,...Yt(t)});class Of extends tn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ci(e.data)}}Of.create=t=>new Of({typeName:kt.ZodUnknown,...Yt(t)});class vu extends tn{_parse(e){const n=this._getOrReturnCtx(e);return ze(n,{code:Re.invalid_type,expected:et.never,received:n.parsedType}),Tt}}vu.create=t=>new vu({typeName:kt.ZodNever,...Yt(t)});class nC extends tn{_parse(e){if(this._getType(e)!==et.undefined){const r=this._getOrReturnCtx(e);return ze(r,{code:Re.invalid_type,expected:et.void,received:r.parsedType}),Tt}return Ci(e.data)}}nC.create=t=>new nC({typeName:kt.ZodVoid,...Yt(t)});class qa extends tn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==et.array)return ze(n,{code:Re.invalid_type,expected:et.array,received:n.parsedType}),Tt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ze(n,{code:o?Re.too_big:Re.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ze(n,{code:Re.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ze(n,{code:Re.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new nl(n,o,n.path,a)))).then(o=>ni.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new nl(n,o,n.path,a)));return ni.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new qa({...this._def,minLength:{value:e,message:ht.toString(n)}})}max(e,n){return new qa({...this._def,maxLength:{value:e,message:ht.toString(n)}})}length(e,n){return new qa({...this._def,exactLength:{value:e,message:ht.toString(n)}})}nonempty(e){return this.min(1,e)}}qa.create=(t,e)=>new qa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:kt.ZodArray,...Yt(e)});function Nm(t){if(t instanceof Pr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Fc.create(Nm(r))}return new Pr({...t._def,shape:()=>e})}else return t instanceof qa?new qa({...t._def,type:Nm(t.element)}):t instanceof Fc?Fc.create(Nm(t.unwrap())):t instanceof oh?oh.create(Nm(t.unwrap())):t instanceof rl?rl.create(t.items.map(e=>Nm(e))):t}class Pr extends tn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Cn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==et.object){const l=this._getOrReturnCtx(e);return ze(l,{code:Re.invalid_type,expected:et.object,received:l.parsedType}),Tt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof vu&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new nl(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof vu){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(ze(s,{code:Re.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new nl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key,h=await u.value;l.push({key:d,value:h,alwaysSet:u.alwaysSet})}return l}).then(l=>ni.mergeObjectSync(r,l)):ni.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ht.errToObj,new Pr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const s=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:ht.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Pr({...this._def,unknownKeys:"strip"})}passthrough(){return new Pr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Pr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Pr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:kt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Pr({...this._def,catchall:e})}pick(e){const n={};for(const r of Cn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Pr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Cn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Pr({...this._def,shape:()=>n})}deepPartial(){return Nm(this)}partial(e){const n={};for(const r of Cn.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Pr({...this._def,shape:()=>n})}required(e){const n={};for(const r of Cn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Fc;)i=i._def.innerType;n[r]=i}return new Pr({...this._def,shape:()=>n})}keyof(){return Bz(Cn.objectKeys(this.shape))}}Pr.create=(t,e)=>new Pr({shape:()=>t,unknownKeys:"strip",catchall:vu.create(),typeName:kt.ZodObject,...Yt(e)});Pr.strictCreate=(t,e)=>new Pr({shape:()=>t,unknownKeys:"strict",catchall:vu.create(),typeName:kt.ZodObject,...Yt(e)});Pr.lazycreate=(t,e)=>new Pr({shape:t,unknownKeys:"strip",catchall:vu.create(),typeName:kt.ZodObject,...Yt(e)});class qv extends tn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ao(a.ctx.common.issues));return ze(n,{code:Re.invalid_union,unionErrors:o}),Tt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Ao(c));return ze(n,{code:Re.invalid_union,unionErrors:a}),Tt}}get options(){return this._def.options}}qv.create=(t,e)=>new qv({options:t,typeName:kt.ZodUnion,...Yt(e)});const Fl=t=>t instanceof Gv?Fl(t.schema):t instanceof Qa?Fl(t.innerType()):t instanceof Kv?[t.value]:t instanceof ih?t.options:t instanceof Qv?Cn.objectValues(t.enum):t instanceof Yv?Fl(t._def.innerType):t instanceof Vv?[void 0]:t instanceof Hv?[null]:t instanceof Fc?[void 0,...Fl(t.unwrap())]:t instanceof oh?[null,...Fl(t.unwrap())]:t instanceof Gk||t instanceof Jv?Fl(t.unwrap()):t instanceof Zv?Fl(t._def.innerType):[];class tT extends tn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==et.object)return ze(n,{code:Re.invalid_type,expected:et.object,received:n.parsedType}),Tt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ze(n,{code:Re.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Tt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Fl(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new tT({typeName:kt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Yt(r)})}}function KR(t,e){const n=zl(t),r=zl(e);if(t===e)return{valid:!0,data:t};if(n===et.object&&r===et.object){const s=Cn.objectKeys(e),i=Cn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=KR(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===et.array&&r===et.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=KR(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===et.date&&r===et.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class zv extends tn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(WR(i)||WR(o))return Tt;const a=KR(i.value,o.value);return a.valid?((GR(i)||GR(o))&&n.dirty(),{status:n.value,value:a.data}):(ze(r,{code:Re.invalid_intersection_types}),Tt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}zv.create=(t,e,n)=>new zv({left:t,right:e,typeName:kt.ZodIntersection,...Yt(n)});class rl extends tn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.array)return ze(r,{code:Re.invalid_type,expected:et.array,received:r.parsedType}),Tt;if(r.data.length<this._def.items.length)return ze(r,{code:Re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Tt;!this._def.rest&&r.data.length>this._def.items.length&&(ze(r,{code:Re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new nl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ni.mergeArray(n,o)):ni.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new rl({...this._def,rest:e})}}rl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new rl({items:t,typeName:kt.ZodTuple,rest:null,...Yt(e)})};class Wv extends tn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.object)return ze(r,{code:Re.invalid_type,expected:et.object,received:r.parsedType}),Tt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new nl(r,a,r.path,a)),value:o._parse(new nl(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?ni.mergeObjectAsync(n,s):ni.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof tn?new Wv({keyType:e,valueType:n,typeName:kt.ZodRecord,...Yt(r)}):new Wv({keyType:$a.create(),valueType:e,typeName:kt.ZodRecord,...Yt(n)})}}class rC extends tn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.map)return ze(r,{code:Re.invalid_type,expected:et.map,received:r.parsedType}),Tt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new nl(r,a,r.path,[l,"key"])),value:i._parse(new nl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Tt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Tt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}rC.create=(t,e,n)=>new rC({valueType:e,keyType:t,typeName:kt.ZodMap,...Yt(n)});class ep extends tn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.set)return ze(r,{code:Re.invalid_type,expected:et.set,received:r.parsedType}),Tt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ze(r,{code:Re.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ze(r,{code:Re.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Tt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new nl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new ep({...this._def,minSize:{value:e,message:ht.toString(n)}})}max(e,n){return new ep({...this._def,maxSize:{value:e,message:ht.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ep.create=(t,e)=>new ep({valueType:t,minSize:null,maxSize:null,typeName:kt.ZodSet,...Yt(e)});class ng extends tn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==et.function)return ze(n,{code:Re.invalid_type,expected:et.function,received:n.parsedType}),Tt;function r(a,c){return eC({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,XA(),kg].filter(l=>!!l),issueData:{code:Re.invalid_arguments,argumentsError:c}})}function s(a,c){return eC({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,XA(),kg].filter(l=>!!l),issueData:{code:Re.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Mg){const a=this;return Ci(async function(...c){const l=new Ao([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ci(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Ao([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Ao([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ng({...this._def,args:rl.create(e).rest(Of.create())})}returns(e){return new ng({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ng({args:e||rl.create([]).rest(Of.create()),returns:n||Of.create(),typeName:kt.ZodFunction,...Yt(r)})}}class Gv extends tn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Gv.create=(t,e)=>new Gv({getter:t,typeName:kt.ZodLazy,...Yt(e)});class Kv extends tn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ze(n,{received:n.data,code:Re.invalid_literal,expected:this._def.value}),Tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Kv.create=(t,e)=>new Kv({value:t,typeName:kt.ZodLiteral,...Yt(e)});function Bz(t,e){return new ih({values:t,typeName:kt.ZodEnum,...Yt(e)})}class ih extends tn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ze(n,{expected:Cn.joinValues(r),received:n.parsedType,code:Re.invalid_type}),Tt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ze(n,{received:n.data,code:Re.invalid_enum_value,options:r}),Tt}return Ci(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ih.create(e,{...this._def,...n})}exclude(e,n=this._def){return ih.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ih.create=Bz;class Qv extends tn{_parse(e){const n=Cn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==et.string&&r.parsedType!==et.number){const s=Cn.objectValues(n);return ze(r,{expected:Cn.joinValues(s),received:r.parsedType,code:Re.invalid_type}),Tt}if(this._cache||(this._cache=new Set(Cn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Cn.objectValues(n);return ze(r,{received:r.data,code:Re.invalid_enum_value,options:s}),Tt}return Ci(e.data)}get enum(){return this._def.values}}Qv.create=(t,e)=>new Qv({values:t,typeName:kt.ZodNativeEnum,...Yt(e)});class Mg extends tn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==et.promise&&n.common.async===!1)return ze(n,{code:Re.invalid_type,expected:et.promise,received:n.parsedType}),Tt;const r=n.parsedType===et.promise?n.data:Promise.resolve(n.data);return Ci(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Mg.create=(t,e)=>new Mg({type:t,typeName:kt.ZodPromise,...Yt(e)});class Qa extends tn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===kt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ze(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Tt;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Tt:c.status==="dirty"||n.value==="dirty"?qm(c.value):c});{if(n.value==="aborted")return Tt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Tt:a.status==="dirty"||n.value==="dirty"?qm(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Tt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Tt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Jf(o))return Tt;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Jf(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):Tt);Cn.assertNever(s)}}Qa.create=(t,e,n)=>new Qa({schema:t,typeName:kt.ZodEffects,effect:e,...Yt(n)});Qa.createWithPreprocess=(t,e,n)=>new Qa({schema:e,effect:{type:"preprocess",transform:t},typeName:kt.ZodEffects,...Yt(n)});class Fc extends tn{_parse(e){return this._getType(e)===et.undefined?Ci(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fc.create=(t,e)=>new Fc({innerType:t,typeName:kt.ZodOptional,...Yt(e)});class oh extends tn{_parse(e){return this._getType(e)===et.null?Ci(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oh.create=(t,e)=>new oh({innerType:t,typeName:kt.ZodNullable,...Yt(e)});class Yv extends tn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===et.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Yv.create=(t,e)=>new Yv({innerType:t,typeName:kt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Yt(e)});class Zv extends tn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Fv(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ao(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ao(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Zv.create=(t,e)=>new Zv({innerType:t,typeName:kt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Yt(e)});class sC extends tn{_parse(e){if(this._getType(e)!==et.nan){const r=this._getOrReturnCtx(e);return ze(r,{code:Re.invalid_type,expected:et.nan,received:r.parsedType}),Tt}return{status:"valid",value:e.data}}}sC.create=t=>new sC({typeName:kt.ZodNaN,...Yt(t)});const xOe=Symbol("zod_brand");class Gk extends tn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Xb extends tn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Tt:i.status==="dirty"?(n.dirty(),qm(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Tt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Xb({in:e,out:n,typeName:kt.ZodPipeline})}}class Jv extends tn{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Jf(s)&&(s.value=Object.freeze(s.value)),s);return Fv(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Jv.create=(t,e)=>new Jv({innerType:t,typeName:kt.ZodReadonly,...Yt(e)});function I8(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function Lz(t,e={},n){return t?Dg.create().superRefine((r,s)=>{const i=t(r);if(i instanceof Promise)return i.then(o=>{if(!o){const a=I8(e,r),c=a.fatal??n??!0;s.addIssue({code:"custom",...a,fatal:c})}});if(!i){const o=I8(e,r),a=o.fatal??n??!0;s.addIssue({code:"custom",...o,fatal:a})}}):Dg.create()}const POe={object:Pr.lazycreate};var kt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(kt||(kt={}));const ROe=(t,e={message:`Input not instance of ${t.name}`})=>Lz(n=>n instanceof t,e),$z=$a.create,Uz=rh.create,NOe=sC.create,OOe=sh.create,Fz=jv.create,kOe=Xf.create,DOe=tC.create,MOe=Vv.create,BOe=Hv.create,QR=Dg.create,LOe=Of.create,$Oe=vu.create,UOe=nC.create,jz=qa.create,b1=Pr.create,FOe=Pr.strictCreate,Vz=qv.create,jOe=tT.create,VOe=zv.create,Hz=rl.create,HOe=Wv.create,qOe=rC.create,zOe=ep.create,WOe=ng.create,GOe=Gv.create,KOe=Kv.create,QOe=ih.create,YOe=Qv.create,ZOe=Mg.create,T8=Qa.create,JOe=Fc.create,XOe=oh.create,eke=Qa.createWithPreprocess,tke=Xb.create,nke=()=>$z().optional(),rke=()=>Uz().optional(),ske=()=>Fz().optional(),ike={string:(t=>$a.create({...t,coerce:!0})),number:(t=>rh.create({...t,coerce:!0})),boolean:(t=>jv.create({...t,coerce:!0})),bigint:(t=>sh.create({...t,coerce:!0})),date:(t=>Xf.create({...t,coerce:!0}))},oke=Tt,S8=Object.freeze(Object.defineProperty({__proto__:null,BRAND:xOe,DIRTY:qm,EMPTY_PATH:oOe,INVALID:Tt,NEVER:oke,OK:Ci,ParseStatus:ni,Schema:tn,ZodAny:Dg,ZodArray:qa,ZodBigInt:sh,ZodBoolean:jv,ZodBranded:Gk,ZodCatch:Zv,ZodDate:Xf,ZodDefault:Yv,ZodDiscriminatedUnion:tT,ZodEffects:Qa,ZodEnum:ih,ZodError:Ao,get ZodFirstPartyTypeKind(){return kt},ZodFunction:ng,ZodIntersection:zv,ZodIssueCode:Re,ZodLazy:Gv,ZodLiteral:Kv,ZodMap:rC,ZodNaN:sC,ZodNativeEnum:Qv,ZodNever:vu,ZodNull:Hv,ZodNullable:oh,ZodNumber:rh,ZodObject:Pr,ZodOptional:Fc,ZodParsedType:et,ZodPipeline:Xb,ZodPromise:Mg,ZodReadonly:Jv,ZodRecord:Wv,ZodSchema:tn,ZodSet:ep,ZodString:$a,ZodSymbol:tC,ZodTransformer:Qa,ZodTuple:rl,ZodType:tn,ZodUndefined:Vv,ZodUnion:qv,ZodUnknown:Of,ZodVoid:nC,addIssueToContext:ze,any:QR,array:jz,bigint:OOe,boolean:Fz,coerce:ike,custom:Lz,date:kOe,datetimeRegex:Mz,defaultErrorMap:kg,discriminatedUnion:jOe,effect:T8,enum:QOe,function:WOe,getErrorMap:XA,getParsedType:zl,instanceof:ROe,intersection:VOe,isAborted:WR,isAsync:Fv,isDirty:GR,isValid:Jf,late:POe,lazy:GOe,literal:KOe,makeIssue:eC,map:qOe,nan:NOe,nativeEnum:YOe,never:$Oe,null:BOe,nullable:XOe,number:Uz,object:b1,get objectUtil(){return zR},oboolean:ske,onumber:rke,optional:JOe,ostring:nke,pipeline:tke,preprocess:eke,promise:ZOe,quotelessJson:sOe,record:HOe,set:zOe,setErrorMap:iOe,strictObject:FOe,string:$z,symbol:DOe,transformer:T8,tuple:Hz,undefined:MOe,union:Vz,unknown:LOe,get util(){return Cn},void:UOe},Symbol.toStringTag,{value:"Module"})),ake=t=>t.message?t.message:"unspecified error";class Bg extends Dt{constructor(e){super(),this.code=xRe,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:
${this._compileErrors().join(`
`)}`}_compileErrors(){return this.errors.map(ake)}}const cke=["bool","int","uint","bytes","string","address","tuple"],qz=t=>typeof t=="object"&&"type"in t&&"name"in t,Kk=t=>typeof t=="string",$n=t=>typeof t=="string"&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(t);function zz(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/))}const iC=t=>typeof t=="number"||typeof t=="bigint"||typeof t=="string"&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(t);function Qk(t){if(typeof t!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof t}`);return t.startsWith("0x")}const Yk=function(t){for(const[e,n]of Object.entries(t))if(n!==void 0&&n.length>0&&n[0]===0)throw new Error(`${e} cannot have leading zeroes, received: ${n.toString()}`)},lke=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],Sp=t=>{let e=t.replace(/ /,""),n,r=!1,s=[];if(t.includes("[")&&(e=e.slice(0,e.indexOf("[")),s=[...t.matchAll(/(?:\[(\d*)\])/g)].map(i=>parseInt(i[1],10)).map(i=>Number.isNaN(i)?-1:i),r=s.length>0),cke.includes(e))return{baseType:e,isArray:r,baseTypeSize:n,arraySizes:s};if(e.startsWith("int"))n=parseInt(e.substring(3),10),e="int";else if(e.startsWith("uint"))n=parseInt(t.substring(4),10),e="uint";else if(e.startsWith("bytes"))n=parseInt(e.substring(5),10),e="bytes";else return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:s};return{baseType:e,isArray:r,baseTypeSize:n,arraySizes:s}},e2=(t,e={})=>{if(Object.keys(e).includes("type"))throw new Bg([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:t},instancePath:"",schemaPath:""}]);const{baseType:r,baseTypeSize:s}=Sp(t);if(!r&&!lke.includes(t))throw new Bg([{keyword:"eth",message:`Eth data type "${t}" is not valid`,params:{eth:t},instancePath:"",schemaPath:""}]);if(r){if(r==="tuple")throw new Error('"tuple" type is not implemented directly.');return{format:`${r}${s??""}`,required:!0}}return t?{format:t,required:!0}:{}},oC=(t,e="/0")=>{const n={type:"array",items:[],maxItems:t.length,minItems:t.length};for(const[r,s]of t.entries()){let i,o,a=[];qz(s)?(i=s.type,o=s.name||`${e}/${r}`,a=s.components):typeof s=="string"?(i=s,o=`${e}/${r}`):Array.isArray(s)&&(s[0]&&typeof s[0]=="string"&&s[0].startsWith("tuple")&&!Array.isArray(s[0])&&s[1]&&Array.isArray(s[1])?(i=s[0],o=`${e}/${r}`,a=s[1]):(i="tuple",o=`${e}/${r}`,a=s));const{baseType:c,isArray:l,arraySizes:u}=Sp(i);let d,h=n;for(let f=u.length-1;f>0;f-=1)d={type:"array",$id:o,items:[],maxItems:u[f],minItems:u[f]},u[f]<0&&(delete d.maxItems,delete d.minItems),Array.isArray(h.items)?h.items.length===0?h.items=[d]:h.items.push(d):h.items=[h.items,d],h=d;if(c==="tuple"&&!l){const f=oC(a,o);f.$id=o,h.items.push(f)}else if(c==="tuple"&&l){const f=u[0],m=Object.assign({type:"array",$id:o,items:oC(a,o)},f>=0&&{minItems:f,maxItems:f});h.items.push(m)}else if(l){const f=u[0],m=Object.assign({type:"array",$id:o,items:e2(i)},f>=0&&{minItems:f,maxItems:f});h.items.push(m)}else Array.isArray(h.items)?h.items.push(Object.assign({$id:o},e2(i))):h.items.push(Object.assign({$id:o},e2(i)));h=n}return n},Zk=t=>oC(t),Jk=(t,e)=>e===1?t:Jk(t[0],e-1),_w=(t,e,n)=>{const r=[];for(const[s,i]of t.entries()){let o,a,c=[];qz(i)?(o=i.type,a=i.name,c=i.components):typeof i=="string"?o=i:Array.isArray(i)&&(i[1]&&Array.isArray(i[1])?(o=i[0],c=i[1]):(o="tuple",c=i));const{baseType:l,isArray:u,arraySizes:d}=Sp(o),h=Array.isArray(e)?e[s]:e[a];if(l==="tuple"&&!u)r.push(_w(c,h,n));else if(l==="tuple"&&u){const f=[];for(const m of h)if(d.length>1){const g=Jk(m,d.length-1),y=[];for(const v of g)y.push(_w(c,v,n));f.push(y)}else f.push(_w(c,m,n));r.push(f)}else r.push(h)}return n=n??[],n.push(...r),n},Wz=t=>{if(t>=48&&t<=57)return t-48;if(t>=65&&t<=70)return t-55;if(t>=97&&t<=102)return t-87;throw new Error(`Invalid code point: ${t}`)},nT=t=>{if(!$n(t))throw new Error("Invalid hex string");const[e,n]=t.startsWith("-")?[!0,t.slice(1)]:[!1,t],r=BigInt(n);return r>Number.MAX_SAFE_INTEGER?e?-r:r:r<Number.MIN_SAFE_INTEGER?r:e?-1*Number(r):Number(r)},rT=t=>{if((typeof t=="number"||typeof t=="bigint")&&t<0)return`-0x${t.toString(16).slice(1)}`;if((typeof t=="number"||typeof t=="bigint")&&t>=0)return`0x${t.toString(16)}`;if(typeof t=="string"&&$n(t)){const[e,n]=t.startsWith("-")?[!0,t.slice(1)]:[!1,t],r=n.split(/^(-)?0(x|X)/).slice(-1)[0];return`${e?"-":""}0x${r.replace(/^0+/,"").toLowerCase()}`}if(typeof t=="string"&&!$n(t))return rT(BigInt(t));throw new Fk(t)},aC=(t,e,n="0")=>{if(typeof t=="string"&&!$n(t))return t.padStart(e,n);const r=typeof t=="string"&&$n(t)?t:rT(t),[s,i]=r.startsWith("-")?["-0x",r.slice(3)]:["0x",r.slice(2)];return`${s}${i.padStart(e,n)}`};function Nu(t){let e="0x";for(const n of t){const r=n.toString(16);e+=r.length===1?`0${r}`:r}return e}const Dl={zero:48,nine:57,A:65,F:70,a:97,f:102};function x8(t){if(t>=Dl.zero&&t<=Dl.nine)return t-Dl.zero;if(t>=Dl.A&&t<=Dl.F)return t-(Dl.A-10);if(t>=Dl.a&&t<=Dl.f)return t-(Dl.a-10)}function xp(t){let e=0;if(t.startsWith("0")&&(t[1]==="x"||t[1]==="X")&&(e=2),t.length%2!==0)throw new tg(`hex string has odd length: ${t}`);const n=(t.length-e)/2,r=new Uint8Array(n);for(let s=0,i=e;s<n;s+=1){const o=x8(t.charCodeAt(i++)),a=x8(t.charCodeAt(i++));if(o===void 0||a===void 0)throw new tg(`Invalid byte sequence ("${t[i-2]}${t[i-1]}" in "${t}").`);r[s]=o*16+a}return r}function sT(t){var e;return!(t instanceof Uint8Array)&&((e=t?.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"?Uint8Array.from(t):t}const Gz=Object.freeze(Object.defineProperty({__proto__:null,abiSchemaToJsonSchema:oC,codePointToInt:Wz,ensureIfUint8Array:sT,ethAbiToJsonSchema:Zk,fetchArrayElement:Jk,hexToNumber:nT,hexToUint8Array:xp,numberToHex:rT,padLeft:aC,parseBaseType:Sp,transformJsonDataToAbiFormat:_w,uint8ArrayToHexString:Nu},Symbol.toStringTag,{value:"Module"})),YR=t=>{var e,n;return t instanceof Uint8Array||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="Buffer"},yh=(t,e={abiType:"bytes"})=>{if(typeof t!="string"&&!Array.isArray(t)&&!YR(t)||typeof t=="string"&&$n(t)&&t.startsWith("-")||typeof t=="string"&&!$n(t))return!1;let n;if(typeof t=="string"){if(t.length%2!==0)return!1;n=xp(t)}else if(Array.isArray(t)){if(t.some(r=>r<0||r>255||!Number.isInteger(r)))return!1;n=new Uint8Array(t)}else n=t;if(e?.abiType){const{baseTypeSize:r}=Sp(e.abiType);return r?n.length===r:!0}return e?.size?n.length===e?.size:!0},Kz=t=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(t))return!1;const e=t.slice(2),n=Ng(e.toLowerCase()),r=Nu(gi(sT(n))).slice(2);for(let s=0;s<40;s+=1)if(parseInt(r[s],16)>7&&e[s].toUpperCase()!==e[s]||parseInt(r[s],16)<=7&&e[s].toLowerCase()!==e[s])return!1;return!0},xo=(t,e=!0)=>{if(typeof t!="string"&&!YR(t))return!1;let n;return YR(t)?n=Nu(t):typeof t=="string"&&!$n(t)?n=t.toLowerCase().startsWith("0x")?t:`0x${t}`:n=t,/^(0x)?[0-9a-f]{40}$/i.test(n)?/^(0x|0X)?[0-9a-f]{40}$/.test(n)||/^(0x|0X)?[0-9A-F]{40}$/.test(n)?!0:e?Kz(n):!0:!1},tp=(t,e)=>{if(e===BigInt(0))return BigInt(1);let n=t;for(let r=1;r<e;r+=1)n*=t;return n},bu=(t,e={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof t)||typeof t=="string"&&t.length===0)return!1;let n;if(e?.abiType){const{baseTypeSize:s}=Sp(e.abiType);s&&(n=s)}else e.bitSize&&(n=e.bitSize);const r=tp(BigInt(2),BigInt(n??256))-BigInt(1);try{const s=typeof t=="string"&&$n(t)?BigInt(nT(t)):BigInt(t);return s>=0&&s<=r}catch{return!1}},Xv=(t,e={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof t)||typeof t=="number"&&t>Number.MAX_SAFE_INTEGER)return!1;let n;if(e?.abiType){const{baseTypeSize:i,baseType:o}=Sp(e.abiType);if(o!=="int")return!1;i&&(n=i)}else e.bitSize&&(n=e.bitSize);const r=tp(BigInt(2),BigInt((n??256)-1)),s=BigInt(-1)*tp(BigInt(2),BigInt((n??256)-1));try{const i=typeof t=="string"&&$n(t)?BigInt(nT(t)):BigInt(t);return i>=s&&i<=r}catch{return!1}},Qz=t=>!!(Xv(t)||typeof t=="string"&&/[0-9.]/.test(t)&&t.indexOf(".")===t.lastIndexOf(".")||typeof t=="number"),Yz=t=>bu(t),Cs=t=>Object.values(Ql).includes(t),ZR=t=>Cs(t)||Yz(t),wy=t=>typeof t!="string"||!/^(0x)?[0-9a-f]{512}$/i.test(t)?!1:!!(/^(0x)?[0-9a-f]{512}$/.test(t)||/^(0x)?[0-9A-F]{512}$/.test(t)),iT=(t,e)=>{if(typeof e=="string"&&!$n(e)||!wy(t))return!1;const n=typeof e=="string"?xp(e):e,r=Nu(gi(n)).slice(2);for(let s=0;s<12;s+=4){const i=(parseInt(r.slice(s,s+2),16)<<8)+parseInt(r.slice(s+2,s+4),16)&2047,o=Wz(t.charCodeAt(t.length-1-Math.floor(i/4))),a=1<<i%4;if((o&a)!==a)return!1}return!0},uke=(t,e)=>{if(!wy(t)||!xo(e))return!1;const n=aC(e,64);return iT(t,n)},dke=(t,e)=>!wy(t)||!xo(e)?!1:iT(t,e),hke=t=>["number","string","boolean"].includes(typeof t)?typeof t=="boolean"?!0:typeof t=="string"&&!$n(t)?t==="1"||t==="0":typeof t=="string"&&$n(t)?t==="0x1"||t==="0x0":t===1||t===0:!1,de=t=>t==null,Lg=t=>typeof t=="object"&&!de(t)&&!Array.isArray(t)&&!(t instanceof $k),cC=t=>typeof t!="string"||!/^(0x)?[0-9a-f]{64}$/i.test(t)?!1:!!(/^(0x)?[0-9a-f]{64}$/.test(t)||/^(0x)?[0-9A-F]{64}$/.test(t)),fke=(t,e)=>!wy(t)||!cC(e)?!1:iT(t,e),pke=t=>{const e=["fromBlock","toBlock","address","topics","blockHash"];if(de(t)||typeof t!="object"||!Object.keys(t).every(n=>e.includes(n))||!de(t.fromBlock)&&!ZR(t.fromBlock)||!de(t.toBlock)&&!ZR(t.toBlock))return!1;if(!de(t.address)){if(Array.isArray(t.address)){if(!t.address.every(n=>xo(n)))return!1}else if(!xo(t.address))return!1}return!(!de(t.topics)&&!t.topics.every(n=>de(n)?!0:Array.isArray(n)?n.every(r=>cC(r)):!!cC(n)))},np={address:t=>xo(t),bloom:t=>wy(t),blockNumber:t=>Yz(t),blockTag:t=>Cs(t),blockNumberOrTag:t=>ZR(t),bool:t=>hke(t),bytes:t=>yh(t),filter:t=>pke(t),hex:t=>$n(t),uint:t=>bu(t),int:t=>Xv(t),number:t=>Qz(t),string:t=>Kk(t)};for(let t=8;t<=256;t+=8)np[`int${t}`]=e=>Xv(e,{bitSize:t}),np[`uint${t}`]=e=>bu(e,{bitSize:t});for(let t=1;t<=32;t+=1)np[`bytes${t}`]=e=>yh(e,{size:t});np.bytes256=np.bytes;const H0=t=>{if((!t?.type||t?.type==="object")&&t?.properties){const e={};for(const n of Object.keys(t.properties)){const r=H0(t.properties[n]);r&&(e[n]=r)}return Array.isArray(t.required)?b1(e).partial().required(t.required.reduce((n,r)=>Object.assign(Object.assign({},n),{[r]:!0}),{})):b1(e).partial()}if(t?.type==="array"&&t?.items){if(Array.isArray(t.items)&&t.items.length>1&&t.maxItems!==void 0&&new Set(t.items.map(r=>r.$id)).size===t.items.length){const r=[];for(const s of t.items){const i=H0(s);i&&r.push(i)}return Hz(r)}const e=Array.isArray(t.items)?t.items[0]:t.items;let n=jz(H0(e));return n=t.minItems!==void 0?n.min(t.minItems):n,n=t.maxItems!==void 0?n.max(t.maxItems):n,n}if(t.oneOf&&Array.isArray(t.oneOf))return Vz(t.oneOf.map(e=>H0(e)));if(t?.format){if(!np[t.format])throw new BNe(t.format);return QR().refine(np[t.format],e=>({params:{value:e,format:t.format}}))}return t?.type&&t?.type!=="object"&&typeof S8[String(t.type)]=="function"?S8[String(t.type)]():b1({data:QR()}).partial()};class zm{static factory(){return zm.validatorInstance||(zm.validatorInstance=new zm),zm.validatorInstance}validate(e,n,r){var s,i;const a=H0(e).safeParse(n);if(!a.success){const c=this.convertErrors((i=(s=a.error)===null||s===void 0?void 0:s.issues)!==null&&i!==void 0?i:[]);if(c){if(r?.silent)return c;throw new Bg(c)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map(n=>{var r;let s,i,o,a;a=n.path.join("/");const c=String(n.path[n.path.length-1]),l=n.path.join("/");if(n.code===Re.too_big)i="maxItems",a=`${l}/maxItems`,o={limit:n.maximum},s=`must NOT have more than ${n.maximum} items`;else if(n.code===Re.too_small)i="minItems",a=`${l}/minItems`,o={limit:n.minimum},s=`must NOT have fewer than ${n.minimum} items`;else if(n.code===Re.custom){const{value:u,format:d}=(r=n.params)!==null&&r!==void 0?r:{};typeof u>"u"?s=`value at "/${a}" is required`:s=`value "${typeof u=="object"?JSON.stringify(u):u}" at "/${a}" must pass "${d}" validation`,o={value:u}}return{keyword:i??c,instancePath:l?`/${l}`:"",schemaPath:a?`#${a}`:"#",params:o??{value:n.message},message:s??n.message}})}}class mke{constructor(){this._validator=zm.factory()}validateJSONSchema(e,n,r){return this._validator.validate(e,n,r)}validate(e,n,r={silent:!1}){var s,i;const o=Zk(e);if(!(Array.isArray(o.items)&&((s=o.items)===null||s===void 0?void 0:s.length)===0&&n.length===0)){if(Array.isArray(o.items)&&((i=o.items)===null||i===void 0?void 0:i.length)===0&&n.length!==0)throw new Bg([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:n}]);return this._validator.validate(o,n,r)}}}const Et=new mke;function wh(t){var e,n;return t instanceof Uint8Array||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="Buffer"}function Ii(...t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function oT(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n+=1)if(t[n]!==e[n])return!1;return!0}const aT={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},JR="Warning: Using type `number` with values that are large or contain many decimals may cause loss of precision, it is recommended to use type `string` or `BigInt` when using conversion methods",sl=t=>{if(Et.validate(["bytes"],[t]),wh(t))return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="string")return xp(t);throw new tg(t)},{uint8ArrayToHexString:gke}=Gz,an=t=>gke(sl(t)),mr=t=>typeof t=="string"&&t.slice(0,2).toLowerCase()!=="0x"?sl(`0x${t}`):sl(t),e_=t=>(Et.validate(["hex"],[t]),nT(t)),yke=e_,is=(t,e)=>{typeof t!="bigint"&&Et.validate(["int"],[t]);let n=rT(t);return e&&(!n.startsWith("-")&&n.length%2===1?n="0x0".concat(n.slice(2)):n.length%2===0&&n.startsWith("-")&&(n="-0x0".concat(n.slice(3)))),n},wke=is,vke=t=>e_(t).toString(),Ya=t=>{Et.validate(["string"],[t]);let e=t.replace(/^(?:\u0000)/,"");return e=e.replace(/(?:\u0000)$/,""),an(new TextEncoder().encode(e))},Zz=Ya,bke=Ya,cT=t=>Nz(mr(t)),_ke=t=>typeof t=="string"?cT(t):(Et.validate(["bytes"],[t]),Nz(t)),Xk=Ng,Eke=cT,Jz=t=>{Et.validate(["string"],[t]);let e="";for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n).toString(16);e+=r.length%2!==0?`0${r}`:r}return`0x${e}`},Ake=Jz,Xz=t=>new TextDecoder("ascii").decode(mr(t)),Cke=Xz,_u=(t,e)=>{if(typeof t=="string"&&xo(t))return e?"address":`0x${t.toLowerCase().replace(/^0x/i,"")}`;if(typeof t=="boolean")return e?"bool":t?"0x01":"0x00";if(typeof t=="number")return e?t<0?"int256":"uint256":is(t);if(typeof t=="bigint")return e?"bigint":is(t);if(wh(t))return e?"bytes":an(t);if(typeof t=="object"&&t)return e?"string":Ya(JSON.stringify(t));if(typeof t=="string"){if(t.startsWith("-0x")||t.startsWith("-0X"))return e?"int256":is(t);if($n(t))return e?"bytes":t;if(iC(t)&&!Xv(t)&&!bu(t))return e?"bytes":`0x${t}`;if(iC(t)&&!Xv(t)&&bu(t))return e?"uint":is(t);if(!Number.isFinite(t))return e?"string":Ya(t)}throw new vNe(t)},Qi=t=>{if(typeof t=="number")return t>1e20?(console.warn(JR),BigInt(t)):t;if(typeof t=="bigint")return t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?Number(t):t;if(typeof t=="string"&&$n(t))return e_(t);try{return Qi(BigInt(t))}catch{throw new Fk(t)}},gf=t=>{if(typeof t=="number")return BigInt(t);if(typeof t=="bigint")return t;if(typeof t=="string"&&iC(t))return t.startsWith("-")?-BigInt(t.substring(1)):BigInt(t);throw new Fk(t)},Ike=(t,e)=>{let n;if(typeof e=="string"){if(n=aT[e],!n)throw new bz(e)}else{if(e<0||!Number.isInteger(e))throw new _z(e);n=tp(BigInt(10),BigInt(e))}const r=String(Qi(t)),s=n.toString().length-1;if(s<=0)return r.toString();const i=r.padStart(s,"0"),o=i.slice(0,-s),a=i.slice(-s).replace(/\.?0+$/,"");return o===""?a?`0.${a}`:"0":a===""?o:`${o}.${a}`.slice(0,o.length+s+1)},Tke=(t,e)=>{Et.validate(["number"],[t]);let n;if(typeof e=="string"){if(n=aT[e],!n)throw new bz(e)}else{if(e<0||!Number.isInteger(e))throw new _z(e);n=tp(BigInt(10),BigInt(e))}let r=t;typeof r=="number"&&(r<1e-15&&console.warn(JR),r>1e20?(console.warn(JR),r=BigInt(r)):r=r.toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}));const[s,i]=String(typeof r=="string"&&!$n(r)?r:Qi(r)).split(".").concat(""),a=BigInt(`${s}${i}`)*n,c=i.length;return c===0?a.toString():a.toString().slice(0,-c)},ll=t=>{if(!xo(t,!1))throw new jk(t);const e=t.toLowerCase().replace(/^0x/i,""),n=Nu(gi(sT(Xk(e))));if(de(n)||n==="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470")return"";let r="0x";const s=n.replace(/^0x/i,"");for(let i=0;i<e.length;i+=1)parseInt(s[i],16)>7?r+=e[i].toUpperCase():r+=e[i];return r},eW=t=>{if(typeof t=="boolean")return t;if(typeof t=="number"&&(t===0||t===1)||typeof t=="bigint"&&(t===BigInt(0)||t===BigInt(1)))return!!t;if(typeof t=="string"&&!$n(t)&&(t==="1"||t==="0"||t==="false"||t==="true"))return t==="true"?!0:t==="false"?!1:!!Number(t);if(typeof t=="string"&&$n(t)&&(t==="0x1"||t==="0x0"))return!!Qi(t);throw new Vk(t)};class eD extends Nk{constructor(){super(...arguments),this.maxListeners=Number.MAX_SAFE_INTEGER}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}}const Ske=$n,xke=iC,Pke=Kz,Rke=xo,Nke=wy,Oke=iT,kke=uke,Dke=dke,Mke=cC,Bke=fke,Lke=(t,e)=>{const n=typeof t=="string"&&Cs(t),r=typeof e=="string"&&Cs(e);if(t===e||(t==="earliest"||t===0)&&(e==="earliest"||e===0))return 0;if(t==="earliest")return-1;if(e==="earliest")return 1;if(n&&r){const o={[Ql.EARLIEST]:1,[Ql.FINALIZED]:2,[Ql.SAFE]:3,[Ql.LATEST]:4,[Ql.PENDING]:5};return o[t]<o[e]?-1:1}if(n&&!r||!n&&r)throw new _Ne("Cannot compare blocktag with provided non-blocktag input.");const s=BigInt(t),i=BigInt(e);return s<i?-1:s===i?0:1},Dd=t=>typeof t=="object"&&!de(t)&&Object.keys(t).length!==0&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some(e=>e in t),It=de,P8=t=>typeof t=="object"&&!de(t)&&!Array.isArray(t)&&!(t instanceof $k),vh=(t,...e)=>{if(!P8(t))return t;const n=Object.assign({},t);for(const r of e)for(const s in r)P8(r[s])?(n[s]||(n[s]={}),n[s]=vh(n[s],r[s])):!de(r[s])&&Object.hasOwnProperty.call(r,s)&&(Array.isArray(r[s])||r[s]instanceof $k?n[s]=r[s].slice(0):n[s]=r[s]);return n},$g=(t,e,n="0")=>typeof t=="string"?$n(t)?aC(t,e,n):t.padStart(e,n):(Et.validate(["int"],[t]),aC(t,e,n)),tW=(t,e,n="0")=>{if(typeof t=="string"&&!$n(t))return t.padEnd(e,n);const r=typeof t=="string"&&$n(t)?t:is(t),s=r.startsWith("-")?3:2;return Et.validate([r.startsWith("-")?"int":"uint"],[t]),r.padEnd(e+s,n)},nW=tW,eb=$g,rW=(t,e=64)=>{Et.validate(["int"],[t]);const n=Qi(t);if(n>=0)return $g(_u(n),e);const r=tp(BigInt(2),BigInt(e*4));if(-n>=r)throw new Ez(`value: ${t}, nibbleWidth: ${e}`);const i=BigInt(n)+r;return $g(is(i),e)},$ke=(t,e=64)=>{Et.validate(["int"],[t]);const n=Qi(t);if(n<0)return n;const r=Math.ceil(Math.log(Number(n))/Math.log(2));if(r>e*4)throw new Ez(`value: "${t}", nibbleWidth: "${e}"`);if(e*4!==r)return n;const s=tp(BigInt(2),BigInt(e)*BigInt(4));return Qi(BigInt(n)-s)},{parseBaseType:Uke}=Gz,Wl=t=>typeof t=="object"&&!de(t)&&"number"in t&&"bytes"in t,Fke=(t,e,n=[])=>{let r=Object.assign({},t),s;for(const i of e){if(r.oneOf&&s){const o=s,a=n.find(([c])=>c===o);a&&a[0]===s&&(r=r.oneOf[a[1]])}if(!r.properties&&!r.items)return;r.properties?r=r.properties[i]:r.items&&r.items.properties?r=r.items.properties[i]:r.items&&Lg(r.items)?r=r.items:r.items&&Array.isArray(r.items)&&(r=r.items[parseInt(i,10)]),r&&i&&(s=i)}return r},tb=(t,e,n)=>{try{const{baseType:r,baseTypeSize:s}=Uke(e);if(r==="int"||r==="uint")switch(n.number){case aa.NUMBER:return Number(gf(t));case aa.HEX:return is(gf(t));case aa.STR:return gf(t).toString();case aa.BIGINT:return gf(t);default:throw new VR(`Invalid format: ${String(n.number)}`)}if(r==="bytes"){let i;switch(s?typeof t=="string"?i=$g(t,s*2):wh(t)&&(i=Ii(new Uint8Array(s-t.length),t)):i=t,n.bytes){case wu.HEX:return an(sl(i));case wu.UINT8ARRAY:return sl(i);default:throw new VR(`Invalid format: ${String(n.bytes)}`)}}if(r==="string")return String(t)}catch{return t}return t},R8=({value:t,schemaProp:e,schema:n,object:r,key:s,dataPath:i,format:o,oneOfPath:a=[]})=>{var c,l;if(Array.isArray(t)){let u=e;if(e?.oneOf!==void 0&&e.oneOf.forEach((d,h)=>{var f,m;!Array.isArray(e?.items)&&(typeof t[0]=="object"&&((f=d?.items)===null||f===void 0?void 0:f.type)==="object"||typeof t[0]=="string"&&((m=d?.items)===null||m===void 0?void 0:m.type)!=="object")&&(u=d,a.push([s,h]))}),de(u?.items))return delete r[s],i.pop(),!0;if(Lg(u.items)&&!de(u.items.format)){for(let d=0;d<t.length;d+=1)r[s][d]=tb(t[d],(c=u?.items)===null||c===void 0?void 0:c.format,o);return i.pop(),!0}if(!Array.isArray(u?.items)&&((l=u?.items)===null||l===void 0?void 0:l.type)==="object"){for(const d of t)lT(d,n,i,o,a);return i.pop(),!0}if(Array.isArray(u?.items)){for(let d=0;d<t.length;d+=1)r[s][d]=tb(t[d],u.items[d].format,o);return i.pop(),!0}}return!1},lT=(t,e,n,r,s=[])=>{var i;if(!Lg(t)&&!Array.isArray(t))return tb(t,e?.format,r);const o=t;if(Array.isArray(o)&&e?.type==="array"&&((i=e?.items)===null||i===void 0?void 0:i.type)==="object")R8({value:o,schemaProp:e,schema:e,object:o,key:"",dataPath:n,format:r,oneOfPath:s});else for(const[a,c]of Object.entries(o)){n.push(a);let l=Fke(e,n,s);if(de(l)){delete o[a],n.pop();continue}if(Lg(c)){lT(c,e,n,r,s),n.pop();continue}if(!R8({value:c,schemaProp:l,schema:e,object:o,key:a,dataPath:n,format:r,oneOfPath:s})){if(l?.format===void 0&&l?.oneOf!==void 0){for(const[u,d]of l.oneOf.entries())if(d?.format!==void 0){l=d;break}}o[a]=tb(c,l.format,r),n.pop()}}return o},Pe=(t,e,n=vi)=>{let r;Lg(e)?r=vh({},e):Array.isArray(e)?r=[...e]:r=e;const s=Lg(t)?t:Zk(t);if(!s.properties&&!s.items&&!s.format)throw new VR("Invalid json schema for formatting");return lT(r,s,[],n)},sW="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Ug=t=>{let e;return typeof t=="bigint"||typeof t=="number"?e=Ng(t.toString()):Array.isArray(t)?e=new Uint8Array(t):typeof t=="string"&&!$n(t)?e=Ng(t):e=sl(t),an(gi(sT(e)))},t_=t=>{let e;typeof t=="string"?t.startsWith("0x")&&$n(t)?e=mr(t):e=Ng(t):e=t;const n=Ug(e);return n===sW?void 0:n},Po=t=>{const e=t_(t);return de(e)?sW:e},jke=t=>{if(Array.isArray(t))throw new Error("Autodetection of array types is not supported.");let e,n;if(typeof t=="object"&&("t"in t||"type"in t)&&("v"in t||"value"in t))e="t"in t?t.t:t.type,n="v"in t?t.v:t.value,e=e.toLowerCase()==="bigint"?"int":e;else{if(typeof t=="bigint")return["int",t];e=_u(t,!0),n=_u(t),!e.startsWith("int")&&!e.startsWith("uint")&&(e="bytes")}return(e.startsWith("int")||e.startsWith("uint"))&&typeof n=="string"&&!/^(-)?0x/i.test(n)&&(n=gf(n)),[e,n]},Vke=t=>t.startsWith("int[")?`int256${t.slice(3)}`:t==="int"?"int256":t.startsWith("uint[")?`uint256'${t.slice(4)}`:t==="uint"?"uint256":t,t2=(t,e)=>{const n=/^(\d+).*$/.exec(t.slice(e));return n?parseInt(n[1],10):0},N8=t=>t.toString(2).length,O8=(t,e)=>{const n=e.toString();if(t==="string"){if(typeof e=="string")return Ya(e);throw new wNe(e)}if(t==="bool"||t==="boolean"){if(typeof e=="boolean")return e?"01":"00";throw new Vk(e)}if(t==="address"){if(!xo(n))throw new jk(n);return n}const r=Vke(t);if(t.startsWith("uint")){const s=t2(r,4);if(s%8||s<8||s>256)throw new m8(n);const i=Qi(n);if(N8(i)>s)throw new g8(n);if(i<BigInt(0))throw new bNe(n);return s?eb(i.toString(16),s/8*2):i.toString(16)}if(t.startsWith("int")){const s=t2(r,3);if(s%8||s<8||s>256)throw new m8(t);const i=Qi(n);if(N8(i)>s)throw new g8(n);return i<BigInt(0)?rW(i.toString(),s/8*2):s?eb(i.toString(16),s/4):i.toString(16)}if(r==="bytes"){if(n.replace(/^0x/i,"").length%2!==0)throw new tg(n);return n}if(t.startsWith("bytes")){if(n.replace(/^0x/i,"").length%2!==0)throw new tg(n);const s=t2(t,5);if(!s||s<1||s>64||s<n.replace(/^0x/i,"").length/2)throw new tg(n);return nW(n,s*2)}return""},iW=t=>{const[e,n]=jke(t);return Array.isArray(n)?n.map(i=>O8(e,i).replace("0x","")).join(""):O8(e,n).replace("0x","")},tD=(...t)=>`0x${t.map(iW).join("").toLowerCase()}`,Hke=(...t)=>t_(tD(...t)),qke=(...t)=>Po(tD(...t)),zke=t=>t_(`0x${(typeof t=="number"?t.toString():t).padStart(64,"0")}`);function Wke(t){return Sz(t)}const nb=t=>Wke(t),Gke=t=>an(nb(t));var uT=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function oW(t){return(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function aW(t,e,n){return uT(this,void 0,void 0,function*(){let r;const s=yield Promise.race([t instanceof Promise?t:t(),new Promise((i,o)=>{r=setTimeout(()=>n?o(n):i(void 0),e)})]);if(r&&clearTimeout(r),s instanceof Error)throw s;return s})}function nD(t,e){let n;return[new Promise((s,i)=>{n=setInterval((function o(){return uT(this,void 0,void 0,function*(){try{const a=yield aW(t,e);de(a)||(clearInterval(n),s(a))}catch(a){clearInterval(n),i(a)}}),o})(),e)}),n]}function Kke(t,e){return uT(this,void 0,void 0,function*(){return nD(t,e)[0]})}function rD(t,e){let n;const r=new Promise((s,i)=>{n=setTimeout(()=>{i(e)},t)});return[n,r]}function cW(t,e){let n;const r=new Promise((s,i)=>{n=setInterval(()=>{uT(this,void 0,void 0,function*(){const o=yield t();o&&(clearInterval(n),i(o))})},e)});return[n,r]}const sD=()=>{const t=nb(16);t[6]=t[6]&15|64,t[8]=t[8]&63|128;const e=an(t);return[e.substring(2,10),e.substring(10,14),e.substring(14,18),e.substring(18,22),e.substring(22,34)].join("-")},iD=t=>{const e=t.error.code;return Ai.has(e)||e>=-32099&&e<=-32e3},qd=t=>!Array.isArray(t)&&!!t&&t.jsonrpc==="2.0"&&"result"in t&&de(t.error)&&(typeof t.id=="number"||typeof t.id=="string"),zd=t=>!Array.isArray(t)&&t.jsonrpc==="2.0"&&!!t&&de(t.result)&&"error"in t&&(typeof t.id=="number"||typeof t.id=="string"),dT=t=>!Array.isArray(t)&&!!t&&t.jsonrpc==="2.0"&&!de(t.params)&&!de(t.method),lW=t=>!Array.isArray(t)&&!!t&&t.jsonrpc==="2.0"&&"id"in t&&"result"in t,lC=t=>qd(t)||zd(t),oD=t=>Array.isArray(t)?t.every(lC):lC(t),rb=t=>Array.isArray(t)&&t.length>0&&oD(t);let _1;const uW=t=>{_1=t},rp=t=>{var e,n,r,s;return typeof _1<"u"&&(_1+=1),{jsonrpc:(e=t.jsonrpc)!==null&&e!==void 0?e:"2.0",id:(r=(n=t.id)!==null&&n!==void 0?n:_1)!==null&&r!==void 0?r:sD(),method:t.method,params:(s=t.params)!==null&&s!==void 0?s:void 0}},aD=t=>t.map(e=>rp(e)),Cc=t=>Array.isArray(t)&&t.length>0,Qke=Object.freeze(Object.defineProperty({__proto__:null,isBatchRequest:Cc,isBatchResponse:rb,isResponseRpcError:iD,isResponseWithError:zd,isResponseWithNotification:dT,isResponseWithResult:qd,isSubscriptionResult:lW,isValidResponse:oD,setRequestIdStart:uW,toBatchPayload:aD,toPayload:rp,validateResponse:lC},Symbol.toStringTag,{value:"Module"}));var n2=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},dW;class uC{constructor({timeout:e,eagerStart:n,timeoutMessage:r}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[dW]="Promise",this._state="pending",this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i}),this._timeoutMessage=r,this._timeoutInterval=e,n&&this.startTimer()}get state(){return this._state}then(e,n){return n2(this,void 0,void 0,function*(){return this._promise.then(e,n)})}catch(e){return n2(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return n2(this,void 0,void 0,function*(){return this._promise.finally(e)})}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){this._state==="pending"&&this._timeoutId&&this.reject(new hz(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}dW=Symbol.toStringTag;class hW{constructor(e,n){this.eventEmitter=e,this.autoReconnect=n,this.chunkTimeout=1e3*15}clearQueues(){typeof this._clearQueues=="function"&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const n=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach(s=>{let i=s;this.lastChunk&&(i=this.lastChunk+i);let o;try{o=JSON.parse(i)}catch{this.lastChunk=i,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),this.lastChunkTimeout=setTimeout(()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new eT({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))},this.chunkTimeout);return}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,o&&n.push(o)}),n}}var k8=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class cD extends Zb{constructor(){super(...arguments),this._eventEmitter=new Nk,this._chainId="",this._accounts=[]}_getChainId(){return k8(this,void 0,void 0,function*(){var e;const n=yield this.request(rp({method:"eth_chainId",params:[]}));return(e=n?.result)!==null&&e!==void 0?e:""})}_getAccounts(){return k8(this,void 0,void 0,function*(){var e;const n=yield this.request(rp({method:"eth_accounts",params:[]}));return(e=n?.result)!==null&&e!==void 0?e:[]})}_onConnect(){Promise.all([this._getChainId().then(e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))}).catch(e=>{console.error(e)}),this._getAccounts().then(e=>{this._accounts.length===e.length&&e.every(n=>e.includes(n))||(this._accounts=e,this._onAccountsChanged())}).catch(e=>{console.error(e)})]).then(()=>this._eventEmitter.emit("connect",{chainId:this._chainId})).catch(e=>{console.error(e)})}_onDisconnect(e,n){this._eventEmitter.emit("disconnect",new ANe(e,n))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var r2=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const Yke={autoReconnect:!0,delay:5e3,maxAttempts:5},Zke=1e3;class fW extends cD{get SocketConnection(){return this._socketConnection}constructor(e,n,r){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new HR(e);this._socketPath=e,this._socketOptions=n,this._reconnectOptions=Object.assign(Object.assign({},Yke),r??{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new hW(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError(()=>{this._clearQueues()}),this.isReconnecting=!1}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(this.isReconnecting)setImmediate(()=>{this._reconnect()});else throw this._connectionStatus="disconnected",e&&e.message?new Jb(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new HR(this._socketPath)}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,n){this._eventEmitter.on(e,n)}once(e,n){this._eventEmitter.once(e,n)}removeListener(e,n){this._eventEmitter.removeListener(e,n)}_onDisconnect(e,n){this._connectionStatus="disconnected",super._onDisconnect(e,n)}disconnect(e,n){const r=e??Zke;this._removeSocketListeners(),this.getStatus()!=="disconnected"&&this._closeSocketConnection(r,n),this._onDisconnect(r,n)}safeDisconnect(e,n){return r2(this,arguments,void 0,function*(r,s,i=!1,o=1e3){let a=0;yield r2(this,void 0,void 0,function*(){return new Promise(l=>{const u=setInterval(()=>{i&&a>=5&&this.clearQueues(),this.getPendingRequestQueueSize()===0&&this.getSentRequestsQueueSize()===0&&(clearInterval(u),l(!0)),a+=1},o)})}),this.disconnect(r,s)})}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((e,n)=>{e.deferredPromise.reject(new $Re),this._sentRequestsQueue.delete(n)}),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout(()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1},this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new LRe(this._reconnectOptions.maxAttempts))))}request(e){return r2(this,void 0,void 0,function*(){if(It(this._socketConnection))throw new Error("Connection is undefined");this.getStatus()==="disconnected"&&this.connect();const n=Cc(e)?e[0].id:e.id;if(!n)throw new zRe("Request Id not defined");if(this._sentRequestsQueue.has(n))throw new URe(n);const r=new uC;r.catch(i=>{this._eventEmitter.emit("error",i)});const s={payload:e,deferredPromise:r};if(this.getStatus()==="connecting")return this._pendingRequestsQueue.set(n,s),s.deferredPromise;this._sentRequestsQueue.set(n,s);try{this._sendToSocket(s.payload)}catch(i){this._sentRequestsQueue.delete(n),this._eventEmitter.emit("error",i)}return r})}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,n]of this._pendingRequestsQueue.entries())try{this._sendToSocket(n.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,n)}catch(r){this._pendingRequestsQueue.delete(e),this._eventEmitter.emit("error",r)}}_onMessage(e){const n=this._parseResponses(e);if(!(It(n)||n.length===0))for(const r of n){if(dT(r)&&r.method.endsWith("_subscription")){this._eventEmitter.emit("message",r);return}const s=rb(r)?r[0].id:r.id,i=this._sentRequestsQueue.get(s);if(!i)return;(rb(r)||qd(r)||zd(r))&&(this._eventEmitter.emit("message",r),i.deferredPromise.resolve(r)),this._sentRequestsQueue.delete(s)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach((n,r)=>{n.deferredPromise.reject(new jR(e)),this._pendingRequestsQueue.delete(r)}),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((n,r)=>{n.deferredPromise.reject(new jR(e)),this._sentRequestsQueue.delete(r)}),this._removeSocketListeners()}}const pW=Object.freeze(Object.defineProperty({__proto__:null,ChunkResponseParser:hW,Eip1193Provider:cD,EventEmitter:eD,SocketProvider:fW,Web3DeferredPromise:uC,asciiToHex:Jz,bytesToHex:an,bytesToUint8Array:sl,checkAddressCheckSum:Pke,compareBlockNumbers:Lke,convert:lT,convertScalarValue:tb,encodePacked:tD,ethUnitMap:aT,format:Pe,fromAscii:Ake,fromDecimal:wke,fromTwosComplement:$ke,fromUtf8:Zz,fromWei:Ike,getStorageSlotNumForLongString:zke,hexToAscii:Xz,hexToBytes:mr,hexToNumber:e_,hexToNumberString:vke,hexToString:Eke,hexToUtf8:cT,isAddress:Rke,isBatchRequest:Cc,isBatchResponse:rb,isBloom:Nke,isContractAddressInBloom:Dke,isContractInitOptions:Dd,isDataFormat:Wl,isHex:xke,isHexStrict:Ske,isInBloom:Oke,isNullish:It,isPromise:oW,isResponseRpcError:iD,isResponseWithError:zd,isResponseWithNotification:dT,isResponseWithResult:qd,isSubscriptionResult:lW,isTopic:Mke,isTopicInBloom:Bke,isUint8Array:wh,isUserEthereumAddressInBloom:kke,isValidResponse:oD,jsonRpc:Qke,keccak256:Ug,keccak256Wrapper:Ug,leftPad:eb,mergeDeep:vh,numberToHex:is,padLeft:$g,padRight:tW,pollTillDefined:Kke,pollTillDefinedAndReturnIntervalId:nD,processSolidityEncodePackedArgs:iW,randomBytes:nb,randomHex:Gke,rejectIfConditionAtInterval:cW,rejectIfTimeout:rD,rightPad:nW,setRequestIdStart:uW,sha3:t_,sha3Raw:Po,soliditySha3:Hke,soliditySha3Raw:qke,stringToHex:bke,toAscii:Cke,toBatchPayload:aD,toBigInt:gf,toBool:eW,toChecksumAddress:ll,toDecimal:yke,toHex:_u,toNumber:Qi,toPayload:rp,toTwosComplement:rW,toUtf8:_ke,toWei:Tke,uint8ArrayConcat:Ii,uint8ArrayEquals:oT,utf8ToBytes:Xk,utf8ToHex:Ya,uuidV4:sD,validateResponse:lC,waitWithTimeout:aW},Symbol.toStringTag,{value:"Module"}));class hT{constructor(){this._emitter=new eD}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,n){this._emitter.emit(e,n)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var sp;(function(t){t.CONFIG_CHANGE="CONFIG_CHANGE"})(sp||(sp={}));class Jke extends hT{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:750*1e3,transactionReceiptPollingInterval:void 0,transactionSendTimeout:750*1e3,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:_u(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0,customTransactionSchema:void 0,defaultReturnFormat:vi,ignoreGasPricing:!1},this.setConfig(e??{})}setConfig(e){const n=Object.keys(e);for(const r of n)this._triggerConfigChange(r,e[r]),!It(e[r])&&typeof e[r]=="number"&&r==="maxListenersWarningThreshold"&&this.setMaxListenerWarningThreshold(Number(e[r]));Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultReturnFormat(){return this.config.defaultReturnFormat}set defaultReturnFormat(e){this._triggerConfigChange("defaultReturnFormat",e),this.config.defaultReturnFormat=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!It(this.config.defaultCommon)&&!It(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new v8(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!It(this.config.defaultCommon)&&!It(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new w8(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!It(this.config.defaultHardfork)&&!It(e)&&!It(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new w8(this.config.defaultHardfork,e.hardfork);if(!It(this.config.defaultChain)&&!It(e)&&!It(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new v8(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get ignoreGasPricing(){return this.config.ignoreGasPricing}set ignoreGasPricing(e){this._triggerConfigChange("ignoreGasPricing",e),this.config.ignoreGasPricing=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}get customTransactionSchema(){return this.config.customTransactionSchema}set customTransactionSchema(e){this._triggerConfigChange("customTransactionSchema",e),this.config.customTransactionSchema=e}_triggerConfigChange(e,n){this.emit(sp.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:n})}}var ME={exports:{}},D8;function Xke(){return D8||(D8=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,r=(function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i})();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof i<"u"&&i||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(P){return P&&DataView.prototype.isPrototypeOf(P)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(P){return P&&u.indexOf(Object.prototype.toString.call(P))>-1};function h(P){if(typeof P!="string"&&(P=String(P)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(P)||P==="")throw new TypeError('Invalid character in header field name: "'+P+'"');return P.toLowerCase()}function f(P){return typeof P!="string"&&(P=String(P)),P}function m(P){var L={next:function(){var W=P.shift();return{done:W===void 0,value:W}}};return c.iterable&&(L[Symbol.iterator]=function(){return L}),L}function g(P){this.map={},P instanceof g?P.forEach(function(L,W){this.append(W,L)},this):Array.isArray(P)?P.forEach(function(L){if(L.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+L.length);this.append(L[0],L[1])},this):P&&Object.getOwnPropertyNames(P).forEach(function(L){this.append(L,P[L])},this)}g.prototype.append=function(P,L){P=h(P),L=f(L);var W=this.map[P];this.map[P]=W?W+", "+L:L},g.prototype.delete=function(P){delete this.map[h(P)]},g.prototype.get=function(P){return P=h(P),this.has(P)?this.map[P]:null},g.prototype.has=function(P){return this.map.hasOwnProperty(h(P))},g.prototype.set=function(P,L){this.map[h(P)]=f(L)},g.prototype.forEach=function(P,L){for(var W in this.map)this.map.hasOwnProperty(W)&&P.call(L,this.map[W],W,this)},g.prototype.keys=function(){var P=[];return this.forEach(function(L,W){P.push(W)}),m(P)},g.prototype.values=function(){var P=[];return this.forEach(function(L){P.push(L)}),m(P)},g.prototype.entries=function(){var P=[];return this.forEach(function(L,W){P.push([W,L])}),m(P)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(P){if(!P._noBody){if(P.bodyUsed)return Promise.reject(new TypeError("Already read"));P.bodyUsed=!0}}function v(P){return new Promise(function(L,W){P.onload=function(){L(P.result)},P.onerror=function(){W(P.error)}})}function _(P){var L=new FileReader,W=v(L);return L.readAsArrayBuffer(P),W}function A(P){var L=new FileReader,W=v(L),Y=/charset=([A-Za-z0-9_-]+)/.exec(P.type),J=Y?Y[1]:"utf-8";return L.readAsText(P,J),W}function k(P){for(var L=new Uint8Array(P),W=new Array(L.length),Y=0;Y<L.length;Y++)W[Y]=String.fromCharCode(L[Y]);return W.join("")}function S(P){if(P.slice)return P.slice(0);var L=new Uint8Array(P.byteLength);return L.set(new Uint8Array(P)),L.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(P){this.bodyUsed=this.bodyUsed,this._bodyInit=P,P?typeof P=="string"?this._bodyText=P:c.blob&&Blob.prototype.isPrototypeOf(P)?this._bodyBlob=P:c.formData&&FormData.prototype.isPrototypeOf(P)?this._bodyFormData=P:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(P)?this._bodyText=P.toString():c.arrayBuffer&&c.blob&&l(P)?(this._bodyArrayBuffer=S(P.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(P)||d(P))?this._bodyArrayBuffer=S(P):this._bodyText=P=Object.prototype.toString.call(P):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof P=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(P)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var P=y(this);if(P)return P;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var P=y(this);return P||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(_);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var P=y(this);if(P)return P;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function b(P){var L=P.toUpperCase();return T.indexOf(L)>-1?L:P}function E(P,L){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');L=L||{};var W=L.body;if(P instanceof E){if(P.bodyUsed)throw new TypeError("Already read");this.url=P.url,this.credentials=P.credentials,L.headers||(this.headers=new g(P.headers)),this.method=P.method,this.mode=P.mode,this.signal=P.signal,!W&&P._bodyInit!=null&&(W=P._bodyInit,P.bodyUsed=!0)}else this.url=String(P);if(this.credentials=L.credentials||this.credentials||"same-origin",(L.headers||!this.headers)&&(this.headers=new g(L.headers)),this.method=b(L.method||this.method||"GET"),this.mode=L.mode||this.mode||null,this.signal=L.signal||this.signal||(function(){if("AbortController"in a){var V=new AbortController;return V.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&W)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(W),(this.method==="GET"||this.method==="HEAD")&&(L.cache==="no-store"||L.cache==="no-cache")){var Y=/([?&])_=[^&]*/;if(Y.test(this.url))this.url=this.url.replace(Y,"$1_="+new Date().getTime());else{var J=/\?/;this.url+=(J.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function x(P){var L=new FormData;return P.trim().split("&").forEach(function(W){if(W){var Y=W.split("="),J=Y.shift().replace(/\+/g," "),V=Y.join("=").replace(/\+/g," ");L.append(decodeURIComponent(J),decodeURIComponent(V))}}),L}function D(P){var L=new g,W=P.replace(/\r?\n[\t ]+/g," ");return W.split("\r").map(function(Y){return Y.indexOf(`
`)===0?Y.substr(1,Y.length):Y}).forEach(function(Y){var J=Y.split(":"),V=J.shift().trim();if(V){var se=J.join(":").trim();try{L.append(V,se)}catch(ue){console.warn("Response "+ue.message)}}}),L}R.call(E.prototype);function M(P,L){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(L||(L={}),this.type="default",this.status=L.status===void 0?200:L.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=L.statusText===void 0?"":""+L.statusText,this.headers=new g(L.headers),this.url=L.url||"",this._initBody(P)}R.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},M.error=function(){var P=new M(null,{status:200,statusText:""});return P.ok=!1,P.status=0,P.type="error",P};var $=[301,302,303,307,308];M.redirect=function(P,L){if($.indexOf(L)===-1)throw new RangeError("Invalid status code");return new M(null,{status:L,headers:{location:P}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(L,W){this.message=L,this.name=W;var Y=Error(L);this.stack=Y.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function X(P,L){return new Promise(function(W,Y){var J=new E(P,L);if(J.signal&&J.signal.aborted)return Y(new o.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function se(){V.abort()}V.onload=function(){var pe={statusText:V.statusText,headers:D(V.getAllResponseHeaders()||"")};J.url.indexOf("file://")===0&&(V.status<200||V.status>599)?pe.status=200:pe.status=V.status,pe.url="responseURL"in V?V.responseURL:pe.headers.get("X-Request-URL");var Se="response"in V?V.response:V.responseText;setTimeout(function(){W(new M(Se,pe))},0)},V.onerror=function(){setTimeout(function(){Y(new TypeError("Network request failed"))},0)},V.ontimeout=function(){setTimeout(function(){Y(new TypeError("Network request timed out"))},0)},V.onabort=function(){setTimeout(function(){Y(new o.DOMException("Aborted","AbortError"))},0)};function ue(pe){try{return pe===""&&a.location.href?a.location.href:pe}catch{return pe}}if(V.open(J.method,ue(J.url),!0),J.credentials==="include"?V.withCredentials=!0:J.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&(c.blob?V.responseType="blob":c.arrayBuffer&&(V.responseType="arraybuffer")),L&&typeof L.headers=="object"&&!(L.headers instanceof g||a.Headers&&L.headers instanceof a.Headers)){var Ee=[];Object.getOwnPropertyNames(L.headers).forEach(function(pe){Ee.push(h(pe)),V.setRequestHeader(pe,f(L.headers[pe]))}),J.headers.forEach(function(pe,Se){Ee.indexOf(Se)===-1&&V.setRequestHeader(Se,pe)})}else J.headers.forEach(function(pe,Se){V.setRequestHeader(Se,pe)});J.signal&&(J.signal.addEventListener("abort",se),V.onreadystatechange=function(){V.readyState===4&&J.signal.removeEventListener("abort",se)}),V.send(typeof J._bodyInit>"u"?null:J._bodyInit)})}return X.polyfill=!0,a.fetch||(a.fetch=X,a.Headers=g,a.Request=E,a.Response=M),o.Headers=g,o.Request=E,o.Response=M,o.fetch=X,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(ME,ME.exports)),ME.exports}var eDe=Xke();const tDe=ny(eDe);var nDe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class fT extends Zb{constructor(e,n){if(super(),!fT.validateClientUrl(e))throw new HR(e);this.clientUrl=e,this.httpProviderOptions=n}static validateClientUrl(e){return typeof e=="string"?/^http(s)?:\/\//i.test(e):!1}getStatus(){throw new kl}supportsSubscriptions(){return!1}request(e,n){var r;return nDe(this,void 0,void 0,function*(){const s=Object.assign(Object.assign({},(r=this.httpProviderOptions)===null||r===void 0?void 0:r.providerOptions),n),i=yield tDe(this.clientUrl,Object.assign(Object.assign({},s),{method:"POST",headers:Object.assign(Object.assign({},s.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!i.ok)throw new Rc(yield i.json(),void 0,void 0,i.status);return yield i.json()})}on(){throw new kl}removeListener(){throw new kl}once(){throw new kl}removeAllListeners(){throw new kl}connect(){throw new kl}disconnect(){throw new kl}reset(){throw new kl}reconnect(){throw new kl}}var Om=null;typeof WebSocket<"u"?Om=WebSocket:typeof MozWebSocket<"u"?Om=MozWebSocket:typeof globalThis<"u"?Om=globalThis.WebSocket||globalThis.MozWebSocket:typeof window<"u"?Om=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Om=self.WebSocket||self.MozWebSocket);const rDe=Om;class mW extends fW{constructor(e,n,r){super(e,n,r)}_validateProviderPath(e){return typeof e=="string"?/^ws(s)?:\/\//i.test(e):!1}getStatus(){if(this._socketConnection&&!It(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new rDe(this._socketPath,void 0,this._socketOptions&&Object.keys(this._socketOptions).length===0?void 0:this._socketOptions)}_closeSocketConnection(e,n){var r;(r=this._socketConnection)===null||r===void 0||r.close(e,n)}_sendToSocket(e){var n;if(this.getStatus()==="disconnected")throw new jR;(n=this._socketConnection)===null||n===void 0||n.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,n,r,s;(e=this._socketConnection)===null||e===void 0||e.addEventListener("open",this._onOpenHandler),(n=this._socketConnection)===null||n===void 0||n.addEventListener("message",this._onMessageHandler),(r=this._socketConnection)===null||r===void 0||r.addEventListener("close",i=>this._onCloseHandler(i)),(s=this._socketConnection)===null||s===void 0||s.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,n,r;(e=this._socketConnection)===null||e===void 0||e.removeEventListener("message",this._onMessageHandler),(n=this._socketConnection)===null||n===void 0||n.removeEventListener("open",this._onOpenHandler),(r=this._socketConnection)===null||r===void 0||r.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var n;if(this._reconnectOptions.autoReconnect&&(![1e3,1001].includes(e.code)||!e.wasClean)){this._reconnect();return}this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),(n=this._socketConnection)===null||n===void 0||n.removeEventListener("error",this._onErrorHandler)}}const gW=t=>Zb.isWeb3Provider(t),yW=t=>typeof t!="string"&&"request"in t&&t.request.constructor.name==="Function",wW=t=>typeof t!="string"&&"request"in t&&t.request.constructor.name==="AsyncFunction",vW=t=>typeof t!="string"&&"send"in t,bW=t=>typeof t!="string"&&"sendAsync"in t,dC=t=>t&&(gW(t)||wW(t)||yW(t)||bW(t)||vW(t)),sDe=t=>t&&"supportsSubscriptions"in t?t.supportsSubscriptions():!!(t&&typeof t!="string"&&"on"in t);var s2=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},Fg;(function(t){t.PROVIDER_CHANGED="PROVIDER_CHANGED",t.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"})(Fg||(Fg={}));const M8={HttpProvider:fT,WebsocketProvider:mW};class kf extends hT{constructor(e,n,r){super(),It(e)||this.setProvider(e),this.useRpcCallSpecification=n,It(r)||(this.middleware=r)}static get providers(){return M8}get provider(){return this._provider}get providers(){return M8}setProvider(e){let n;if(e&&typeof e=="string"&&this.providers)if(/^http(s)?:\/\//i.test(e))n=new this.providers.HttpProvider(e);else if(/^ws(s)?:\/\//i.test(e))n=new this.providers.WebsocketProvider(e);else throw new g1(`Can't autodetect provider for "${e}"`);else It(e)?n=void 0:n=e;return this.emit(Fg.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=n,this.emit(Fg.PROVIDER_CHANGED,this._provider),!0}setMiddleware(e){this.middleware=e}send(e){return s2(this,void 0,void 0,function*(){const n=Object.assign({},e);let r=yield this._sendRequest(n);if(It(this.middleware)||(r=yield this.middleware.processResponse(r)),qd(r))return r.result;throw new Rc(r)})}sendBatch(e){return s2(this,void 0,void 0,function*(){return yield this._sendRequest(e)})}_sendRequest(e){return s2(this,void 0,void 0,function*(){const{provider:n}=this;if(It(n))throw new g1("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let r=Cc(e)?aD(e):rp(e);if(It(this.middleware)||(r=yield this.middleware.processRequest(r)),gW(n)){let s;try{s=yield n.request(r)}catch(i){s=i}return this._processJsonRpcResponse(r,s,{legacy:!1,error:!1})}if(wW(n))return n.request(r).then(s=>this._processJsonRpcResponse(r,s,{legacy:!0,error:!1})).catch(s=>this._processJsonRpcResponse(r,s,{legacy:!0,error:!0}));if(yW(n))return new Promise((s,i)=>{const o=l=>{i(this._processJsonRpcResponse(r,l,{legacy:!0,error:!0}))},a=l=>s(this._processJsonRpcResponse(r,l,{legacy:!0,error:!1})),c=n.request(r,(l,u)=>l?o(l):a(u));oW(c)&&c.then(a).catch(u=>{try{const d=this._processJsonRpcResponse(r,u,{legacy:!0,error:!0});i(d)}catch(d){i(d)}})});if(vW(n))return new Promise((s,i)=>{n.send(r,(o,a)=>{if(o)return i(this._processJsonRpcResponse(r,o,{legacy:!0,error:!0}));if(It(a))throw new Rc({},'Got a "nullish" response from provider.');return s(this._processJsonRpcResponse(r,a,{legacy:!0,error:!1}))})});if(bW(n))return n.sendAsync(r).then(s=>this._processJsonRpcResponse(r,s,{legacy:!0,error:!1})).catch(s=>this._processJsonRpcResponse(r,s,{legacy:!0,error:!0}));throw new g1("Provider does not have a request or send method to use.")})}_processJsonRpcResponse(e,n,{legacy:r,error:s}){if(It(n))return this._buildResponse(e,null,s);if(zd(n)){if(this.useRpcCallSpecification&&iD(n)){const i=n;if(Ai.get(i.error.code)){const o=Ai.get(i.error.code).error;throw new o(i)}else throw new ko(i)}else if(!kf._isReverted(n))throw new eT(n,e)}if(qd(n))return n;if(n instanceof Error)throw kf._isReverted(n),n;if(!r&&Cc(e)&&rb(n)||r&&!s&&Cc(e))return n;if(r&&s&&Cc(e))throw n;if(r&&!zd(n)&&!qd(n))return this._buildResponse(e,n,s);throw Cc(e)&&!Array.isArray(n)?new Rc(n,"Got normal response for a batch request."):!Cc(e)&&Array.isArray(n)?new Rc(n,"Got batch response for a normal request."):new Rc(n,"Invalid response")}static _isReverted(e){let n;if(zd(e)?n=e.error:e instanceof Error&&(n=e),n?.message.includes("revert"))throw new Nf(n);return!1}_buildResponse(e,n,r){const s={jsonrpc:"2.0",id:Cc(e)?e[0].id:"id"in e?e.id:null};return r?Object.assign(Object.assign({},s),{error:n}):Object.assign(Object.assign({},s),{result:n})}}var N0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class hC{constructor(e,n,r=!1){this.requestManager=e,this.registeredSubscriptions=n,this.tolerateUnlinkedSubscription=r,this._subscriptions=new Map,this.requestManager.on(Fg.BEFORE_PROVIDER_CHANGE,()=>N0(this,void 0,void 0,function*(){yield this.unsubscribe()})),this.requestManager.on(Fg.PROVIDER_CHANGED,()=>{this.clear(),this.listenToProviderEvents()}),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;!this.requestManager.provider||typeof e?.supportsSubscriptions=="function"&&!e?.supportsSubscriptions()||typeof this.requestManager.provider.on=="function"&&(typeof this.requestManager.provider.request=="function"?this.requestManager.provider.on("message",n=>this.messageListener(n)):e.on("data",n=>this.messageListener(n)))}messageListener(e){var n,r,s;if(!e)throw new Vl("Should not call messageListener with no data. Type was");const i=((n=e.params)===null||n===void 0?void 0:n.subscription)||((r=e.data)===null||r===void 0?void 0:r.subscription)||((s=e.id)===null||s===void 0?void 0:s.toString(16));if(i){const o=this._subscriptions.get(i);o?.processSubscriptionData(e)}}subscribe(e,n){return N0(this,arguments,void 0,function*(r,s,i=vi){const o=this.registeredSubscriptions[r];if(!o)throw new Vl("Invalid subscription type");const a=new o(s??void 0,{subscriptionManager:this,returnFormat:i});return yield this.addSubscription(a),a})}get subscriptions(){return this._subscriptions}addSubscription(e){return N0(this,void 0,void 0,function*(){if(!this.requestManager.provider)throw new g1("Provider not available");if(!this.supportsSubscriptions())throw new Vl("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new Vl(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),It(e.id))throw new Vl("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id})}removeSubscription(e){return N0(this,void 0,void 0,function*(){const{id:n}=e;if(It(n))throw new Vl("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(n)&&!this.tolerateUnlinkedSubscription)throw new Vl(`Subscription with id "${n.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(n),n})}unsubscribe(e){return N0(this,void 0,void 0,function*(){const n=[];for(const[r,s]of this.subscriptions.entries())(!e||typeof e=="function"&&e({id:r,sub:s}))&&n.push(this.removeSubscription(s));return Promise.all(n)})}clear(){this._subscriptions.clear()}supportsSubscriptions(){return It(this.requestManager.provider)?!1:sDe(this.requestManager.provider)}}var O0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class n_ extends hT{constructor(e,n){var r;super(),this.args=e;const{requestManager:s}=n,{subscriptionManager:i}=n;s?this._subscriptionManager=new hC(s,{},!0):this._subscriptionManager=i,this._returnFormat=(r=n?.returnFormat)!==null&&r!==void 0?r:vi}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return O0(this,void 0,void 0,function*(){return this._subscriptionManager.addSubscription(this)})}processSubscriptionData(e){var n,r;e?.data?this._processSubscriptionResult((r=(n=e?.data)===null||n===void 0?void 0:n.result)!==null&&r!==void 0?r:e?.data):e&&dT(e)&&this._processSubscriptionResult(e?.params.result)}sendSubscriptionRequest(){return O0(this,void 0,void 0,function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id})}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return O0(this,void 0,void 0,function*(){yield this.unsubscribe(),yield this.subscribe()})}unsubscribe(){return O0(this,void 0,void 0,function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))})}sendUnsubscribeRequest(){return O0(this,void 0,void 0,function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0})}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var _m=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class fC extends z2e{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(n){return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&!de(e)&&e.length!==0?e:void 0}}create(e){for(let n=0;n<e;n+=1)this.add(this._accountProvider.create());return this}add(e){var n;if(typeof e=="string")return this.add(this._accountProvider.privateKeyToAccount(e));let r=this.length;return this.get(e.address)&&(console.warn(`Account ${e.address.toLowerCase()} already exists.`),r=(n=this._addressMap.get(e.address.toLowerCase()))!==null&&n!==void 0?n:r),this._addressMap.set(e.address.toLowerCase(),r),this[r]=e,this}get(e){if(typeof e=="string"){const n=this._addressMap.get(e.toLowerCase());return de(n)?void 0:this[n]}return this[e]}remove(e){if(typeof e=="string"){const n=this._addressMap.get(e.toLowerCase());return de(n)?!1:(this._addressMap.delete(e.toLowerCase()),this.splice(n,1),!0)}return this[e]?(this.splice(e,1),!0):!1}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,n){return _m(this,void 0,void 0,function*(){return Promise.all(this.map(r=>_m(this,void 0,void 0,function*(){return r.encrypt(e,n)})))})}decrypt(e,n,r){return _m(this,void 0,void 0,function*(){const s=yield Promise.all(e.map(i=>_m(this,void 0,void 0,function*(){return this._accountProvider.decrypt(i,n,r)})));for(const i of s)this.add(i);return this})}save(e,n){return _m(this,void 0,void 0,function*(){const r=fC.getStorage();if(!r)throw new Error("Local storage not available.");return r.setItem(n??this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0})}load(e,n){return _m(this,void 0,void 0,function*(){const r=fC.getStorage();if(!r)throw new Error("Local storage not available.");const s=r.getItem(n??this._defaultKeyName);return s&&(yield this.decrypt(JSON.parse(s)||[],e)),this})}}const Mc={web:y1};function _W(t,e,n){if(!n.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${n}`);if(e.length!==16)throw new Error("AES: wrong IV length");if(n.startsWith("aes-128")&&t.length!==16||n.startsWith("aes-256")&&t.length!==32)throw new Error("AES: wrong key length")}async function EW(t,e,n){if(!Mc.web)throw new Error("Browser crypto not available.");let r;if(["aes-128-cbc","aes-256-cbc"].includes(t)&&(r="cbc"),["aes-128-ctr","aes-256-ctr"].includes(t)&&(r="ctr"),!r)throw new Error("AES: unsupported mode");return[await Mc.web.subtle.importKey("raw",e,{name:`AES-${r.toUpperCase()}`,length:e.length*8},!0,["encrypt","decrypt"]),{name:`aes-${r}`,iv:n,counter:n,length:128}]}async function lD(t,e,n,r="aes-128-ctr",s=!0){if(_W(e,n,r),Mc.web){const[i,o]=await EW(r,e,n),a=await Mc.web.subtle.encrypt(o,i,t);let c=new Uint8Array(a);return!s&&o.name==="aes-cbc"&&!(t.length%16)&&(c=c.slice(0,-16)),c}else if(Mc.node){const i=Mc.node.createCipheriv(r,e,n);return i.setAutoPadding(s),ZA(i.update(t),i.final())}else throw new Error("The environment doesn't have AES module")}async function iDe(t,e,n,r){const s=t.slice(-16);for(let o=0;o<16;o++)s[o]^=n[o]^16;return(await lD(s,e,n,r)).slice(0,16)}async function oDe(t,e,n,r="aes-128-ctr",s=!0){if(_W(e,n,r),Mc.web){const[i,o]=await EW(r,e,n);if(!s&&o.name==="aes-cbc"){const l=await iDe(t,e,n,r);t=ZA(t,l)}const a=await Mc.web.subtle.decrypt(o,i,t),c=new Uint8Array(a);if(o.name==="aes-cbc"){const l=await lD(c,e,n,r);if(!nOe(l,t))throw new Error("AES: wrong padding")}return c}else if(Mc.node){const i=Mc.node.createDecipheriv(r,e,n);return i.setAutoPadding(s),ZA(i.update(t),i.final())}else throw new Error("The environment doesn't have AES module")}class AW extends zk{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Hk(e);const r=Og(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Zf(this),this.iHash.update(e),this}digestInto(e){Zf(this),yy(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const uD=(t,e,n)=>new AW(t,e).update(n).digest();uD.create=(t,e)=>new AW(t,e);function aDe(t,e,n,r){Hk(t);const s=Iz({dkLen:32,asyncTick:10},r),{c:i,dkLen:o,asyncTick:a}=s;if(zi(i),zi(o),zi(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Og(e),l=Og(n),u=new Uint8Array(o),d=uD.create(t,c),h=d._cloneInto().update(l);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:h}}function cDe(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),n}function dD(t,e,n,r){const{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:c}=aDe(t,e,n,r);let l;const u=new Uint8Array(4),d=v1(u),h=new Uint8Array(a.outputLen);for(let f=1,m=0;m<i;f++,m+=a.outputLen){const g=o.subarray(m,m+a.outputLen);d.setInt32(0,f,!1),(l=c._cloneInto(l)).update(u).digestInto(h),g.set(h.subarray(0,g.length));for(let y=1;y<s;y++){a._cloneInto(l).update(h).digestInto(h);for(let v=0;v<g.length;v++)g[v]^=h[v]}}return cDe(a,c,o,l,h)}function lDe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}const uDe=(t,e,n)=>t&e^~t&n,dDe=(t,e,n)=>t&e^t&n^e&n;class hDe extends zk{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=v1(this.buffer)}update(e){Zf(this);const{view:n,buffer:r,blockLen:s}=this;e=Og(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=v1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Zf(this),qk(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;lDe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=v1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const fDe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hd=new Uint32Array(64);class pDe extends hDe{constructor(){super(64,32,8,!1),this.A=dd[0]|0,this.B=dd[1]|0,this.C=dd[2]|0,this.D=dd[3]|0,this.E=dd[4]|0,this.F=dd[5]|0,this.G=dd[6]|0,this.H=dd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)hd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=hd[d-15],f=hd[d-2],m=yc(h,7)^yc(h,18)^h>>>3,g=yc(f,17)^yc(f,19)^f>>>10;hd[d]=g+hd[d-7]+m+hd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=yc(a,6)^yc(a,11)^yc(a,25),f=u+h+uDe(a,c,l)+fDe[d]+hd[d]|0,g=(yc(r,2)^yc(r,13)^yc(r,22))+dDe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){hd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const pT=Tz(()=>new pDe);function CW(t,e,n,r,s){if(!["sha256","sha512"].includes(s))throw new Error("Only sha256 and sha512 are supported");return JA(t),JA(e),dD(pT,t,e,{c:n,dkLen:r})}function B8(t,e,n,r,s,i){let o=t[e++]^n[r++],a=t[e++]^n[r++],c=t[e++]^n[r++],l=t[e++]^n[r++],u=t[e++]^n[r++],d=t[e++]^n[r++],h=t[e++]^n[r++],f=t[e++]^n[r++],m=t[e++]^n[r++],g=t[e++]^n[r++],y=t[e++]^n[r++],v=t[e++]^n[r++],_=t[e++]^n[r++],A=t[e++]^n[r++],k=t[e++]^n[r++],S=t[e++]^n[r++],R=o,T=a,b=c,E=l,x=u,D=d,M=h,$=f,X=m,P=g,L=y,W=v,Y=_,J=A,V=k,se=S;for(let ue=0;ue<8;ue+=2)x^=kn(R+Y|0,7),X^=kn(x+R|0,9),Y^=kn(X+x|0,13),R^=kn(Y+X|0,18),P^=kn(D+T|0,7),J^=kn(P+D|0,9),T^=kn(J+P|0,13),D^=kn(T+J|0,18),V^=kn(L+M|0,7),b^=kn(V+L|0,9),M^=kn(b+V|0,13),L^=kn(M+b|0,18),E^=kn(se+W|0,7),$^=kn(E+se|0,9),W^=kn($+E|0,13),se^=kn(W+$|0,18),T^=kn(R+E|0,7),b^=kn(T+R|0,9),E^=kn(b+T|0,13),R^=kn(E+b|0,18),M^=kn(D+x|0,7),$^=kn(M+D|0,9),x^=kn($+M|0,13),D^=kn(x+$|0,18),W^=kn(L+P|0,7),X^=kn(W+L|0,9),P^=kn(X+W|0,13),L^=kn(P+X|0,18),Y^=kn(se+V|0,7),J^=kn(Y+se|0,9),V^=kn(J+Y|0,13),se^=kn(V+J|0,18);s[i++]=o+R|0,s[i++]=a+T|0,s[i++]=c+b|0,s[i++]=l+E|0,s[i++]=u+x|0,s[i++]=d+D|0,s[i++]=h+M|0,s[i++]=f+$|0,s[i++]=m+X|0,s[i++]=g+P|0,s[i++]=y+L|0,s[i++]=v+W|0,s[i++]=_+Y|0,s[i++]=A+J|0,s[i++]=k+V|0,s[i++]=S+se|0}function i2(t,e,n,r,s){let i=r+0,o=r+16*s;for(let a=0;a<16;a++)n[o+a]=t[e+(2*s-1)*16+a];for(let a=0;a<s;a++,i+=16,e+=16)B8(n,o,t,e,n,i),a>0&&(o+=16),B8(n,i,t,e+=16,n,o)}function mDe(t,e,n){const r=Iz({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:s,r:i,p:o,dkLen:a,asyncTick:c,maxmem:l,onProgress:u}=r;if(zi(s),zi(i),zi(o),zi(a),zi(c),zi(l),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const d=128*i,h=d/4;if(s<=1||(s&s-1)!==0||s>=2**(d/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const f=d*(s+o);if(f>l)throw new Error(`Scrypt: parameters too large, ${f} (128 * r * (N + p)) > ${l} (maxmem)`);const m=dD(pT,t,e,{c:1,dkLen:d*o}),g=w1(m),y=w1(new Uint8Array(d*s)),v=w1(new Uint8Array(d));let _=()=>{};if(u){const A=2*s*o,k=Math.max(Math.floor(A/1e4),1);let S=0;_=()=>{S++,u&&(!(S%k)||S===A)&&u(S/A)}}return{N:s,r:i,p:o,dkLen:a,blockSize32:h,V:y,B32:g,B:m,tmp:v,blockMixCb:_,asyncTick:c}}function gDe(t,e,n,r,s){const i=dD(pT,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),s.fill(0),i}function yDe(t,e,n){const{N:r,r:s,p:i,dkLen:o,blockSize32:a,V:c,B32:l,B:u,tmp:d,blockMixCb:h}=mDe(t,e,n);QA||YA(l);for(let f=0;f<i;f++){const m=a*f;for(let g=0;g<a;g++)c[g]=l[m+g];for(let g=0,y=0;g<r-1;g++)i2(c,y,c,y+=a,s),h();i2(c,(r-1)*a,l,m,s),h();for(let g=0;g<r;g++){const y=l[m+a-16]%r;for(let v=0;v<a;v++)d[v]=l[m+v]^c[y*a+v];i2(d,0,l,m,s),h()}}return QA||YA(l),gDe(t,o,u,c,d)}function IW(t,e,n,r,s,i,o){return JA(t),JA(e),yDe(t,e,{N:n,r:s,p:r,dkLen:i,onProgress:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const TW=BigInt(0),mT=BigInt(1),wDe=BigInt(2);function ip(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function r_(t){if(!ip(t))throw new Error("Uint8Array expected")}const vDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jg(t){r_(t);let e="";for(let n=0;n<t.length;n++)e+=vDe[t[n]];return e}function SW(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function hD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Ml={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function L8(t){if(t>=Ml._0&&t<=Ml._9)return t-Ml._0;if(t>=Ml._A&&t<=Ml._F)return t-(Ml._A-10);if(t>=Ml._a&&t<=Ml._f)return t-(Ml._a-10)}function Vg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=L8(t.charCodeAt(i)),a=L8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Df(t){return hD(jg(t))}function fD(t){return r_(t),hD(jg(Uint8Array.from(t).reverse()))}function Hg(t,e){return Vg(t.toString(16).padStart(e*2,"0"))}function pD(t,e){return Hg(t,e).reverse()}function bDe(t){return Vg(SW(t))}function Na(t,e,n){let r;if(typeof e=="string")try{r=Vg(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(ip(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function sb(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];r_(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function _De(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function EDe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ADe(t){let e;for(e=0;t>TW;t>>=mT,e+=1);return e}function CDe(t,e){return t>>BigInt(e)&mT}function IDe(t,e,n){return t|(n?mT:TW)<<BigInt(e)}const mD=t=>(wDe<<BigInt(t-1))-mT,o2=t=>new Uint8Array(t),$8=t=>Uint8Array.from(t);function xW(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=o2(t),s=o2(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=o2())=>{s=a($8([0]),d),r=a(),d.length!==0&&(s=a($8([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return sb(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const TDe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ip(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function s_(t,e,n={}){const r=(s,i,o)=>{const a=TDe[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const SDe=Object.freeze(Object.defineProperty({__proto__:null,abytes:r_,bitGet:CDe,bitLen:ADe,bitMask:mD,bitSet:IDe,bytesToHex:jg,bytesToNumberBE:Df,bytesToNumberLE:fD,concatBytes:sb,createHmacDrbg:xW,ensureBytes:Na,equalBytes:_De,hexToBytes:Vg,hexToNumber:hD,isBytes:ip,numberToBytesBE:Hg,numberToBytesLE:pD,numberToHexUnpadded:SW,numberToVarBytesBE:bDe,utf8ToBytes:EDe,validateObject:s_},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const As=BigInt(0),jr=BigInt(1),cf=BigInt(2),xDe=BigInt(3),XR=BigInt(4),U8=BigInt(5),F8=BigInt(8);BigInt(9);BigInt(16);function Hi(t,e){const n=t%e;return n>=As?n:e+n}function PDe(t,e,n){if(n<=As||e<As)throw new Error("Expected power/modulo > 0");if(n===jr)return As;let r=jr;for(;e>As;)e&jr&&(r=r*t%n),t=t*t%n,e>>=jr;return r}function Wo(t,e,n){let r=t;for(;e-- >As;)r*=r,r%=n;return r}function eN(t,e){if(t===As||e<=As)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Hi(t,e),r=e,s=As,i=jr;for(;n!==As;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==jr)throw new Error("invert: does not exist");return Hi(s,e)}function RDe(t){const e=(t-jr)/cf;let n,r,s;for(n=t-jr,r=0;n%cf===As;n/=cf,r++);for(s=cf;s<t&&PDe(s,e,t)!==t-jr;s++);if(r===1){const o=(t+jr)/XR;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+jr)/cf;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const m=a.pow(u,jr<<BigInt(l-f-1));u=a.sqr(m),d=a.mul(d,m),h=a.mul(h,u),l=f}return d}}function NDe(t){if(t%XR===xDe){const e=(t+jr)/XR;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%F8===U8){const e=(t-U8)/F8;return function(r,s){const i=r.mul(s,cf),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,cf),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return RDe(t)}const ODe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function kDe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ODe.reduce((r,s)=>(r[s]="function",r),e);return s_(t,n)}function DDe(t,e,n){if(n<As)throw new Error("Expected power > 0");if(n===As)return t.ONE;if(n===jr)return e;let r=t.ONE,s=e;for(;n>As;)n&jr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=jr;return r}function MDe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function PW(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function BDe(t,e,n=!1,r={}){if(t<=As)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=PW(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=NDe(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:mD(s),ZERO:As,ONE:jr,create:c=>Hi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return As<=c&&c<t},is0:c=>c===As,isOdd:c=>(c&jr)===jr,neg:c=>Hi(-c,t),eql:(c,l)=>c===l,sqr:c=>Hi(c*c,t),add:(c,l)=>Hi(c+l,t),sub:(c,l)=>Hi(c-l,t),mul:(c,l)=>Hi(c*l,t),pow:(c,l)=>DDe(a,c,l),div:(c,l)=>Hi(c*eN(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>eN(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>MDe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?pD(c,i):Hg(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?fD(c):Df(c)}});return Object.freeze(a)}function RW(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function NW(t){const e=RW(t);return e+Math.ceil(e/2)}function LDe(t,e,n=!1){const r=t.length,s=RW(e),i=NW(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?Df(t):fD(t),a=Hi(o,e-jr)+jr;return n?pD(a,s):Hg(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $De=BigInt(0),a2=BigInt(1);function UDe(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>$De;)i&a2&&(o=o.add(a)),a=a.double(),i>>=a2;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let m=0;m<a;m++){const g=m*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=a2);const v=g,_=g+Math.abs(y)-1,A=m%2!==0,k=y<0;y===0?u=u.add(n(A,i[v])):l=l.add(n(k,i[_]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function OW(t){return kDe(t.Fp),s_(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...PW(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function FDe(t){const e=OW(t);s_(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:jDe,hexToBytes:VDe}=SDe,yf={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=yf;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:jDe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=yf,n=typeof t=="string"?VDe(t):t;r_(n);let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=yf._parseInt(n.subarray(2)),{d:o,l:a}=yf._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Yl=BigInt(0),Jo=BigInt(1);BigInt(2);const j8=BigInt(3);BigInt(4);function HDe(t){const e=FDe(t),{Fp:n}=e,r=e.toBytes||((m,g,y)=>{const v=g.toAffine();return sb(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),s=e.fromBytes||(m=>{const g=m.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),v=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:v}});function i(m){const{a:g,b:y}=e,v=n.sqr(m),_=n.mul(v,m);return n.add(n.add(_,n.mul(m,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&Yl<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(m){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:v,n:_}=e;if(g&&typeof m!="bigint"){if(ip(m)&&(m=jg(m)),typeof m!="string"||!g.includes(m.length))throw new Error("Invalid key");m=m.padStart(y*2,"0")}let A;try{A=typeof m=="bigint"?m:Df(Na("private key",m,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof m}`)}return v&&(A=Hi(A,_)),a(A),A}const l=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,v){if(this.px=g,this.py=y,this.pz=v,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(v==null||!n.isValid(v))throw new Error("z required")}static fromAffine(g){const{x:y,y:v}=g||{};if(!g||!n.isValid(y)||!n.isValid(v))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const _=A=>n.eql(A,n.ZERO);return _(y)&&_(v)?d.ZERO:new d(y,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(v=>v.pz));return g.map((v,_)=>v.toAffine(y[_])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(Na("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const v=n.sqr(y),_=i(g);if(!n.eql(v,_))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:v,pz:_}=this,{px:A,py:k,pz:S}=g,R=n.eql(n.mul(y,S),n.mul(A,_)),T=n.eql(n.mul(v,S),n.mul(k,_));return R&&T}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,v=n.mul(y,j8),{px:_,py:A,pz:k}=this;let S=n.ZERO,R=n.ZERO,T=n.ZERO,b=n.mul(_,_),E=n.mul(A,A),x=n.mul(k,k),D=n.mul(_,A);return D=n.add(D,D),T=n.mul(_,k),T=n.add(T,T),S=n.mul(g,T),R=n.mul(v,x),R=n.add(S,R),S=n.sub(E,R),R=n.add(E,R),R=n.mul(S,R),S=n.mul(D,S),T=n.mul(v,T),x=n.mul(g,x),D=n.sub(b,x),D=n.mul(g,D),D=n.add(D,T),T=n.add(b,b),b=n.add(T,b),b=n.add(b,x),b=n.mul(b,D),R=n.add(R,b),x=n.mul(A,k),x=n.add(x,x),b=n.mul(x,D),S=n.sub(S,b),T=n.mul(x,E),T=n.add(T,T),T=n.add(T,T),new d(S,R,T)}add(g){u(g);const{px:y,py:v,pz:_}=this,{px:A,py:k,pz:S}=g;let R=n.ZERO,T=n.ZERO,b=n.ZERO;const E=e.a,x=n.mul(e.b,j8);let D=n.mul(y,A),M=n.mul(v,k),$=n.mul(_,S),X=n.add(y,v),P=n.add(A,k);X=n.mul(X,P),P=n.add(D,M),X=n.sub(X,P),P=n.add(y,_);let L=n.add(A,S);return P=n.mul(P,L),L=n.add(D,$),P=n.sub(P,L),L=n.add(v,_),R=n.add(k,S),L=n.mul(L,R),R=n.add(M,$),L=n.sub(L,R),b=n.mul(E,P),R=n.mul(x,$),b=n.add(R,b),R=n.sub(M,b),b=n.add(M,b),T=n.mul(R,b),M=n.add(D,D),M=n.add(M,D),$=n.mul(E,$),P=n.mul(x,P),M=n.add(M,$),$=n.sub(D,$),$=n.mul(E,$),P=n.add(P,$),D=n.mul(M,P),T=n.add(T,D),D=n.mul(L,P),R=n.mul(X,R),R=n.sub(R,D),D=n.mul(X,M),b=n.mul(L,b),b=n.add(b,D),new d(R,T,b)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const v=n.invertBatch(y.map(_=>_.pz));return y.map((_,A)=>_.toAffine(v[A])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Yl)return y;if(a(g),g===Jo)return this;const{endo:v}=e;if(!v)return f.unsafeLadder(this,g);let{k1neg:_,k1:A,k2neg:k,k2:S}=v.splitScalar(g),R=y,T=y,b=this;for(;A>Yl||S>Yl;)A&Jo&&(R=R.add(b)),S&Jo&&(T=T.add(b)),b=b.double(),A>>=Jo,S>>=Jo;return _&&(R=R.negate()),k&&(T=T.negate()),T=new d(n.mul(T.px,v.beta),T.py,T.pz),R.add(T)}multiply(g){a(g);let y=g,v,_;const{endo:A}=e;if(A){const{k1neg:k,k1:S,k2neg:R,k2:T}=A.splitScalar(y);let{p:b,f:E}=this.wNAF(S),{p:x,f:D}=this.wNAF(T);b=f.constTimeNegate(k,b),x=f.constTimeNegate(R,x),x=new d(n.mul(x.px,A.beta),x.py,x.pz),v=b.add(x),_=E.add(D)}else{const{p:k,f:S}=this.wNAF(y);v=k,_=S}return d.normalizeZ([v,_])[0]}multiplyAndAddUnsafe(g,y,v){const _=d.BASE,A=(S,R)=>R===Yl||R===Jo||!S.equals(_)?S.multiplyUnsafe(R):S.multiply(R),k=A(this,y).add(A(g,v));return k.is0()?void 0:k}toAffine(g){const{px:y,py:v,pz:_}=this,A=this.is0();g==null&&(g=A?n.ONE:n.inv(_));const k=n.mul(y,g),S=n.mul(v,g),R=n.mul(_,g);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:k,y:S}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===Jo)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===Jo?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return jg(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=UDe(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function qDe(t){const e=OW(t);return s_(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function zDe(t){const e=qDe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(P){return Yl<P&&P<n.ORDER}function a(P){return Hi(P,r)}function c(P){return eN(P,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=HDe({...e,toBytes(P,L,W){const Y=L.toAffine(),J=n.toBytes(Y.x),V=sb;return W?V(Uint8Array.from([L.hasEvenY()?2:3]),J):V(Uint8Array.from([4]),J,n.toBytes(Y.y))},fromBytes(P){const L=P.length,W=P[0],Y=P.subarray(1);if(L===s&&(W===2||W===3)){const J=Df(Y);if(!o(J))throw new Error("Point is not on curve");const V=d(J);let se;try{se=n.sqrt(V)}catch(pe){const Se=pe instanceof Error?": "+pe.message:"";throw new Error("Point is not on curve"+Se)}const ue=(se&Jo)===Jo;return(W&1)===1!==ue&&(se=n.neg(se)),{x:J,y:se}}else if(L===i&&W===4){const J=n.fromBytes(Y.subarray(0,n.BYTES)),V=n.fromBytes(Y.subarray(n.BYTES,2*n.BYTES));return{x:J,y:V}}else throw new Error(`Point of length ${L} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=P=>jg(Hg(P,e.nByteLength));function m(P){const L=r>>Jo;return P>L}function g(P){return m(P)?a(-P):P}const y=(P,L,W)=>Df(P.slice(L,W));class v{constructor(L,W,Y){this.r=L,this.s=W,this.recovery=Y,this.assertValidity()}static fromCompact(L){const W=e.nByteLength;return L=Na("compactSignature",L,W*2),new v(y(L,0,W),y(L,W,2*W))}static fromDER(L){const{r:W,s:Y}=yf.toSig(Na("DER",L));return new v(W,Y)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(L){return new v(this.r,this.s,L)}recoverPublicKey(L){const{r:W,s:Y,recovery:J}=this,V=T(Na("msgHash",L));if(J==null||![0,1,2,3].includes(J))throw new Error("recovery id invalid");const se=J===2||J===3?W+e.n:W;if(se>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ue=(J&1)===0?"02":"03",Ee=l.fromHex(ue+f(se)),pe=c(se),Se=a(-V*pe),Me=a(Y*pe),ce=l.BASE.multiplyAndAddUnsafe(Ee,Se,Me);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Vg(this.toDERHex())}toDERHex(){return yf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Vg(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const _={isValidPrivateKey(P){try{return u(P),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const P=NW(e.n);return LDe(e.randomBytes(P),e.n)},precompute(P=8,L=l.BASE){return L._setWindowSize(P),L.multiply(BigInt(3)),L}};function A(P,L=!0){return l.fromPrivateKey(P).toRawBytes(L)}function k(P){const L=ip(P),W=typeof P=="string",Y=(L||W)&&P.length;return L?Y===s||Y===i:W?Y===2*s||Y===2*i:P instanceof l}function S(P,L,W=!0){if(k(P))throw new Error("first arg must be private key");if(!k(L))throw new Error("second arg must be public key");return l.fromHex(L).multiply(u(P)).toRawBytes(W)}const R=e.bits2int||function(P){const L=Df(P),W=P.length*8-e.nBitLength;return W>0?L>>BigInt(W):L},T=e.bits2int_modN||function(P){return a(R(P))},b=mD(e.nBitLength);function E(P){if(typeof P!="bigint")throw new Error("bigint expected");if(!(Yl<=P&&P<b))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Hg(P,e.nByteLength)}function x(P,L,W=D){if(["recovered","canonical"].some(ge=>ge in W))throw new Error("sign() legacy options not supported");const{hash:Y,randomBytes:J}=e;let{lowS:V,prehash:se,extraEntropy:ue}=W;V==null&&(V=!0),P=Na("msgHash",P),se&&(P=Na("prehashed msgHash",Y(P)));const Ee=T(P),pe=u(L),Se=[E(pe),E(Ee)];if(ue!=null&&ue!==!1){const ge=ue===!0?J(n.BYTES):ue;Se.push(Na("extraEntropy",ge))}const Me=sb(...Se),ce=Ee;function oe(ge){const Ne=R(ge);if(!h(Ne))return;const mt=c(Ne),Q=l.BASE.multiply(Ne).toAffine(),Z=a(Q.x);if(Z===Yl)return;const te=a(mt*a(ce+Z*pe));if(te===Yl)return;let me=(Q.x===Z?0:2)|Number(Q.y&Jo),we=te;return V&&m(te)&&(we=g(te),me^=1),new v(Z,we,me)}return{seed:Me,k2sig:oe}}const D={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function $(P,L,W=D){const{seed:Y,k2sig:J}=x(P,L,W),V=e;return xW(V.hash.outputLen,V.nByteLength,V.hmac)(Y,J)}l.BASE._setWindowSize(8);function X(P,L,W,Y=M){const J=P;if(L=Na("msgHash",L),W=Na("publicKey",W),"strict"in Y)throw new Error("options.strict was renamed to lowS");const{lowS:V,prehash:se}=Y;let ue,Ee;try{if(typeof J=="string"||ip(J))try{ue=v.fromDER(J)}catch(Q){if(!(Q instanceof yf.Err))throw Q;ue=v.fromCompact(J)}else if(typeof J=="object"&&typeof J.r=="bigint"&&typeof J.s=="bigint"){const{r:Q,s:Z}=J;ue=new v(Q,Z)}else throw new Error("PARSE");Ee=l.fromHex(W)}catch(Q){if(Q.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(V&&ue.hasHighS())return!1;se&&(L=e.hash(L));const{r:pe,s:Se}=ue,Me=T(L),ce=c(Se),oe=a(Me*ce),ge=a(pe*ce),Ne=l.BASE.multiplyAndAddUnsafe(Ee,oe,ge)?.toAffine();return Ne?a(Ne.x)===pe:!1}return{CURVE:e,getPublicKey:A,getSharedSecret:S,sign:$,verify:X,ProjectivePoint:l,Signature:v,utils:_}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function WDe(t){return{hash:t,hmac:(e,...n)=>uD(t,e,ZA(...n)),randomBytes:Sz}}function GDe(t,e){const n=r=>zDe({...t,...WDe(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kW=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),V8=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),KDe=BigInt(1),tN=BigInt(2),H8=(t,e)=>(t+e/tN)/e;function QDe(t){const e=kW,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Wo(u,n,e)*u%e,h=Wo(d,n,e)*u%e,f=Wo(h,tN,e)*l%e,m=Wo(f,s,e)*f%e,g=Wo(m,i,e)*m%e,y=Wo(g,a,e)*g%e,v=Wo(y,c,e)*y%e,_=Wo(v,a,e)*g%e,A=Wo(_,n,e)*u%e,k=Wo(A,o,e)*m%e,S=Wo(k,r,e)*l%e,R=Wo(S,tN,e);if(!nN.eql(nN.sqr(R),t))throw new Error("Cannot find square root");return R}const nN=BDe(kW,void 0,void 0,{sqrt:QDe}),gD=GDe({a:BigInt(0),b:BigInt(7),Fp:nN,n:V8,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=V8,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-KDe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=H8(i*t,e),c=H8(-r*t,e);let l=Hi(t-a*n-c*s,e),u=Hi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},pT);BigInt(0);gD.ProjectivePoint;const YDe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:gD},Symbol.toStringTag,{value:"Module"}));var c2;const Ou=(c2=gD)!==null&&c2!==void 0?c2:YDe,q8=BigInt("0xffffffffffffffff"),ib=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ZDe=Ou.CURVE.n,JDe=ZDe/BigInt(2),XDe={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var pC;(function(t){t[t.Mainnet=1]="Mainnet",t[t.Goerli=5]="Goerli",t[t.Sepolia=11155111]="Sepolia"})(pC||(pC={}));var hr;(function(t){t.Chainstart="chainstart",t.Homestead="homestead",t.Dao="dao",t.TangerineWhistle="tangerineWhistle",t.SpuriousDragon="spuriousDragon",t.Byzantium="byzantium",t.Constantinople="constantinople",t.Petersburg="petersburg",t.Istanbul="istanbul",t.MuirGlacier="muirGlacier",t.Berlin="berlin",t.London="london",t.ArrowGlacier="arrowGlacier",t.GrayGlacier="grayGlacier",t.MergeForkIdTransition="mergeForkIdTransition",t.Merge="merge",t.Shanghai="shanghai",t.ShardingForkDev="shardingFork"})(hr||(hr={}));var z8;(function(t){t.ProofOfStake="pos",t.ProofOfWork="pow",t.ProofOfAuthority="poa"})(z8||(z8={}));var W8;(function(t){t.Ethash="ethash",t.Clique="clique",t.Casper="casper"})(W8||(W8={}));var Ks;(function(t){t.PolygonMainnet="polygon-mainnet",t.PolygonMumbai="polygon-mumbai",t.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",t.ArbitrumOne="arbitrum-one",t.xDaiChain="x-dai-chain",t.OptimisticKovan="optimistic-kovan",t.OptimisticEthereum="optimistic-ethereum"})(Ks||(Ks={}));var ta;(function(t){t[t.Number=0]="Number",t[t.BigInt=1]="BigInt",t[t.Uint8Array=2]="Uint8Array",t[t.PrefixedHexString=3]="PrefixedHexString"})(ta||(ta={}));const DW=t=>{if(typeof t!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof t}`);return Qk(t)?t.slice(2):t};function e6e(t){return!t||t==="0x0"?"0x0000000000000000":Qk(t)?`0x${DW(t).padStart(16,"0")}`:`0x${t.padStart(16,"0")}`}const MW=function(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Received an invalid integer type: ${t}`);return`0x${t.toString(16)}`};function t6e(t,e=!0){var n,r;const{name:s,config:i,difficulty:o,mixHash:a,gasLimit:c,coinbase:l,baseFeePerGas:u}=t;let{extraData:d,timestamp:h,nonce:f}=t;const m=Number(h),{chainId:g}=i;if(d===""&&(d="0x"),Qk(h)||(h=MW(parseInt(h))),f.length!==18&&(f=e6e(f)),i.eip155Block!==i.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const y={name:s,chainId:g,networkId:g,genesis:{timestamp:h,gasLimit:parseInt(c),difficulty:parseInt(o),nonce:f,extraData:d,mixHash:a,coinbase:l,baseFeePerGas:u},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:i.clique!==void 0?{type:"poa",algorithm:"clique",clique:{period:(n=i.clique.period)!==null&&n!==void 0?n:i.clique.blockperiodseconds,epoch:(r=i.clique.epoch)!==null&&r!==void 0?r:i.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},v={[hr.Homestead]:{name:"homesteadBlock"},[hr.Dao]:{name:"daoForkBlock"},[hr.TangerineWhistle]:{name:"eip150Block"},[hr.SpuriousDragon]:{name:"eip155Block"},[hr.Byzantium]:{name:"byzantiumBlock"},[hr.Constantinople]:{name:"constantinopleBlock"},[hr.Petersburg]:{name:"petersburgBlock"},[hr.Istanbul]:{name:"istanbulBlock"},[hr.MuirGlacier]:{name:"muirGlacierBlock"},[hr.Berlin]:{name:"berlinBlock"},[hr.London]:{name:"londonBlock"},[hr.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:e},[hr.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[hr.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},_=Object.keys(v).reduce((S,R)=>(S[v[R].name]=R,S),{}),A=Object.keys(i).filter(S=>_[S]!==void 0&&i[S]!==void 0&&i[S]!==null);if(y.hardforks=A.map(S=>({name:_[S],block:v[_[S]].isTimestamp===!0||typeof i[S]!="number"?null:i[S],timestamp:v[_[S]].isTimestamp===!0&&typeof i[S]=="number"?i[S]:void 0})).filter(S=>S.block!==null||S.timestamp!==void 0),y.hardforks.sort((S,R)=>{var T,b;return((T=S.block)!==null&&T!==void 0?T:1/0)-((b=R.block)!==null&&b!==void 0?b:1/0)}),y.hardforks.sort((S,R)=>{var T,b;return((T=S.timestamp)!==null&&T!==void 0?T:m)-((b=R.timestamp)!==null&&b!==void 0?b:m)}),i.terminalTotalDifficulty!==void 0){const S={name:hr.Merge,ttd:i.terminalTotalDifficulty,block:null},R=y.hardforks.findIndex(T=>{var b;return((b=v[T.name])===null||b===void 0?void 0:b.postMerge)===!0});R!==-1?y.hardforks.splice(R,0,S):y.hardforks.push(S)}const k=y.hardforks.length>0?y.hardforks.slice(-1)[0]:void 0;return y.hardfork=k?.name,y.hardforks.unshift({name:hr.Chainstart,block:0}),y}function n6e(t,e,n){try{if(["config","difficulty","gasLimit","alloc"].some(r=>!(r in t)))throw new Error("Invalid format, expected geth genesis fields missing");return e!==void 0&&(t.name=e),t6e(t,n)}catch(r){throw new Error(`Error parsing parameters file: ${r.message}`)}}function BW(t){let e=t;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}const r6e=function(t){const e=MW(t);return mr(`0x${BW(e.slice(2))}`)},Sr=function(t){var e;if(t==null)return new Uint8Array;if(t instanceof Uint8Array)return t;if(((e=t?.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||Array.isArray(t))return Uint8Array.from(t);if(typeof t=="string"){if(!zz(t))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${t}`);return mr(BW(DW(t)))}if(typeof t=="number")return Sr(is(t));if(typeof t=="bigint"){if(t<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${t}`);let n=t.toString(16);return n.length%2&&(n=`0${n}`),Sr(`0x${n}`)}if(t.toArray)return Uint8Array.from(t.toArray());throw new Error("invalid type")};function or(t){const e=an(t);return BigInt(e==="0x"?0:e)}function s6e(t){return Sr(`0x${t.toString(16)}`)}const LW=function(t){return new Uint8Array(t).fill(0)},i6e=function(t,e,n){const r=LW(e);return t.length<e?(r.set(t,e-t.length),r):t.subarray(-e)};function yD(t){if(!wh(t)){const e=`This method only supports Uint8Array but input was: ${t}`;throw new Error(e)}}const G8=function(t,e){return yD(t),i6e(t,e)};function o6e(t){let e=t[0];for(;t.length>0&&e.toString()==="0";)t=t.slice(1),e=t[0];return t}const mC=function(t){return yD(t),o6e(t)},xr=t=>`0x${t.toString(16)}`;function An(t){return mC(s6e(t))}function a6e(t,e){return t===BigInt(0)||t===BigInt(1)?t:e===void 0?t-BigInt(27):t-(e*BigInt(2)+BigInt(35))}function c6e(t){return t===BigInt(0)||t===BigInt(1)}const wD=function(t,e,n,r,s){const i=a6e(e,s);if(!c6e(i))throw new Error("Invalid signature v value");return new Ou.Signature(or(n),or(r)).addRecoveryBit(Number(i)).recoverPublicKey(t).toRawBytes(!1).slice(1)};function Em(t,e){if(t===null)return null;if(t===void 0)return;if(typeof t=="string"&&!zz(t))throw new Error(`A string must be provided with a 0x-prefix, given: ${t}`);if(typeof t=="number"&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const n=Sr(t);switch(e){case ta.Uint8Array:return n;case ta.BigInt:return or(n);case ta.Number:{const r=or(n);if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(r)}case ta.PrefixedHexString:return an(n);default:throw new Error("unknown outputType")}}var Sa={},K8;function l6e(){if(K8)return Sa;K8=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.RLP=Sa.utils=Sa.decode=Sa.encode=void 0;function t(v){if(Array.isArray(v)){const A=[];let k=0;for(let S=0;S<v.length;S++){const R=t(v[S]);A.push(R),k+=R.length}return u(r(k,192),...A)}const _=y(v);return _.length===1&&_[0]<128?_:u(r(_.length,128),_)}Sa.encode=t;function e(v,_,A){if(A>v.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return v.slice(_,A)}function n(v){if(v[0]===0)throw new Error("invalid RLP: extra zeros");return c(a(v))}function r(v,_){if(v<56)return Uint8Array.from([v+_]);const A=h(v),k=A.length/2,S=h(_+55+k);return Uint8Array.from(l(S+A))}function s(v,_=!1){if(typeof v>"u"||v===null||v.length===0)return Uint8Array.from([]);const A=y(v),k=i(A);if(_)return k;if(k.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return k.data}Sa.decode=s;function i(v){let _,A,k,S,R;const T=[],b=v[0];if(b<=127)return{data:v.slice(0,1),remainder:v.slice(1)};if(b<=183){if(_=b-127,b===128?k=Uint8Array.from([]):k=e(v,1,_),_===2&&k[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:k,remainder:v.slice(_)}}else if(b<=191){if(A=b-182,v.length-1<A)throw new Error("invalid RLP: not enough bytes for string length");if(_=n(e(v,1,A)),_<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return k=e(v,A,_+A),{data:k,remainder:v.slice(_+A)}}else if(b<=247){for(_=b-191,S=e(v,1,_);S.length;)R=i(S),T.push(R.data),S=R.remainder;return{data:T,remainder:v.slice(_)}}else{if(A=b-246,_=n(e(v,1,A)),_<56)throw new Error("invalid RLP: encoded list too short");const E=A+_;if(E>v.length)throw new Error("invalid RLP: total length is larger than the data");for(S=e(v,A,E);S.length;)R=i(S),T.push(R.data),S=R.remainder;return{data:T,remainder:v.slice(E)}}}const o=Array.from({length:256},(v,_)=>_.toString(16).padStart(2,"0"));function a(v){let _="";for(let A=0;A<v.length;A++)_+=o[v[A]];return _}function c(v){const _=Number.parseInt(v,16);if(Number.isNaN(_))throw new Error("Invalid byte sequence");return _}function l(v){if(typeof v!="string")throw new TypeError("hexToBytes: expected string, got "+typeof v);if(v.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const _=new Uint8Array(v.length/2);for(let A=0;A<_.length;A++){const k=A*2;_[A]=c(v.slice(k,k+2))}return _}function u(...v){if(v.length===1)return v[0];const _=v.reduce((k,S)=>k+S.length,0),A=new Uint8Array(_);for(let k=0,S=0;k<v.length;k++){const R=v[k];A.set(R,S),S+=R.length}return A}function d(v){return new TextEncoder().encode(v)}function h(v){if(v<0)throw new Error("Invalid integer as argument, must be unsigned!");const _=v.toString(16);return _.length%2?`0${_}`:_}function f(v){return v.length%2?`0${v}`:v}function m(v){return v.length>=2&&v[0]==="0"&&v[1]==="x"}function g(v){return typeof v!="string"?v:m(v)?v.slice(2):v}function y(v){if(v instanceof Uint8Array)return v;if(typeof v=="string")return m(v)?l(f(g(v))):d(v);if(typeof v=="number"||typeof v=="bigint")return v?l(h(v)):Uint8Array.from([]);if(v==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof v)}return Sa.utils={bytesToHex:a,concatBytes:u,hexToBytes:l,utf8ToBytes:d},Sa.RLP={encode:t,decode:s},Sa}var na=l6e(),l2={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var Q8;function u6e(){return Q8||(Q8=1,(function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function n(){for(var b=0,E=new Array(256),x=0;x!=256;++x)b=x,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,E[x]=b;return typeof Int32Array<"u"?new Int32Array(E):E}var r=n();function s(b){var E=0,x=0,D=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)M[D]=b[D];for(D=0;D!=256;++D)for(x=b[D],E=256+D;E<4096;E+=256)x=M[E]=x>>>8^b[x&255];var $=[];for(D=1;D!=16;++D)$[D-1]=typeof Int32Array<"u"?M.subarray(D*256,D*256+256):M.slice(D*256,D*256+256);return $}var i=s(r),o=i[0],a=i[1],c=i[2],l=i[3],u=i[4],d=i[5],h=i[6],f=i[7],m=i[8],g=i[9],y=i[10],v=i[11],_=i[12],A=i[13],k=i[14];function S(b,E){for(var x=E^-1,D=0,M=b.length;D<M;)x=x>>>8^r[(x^b.charCodeAt(D++))&255];return~x}function R(b,E){for(var x=E^-1,D=b.length-15,M=0;M<D;)x=k[b[M++]^x&255]^A[b[M++]^x>>8&255]^_[b[M++]^x>>16&255]^v[b[M++]^x>>>24]^y[b[M++]]^g[b[M++]]^m[b[M++]]^f[b[M++]]^h[b[M++]]^d[b[M++]]^u[b[M++]]^l[b[M++]]^c[b[M++]]^a[b[M++]]^o[b[M++]]^r[b[M++]];for(D+=15;M<D;)x=x>>>8^r[(x^b[M++])&255];return~x}function T(b,E){for(var x=E^-1,D=0,M=b.length,$=0,X=0;D<M;)$=b.charCodeAt(D++),$<128?x=x>>>8^r[(x^$)&255]:$<2048?(x=x>>>8^r[(x^(192|$>>6&31))&255],x=x>>>8^r[(x^(128|$&63))&255]):$>=55296&&$<57344?($=($&1023)+64,X=b.charCodeAt(D++)&1023,x=x>>>8^r[(x^(240|$>>8&7))&255],x=x>>>8^r[(x^(128|$>>2&63))&255],x=x>>>8^r[(x^(128|X>>6&15|($&3)<<4))&255],x=x>>>8^r[(x^(128|X&63))&255]):(x=x>>>8^r[(x^(224|$>>12&15))&255],x=x>>>8^r[(x^(128|$>>6&63))&255],x=x>>>8^r[(x^(128|$&63))&255]);return~x}e.table=r,e.bstr=S,e.buf=R,e.str=T})})(l2)),l2}var d6e=u6e();const h6e=ny(d6e),f6e={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},p6e={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},m6e={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},g6e={name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},y6e={name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},w6e={name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},v6e={name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},b6e={name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},_6e={name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},E6e={name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},A6e={name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},C6e={name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},I6e={name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},T6e={name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},S6e={name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},x6e={name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},P6e={name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},R6e={name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},N6e={name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},O6e={name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},k6e={name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},D6e={name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},M6e={name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},B6e={name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},L6e={name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}},Am={1153:g6e,1559:y6e,2315:w6e,2537:v6e,2565:b6e,2718:_6e,2929:E6e,2930:A6e,3198:C6e,3529:I6e,3540:T6e,3541:S6e,3554:x6e,3607:P6e,3651:R6e,3670:N6e,3675:O6e,3855:k6e,3860:D6e,4345:M6e,4399:B6e,5133:L6e},$6e={name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},U6e={name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},F6e={name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},j6e={name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},V6e={name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},H6e={name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},q6e={name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},z6e={name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},W6e={name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},G6e={name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},K6e={name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},Q6e={name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},Y6e={name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},Z6e={name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},J6e={name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},X6e={name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},e3e={name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},t3e={chainstart:$6e,homestead:F6e,dao:U6e,tangerineWhistle:j6e,spuriousDragon:V6e,byzantium:H6e,constantinople:q6e,petersburg:z6e,istanbul:W6e,muirGlacier:G6e,berlin:K6e,london:Q6e,shanghai:Y6e,arrowGlacier:Z6e,grayGlacier:J6e,mergeForkIdTransition:X6e,merge:e3e},{buf:n3e}=h6e;class ts extends eD{static custom(e,n={}){var r;const s=(r=n.baseChain)!==null&&r!==void 0?r:"mainnet",i=Object.assign({},ts._getChainParams(s));if(i.name="custom-chain",typeof e!="string")return new ts(Object.assign({chain:Object.assign(Object.assign({},i),e)},n));if(e===Ks.PolygonMainnet)return ts.custom({name:Ks.PolygonMainnet,chainId:137,networkId:137},n);if(e===Ks.PolygonMumbai)return ts.custom({name:Ks.PolygonMumbai,chainId:80001,networkId:80001},n);if(e===Ks.ArbitrumRinkebyTestnet)return ts.custom({name:Ks.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},n);if(e===Ks.ArbitrumOne)return ts.custom({name:Ks.ArbitrumOne,chainId:42161,networkId:42161},n);if(e===Ks.xDaiChain)return ts.custom({name:Ks.xDaiChain,chainId:100,networkId:100},n);if(e===Ks.OptimisticKovan)return ts.custom({name:Ks.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:hr.Berlin},n));if(e===Ks.OptimisticEthereum)return ts.custom({name:Ks.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:hr.Berlin},n));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:n,eips:r,genesisHash:s,hardfork:i,mergeForkIdPostMerge:o}){var a;const c=n6e(e,n,o),l=new ts({chain:(a=c.name)!==null&&a!==void 0?a:"custom",customChains:[c],eips:r,hardfork:i??c.hardfork});return s!==void 0&&l.setForkHashes(s),l}static isSupportedChainId(e){return!!this._getInitializedChains().names[e.toString()]}static _getChainParams(e,n){let r=e;const s=this._getInitializedChains(n);if(typeof r=="number"||typeof r=="bigint"){if(r=r.toString(),s.names[r]){const i=s.names[r];return s[i]}throw new Error(`Chain with ID ${r} not supported`)}if(s[r]!==void 0)return s[r];throw new Error(`Chain with name ${r} not supported`)}constructor(e){var n,r;super(),this._eips=[],this._customChains=(n=e.customChains)!==null&&n!==void 0?n:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=(r=this._chainParams.defaultHardfork)!==null&&r!==void 0?r:hr.Merge,this.HARDFORK_CHANGES=this.hardforks().map(s=>[s.name,t3e[s.name]]),this._hardfork=this.DEFAULT_HARDFORK,e.hardfork!==void 0&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}setChain(e){if(typeof e=="number"||typeof e=="bigint"||typeof e=="string")this._chainParams=ts._getChainParams(e,this._customChains);else if(typeof e=="object"){if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const n=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of n)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}else throw new Error("Wrong input format");for(const n of this.hardforks())if(n.block===void 0)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let n=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),n=!0);if(!n)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,n,r){const s=Em(e,ta.BigInt),i=Em(n,ta.BigInt),o=Em(r,ta.Number),a=this.hardforks().filter(f=>f.block!==null||f.ttd!==null&&f.ttd!==void 0||f.timestamp!==void 0),c=a.findIndex(f=>f.ttd!==null&&f.ttd!==void 0);if(a.slice(c+1).findIndex(f=>f.ttd!==null&&f.ttd!==void 0)>=0)throw Error("More than one merge hardforks found with ttd specified");let u=a.findIndex(f=>f.block!==null&&f.block>s||o!==void 0&&Number(f.timestamp)>o);if(u===-1)u=a.length;else if(u===0)throw Error("Must have at least one hardfork at block 0");if(o===void 0){const f=a.slice(0,u).reverse().findIndex(m=>m.block!==null||m.ttd!==void 0);u-=f}if(u-=1,a[u].block===null&&a[u].timestamp===void 0)(i==null||BigInt(a[u].ttd)>i)&&(u-=1);else if(c>=0&&i!==void 0&&i!==null){if(u>=c&&BigInt(a[c].ttd)>i)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(u<c&&BigInt(a[c].ttd)<=i)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const d=u;for(;u<a.length-1&&!(a[u].block!==a[u+1].block||a[u].timestamp!==a[u+1].timestamp);u+=1);if(o){if(a.slice(0,d).reduce((g,y)=>{var v;return Math.max(Number((v=y.timestamp)!==null&&v!==void 0?v:"0"),g)},0)>o)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(a.slice(u+1).reduce((g,y)=>{var v;return Math.min(Number((v=y.timestamp)!==null&&v!==void 0?v:o),g)},o)<o)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return a[u].name}setHardforkByBlockNumber(e,n,r){const s=this.getHardforkByBlockNumber(e,n,r);return this.setHardfork(s),s}_getHardfork(e){const n=this.hardforks();for(const r of n)if(r.name===e)return r;return null}setEIPs(e=[]){for(const n of e){if(!(n in Am))throw new Error(`${n} not supported`);const r=this.gteHardfork(Am[n].minimumHardfork);if(!r)throw new Error(`${n} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${r}`);if(Am[n].requiredEIPs!==void 0){for(const s of Am[n].requiredEIPs)if(!(e.includes(s)||this.isActivatedEIP(s)))throw new Error(`${n} requires EIP ${s}, but is not included in the EIP list`)}}this._eips=e}param(e,n){let r;for(const s of this._eips)if(r=this.paramByEIP(e,n,s),r!==void 0)return r;return this.paramByHardfork(e,n,this._hardfork)}paramByHardfork(e,n,r){let s=null;for(const i of this.HARDFORK_CHANGES){if("eips"in i[1]){const o=i[1].eips;for(const a of o){const c=this.paramByEIP(e,n,a);s=typeof c=="bigint"?c:s}}else{if(i[1][e]===void 0)throw new Error(`Topic ${e} not defined`);i[1][e][n]!==void 0&&(s=i[1][e][n].v)}if(i[0]===r)break}return BigInt(s??0)}paramByEIP(e,n,r){if(!(r in Am))throw new Error(`${r} not supported`);const s=Am[r];if(!(e in s))throw new Error(`Topic ${e} not defined`);if(s[e][n]===void 0)return;const i=s[e][n].v;return BigInt(i)}paramByBlock(e,n,r,s,i){const o=this.getHardforkByBlockNumber(r,s,i);return this.paramByHardfork(e,n,o)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const n of this.HARDFORK_CHANGES){const r=n[1];if(this.gteHardfork(r.name)&&"eips"in r&&r.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,n){const r=Em(n,ta.BigInt),s=e??this._hardfork,i=this.hardforkBlock(s);return typeof i=="bigint"&&i!==BigInt(0)&&r>=i}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,n){const r=e??this._hardfork,s=this.hardforks();let i=-1,o=-1,a=0;for(const c of s)c.name===r&&(i=a),c.name===n&&(o=a),a+=1;return i>=o&&o!==-1}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var n;const r=e??this._hardfork,s=(n=this._getHardfork(r))===null||n===void 0?void 0:n.block;return s==null?null:BigInt(s)}hardforkTimestamp(e){var n;const r=e??this._hardfork,s=(n=this._getHardfork(r))===null||n===void 0?void 0:n.timestamp;return s==null?null:BigInt(s)}eipBlock(e){for(const n of this.HARDFORK_CHANGES){const r=n[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock(typeof n[0]=="number"?String(n[0]):n[0])}return null}hardforkTTD(e){var n;const r=e??this._hardfork,s=(n=this._getHardfork(r))===null||n===void 0?void 0:n.ttd;return s==null?null:BigInt(s)}isHardforkBlock(e,n){const r=Em(e,ta.BigInt),s=n??this._hardfork,i=this.hardforkBlock(s);return typeof i=="bigint"&&i!==BigInt(0)?i===r:!1}nextHardforkBlockOrTimestamp(e){var n,r,s;const i=(n=e)!==null&&n!==void 0?n:this._hardfork,o=this.hardforks();let a=o.findIndex(d=>d.name===i);if(i===hr.Merge&&(a-=1),a<0)return null;let c=(r=o[a].timestamp)!==null&&r!==void 0?r:o[a].block;c=c!=null?Number(c):null;const l=o.slice(a+1).find(d=>{var h;let f=(h=d.timestamp)!==null&&h!==void 0?h:d.block;return f=f!=null?Number(f):null,d.name!==hr.Merge&&f!==null&&f!==void 0&&f!==c});if(l===void 0)return null;const u=(s=l.timestamp)!==null&&s!==void 0?s:l.block;return u==null?null:BigInt(u)}nextHardforkBlock(e){var n;const r=(n=e)!==null&&n!==void 0?n:this._hardfork;let s=this.hardforkBlock(r);if(s===null&&r===hr.Merge){const o=this.hardforks(),a=o.findIndex(c=>c.ttd!==null&&c.ttd!==void 0);if(a<0)throw Error("Merge hardfork should have been found");s=this.hardforkBlock(o[a-1].name)}return s===null?null:this.hardforks().reduce((o,a)=>{const c=BigInt(a.block===null||a.ttd!==void 0&&a.ttd!==null?0:a.block);return c>s&&o===null?c:o},null)}isNextHardforkBlock(e,n){const r=Em(e,ta.BigInt),s=n??this._hardfork,i=this.nextHardforkBlock(s);return i===null?!1:i===r}_calcForkHash(e,n){let r=new Uint8Array,s=0;for(const a of this.hardforks()){const{block:c,timestamp:l,name:u}=a;let d=l??c;if(d=d!==null?Number(d):null,typeof d=="number"&&d!==0&&d!==s&&u!==hr.Merge){const h=mr(d.toString(16).padStart(16,"0"));r=Ii(r,h),s=d}if(a.name===e)break}const i=Ii(n,r);return an(r6e(n3e(i)>>>0))}forkHash(e,n){const r=e??this._hardfork,s=this._getHardfork(r);if(s===null||s?.block===null&&s?.timestamp===void 0&&s?.ttd===void 0){const i="No fork hash calculation possible for future hardfork";throw new Error(i)}if(s?.forkHash!==null&&s?.forkHash!==void 0)return s.forkHash;if(!n)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(r,n)}hardforkForForkHash(e){const n=this.hardforks().filter(r=>r.forkHash===e);return n.length>=1?n[n.length-1]:null}setForkHashes(e){var n;for(const r of this.hardforks()){const s=(n=r.timestamp)!==null&&n!==void 0?n:r.block;(r.forkHash===null||r.forkHash===void 0)&&(s!=null||typeof r.ttd<"u")&&(r.forkHash=this.forkHash(r.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let n;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(n=r[1].consensus.type),r[0]===e)break;return n??this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let n;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(n=r[1].consensus.algorithm),r[0]===e)break;return n??this._chainParams.consensus.algorithm}consensusConfig(){var e;const n=this.hardfork();let r;for(const s of this.HARDFORK_CHANGES)if("consensus"in s[1]&&(r=s[1].consensus[s[1].consensus.algorithm]),s[0]===n)break;return(e=r??this._chainParams.consensus[this.consensusAlgorithm()])!==null&&e!==void 0?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const n={};for(const[s,i]of Object.entries(pC))n[i]=s.toLowerCase();const r={mainnet:p6e,goerli:f6e,sepolia:m6e};if(e)for(const s of e){const{name:i}=s;n[s.chainId.toString()]=i,r[i]=s}return r.names=n,r}}var Nc;(function(t){t[t.EIP155ReplayProtection=155]="EIP155ReplayProtection",t[t.EIP1559FeeMarket=1559]="EIP1559FeeMarket",t[t.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",t[t.EIP2930AccessLists=2930]="EIP2930AccessLists"})(Nc||(Nc={}));function r3e(t){if(t.length===0)return!0;const e=t[0];return!!Array.isArray(e)}function s3e(t){return!r3e(t)}class rg{constructor(e){if(e.length!==20)throw new Error("Invalid address length");this.buf=e}static zero(){return new rg(LW(20))}equals(e){return oT(this.buf,e.buf)}isZero(){return this.equals(rg.zero())}toString(){return an(this.buf)}toArray(){return this.buf}static publicToAddress(e,n=!1){let r=e;if(yD(r),n&&r.length!==64&&(r=Ou.ProjectivePoint.fromHex(r).toRawBytes(!1).slice(1)),r.length!==64)throw new Error("Expected pubKey to be of length 64");return gi(r).slice(-20)}}const i3e=(t,e)=>{const n=t.param("vm","maxInitCodeSize");if(n&&BigInt(e)>n)throw new Error(`the initcode size of this transaction is too large: it is ${e} while the max is ${t.param("vm","maxInitCodeSize")}`)},$W=t=>{let e,n;if(s3e(t)){e=t;const r=[];for(let s=0;s<t.length;s+=1){const i=t[s],o=Sr(i.address),a=[];for(let c=0;c<i.storageKeys.length;c+=1)a.push(Sr(i.storageKeys[c]));r.push([o,a])}n=r}else{n=t??[];const r=[];for(let s=0;s<n.length;s+=1){const i=n[s],o=an(i[0]),a=[];for(let l=0;l<i[1].length;l+=1)a.push(an(i[1][l]));const c={address:o,storageKeys:a};r.push(c)}e=r}return{AccessListJSON:e,accessList:n}},UW=t=>{for(let e=0;e<t.length;e+=1){const n=t[e],r=n[0],s=n[1];if(n[2]!==void 0)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(r.length!==20)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let i=0;i<s.length;i+=1)if(s[i].length!==32)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},FW=t=>{const e=[];for(let n=0;n<t.length;n+=1){const r=t[n],s={address:an(G8(r[0],20)),storageKeys:[]},i=r&&r[1];for(let o=0;o<i.length;o+=1){const a=i[o];s.storageKeys.push(an(G8(a,32)))}e.push(s)}return e},jW=(t,e)=>{const n=e.param("gasPrices","accessListStorageKeyCost"),r=e.param("gasPrices","accessListAddressCost");let s=0;for(let o=0;o<t.length;o+=1){const c=t[o][1];s+=c.length}return t.length*Number(r)+s*Number(n)};class qg{constructor(e,n){var r,s;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=pC.Mainnet,this.DEFAULT_HARDFORK=hr.Merge;const{nonce:i,gasLimit:o,to:a,value:c,data:l,v:u,r:d,s:h,type:f}=e;this._type=Number(or(Sr(f))),this.txOptions=n;const m=Sr(a===""?"0x":a),g=Sr(u===""?"0x":u),y=Sr(d===""?"0x":d),v=Sr(h===""?"0x":h);this.nonce=or(Sr(i===""?"0x":i)),this.gasLimit=or(Sr(o===""?"0x":o)),this.to=m.length>0?new rg(m):void 0,this.value=or(Sr(c===""?"0x":c)),this.data=Sr(l===""?"0x":l),this.v=g.length>0?or(g):void 0,this.r=y.length>0?or(y):void 0,this.s=v.length>0?or(v):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const _=this.to===void 0||this.to===null,A=(r=n.allowUnlimitedInitCodeSize)!==null&&r!==void 0?r:!1,k=(s=n.common)!==null&&s!==void 0?s:this._getCommon();_&&k.isActivatedEIP(3860)&&!A&&i3e(k,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const n=[];return this.getBaseFee()>this.gasLimit&&n.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&n.push("Invalid Signature"),e?n:n.length===0}_validateYParity(){const{v:e}=this;if(e!==void 0&&e!==BigInt(0)&&e!==BigInt(1)){const n=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(n)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==void 0&&e>JDe){const n=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(n)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let n=this.getDataFee();if(e&&(n+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const r=this.common.param("gasPrices","txCreation");r&&(n+=r)}return n}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),n=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let s=0;s<this.data.length;s+=1)this.data[s]===0?r+=e:r+=n;if((this.to===void 0||this.to===null)&&this.common.isActivatedEIP(3860)){const s=BigInt(Math.ceil(this.data.length/32)),i=this.common.param("gasPrices","initCodeWordCost")*s;r+=i}return r}toCreationAddress(){return this.to===void 0||this.to.buf.length===0}isSigned(){const{v:e,r:n,s:r}=this;return!(e===void 0||n===void 0||r===void 0)}verifySignature(){try{const e=this.getSenderPublicKey();return mC(e).length!==0}catch{return!1}}getSenderAddress(){return new rg(rg.publicToAddress(this.getSenderPublicKey()))}sign(e){if(e.length!==32){const c=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(c)}let n=!1;this.type===0&&this.common.gteHardfork("spuriousDragon")&&!this.supports(Nc.EIP155ReplayProtection)&&(this.activeCapabilities.push(Nc.EIP155ReplayProtection),n=!0);const r=this.getMessageToSign(!0),{v:s,r:i,s:o}=this._ecsign(r,e),a=this._processSignature(s,i,o);if(n){const c=this.activeCapabilities.indexOf(Nc.EIP155ReplayProtection);c>-1&&this.activeCapabilities.splice(c,1)}return a}_getCommon(e,n){var r,s,i,o;if(n!==void 0){const a=or(Sr(n));if(e){if(e.chainId()!==a){const c=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(c)}return e.copy()}return ts.isSupportedChainId(a)?new ts({chain:a,hardfork:this.DEFAULT_HARDFORK}):ts.custom({name:"custom-chain",networkId:a,chainId:a},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if(e?.copy&&typeof e?.copy=="function")return e.copy();if(e){const a=typeof e.hardfork=="function"?e.hardfork():e.hardfork;return ts.custom({name:"custom-chain",networkId:e.networkId?e.networkId():(s=BigInt((r=e.customChain)===null||r===void 0?void 0:r.networkId))!==null&&s!==void 0?s:void 0,chainId:e.chainId?e.chainId():(o=BigInt((i=e.customChain)===null||i===void 0?void 0:i.chainId))!==null&&o!==void 0?o:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:a||this.DEFAULT_HARDFORK})}return new ts({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,n=256,r=!1){for(const[s,i]of Object.entries(e))switch(n){case 64:if(r){if(i!==void 0&&i>=q8){const o=this._errorMsg(`${s} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(o)}}else if(i!==void 0&&i>q8){const o=this._errorMsg(`${s} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(o)}break;case 256:if(r){if(i!==void 0&&i>=ib){const o=this._errorMsg(`${s} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(o)}}else if(i!==void 0&&i>ib){const o=this._errorMsg(`${s} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(o)}break;default:{const o=this._errorMsg("unimplemented bits value");throw new Error(o)}}}static _validateNotArray(e){const n=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,s]of Object.entries(e))if(n.includes(r)&&Array.isArray(s))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?an(this.hash()):"not available (unsigned)"}catch{e="error"}let n="";try{n=this.isSigned().toString()}catch{e="error"}let r="";try{r=this.common.hardfork()}catch{r="error"}let s=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return s+=`signed=${n} hf=${r}`,s}_ecsign(e,n,r){const s=Ou.sign(e,n),i=s.toCompactRawBytes(),o=i.subarray(0,32),a=i.subarray(32,64),c=r===void 0?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(r)*BigInt(2);return{r:o,s:a,v:c}}static fromSerializedTx(e,n={}){}static fromTxData(e,n={}){}}const rN=2,u2=mr(rN.toString(16).padStart(2,"0"));class wf extends qg{static fromTxData(e,n={}){return new wf(e,n)}static fromSerializedTx(e,n={}){if(!oT(e.subarray(0,1),u2))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${rN}, received: ${an(e.subarray(0,1))}`);const r=na.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return wf.fromValuesArray(r,n)}static fromValuesArray(e,n={}){if(e.length!==9&&e.length!==12)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,s,i,o,a,c,l,u,d,h,f,m]=e;return this._validateNotArray({chainId:r,v:h}),Yk({nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:o,gasLimit:a,value:l,v:h,r:f,s:m}),new wf({chainId:or(r),nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:o,gasLimit:a,to:c,value:l,data:u,accessList:d??[],v:h!==void 0?or(h):void 0,r:f,s:m},n)}constructor(e,n={}){var r;super(Object.assign(Object.assign({},e),{type:rN}),n),this.DEFAULT_HARDFORK="london";const{chainId:s,accessList:i,maxFeePerGas:o,maxPriorityFeePerGas:a}=e;if(this.common=this._getCommon(n.common,s),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const c=$W(i??[]);if(this.accessList=c.accessList,this.AccessListJSON=c.AccessListJSON,UW(this.accessList),this.maxFeePerGas=or(Sr(o===""?"0x":o)),this.maxPriorityFeePerGas=or(Sr(a===""?"0x":a)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),qg._validateNotArray(e),this.gasLimit*this.maxFeePerGas>ib){const u=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(u)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const u=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(u)}this._validateYParity(),this._validateHighS(),((r=n?.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(jW(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const n=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,i=(n<r?n:r)+e;return this.gasLimit*i+this.value}raw(){return[An(this.chainId),An(this.nonce),An(this.maxPriorityFeePerGas),An(this.maxFeePerGas),An(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),An(this.value),this.data,this.accessList,this.v!==void 0?An(this.v):Uint8Array.from([]),this.r!==void 0?An(this.r):Uint8Array.from([]),this.s!==void 0?An(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Ii(u2,na.RLP.encode(e))}getMessageToSign(e=!0){const n=this.raw().slice(0,9),r=Ii(u2,na.RLP.encode(n));return e?gi(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=gi(this.serialize())),this.cache.hash):gi(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const i=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(i)}const e=this.getMessageToVerifySignature(),{v:n,r,s}=this;this._validateHighS();try{return wD(e,n+BigInt(27),An(r),An(s))}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,n,r){const s=Object.assign(Object.assign({},this.txOptions),{common:this.common});return wf.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:or(n),s:or(r)},s)}toJSON(){const e=FW(this.accessList);return{chainId:xr(this.chainId),nonce:xr(this.nonce),maxPriorityFeePerGas:xr(this.maxPriorityFeePerGas),maxFeePerGas:xr(this.maxFeePerGas),gasLimit:xr(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:xr(this.value),data:an(this.data),accessList:e,v:this.v!==void 0?xr(this.v):void 0,r:this.r!==void 0?xr(this.r):void 0,s:this.s!==void 0?xr(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const sN=1,d2=mr(sN.toString(16).padStart(2,"0"));class vf extends qg{static fromTxData(e,n={}){return new vf(e,n)}static fromSerializedTx(e,n={}){if(!oT(e.subarray(0,1),d2))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${sN}, received: ${an(e.subarray(0,1))}`);const r=na.RLP.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return vf.fromValuesArray(r,n)}static fromValuesArray(e,n={}){if(e.length!==8&&e.length!==11)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,s,i,o,a,c,l,u,d,h,f]=e;this._validateNotArray({chainId:r,v:d}),Yk({nonce:s,gasPrice:i,gasLimit:o,value:c,v:d,r:h,s:f});const m=[];return new vf({chainId:or(r),nonce:s,gasPrice:i,gasLimit:o,to:a,value:c,data:l,accessList:u??m,v:d!==void 0?or(d):void 0,r:h,s:f},n)}constructor(e,n={}){var r;super(Object.assign(Object.assign({},e),{type:sN}),n),this.DEFAULT_HARDFORK="berlin";const{chainId:s,accessList:i,gasPrice:o}=e;if(this.common=this._getCommon(n.common,s),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const a=$W(i??[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,UW(this.accessList),this.gasPrice=or(Sr(o===""?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),qg._validateNotArray(e),this.gasPrice*this.gasLimit>ib){const l=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(l)}this._validateYParity(),this._validateHighS(),((r=n?.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(jW(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[An(this.chainId),An(this.nonce),An(this.gasPrice),An(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),An(this.value),this.data,this.accessList,this.v!==void 0?An(this.v):Uint8Array.from([]),this.r!==void 0?An(this.r):Uint8Array.from([]),this.s!==void 0?An(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Ii(d2,na.RLP.encode(e))}getMessageToSign(e=!0){const n=this.raw().slice(0,8),r=Ii(d2,na.RLP.encode(n));return e?gi(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=gi(this.serialize())),this.cache.hash):gi(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const i=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(i)}const e=this.getMessageToVerifySignature(),{v:n,r,s}=this;this._validateHighS();try{return wD(e,n+BigInt(27),An(r),An(s))}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,n,r){const s=Object.assign(Object.assign({},this.txOptions),{common:this.common});return vf.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:or(n),s:or(r)},s)}toJSON(){const e=FW(this.accessList);return{chainId:xr(this.chainId),nonce:xr(this.nonce),gasPrice:xr(this.gasPrice),gasLimit:xr(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:xr(this.value),data:an(this.data),accessList:e,v:this.v!==void 0?xr(this.v):void 0,r:this.r!==void 0?xr(this.r):void 0,s:this.s!==void 0?xr(this.s):void 0}}errorStr(){var e,n;let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${(n=(e=this.accessList)===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0}`,r}_errorMsg(e){return`${e} (${this.errorStr()})`}}const o3e=0;function Y8(t,e){const n=Number(t),r=Number(e)*2;return n===r+35||n===r+36}class Md extends qg{static fromTxData(e,n={}){return new Md(e,n)}static fromSerializedTx(e,n={}){const r=na.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,n)}static fromValuesArray(e,n={}){if(e.length!==6&&e.length!==9)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,s,i,o,a,c,l,u,d]=e;return Yk({nonce:r,gasPrice:s,gasLimit:i,value:a,v:l,r:u,s:d}),new Md({nonce:r,gasPrice:s,gasLimit:i,to:o,value:a,data:c,v:l,r:u,s:d},n)}constructor(e,n={}){var r;if(super(Object.assign(Object.assign({},e),{type:o3e}),n),this.common=this._validateTxV(this.v,n.common),this.gasPrice=or(Sr(e.gasPrice===""?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>ib){const i=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(i)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),qg._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?Y8(this.v,this.common.chainId())&&this.activeCapabilities.push(Nc.EIP155ReplayProtection):this.activeCapabilities.push(Nc.EIP155ReplayProtection)),((r=n?.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}raw(){return[An(this.nonce),An(this.gasPrice),An(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),An(this.value),this.data,this.v!==void 0?An(this.v):Uint8Array.from([]),this.r!==void 0?An(this.r):Uint8Array.from([]),this.s!==void 0?An(this.s):Uint8Array.from([])]}serialize(){return na.RLP.encode(this.raw())}_getMessageToSign(){const e=[An(this.nonce),An(this.gasPrice),An(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),An(this.value),this.data];return this.supports(Nc.EIP155ReplayProtection)&&(e.push(Sr(this.common.chainId())),e.push(mC(Sr(0))),e.push(mC(Sr(0)))),e}getMessageToSign(e=!0){const n=this._getMessageToSign();return e?gi(na.RLP.encode(n)):n}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=gi(na.RLP.encode(this.raw()))),this.cache.hash):gi(na.RLP.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const n=this._errorMsg("This transaction is not signed");throw new Error(n)}const e=this._getMessageToSign();return gi(na.RLP.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:n,r,s}=this;this._validateHighS();try{return wD(e,n,An(r),An(s),this.supports(Nc.EIP155ReplayProtection)?this.common.chainId():void 0)}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,n,r){let s=e;this.supports(Nc.EIP155ReplayProtection)&&(s+=this.common.chainId()*BigInt(2)+BigInt(8));const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Md.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:s,r:or(n),s:or(r)},i)}toJSON(){return{nonce:xr(this.nonce),gasPrice:xr(this.gasPrice),gasLimit:xr(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:xr(this.value),data:an(this.data),v:this.v!==void 0?xr(this.v):void 0,r:this.r!==void 0?xr(this.r):void 0,s:this.s!==void 0?xr(this.s):void 0}}_validateTxV(e,n){let r;const s=e!==void 0?Number(e):void 0;if(s!==void 0&&s<37&&s!==27&&s!==28)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${s}`);if(s!==void 0&&s!==0&&(!n||n.gteHardfork("spuriousDragon"))&&s!==27&&s!==28)if(n){if(!Y8(BigInt(s),n.chainId()))throw new Error(`Incompatible EIP155-based V ${s} and chain id ${n.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let i;(s-35)%2===0?i=35:i=36,r=BigInt(s-i)/BigInt(2)}return this._getCommon(n,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const h2=new Map;class op{constructor(){}static typeToInt(e){return Number(or(Sr(e)))}static registerTransactionType(e,n){const r=op.typeToInt(e);h2.set(r,n)}static fromTxData(e,n={}){if(!("type"in e)||e.type===void 0)return Md.fromTxData(e,n);const r=op.typeToInt(e.type);if(r===0)return Md.fromTxData(e,n);if(r===1)return vf.fromTxData(e,n);if(r===2)return wf.fromTxData(e,n);const s=h2.get(r);if(s?.fromTxData)return s.fromTxData(e,n);throw new Error(`Tx instantiation with type ${r} not supported`)}static fromSerializedData(e,n={}){if(e[0]<=127)switch(e[0]){case 1:return vf.fromSerializedTx(e,n);case 2:return wf.fromSerializedTx(e,n);default:{const r=h2.get(Number(e[0]));if(r?.fromSerializedTx)return r.fromSerializedTx(e,n);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}else return Md.fromSerializedTx(e,n)}static fromBlockBodyData(e,n={}){if(wh(e))return this.fromSerializedData(e,n);if(Array.isArray(e))return Md.fromValuesArray(e,n);throw new Error("Cannot decode transaction: unknown type input")}}var gT=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const vy=(t,e)=>{let n;if(!e&&typeof t=="string"&&$n(t)&&t.length!==66)throw new l8;try{n=wh(t)?t:sl(t)}catch{throw new RRe}if(!e&&n.byteLength!==32)throw new l8;return n},vD=(t,e=!1)=>{const n=$n(t)?t:Ya(t),r=mr(n),s=mr(Zz(`Ethereum Signed Message:
${r.byteLength}`)),i=e?r:Ii(s,r);return Po(i)},a3e=(t,e)=>{const n=vy(e),r=Ou.sign(t.substring(2),n),s=r.toCompactRawBytes(),i=r.r.toString(16).padStart(64,"0"),o=r.s.toString(16).padStart(64,"0"),a=r.recovery+27;return{messageHash:t,v:is(a),r:`0x${i}`,s:`0x${o}`,signature:`${an(s)}${a.toString(16)}`}},VW=(t,e)=>{const n=vD(t),{messageHash:r,v:s,r:i,s:o,signature:a}=a3e(n,e);return{message:t,messageHash:r,v:s,r:i,s:o,signature:a}},c3e=(t,e)=>gT(void 0,void 0,void 0,function*(){const n=t.sign(mr(e));if(de(n.v)||de(n.r)||de(n.s))throw new qR("Signer Error");const r=n.validate(!0);if(r.length>0){let o="Signer Error ";for(const a of r)o+=`${o} ${a}.`;throw new qR(o)}const s=an(n.serialize()),i=Po(s);return{messageHash:an(n.getMessageToSign(!0)),v:`0x${n.v.toString(16)}`,r:`0x${n.r.toString(16).padStart(64,"0")}`,s:`0x${n.s.toString(16).padStart(64,"0")}`,rawTransaction:s,transactionHash:an(i)}}),l3e=t=>{if(de(t))throw new GRe;const e=op.fromSerializedData(mr(t));return ll(e.getSenderAddress().toString())},iN=(t,e,n,r,s)=>{if(typeof t=="object"){const d=`${t.r}${t.s.slice(2)}${t.v.slice(2)}`;return iN(t.messageHash,d,n)}if(typeof e=="string"&&typeof n=="string"&&!de(r)){const d=`${n}${r.slice(2)}${e.slice(2)}`;return iN(t,d,s)}if(de(e))throw new NRe("signature string undefined");const i=130,o=n?t:vD(t);let a=parseInt(e.substring(i),16);a>26&&(a-=27);const c=Ou.Signature.fromCompact(e.slice(2,i)).addRecoveryBit(a).recoverPublicKey(o.replace("0x","")).toRawBytes(!1),l=Po(c.subarray(1));return ll(`0x${l.slice(-40)}`)},yT=t=>{const e=vy(t),n=Ou.getPublicKey(e,!1),s=Po(n.slice(1)).slice(-40);return ll(`0x${s}`)},u3e=(t,e)=>{const n=vy(t);return`0x${an(Ou.getPublicKey(n,e)).slice(4)}`},HW=(t,e,n)=>gT(void 0,void 0,void 0,function*(){var r,s,i,o,a,c,l;const u=vy(t);let d;if(n?.salt?d=typeof n.salt=="string"?mr(n.salt):n.salt:d=nb(32),!(Kk(e)||wh(e)))throw new DRe;const h=typeof e=="string"?mr(Ya(e)):e;let f;if(n?.iv){if(f=typeof n.iv=="string"?mr(n.iv):n.iv,f.length!==16)throw new MRe}else f=nb(16);const m=(r=n?.kdf)!==null&&r!==void 0?r:"scrypt";let g,y;if(m==="pbkdf2"){if(y={dklen:(s=n?.dklen)!==null&&s!==void 0?s:32,salt:an(d).replace("0x",""),c:(i=n?.c)!==null&&i!==void 0?i:262144,prf:"hmac-sha256"},y.c<1e3)throw new BRe;g=CW(h,d,y.c,y.dklen,"sha256")}else if(m==="scrypt")y={n:(o=n?.n)!==null&&o!==void 0?o:8192,r:(a=n?.r)!==null&&a!==void 0?a:8,p:(c=n?.p)!==null&&c!==void 0?c:1,dklen:(l=n?.dklen)!==null&&l!==void 0?l:32,salt:an(d).replace("0x","")},g=IW(h,d,y.n,y.p,y.r,y.dklen);else throw new dz;const v=yield lD(u,g.slice(0,16),f,"aes-128-ctr"),_=an(v).slice(2),A=Po(Ii(g.slice(16,32),v)).replace("0x","");return{version:3,id:sD(),address:yT(u).toLowerCase().replace("0x",""),crypto:{ciphertext:_,cipherparams:{iv:an(f).replace("0x","")},cipher:"aes-128-ctr",kdf:m,kdfparams:y,mac:A}}}),bD=(t,e)=>{const n=vy(t,e);return{address:yT(n),privateKey:an(n),signTransaction:r=>{throw new qR("Do not have network access to sign the transaction")},sign:r=>VW(typeof r=="string"?r:JSON.stringify(r),n),encrypt:(r,s)=>gT(void 0,void 0,void 0,function*(){return HW(n,r,s)})}},d3e=()=>{const t=Ou.utils.randomPrivateKey();return bD(`${an(t)}`)},h3e=(t,e,n)=>gT(void 0,void 0,void 0,function*(){const r=typeof t=="object"?t:JSON.parse(n?t.toLowerCase():t);if(Et.validateJSONSchema(XDe,r),r.version!==3)throw new kRe;const s=typeof e=="string"?mr(Ya(e)):e;Et.validate(["bytes"],[s]);let i;if(r.crypto.kdf==="scrypt"){const l=r.crypto.kdfparams,u=typeof l.salt=="string"?mr(l.salt):l.salt;i=IW(s,u,l.n,l.p,l.r,l.dklen)}else if(r.crypto.kdf==="pbkdf2"){const l=r.crypto.kdfparams,u=typeof l.salt=="string"?mr(l.salt):l.salt;i=CW(s,u,l.c,l.dklen,"sha256")}else throw new dz;const o=mr(r.crypto.ciphertext);if(Po(Ii(i.slice(16,32),o)).replace("0x","")!==r.crypto.mac)throw new ORe;const c=yield oDe(mr(r.crypto.ciphertext),i.slice(0,16),mr(r.crypto.cipherparams.iv));return bD(c)});var Z8=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const f3e=1e3;class p3e{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map(e=>e.payload)}add(e){const n=rp(e),r=new uC;return this._requests.set(n.id,{payload:n,promise:r}),r}execute(e){return Z8(this,void 0,void 0,function*(){var n;if(this.requests.length===0)return Promise.resolve([]);const r=new uC({timeout:(n=e?.timeout)!==null&&n!==void 0?n:f3e,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(r).catch(s=>r.reject(s)),r.catch(s=>{s instanceof hz&&this._abortAllRequests("Batch request timeout"),r.reject(s)}),r})}_processBatchRequest(e){return Z8(this,void 0,void 0,function*(){var n,r;const s=yield this._requestManager.sendBatch([...this._requests.values()].map(a=>a.payload));if(s.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new Rc(s,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${s.length}`);const i=this.requests.map(a=>a.id).map(Number).sort((a,c)=>a-c),o=s.map(a=>a.id).map(Number).sort((a,c)=>a-c);if(JSON.stringify(i)!==JSON.stringify(o))throw this._abortAllRequests("Invalid batch response"),new Rc(s,`Batch request mismatch the results. Requests: [${i.join()}], Responses: [${o.join()}]`);for(const a of s)qd(a)?(n=this._requests.get(a.id))===null||n===void 0||n.promise.resolve(a.result):zd(a)&&((r=this._requests.get(a.id))===null||r===void 0||r.promise.reject(a.error));e.resolve(s)})}_abortAllRequests(e){for(const{promise:n}of this._requests.values())n.reject(new HRe(e))}}var m3e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,[])).next())})};class Yi extends Jke{constructor(e){var n;if(super(),this.providers=kf.providers,It(e)||typeof e=="string"&&e.trim()!==""||dC(e)){this._requestManager=new kf(e),this._subscriptionManager=new hC(this._requestManager,{});return}const{config:r,provider:s,requestManager:i,subscriptionManager:o,registeredSubscriptions:a,accountProvider:c,wallet:l,requestManagerMiddleware:u}=e;this.setConfig(r??{}),this._requestManager=i??new kf(s,(n=r?.enableExperimentalFeatures)===null||n===void 0?void 0:n.useSubscriptionWhenCheckingBlockTimeout,u),o?this._subscriptionManager=o:this._subscriptionManager=new hC(this.requestManager,a??{}),c&&(this._accountProvider=c),l&&(this._wallet=l)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:(e=this.subscriptionManager)===null||e===void 0?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...n){const r=new e(...n,this.getContextObject());return this.on(sp.CONFIG_CHANGE,s=>{r.setConfig({[s.name]:s.newValue})}),this[e.name]=r,r}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(sp.CONFIG_CHANGE,n=>{this.setConfig({[n.name]:n.newValue})})}registerPlugin(e){if(this[e.pluginNamespace]!==void 0)throw new qRe(e.pluginNamespace);const n={[e.pluginNamespace]:e};n[e.pluginNamespace].link(this),Object.assign(this,n)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return Yi.givenProvider}setProvider(e){return this.provider=e,!0}setRequestManagerMiddleware(e){this.requestManager.setMiddleware(e)}get BatchRequest(){return p3e.bind(void 0,this._requestManager)}extend(e){var n;return e.property&&!this[e.property]&&(this[e.property]={}),(n=e.methods)===null||n===void 0||n.forEach(r=>{const s=(...i)=>m3e(this,void 0,void 0,function*(){return this.requestManager.send({method:r.call,params:i})});e.property?this[e.property][r.name]=s:this[r.name]=s}),this}}Yi.providers=kf.providers;class Wr{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const n=this._iban.slice(4),r=Wr._parseInt(n,36),s=eb(r,40);return ll(s)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},Wr.isIndirect(e)||Wr.isDirect(e))this._iban=e;else throw new Error("Invalid IBAN was provided")}static isDirect(e){return e.length===34||e.length===35}isDirect(){return Wr.isDirect(this._iban)}static isIndirect(e){return e.length===20}isIndirect(){return Wr.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&Wr._mod9710(Wr._iso13616Prepare(e))===1}isValid(){return Wr.isValid(this._iban)}static fromBban(e){const s=`0${(98-this._mod9710(this._iso13616Prepare(`XE00${e}`))).toString()}`.slice(-2);return new Wr(`XE${s}${e}`)}static createIndirect(e){return Wr.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!xo(e))throw new jk(e);const r=BigInt(e_(e)).toString(36),s=eb(r,15);return Wr.fromBban(s.toUpperCase())}static toIban(e){return Wr.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}Wr._iso13616Prepare=t=>{const r=t.toUpperCase();return`${r.slice(4)}${r.slice(0,4)}`.split("").map(i=>{const o=i.charCodeAt(0);return o>=65&&o<=90?o-65+10:i}).join("")};Wr._parseInt=(t,e)=>[...t].reduce((n,r)=>BigInt(parseInt(r,e))+BigInt(e)*n,BigInt(0));Wr._mod9710=t=>{let e=t,n;for(;e.length>2;)n=e.slice(0,9),e=`${(parseInt(n,10)%97).toString()}${e.slice(n.length)}`;return parseInt(e,10)%97};Wr.toAddress=t=>new Wr(t).toAddress();var f2=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},qW;class zW extends hT{constructor(e){super(),this[qW]="Promise",this._promise=new Promise(e)}then(e,n){return f2(this,void 0,void 0,function*(){return this._promise.then(e,n)})}catch(e){return f2(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return f2(this,void 0,void 0,function*(){return this._promise.finally(e)})}on(e,n){return super.on(e,n),this}once(e,n){return super.once(e,n),this}}qW=Symbol.toStringTag;(function(t,e){if(t.setImmediate)return;var n=1,r={},s=!1,i=t.document,o;function a(_){typeof _!="function"&&(_=new Function(""+_));for(var A=new Array(arguments.length-1),k=0;k<A.length;k++)A[k]=arguments[k+1];var S={callback:_,args:A};return r[n]=S,o(n),n++}function c(_){delete r[_]}function l(_){var A=_.callback,k=_.args;switch(k.length){case 0:A();break;case 1:A(k[0]);break;case 2:A(k[0],k[1]);break;case 3:A(k[0],k[1],k[2]);break;default:A.apply(e,k);break}}function u(_){if(s)setTimeout(u,0,_);else{var A=r[_];if(A){s=!0;try{l(A)}finally{c(_),s=!1}}}}function d(){o=function(_){process.nextTick(function(){u(_)})}}function h(){if(t.postMessage&&!t.importScripts){var _=!0,A=t.onmessage;return t.onmessage=function(){_=!1},t.postMessage("","*"),t.onmessage=A,_}}function f(){var _="setImmediate$"+Math.random()+"$",A=function(k){k.source===t&&typeof k.data=="string"&&k.data.indexOf(_)===0&&u(+k.data.slice(_.length))};t.addEventListener?t.addEventListener("message",A,!1):t.attachEvent("onmessage",A),o=function(k){t.postMessage(_+k,"*")}}function m(){var _=new MessageChannel;_.port1.onmessage=function(A){var k=A.data;u(k)},o=function(A){_.port2.postMessage(A)}}function g(){var _=i.documentElement;o=function(A){var k=i.createElement("script");k.onreadystatechange=function(){u(A),k.onreadystatechange=null,_.removeChild(k),k=null},_.appendChild(k)}}function y(){o=function(_){setTimeout(u,0,_)}}var v=Object.getPrototypeOf&&Object.getPrototypeOf(t);v=v&&v.setTimeout?v:t,{}.toString.call(t.process)==="[object process]"?d():h()?f():t.MessageChannel?m():i&&"onreadystatechange"in i.createElement("script")?g():y(),v.setImmediate=a,v.clearImmediate=c})(typeof self>"u"?typeof globalThis>"u"?void 0:globalThis:self);var Mt=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function g3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_protocolVersion",params:[]})})}function WW(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_syncing",params:[]})})}function y3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_coinbase",params:[]})})}function w3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_mining",params:[]})})}function v3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_hashrate",params:[]})})}function b3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_gasPrice",params:[]})})}function _3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_maxPriorityFeePerGas",params:[]})})}function E3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_accounts",params:[]})})}function A3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_blockNumber",params:[]})})}function C3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getBalance",params:[e,n]})})}function I3e(t,e,n,r){return Mt(this,void 0,void 0,function*(){return Et.validate(["address","hex","blockNumberOrTag"],[e,n,r]),t.send({method:"eth_getStorageAt",params:[e,n,r]})})}function T3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getTransactionCount",params:[e,n]})})}function S3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["bytes32"],[e]),t.send({method:"eth_getBlockTransactionCountByHash",params:[e]})})}function x3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["blockNumberOrTag"],[e]),t.send({method:"eth_getBlockTransactionCountByNumber",params:[e]})})}function P3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["bytes32"],[e]),t.send({method:"eth_getUncleCountByBlockHash",params:[e]})})}function R3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["blockNumberOrTag"],[e]),t.send({method:"eth_getUncleCountByBlockNumber",params:[e]})})}function N3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getCode",params:[e,n]})})}function O3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["address","hex"],[e,n]),t.send({method:"eth_sign",params:[e,n]})})}function k3e(t,e){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_signTransaction",params:[e]})})}function D3e(t,e){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_sendTransaction",params:[e]})})}function GW(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["hex"],[e]),t.send({method:"eth_sendRawTransaction",params:[e]})})}function M3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_call",params:[e,n]})})}function B3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_estimateGas",params:[e,n]})})}function L3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["bytes32","bool"],[e,n]),t.send({method:"eth_getBlockByHash",params:[e,n]})})}function KW(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["blockNumberOrTag","bool"],[e,n]),t.send({method:"eth_getBlockByNumber",params:[e,n]})})}function $3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["bytes32"],[e]),t.send({method:"eth_getTransactionByHash",params:[e]})})}function U3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["bytes32","hex"],[e,n]),t.send({method:"eth_getTransactionByBlockHashAndIndex",params:[e,n]})})}function F3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["blockNumberOrTag","hex"],[e,n]),t.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[e,n]})})}function j3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["bytes32"],[e]),t.send({method:"eth_getTransactionReceipt",params:[e]})})}function V3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["bytes32","hex"],[e,n]),t.send({method:"eth_getUncleByBlockHashAndIndex",params:[e,n]})})}function H3e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["blockNumberOrTag","hex"],[e,n]),t.send({method:"eth_getUncleByBlockNumberAndIndex",params:[e,n]})})}function q3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["filter"],[e]),t.send({method:"eth_newFilter",params:[e]})})}function z3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_newBlockFilter",params:[]})})}function W3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_newPendingTransactionFilter",params:[]})})}function G3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["hex"],[e]),t.send({method:"eth_uninstallFilter",params:[e]})})}function K3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["hex"],[e]),t.send({method:"eth_getFilterChanges",params:[e]})})}function Q3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["hex"],[e]),t.send({method:"eth_getFilterLogs",params:[e]})})}function Y3e(t,e){return Mt(this,void 0,void 0,function*(){return Et.validate(["filter"],[e]),t.send({method:"eth_getLogs",params:[e]})})}function Z3e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_getWork",params:[]})})}function J3e(t,e,n,r){return Mt(this,void 0,void 0,function*(){return Et.validate(["bytes8","bytes32","bytes32"],[e,n,r]),t.send({method:"eth_submitWork",params:[e,n,r]})})}function X3e(t,e,n,r){return Mt(this,void 0,void 0,function*(){Et.validate(["hex","blockNumberOrTag"],[e,n]);for(const s of r)Et.validate(["number"],[s]);return t.send({method:"eth_feeHistory",params:[e,n,r]})})}function e5e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_pendingTransactions",params:[]})})}function t5e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_requestAccounts",params:[]})})}function n5e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"eth_chainId",params:[]})})}function r5e(t,e,n,r){return Mt(this,void 0,void 0,function*(){return Et.validate(["address","bytes32[]","blockNumberOrTag"],[e,n,r]),t.send({method:"eth_getProof",params:[e,n,r]})})}function s5e(t){return Mt(this,void 0,void 0,function*(){return t.send({method:"web3_clientVersion",params:[]})})}function i5e(t,e,n){return Mt(this,void 0,void 0,function*(){return Et.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_createAccessList",params:[e,n]})})}function o5e(t,e,n,r=!1){return Mt(this,void 0,void 0,function*(){return Et.validate(["address"],[e]),t.send({method:`eth_signTypedData${r?"":"_v4"}`,params:[e,n]})})}var _D=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function a5e(t){return _D(this,void 0,void 0,function*(){return t.send({method:"net_version",params:[]})})}function c5e(t){return _D(this,void 0,void 0,function*(){return t.send({method:"net_peerCount",params:[]})})}function l5e(t){return _D(this,void 0,void 0,function*(){return t.send({method:"net_listening",params:[]})})}var ku=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const u5e=t=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_listAccounts",params:[]})}),d5e=(t,e)=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_newAccount",params:[e]})}),h5e=(t,e,n,r)=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_unlockAccount",params:[e,n,r]})}),f5e=(t,e)=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_lockAccount",params:[e]})}),p5e=(t,e,n)=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_importRawKey",params:[e,n]})}),m5e=(t,e,n)=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_sendTransaction",params:[e,n]})}),g5e=(t,e,n)=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_signTransaction",params:[e,n]})}),y5e=(t,e,n,r)=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_sign",params:[e,n,r]})}),w5e=(t,e,n)=>ku(void 0,void 0,void 0,function*(){return t.send({method:"personal_ecRecover",params:[e,n]})}),J8={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},X8={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},e4={type:"object",properties:{gasPrice:{type:"null"}}},BE=(t,e,n)=>{try{Et.validateJSONSchema(t,e)}catch(r){throw r instanceof Bg?new yNe(r.errors,n):r}},v5e=t=>{var e,n;const r=t;if(!de(r.type)){let i;switch(r.type){case"0x0":i=J8;break;case"0x1":i=X8;break;case"0x2":i=e4;break;default:return Pe({format:"uint"},r.type,Ut)}return BE(i,r,r.type),Pe({format:"uint"},r.type,Ut)}if(!de(r.maxFeePerGas)||!de(r.maxPriorityFeePerGas))return BE(e4,r,"0x2"),"0x2";if(!de(r.accessList))return BE(X8,r,"0x1"),"0x1";const s=(e=r.hardfork)!==null&&e!==void 0?e:(n=r.common)===null||n===void 0?void 0:n.hardfork;if(!de(s)){const i=Object.keys(vw).indexOf(s);if(i>=Object.keys(vw).indexOf("london"))return de(r.gasPrice)?"0x2":"0x0";if(i===Object.keys(vw).indexOf("berlin"))return"0x0"}if(!de(r.gasPrice))return BE(J8,r,"0x0"),"0x0"},b5e=(t,e)=>{var n;return((n=e?.transactionTypeParser)!==null&&n!==void 0?n:v5e)(t)},_5e=t=>t[0]>127?"0x0":_u(t[0]),E5e={type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}},ED={type:"array",items:Object.assign({},E5e)},A5e={type:"object",properties:{accessList:Object.assign({},ED),gasUsed:{type:"string"}}},t4={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},n4={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},C5e={type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}},QW={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},ED),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},t4),hardfork:Object.assign({},n4),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},C5e),baseChain:Object.assign({},t4),hardfork:Object.assign({},n4)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},oN={type:"object",properties:Object.assign(Object.assign({},QW.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},ED),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},YW={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},gC={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},oN)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},YW)},withdrawalsRoot:{format:"bytes32"}}},I5e={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},YW)},withdrawalsRoot:{format:"bytes32"}}},by={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},T5e={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},_y={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},by)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},S5e={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},x5e={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},P5e={type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}},R5e={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},P5e)}}};function no(t,e=vi,n={transactionSchema:oN,fillInputAndData:!1}){var r,s;let i=vh({},t);if(de(t?.common)||(i.common=Object.assign({},t.common),de((r=t.common)===null||r===void 0?void 0:r.customChain)||(i.common.customChain=Object.assign({},t.common.customChain))),i=Pe((s=n.transactionSchema)!==null&&s!==void 0?s:oN,i,e),!de(i.data)&&!de(i.input)&&_u(i.data)!==_u(i.input))throw new gz({data:an(i.data),input:an(i.input)});return n.fillInputAndData&&(de(i.data)?de(i.input)||(i.data=i.input):i.input=i.data),de(i.gasLimit)||(i.gas=i.gasLimit,delete i.gasLimit),i}function N5e(t,e,n={fillInputAndData:!1}){return{raw:Pe({format:"bytes"},t,e),tx:no(Object.assign(Object.assign({},op.fromSerializedData(mr(t)).toJSON()),{hash:an(Ug(mr(t))),type:_5e(mr(t))}),e,{fillInputAndData:n.fillInputAndData,transactionSchema:n.transactionSchema})}}var AD=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function CD(t,e){return AD(this,void 0,void 0,function*(){const n=yield a5e(t.requestManager);return Pe({format:"uint"},n,e)})}function O5e(t,e){return AD(this,void 0,void 0,function*(){const n=yield c5e(t.requestManager);return Pe({format:"uint"},n,e)})}const k5e=t=>AD(void 0,void 0,void 0,function*(){return l5e(t.requestManager)});var p2=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class ZW extends Yi{getId(e=this.defaultReturnFormat){return p2(this,void 0,void 0,function*(){return CD(this,e)})}getPeerCount(e=this.defaultReturnFormat){return p2(this,void 0,void 0,function*(){return O5e(this,e)})}isListening(){return p2(this,void 0,void 0,function*(){return k5e(this)})}}const zg="ALLEVENTS",aN={name:zg,signature:"",type:"event",inputs:[]},wT={bytes:wu.HEX,number:aa.NUMBER};var JW=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function D5e(t,e,n){return JW(this,void 0,void 0,function*(){var r,s,i,o;const a=yield SG(e,e.defaultBlock,!1,Ut);if(de(a.baseFeePerGas))throw new fNe;let c;if(de(t.gasPrice)&&BigInt(a.baseFeePerGas)===BigInt(0)&&(c=yield kD(e,n)),!de(t.gasPrice)||!de(c)){const l=Pe({format:"uint"},(r=t.gasPrice)!==null&&r!==void 0?r:c,n);return{maxPriorityFeePerGas:l,maxFeePerGas:l}}return{maxPriorityFeePerGas:Pe({format:"uint"},(s=t.maxPriorityFeePerGas)!==null&&s!==void 0?s:e.defaultMaxPriorityFeePerGas,n),maxFeePerGas:Pe({format:"uint"},(i=t.maxFeePerGas)!==null&&i!==void 0?i:BigInt(a.baseFeePerGas)*BigInt(2)+BigInt((o=t.maxPriorityFeePerGas)!==null&&o!==void 0?o:e.defaultMaxPriorityFeePerGas),n)}})}function XW(t,e,n){return JW(this,void 0,void 0,function*(){const r=eG(t,e);if(!de(r)){if(r.startsWith("-"))throw new f8(r);if(Number(r)<0||Number(r)>127)throw new f8(r);if(de(t.gasPrice)&&(r==="0x0"||r==="0x1"))return{gasPrice:yield kD(e,n),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if(r==="0x2")return Object.assign({gasPrice:void 0},yield D5e(t,e,n))}})}var ID=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const cN=(t,e,n,r)=>{if(n!==void 0&&t in n&&n[t]!==void 0){if(typeof n[t]=="string"&&xo(n[t]))return n[t];if(!$n(n[t])&&Qz(n[t])){if(e.wallet){const s=e.wallet.get(Pe({format:"uint"},n[t],wT));if(!de(s))return s.address;throw new p8}throw new p8}else throw t==="from"?new KRe(n.from):new QRe(n.to)}if(t==="from"){if(!de(r))return yT(r);if(!de(e.defaultAccount))return e.defaultAccount}},M5e=(t,e,...n)=>ID(void 0,[t,e,...n],void 0,function*(r,s,i=r.defaultReturnFormat){if(de(s))throw new hNe;return PG(r,s,r.defaultBlock,i)}),eG=(t,e)=>{const n=b5e(t,e);if(!de(n))return n;if(!de(e.defaultTransactionType))return Pe({format:"uint"},e.defaultTransactionType,Ut)};function B5e(t){return ID(this,void 0,void 0,function*(){var e,n;let r=Pe(QW,t.transaction,t.web3Context.defaultReturnFormat);if(de(r.from)&&(r.from=cN("from",t.web3Context,void 0,t.privateKey)),de(r.nonce)&&(r.nonce=yield M5e(t.web3Context,r.from,Ut)),de(r.value)&&(r.value="0x0"),de(r.data))de(r.input)?r.input="0x":r.input.startsWith("0x")||(r.input=`0x${r.input}`);else{if(!de(r.input)&&r.data!==r.input)throw new gz({data:an(r.data),input:an(r.input)});r.data.startsWith("0x")||(r.data=`0x${r.data}`)}if(de(r.common)){if(t.web3Context.defaultCommon){const s=t.web3Context.defaultCommon,i=s.customChain.chainId,o=s.customChain.networkId,a=s.customChain.name;r.common=Object.assign(Object.assign({},s),{customChain:{chainId:i,networkId:o,name:a}})}de(r.chain)&&(r.chain=t.web3Context.defaultChain),de(r.hardfork)&&(r.hardfork=t.web3Context.defaultHardfork)}if(de(r.chainId)&&de((e=r.common)===null||e===void 0?void 0:e.customChain.chainId)&&(r.chainId=yield NG(t.web3Context,Ut)),de(r.networkId)&&(r.networkId=(n=t.web3Context.defaultNetworkId)!==null&&n!==void 0?n:yield CD(t.web3Context,Ut)),de(r.gasLimit)&&!de(r.gas)&&(r.gasLimit=r.gas),r.type=eG(r,t.web3Context),de(r.accessList)&&(r.type==="0x1"||r.type==="0x2")&&(r.accessList=[]),t.fillGasPrice&&(r=Object.assign(Object.assign({},r),yield XW(r,t.web3Context,Ut))),de(r.gas)&&de(r.gasLimit)&&t.fillGasLimit){const s=yield BD(t.web3Context,r,"latest",Ut);r=Object.assign(Object.assign({},r),{gas:Pe({format:"uint"},s,Ut)})}return r})}const L5e=t=>ID(void 0,void 0,void 0,function*(){var e;return((e=t.web3Context.transactionBuilder)!==null&&e!==void 0?e:B5e)(Object.assign(Object.assign({},t),{transaction:t.transaction}))});var TD=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function lN(t,e,n){const r=t.transactionPollingInterval,[s,i]=cW(()=>TD(this,void 0,void 0,function*(){let a;try{a=yield DD(t,wT)}catch(l){console.warn("An error happen while trying to get the block number",l);return}const c=a-e;if(c>=t.transactionBlockTimeout)return new vz({starterBlockNumber:e,numberOfBlocks:c,transactionHash:n})}),r);return[i,{clean:()=>{clearInterval(s)}}]}function $5e(t,e,n){return TD(this,void 0,void 0,function*(){var r;let s=!0,i,o;function a(l,u){u&&console.warn("error happened at subscription. So revert to polling...",u),o.clean(),s=!1;const[d,h]=lN(t,e,n);o.clean=h.clean,d.catch(f=>l(f))}try{i=yield(r=t.subscriptionManager)===null||r===void 0?void 0:r.subscribe("newHeads"),o={clean:()=>{var l;i.id&&((l=t.subscriptionManager)===null||l===void 0||l.removeSubscription(i).then(()=>{}).catch(()=>{}))}}}catch{return lN(t,e,n)}return[new Promise((l,u)=>{try{i.on("data",d=>{if(s=!1,!d?.number)return;const h=Number(BigInt(d.number)-BigInt(e));h>=t.transactionBlockTimeout&&u(new vz({starterBlockNumber:e,numberOfBlocks:h,transactionHash:n}))}),i.on("error",d=>{a(u,d)})}catch(d){a(u,d)}setTimeout(()=>{s&&a(u)},t.blockHeaderTimeout*1e3)}),o]})}function tG(t,e){return TD(this,void 0,void 0,function*(){var n,r;const{provider:s}=t.requestManager;let i;const o=yield DD(t,wT);return!((r=(n=s).supportsSubscriptions)===null||r===void 0)&&r.call(n)&&t.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?i=yield $5e(t,o,e):i=lN(t,o,e),i})}var U5e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function uN(t,e,n){return U5e(this,void 0,void 0,function*(){const[r,s]=rD(t.transactionSendTimeout,new pNe({numberOfSeconds:t.transactionSendTimeout/1e3,transactionHash:n})),[i,o]=yield tG(t,n);try{return yield Promise.race([e(),s,i])}finally{clearTimeout(r),o.clean()}})}var r4=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function nG(t,e,n,r){return r4(this,void 0,void 0,function*(){var s;const i=(s=t.transactionReceiptPollingInterval)!==null&&s!==void 0?s:t.transactionPollingInterval,[o,a]=nD(()=>r4(this,void 0,void 0,function*(){try{return(r??xG)(t,e,n)}catch(h){console.warn("An error happen while trying to get the transaction receipt",h);return}}),i),[c,l]=rD(t.transactionPollingTimeout,new wz({numberOfSeconds:t.transactionPollingTimeout/1e3,transactionHash:e})),[u,d]=yield tG(t,e);try{return yield Promise.race([o,l,u])}finally{c&&clearTimeout(c),a&&clearInterval(a),d.clean()}})}var F5e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const E1=({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:s})=>{var i;let o=1;const a=setInterval(()=>{F5e(void 0,void 0,void 0,function*(){if(o>=t.transactionConfirmationBlocks){clearInterval(a);return}const c=yield KW(t.requestManager,is(BigInt(e.blockNumber)+BigInt(o)),!1);c?.hash&&(o+=1,n.emit("confirmation",{confirmations:Pe({format:"uint"},o,s),receipt:Pe(r??_y,e,s),latestBlockHash:Pe({format:"bytes32"},c.hash,s)}))})},(i=t.transactionReceiptPollingInterval)!==null&&i!==void 0?i:t.transactionPollingInterval)};var s4=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const j5e=({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:s})=>{let i=!0,o;setImmediate(()=>{var a;(a=t.subscriptionManager)===null||a===void 0||a.subscribe("newHeads").then(c=>{c.on("data",l=>s4(void 0,void 0,void 0,function*(){var u;if(i=!1,!l?.number||o===l?.parentHash)return;o=l?.parentHash;const d=BigInt(l.number)-BigInt(e.blockNumber)+BigInt(1);n.emit("confirmation",{confirmations:Pe({format:"uint"},d,s),receipt:Pe(r??_y,e,s),latestBlockHash:Pe({format:"bytes32"},l.parentHash,s)}),d>=t.transactionConfirmationBlocks&&(yield(u=t.subscriptionManager)===null||u===void 0?void 0:u.removeSubscription(c))})),c.on("error",()=>s4(void 0,void 0,void 0,function*(){var l;yield(l=t.subscriptionManager)===null||l===void 0?void 0:l.removeSubscription(c),i=!1,E1({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:s})}))}).catch(()=>{i=!1,E1({web3Context:t,transactionReceipt:e,customTransactionReceiptSchema:r,transactionPromiEvent:n,returnFormat:s})})}),setTimeout(()=>{i&&E1({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,returnFormat:s})},t.blockHeaderTimeout*1e3)};function V5e(t,e,n,r,s,i){if(de(n)||de(n.blockHash))throw new mNe({receipt:n,blockHash:Pe({format:"bytes32"},n?.blockHash,s),transactionHash:Pe({format:"bytes32"},r,s)});if(!n.blockNumber)throw new gNe({receipt:n});e.emit("confirmation",{confirmations:Pe({format:"uint"},1,s),receipt:Pe(i??_y,n,s),latestBlockHash:Pe({format:"bytes32"},n.blockHash,s)});const o=t.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?j5e({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:i,returnFormat:s}):E1({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:i,returnFormat:s})}const vT=t=>!It(t)&&typeof t=="object"&&!It(t.type)&&t.type==="error",SD=t=>!It(t)&&typeof t=="object"&&!It(t.type)&&t.type==="event",bT=t=>!It(t)&&typeof t=="object"&&!It(t.type)&&t.type==="function",H5e=t=>!It(t)&&typeof t=="object"&&!It(t.type)&&t.type==="constructor",q5e=t=>typeof t=="object"&&typeof t.components>"u"&&typeof t.name>"u",rG=t=>t.includes("[]")?{type:"tuple[]",name:t.slice(0,-2)}:{type:"tuple",name:t},sG=t=>{const e=[];for(const n of Object.keys(t)){const r=t[n];typeof r=="object"?e.push(Object.assign(Object.assign({},rG(n)),{components:sG(r)})):e.push({name:n,type:t[n]})}return e},dN=(t,e)=>{const n=[];return e.forEach(r=>{if(typeof r.components=="object"){if(!r.type.startsWith("tuple"))throw new mn(`Invalid value given "${r.type}". Error: components found but type is not tuple.`);const s=r.type.indexOf("["),i=s>=0?r.type.substring(s):"",o=dN(t,r.components);n.push(`(${o.join(",")})${i}`)}else n.push(r.type)}),n},cu=t=>{var e,n,r,s;return vT(t)||SD(t)||bT(t)?!((e=t.name)===null||e===void 0)&&e.includes("(")?t.name:`${(n=t.name)!==null&&n!==void 0?n:""}(${dN(!1,(r=t.inputs)!==null&&r!==void 0?r:[]).join(",")})`:`(${dN(!1,(s=t.inputs)!==null&&s!==void 0?s:[]).join(",")})`},z5e=t=>{if(typeof t!="string"&&!vT(t))throw new mn("Invalid parameter value in encodeErrorSignature");let e;return t&&(typeof t=="function"||typeof t=="object")?e=cu(t):e=t,Po(e)},xD=t=>{if(typeof t!="string"&&!SD(t))throw new mn("Invalid parameter value in encodeEventSignature");let e;return t&&(typeof t=="function"||typeof t=="object")?e=cu(t):e=t,Po(e)};function PD(t,e){return t.exec(e)?.groups}var iG=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,oG=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,aG=/^\(.+?\).*?$/,W5e=Object.defineProperty,G5e=(t,e,n)=>e in t?W5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k0=(t,e,n)=>(G5e(t,typeof e!="symbol"?e+"":e,n),n),K5e="abitype",Q5e="0.7.1",Wi=class extends Error{constructor(e,n={}){const r=n.cause instanceof Wi?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof Wi&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: ${K5e}@${Q5e}`].join(`
`);super(i),k0(this,"details"),k0(this,"docsPath"),k0(this,"metaMessages"),k0(this,"shortMessage"),k0(this,"name","AbiTypeError"),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}},cG=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function lG(t){return cG.test(t)}function Y5e(t){return PD(cG,t)}var i4=new Set(["memory","indexed","storage","calldata"]),Z5e=new Set(["calldata","memory","storage"]);function J5e(t,e){return e?`${e}:${t}`:t}var m2=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),X5e=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,eMe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,tMe=/^u?int$/;function yC(t,e){const n=J5e(t,e?.type);if(m2.has(n))return m2.get(n);const r=aG.test(t),s=PD(r?eMe:X5e,t);if(!s)throw new Wi("Invalid ABI parameter.",{details:t});if(s.name&&rMe(s.name))throw new Wi("Invalid ABI parameter.",{details:t,metaMessages:[`"${s.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=e?.structs??{};let c,l={};if(r){c="tuple";const d=km(s.type),h=[],f=d.length;for(let m=0;m<f;m++)h.push(yC(d[m],{structs:a}));l={components:h}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(tMe.test(s.type))c=`${s.type}256`;else if(c=s.type,e?.type!=="struct"&&!uG(c))throw new Wi("Unknown type.",{metaMessages:[`Type "${c}" is not a valid ABI type.`]});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new Wi("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${s.modifier}" not allowed${e?.type?` in "${e.type}" type`:""}.`]});if(Z5e.has(s.modifier)&&!sMe(c,!!s.array))throw new Wi("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${s.modifier}" not allowed${e?.type?` in "${e.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${s.modifier}" was given.`]})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return m2.set(n,u),u}function km(t,e=[],n="",r=0){if(t===""){if(n==="")return e;if(r!==0)throw new Wi("Unbalanced parentheses.",{metaMessages:[`"${n.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`});return[...e,n.trim()]}const s=t.length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?km(a,[...e,n.trim()]):km(a,e,`${n}${o}`,r);case"(":return km(a,e,`${n}${o}`,r+1);case")":return km(a,e,`${n}${o}`,r-1);default:return km(a,e,`${n}${o}`,r)}}return[]}function uG(t){return t==="address"||t==="bool"||t==="function"||t==="string"||iG.test(t)||oG.test(t)}var nMe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function rMe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||iG.test(t)||oG.test(t)||nMe.test(t)}function sMe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function iMe(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!lG(a))continue;const c=Y5e(a);if(!c)throw new Wi("Invalid struct signature.",{details:a});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const m=l[h].trim();if(!m)continue;const g=yC(m,{type:"struct"});u.push(g)}if(!u.length)throw new Wi("Invalid struct signature.",{details:a,metaMessages:["No properties exist."]});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=dG(c,e)}return r}var oMe=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function dG(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(aG.test(o.type))r.push(o);else{const c=PD(oMe,o.type);if(!c?.type)throw new Wi("Invalid ABI parameter.",{details:JSON.stringify(o,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Wi("Circular reference detected.",{metaMessages:[`Struct "${u}" is a circular reference.`]});r.push({...o,type:`tuple${l??""}`,components:dG(e[u]??[],e,new Set([...n,u]))})}else if(uG(u))r.push(o);else throw new Wi("Unknown type.",{metaMessages:[`Type "${u}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]})}}return r}function aMe(t){let e;if(typeof t=="string")e=yC(t,{modifiers:i4});else{const n=iMe(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!lG(i)){e=yC(i,{modifiers:i4,structs:n});break}}}if(!e)throw new Wi("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(t,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return e}const Dr=32;function hN(t=0){var e;if(((e=globalThis.Buffer)===null||e===void 0?void 0:e.alloc)!==void 0){const n=globalThis.Buffer.alloc(t);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}return new Uint8Array(t)}function hG(t){var e,n;return Object.assign(Object.assign({},t),{name:(e=t.name)!==null&&e!==void 0?e:"",components:(n=t.components)===null||n===void 0?void 0:n.map(r=>hG(r))})}function cMe(t){return!It(t)&&typeof t=="object"&&!It(t.type)&&typeof t.type=="string"}function fG(t){return t.map(e=>{var n;if(cMe(e))return e;if(typeof e=="string")return hG(aMe(e.replace(/tuple/,"")));if(q5e(e)){const r=Object.keys(e)[0],s=rG(r);return s.name=(n=s.name)!==null&&n!==void 0?n:"",Object.assign(Object.assign({},s),{components:sG(e[r])})}throw new mn("Invalid abi")})}function RD(t){const e=t.type.lastIndexOf("["),n=t.type.substring(0,e),r=t.type.substring(e);let s=-1;if(r!=="[]"&&(s=Number(r.slice(1,-1)),isNaN(s)))throw new mn("Invalid fixed array size",{size:r});return{param:{type:n,name:"",components:t.components},size:s}}function wC(t){var e,n;return t.type==="string"||t.type==="bytes"||t.type.endsWith("[]")?!0:t.type==="tuple"?(n=(e=t.components)===null||e===void 0?void 0:e.some(wC))!==null&&n!==void 0?n:!1:t.type.endsWith("]")?wC(RD(t).param):!1}const pG=20,mG=Dr-pG;function lMe(t,e){if(typeof e!="string")throw new mn("address type expects string as input type",{value:e,name:t.name,type:t.type});let n=e.toLowerCase();if(n.startsWith("0x")||(n=`0x${n}`),!xo(n))throw new mn("provided input is not valid address",{value:e,name:t.name,type:t.type});const r=xp(n),s=hN(Dr);return s.set(r,mG),{dynamic:!1,encoded:s}}function uMe(t,e){const n=e.subarray(mG,Dr);if(n.length!==pG)throw new mn("Invalid decoding input, not enough bytes to decode address",{bytes:e});const r=Nu(n);return{result:ll(r),encoded:e.subarray(Dr),consumed:Dr}}const ah=new Map;let LE=BigInt(256);for(let t=8;t<=256;t+=8)ah.set(`uint${t}`,{min:BigInt(0),max:LE-BigInt(1)}),ah.set(`int${t}`,{min:-LE/BigInt(2),max:LE/BigInt(2)-BigInt(1)}),LE*=BigInt(256);ah.set("int",ah.get("int256"));ah.set("uint",ah.get("uint256"));const gG=BigInt(1)<<BigInt(256);function dMe(t,e=Dr){let n;return t<0?n=(gG+t).toString(16):n=t.toString(16),n=$g(n,e*2),xp(n)}function hMe(t,e){const n=Nu(t),r=BigInt(n);return r<=e?r:r-gG}function i_(t,e){let n;try{n=gf(e)}catch{throw new mn("provided input is not number value",{type:t.type,value:e,name:t.name})}const r=ah.get(t.type);if(!r)throw new mn("provided abi contains invalid number datatype",{type:t.type});if(n<r.min)throw new mn("provided input is less then minimum for given type",{type:t.type,value:e,name:t.name,minimum:r.min.toString()});if(n>r.max)throw new mn("provided input is greater then maximum for given type",{type:t.type,value:e,name:t.name,maximum:r.max.toString()});return{dynamic:!1,encoded:dMe(n)}}function Wg(t,e){if(e.length<Dr)throw new mn("Not enough bytes left to decode",{param:t,bytesLeft:e.length});const n=e.subarray(0,Dr),r=ah.get(t.type);if(!r)throw new mn("provided abi contains invalid number datatype",{type:t.type});const s=hMe(n,r.max);if(s<r.min)throw new mn("decoded value is less then minimum for given type",{type:t.type,value:s,name:t.name,minimum:r.min.toString()});if(s>r.max)throw new mn("decoded value is greater then maximum for given type",{type:t.type,value:s,name:t.name,maximum:r.max.toString()});return{result:s,encoded:e.subarray(Dr),consumed:Dr}}function fMe(t,e){let n;try{n=eW(e)}catch(r){if(r instanceof Vk)throw new mn("provided input is not valid boolean value",{type:t.type,value:e,name:t.name})}return i_({type:"uint8",name:""},Number(n))}function pMe(t,e){const n=Wg({type:"uint8",name:""},e);if(n.result>1||n.result<0)throw new mn("Invalid boolean value encoded",{boolBytes:e.subarray(0,Dr),numberResult:n});return{result:n.result===BigInt(1),encoded:n.encoded,consumed:Dr}}const mMe=32;function yG(t,e){if(typeof e=="string"&&e.length%2!==0&&(e+="0"),!yh(e))throw new mn("provided input is not valid bytes value",{type:t.type,value:e,name:t.name});const n=sl(e),[,r]=t.type.split("bytes");if(r){if(Number(r)>mMe||Number(r)<1)throw new mn("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:t.type});if(Number(r)<n.length)throw new mn("provided input size is different than type size",{type:t.type,value:e,name:t.name});const o=hN(Dr);return o.set(n),{dynamic:!1,encoded:o}}const s=Math.ceil(n.length/Dr),i=hN(Dr+s*Dr);return i.set(i_({type:"uint32",name:""},n.length).encoded),i.set(n,Dr),{dynamic:!0,encoded:i}}function wG(t,e){const[,n]=t.type.split("bytes");let r=Number(n),s=e,i=1,o=0;if(!r){const a=Wg({type:"uint32",name:""},s);r=Number(a.result),o+=a.consumed,s=a.encoded,i=Math.ceil(r/Dr)}if(r>e.length)throw new mn("there is not enough data to decode",{type:t.type,encoded:e,size:r});return{result:an(s.subarray(0,r)),encoded:s.subarray(i*Dr),consumed:o+i*Dr}}function gMe(t,e){if(typeof e!="string")throw new mn("invalid input, should be string",{input:e});const n=Xk(e);return yG({type:"bytes",name:""},n)}function yMe(t,e){const n=wG({type:"bytes"},e);return{result:cT(n.result),encoded:n.encoded,consumed:n.consumed}}function vG(t){let e=0,n=0;const r=[],s=[];for(const i of t)i.dynamic?e+=Dr:e+=i.encoded.length;for(const i of t)i.dynamic?(r.push(i_({type:"uint256",name:""},e+n)),s.push(i),n+=i.encoded.length):r.push(i);return Ii(...r.map(i=>i.encoded),...s.map(i=>i.encoded))}function wMe(t,e){if(!Array.isArray(e))throw new mn("Expected value to be array",{abi:t,values:e});const{size:n,param:r}=RD(t),s=e.map(a=>fN(r,a)),i=n===-1,o=s.length>0&&s[0].dynamic;if(!i&&e.length!==n)throw new mn("Given arguments count doesn't match array length",{arrayLength:n,argumentsLength:e.length});if(i||o){const a=vG(s);if(i){const c=i_({type:"uint256",name:""},s.length).encoded;return{dynamic:!0,encoded:s.length>0?Ii(c,a):c}}return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Ii(...s.map(a=>a.encoded))}}function vMe(t,e){let{size:n,param:r}=RD(t);const s=n===-1;let i=0;const o=[];let a=e;if(s){const l=Wg({type:"uint32",name:""},e);n=Number(l.result),i=l.consumed,a=l.encoded}if(wC(r)){for(let l=0;l<n;l+=1){const u=Wg({type:"uint32",name:""},a.subarray(l*Dr));i+=u.consumed;const d=vC(r,a.subarray(Number(u.result)));i+=d.consumed,o.push(d.result)}return{result:o,encoded:a.subarray(i),consumed:i}}for(let l=0;l<n;l+=1){const u=vC(r,e.subarray(i));i+=u.consumed,o.push(u.result)}return{result:o,encoded:e.subarray(i),consumed:i}}function fN(t,e){if(t.type==="string")return gMe(t,e);if(t.type==="bool")return fMe(t,e);if(t.type==="address")return lMe(t,e);if(t.type==="tuple")return ND(t,e);if(t.type.endsWith("]"))return wMe(t,e);if(t.type.startsWith("bytes"))return yG(t,e);if(t.type.startsWith("uint")||t.type.startsWith("int"))return i_(t,e);throw new mn("Unsupported",{param:t,value:e})}function vC(t,e){if(t.type==="string")return yMe(t,e);if(t.type==="bool")return pMe(t,e);if(t.type==="address")return uMe(t,e);if(t.type==="tuple")return bG(t,e);if(t.type.endsWith("]"))return vMe(t,e);if(t.type.startsWith("bytes"))return wG(t,e);if(t.type.startsWith("uint")||t.type.startsWith("int"))return Wg(t,e);throw new mn("Unsupported",{param:t,bytes:e})}function ND(t,e){var n,r,s;let i=!1;if(!Array.isArray(e)&&typeof e!="object")throw new mn("param must be either Array or Object",{param:t,input:e});const o=e,a=[];for(let c=0;c<((r=(n=t.components)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0);c+=1){const l=t.components[c];let u;if(Array.isArray(o)){if(c>=o.length)throw new mn("input param length missmatch",{param:t,input:e});u=fN(l,o[c])}else{const d=o[(s=l.name)!==null&&s!==void 0?s:""];if(d==null)throw new mn("missing input defined in abi",{param:t,input:e,paramName:l.name});u=fN(l,d)}u.dynamic&&(i=!0),a.push(u)}return i?{dynamic:!0,encoded:vG(a)}:{dynamic:!1,encoded:Ii(...a.map(c=>c.encoded))}}function bG(t,e){const n={__length__:0};let r=0;if(!t.components)return{result:n,encoded:e,consumed:r};let s=0;for(const[i,o]of t.components.entries()){let a;if(wC(o)){const c=Wg({type:"uint32",name:""},e.subarray(r));a=vC(o,e.subarray(Number(c.result))),r+=c.consumed,s+=a.consumed}else a=vC(o,e.subarray(r)),r+=a.consumed;n.__length__+=1,n[i]=a.result,o.name&&o.name!==""&&(n[o.name]=a.result)}return{encoded:e.subarray(r+s),result:n,consumed:r+s}}function bMe(t,e,n){const r=fG(t),s=xp(e);return bG({components:r},s).result}function _G(t){const e=[];return t.forEach(n=>{if(Array.isArray(n)){const r=_G(n);e.push({type:"tuple",components:r,name:""})}else e.push({type:_u(n,!0)})}),e}function _T(t,e){if(t?.length!==e.length)throw new mn("Invalid number of values received for given ABI",{expected:t?.length,received:e.length});const n=fG(t);return Nu(ND({type:"tuple",name:"",components:n},e).encoded)}function _Me(t){try{const e=_G(t);return Nu(ND({type:"tuple",name:"",components:e},t).encoded)}catch{throw new mn("Could not infer types from given params",{params:t})}}const pN=(t,e)=>_T([t],[e]),EG=(t,e,n)=>{try{if(t.length>0&&(!e||e==="0x"||e==="0X"))throw new mn("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return bMe(t,`0x${e.replace(/0x/i,"")}`,n)}catch(r){throw new mn(`Parameter decoding error: ${r.message}`,{internalErr:r})}},Mf=(t,e)=>EG(t,e,!1),AG=(t,e)=>Mf([t],e)[0],ob=t=>{if(typeof t!="string"&&!bT(t))throw new mn("Invalid parameter value in encodeFunctionSignature");let e;return t&&(typeof t=="function"||typeof t=="object")?e=cu(t):e=t,Po(e).slice(0,10)},EMe=(t,e)=>{var n;if(!bT(t))throw new mn("Invalid parameter value in encodeFunctionCall");return`${ob(t)}${_T((n=t.inputs)!==null&&n!==void 0?n:[],e??[]).replace("0x","")}`},mN=(t,e,n=!0)=>{const r=n&&e&&e.length>=10&&e.startsWith("0x")?e.slice(10):e;if(!t.inputs)throw new bi("No inputs found in the ABI");const s=Mf([...t.inputs],r);return Object.assign(Object.assign({},s),{__method__:cu(t)})},AMe=(t,e)=>{if(t.type==="constructor")return e;if(!e)return null;const n=e.length>=2?e.slice(2):e;if(!t.outputs)return null;const r=Mf([...t.outputs],n);return r.__length__===1?r[0]:r},CMe=["bool","string","int","uint","address","fixed","ufixed"],IMe=(t,e)=>t==="string"?e:AG(t,e),CG=(t,e,n)=>{const r=Array.isArray(n)?n:[n],s={},i={};for(const[h,f]of t.entries())f.indexed?s[h]=f:i[h]=f;const o=e?EG(Object.values(i),e,!0):{__length__:0},a=r.length-Object.keys(s).length,c=Object.values(s).map((h,f)=>CMe.some(m=>h.type.startsWith(m))?IMe(h.type,r[f+a]):r[f+a]),l={__length__:0};let u=0,d=0;for(const[h,f]of t.entries())l[h]=f.type==="string"?"":void 0,s[h]&&(l[h]=c[u],u+=1),i[h]&&(l[h]=o[String(d)],d+=1),f.name&&(l[f.name]=l[h]),l.__length__+=1;return l},A1=(t,e)=>{if(e?.data){let n,r,s;try{const i=e.data.slice(0,10),o=t.find(a=>z5e(a).startsWith(i));o?.inputs?(n=o.name,r=cu(o),s=Mf([...o.inputs],e.data.substring(10))):e.data.startsWith("0x08c379a0")?(n="Error",r="Error(string)",s=Mf([{name:"message",type:"string"}],e.data.substring(10))):e.data.startsWith("0x4e487b71")?(n="Panic",r="Panic(uint256)",s=Mf([{name:"code",type:"uint256"}],e.data.substring(10))):console.error("No matching error abi found for error data",e.data)}catch(i){console.error(i)}n&&e.setDecodedProperties(n,r,s)}};var TMe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const SMe=(t,e)=>{var n,r,s,i,o;if(t instanceof Nf&&t.cause instanceof XI){if(e!==void 0){const a=e.filter(c=>vT(c));return A1(a,t.cause),{reason:t.cause.message,signature:(n=t.cause.data)===null||n===void 0?void 0:n.slice(0,10),data:(r=t.cause.data)===null||r===void 0?void 0:r.substring(10),customErrorName:t.cause.errorName,customErrorDecodedSignature:t.cause.errorSignature,customErrorArguments:t.cause.errorArgs}}return{reason:t.cause.message,signature:(s=t.cause.data)===null||s===void 0?void 0:s.slice(0,10),data:(i=t.cause.data)===null||i===void 0?void 0:i.substring(10)}}if(t instanceof eT&&!Array.isArray((o=t.cause)===null||o===void 0?void 0:o.errors)&&t.cause!==void 0)return t.cause.message;throw t};function IG(t,e,n){return TMe(this,arguments,void 0,function*(r,s,i,o=r.defaultReturnFormat){try{yield MD(r,s,r.defaultBlock,o);return}catch(a){return SMe(a,i)}})}var xMe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function g2(t,e,n,r,s,i){return xMe(this,void 0,void 0,function*(){let o=i;o===void 0&&t.handleRevert&&e!==void 0&&(o=yield IG(t,e,s));let a;if(o===void 0)a=new pz(n);else if(typeof o=="string")a=new KA(o,void 0,n);else if(o.customErrorName!==void 0&&o.customErrorDecodedSignature!==void 0&&o.customErrorArguments!==void 0){const c=o;a=new fz(c.reason,c.customErrorName,c.customErrorDecodedSignature,c.customErrorArguments,c.signature,n,c.data)}else a=new KA(o.reason,o.signature,n,o.data);return a})}const OD=(t,e,n,r=vi)=>{var s,i,o,a,c,l;let u=Object.assign({},t);const d=Pe(by,e,r);if([zg,"allEvents"].includes(u.name)){const f=n.find(m=>m.signature===e.topics[0]);f?u=f:u={anonymous:!0}}if(u.inputs=(i=(s=u.inputs)!==null&&s!==void 0?s:t.inputs)!==null&&i!==void 0?i:[],!u.anonymous){let f=0;((o=u.inputs)!==null&&o!==void 0?o:[]).forEach(m=>{m.indexed&&(f+=1)}),f>0&&e?.topics&&e?.topics.length!==f+1&&(u=Object.assign(Object.assign({},u),{anonymous:!0,inputs:[]}))}const h=u.anonymous?e.topics:((a=e.topics)!==null&&a!==void 0?a:[]).slice(1);return Object.assign(Object.assign({},d),{returnValues:CG([...(c=u.inputs)!==null&&c!==void 0?c:[]],e.data,h),event:u.name,signature:!u.anonymous&&((l=e.topics)===null||l===void 0?void 0:l.length)>0&&e.topics[0]?e.topics[0]:void 0,raw:{data:e.data,topics:e.topics}})};var Zh=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class TG{constructor({options:e,web3Context:n,promiEvent:r,returnFormat:s}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=n,this.promiEvent=r,this.returnFormat=s}getReceiptWithEvents(e){var n,r;const s=Object.assign({},e??{});if(!((n=this.options)===null||n===void 0)&&n.contractAbi&&s.logs&&s.logs.length>0){s.events={};for(const i of s.logs){const o=OD(aN,i,(r=this.options)===null||r===void 0?void 0:r.contractAbi,this.returnFormat);o.event&&(s.events[o.event]=o)}}return s}checkRevertBeforeSending(e){return Zh(this,void 0,void 0,function*(){if(this.options.checkRevertBeforeSending!==!1){let n=e;de(e.data)&&de(e.input)&&de(e.gas)&&(n=Object.assign(Object.assign({},e),{gas:21e3}));const r=yield IG(this.web3Context,n,this.options.contractAbi);if(r!==void 0)throw yield g2(this.web3Context,e,void 0,void 0,this.options.contractAbi,r)}})}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){return Zh(this,arguments,void 0,function*({transactionFormatted:n,transaction:r}){var s;let i=n;return!this.web3Context.config.ignoreGasPricing&&!(!((s=this.options)===null||s===void 0)&&s.ignoreGasPricing)&&de(n.gasPrice)&&(de(r.maxPriorityFeePerGas)||de(r.maxFeePerGas))&&(i=Object.assign(Object.assign({},n),yield XW(n,this.web3Context,Ut))),i})}signAndSend(e){return Zh(this,arguments,void 0,function*({wallet:n,tx:r}){if(n){const s=yield n.signTransaction(r);return uN(this.web3Context,()=>Zh(this,void 0,void 0,function*(){return GW(this.web3Context.requestManager,s.rawTransaction)}),s.transactionHash)}return uN(this.web3Context,()=>Zh(this,void 0,void 0,function*(){return D3e(this.web3Context.requestManager,r)}))})}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){return Zh(this,arguments,void 0,function*({error:n,tx:r}){var s;let i=n;return i instanceof Nf&&this.web3Context.handleRevert&&(i=yield g2(this.web3Context,r,void 0,void 0,(s=this.options)===null||s===void 0?void 0:s.contractAbi)),(i instanceof eT||i instanceof Nf||i instanceof fz||i instanceof pz||i instanceof KA||i instanceof wz)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",i),i})}emitConfirmation({receipt:e,transactionHash:n,customTransactionReceiptSchema:r}){this.promiEvent.listenerCount("confirmation")>0&&V5e(this.web3Context,this.promiEvent,e,n,this.returnFormat,r)}handleResolve(e){return Zh(this,arguments,void 0,function*({receipt:n,tx:r}){var s,i,o;if(!((s=this.options)===null||s===void 0)&&s.transactionResolver)return(i=this.options)===null||i===void 0?void 0:i.transactionResolver(n);if(n.status===BigInt(0)){const a=yield g2(this.web3Context,r,n,void 0,(o=this.options)===null||o===void 0?void 0:o.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",a),a}else return n})}}var qn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},PMe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const RMe=t=>qn(void 0,void 0,void 0,function*(){return WW(t.requestManager)});function NMe(t,e){return qn(this,void 0,void 0,function*(){const n=yield v3e(t.requestManager);return Pe({format:"uint"},n,e??t.defaultReturnFormat)})}function kD(t,e){return qn(this,void 0,void 0,function*(){const n=yield b3e(t.requestManager);return Pe({format:"uint"},n,e??t.defaultReturnFormat)})}function OMe(t,e){return qn(this,void 0,void 0,function*(){const n=yield _3e(t.requestManager);return Pe({format:"uint"},n,e??t.defaultReturnFormat)})}function DD(t,e){return qn(this,void 0,void 0,function*(){const n=yield A3e(t.requestManager);return Pe({format:"uint"},n,e??t.defaultReturnFormat)})}function kMe(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultBlock,i){const o=Cs(s)?s:Pe({format:"uint"},s,Ut),a=yield C3e(n.requestManager,r,o);return Pe({format:"uint"},a,i??n.defaultReturnFormat)})}function DMe(t,e,n){return qn(this,arguments,void 0,function*(r,s,i,o=r.defaultBlock,a){const c=Pe({format:"uint"},i,Ut),l=Cs(o)?o:Pe({format:"uint"},o,Ut),u=yield I3e(r.requestManager,s,c,l);return Pe({format:"bytes"},u,a??r.defaultReturnFormat)})}function MMe(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultBlock,i){const o=Cs(s)?s:Pe({format:"uint"},s,Ut),a=yield N3e(n.requestManager,r,o);return Pe({format:"bytes"},a,i??n.defaultReturnFormat)})}function SG(t){return qn(this,arguments,void 0,function*(e,n=e.defaultBlock,r=!1,s){var i;let o;if(yh(n)){const c=Pe({format:"bytes32"},n,Ut);o=yield L3e(e.requestManager,c,r)}else{const c=Cs(n)?n:Pe({format:"uint"},n,Ut);o=yield KW(e.requestManager,c,r)}const a=Pe(gC,o,s??e.defaultReturnFormat);return de(a)?a:Object.assign(Object.assign({},a),{transactions:(i=a.transactions)!==null&&i!==void 0?i:[]})})}function BMe(t){return qn(this,arguments,void 0,function*(e,n=e.defaultBlock,r){let s;if(yh(n)){const i=Pe({format:"bytes32"},n,Ut);s=yield S3e(e.requestManager,i)}else{const i=Cs(n)?n:Pe({format:"uint"},n,Ut);s=yield x3e(e.requestManager,i)}return Pe({format:"uint"},s,r??e.defaultReturnFormat)})}function LMe(t){return qn(this,arguments,void 0,function*(e,n=e.defaultBlock,r){let s;if(yh(n)){const i=Pe({format:"bytes32"},n,Ut);s=yield P3e(e.requestManager,i)}else{const i=Cs(n)?n:Pe({format:"uint"},n,Ut);s=yield R3e(e.requestManager,i)}return Pe({format:"uint"},s,r??e.defaultReturnFormat)})}function $Me(t){return qn(this,arguments,void 0,function*(e,n=e.defaultBlock,r,s){const i=Pe({format:"uint"},r,Ut);let o;if(yh(n)){const a=Pe({format:"bytes32"},n,Ut);o=yield V3e(e.requestManager,a,i)}else{const a=Cs(n)?n:Pe({format:"uint"},n,Ut);o=yield H3e(e.requestManager,a,i)}return Pe(gC,o,s??e.defaultReturnFormat)})}function UMe(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultReturnFormat){const i=Pe({format:"bytes32"},r,vi),o=yield $3e(n.requestManager,i);return de(o)?o:no(o,s,{transactionSchema:n.config.customTransactionSchema,fillInputAndData:!0})})}function FMe(t,e){return qn(this,void 0,void 0,function*(){return(yield e5e(t.requestManager)).map(r=>no(r,e??t.defaultReturnFormat,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0}))})}function jMe(t){return qn(this,arguments,void 0,function*(e,n=e.defaultBlock,r,s){const i=Pe({format:"uint"},r,Ut);let o;if(yh(n)){const a=Pe({format:"bytes32"},n,Ut);o=yield U3e(e.requestManager,a,i)}else{const a=Cs(n)?n:Pe({format:"uint"},n,Ut);o=yield F3e(e.requestManager,a,i)}return de(o)?o:no(o,s??e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})})}function xG(t,e,n){return qn(this,void 0,void 0,function*(){const r=Pe({format:"bytes32"},e,vi);let s;try{s=yield j3e(t.requestManager,r)}catch(i){if(typeof i=="object"&&!de(i)&&"message"in i&&i.message==="transaction indexing is in progress")console.warn("Transaction indexing is in progress.");else throw i}return de(s)?s:Pe(_y,s,n??t.defaultReturnFormat)})}function PG(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultBlock,i){const o=Cs(s)?s:Pe({format:"uint"},s,Ut),a=yield T3e(n.requestManager,r,o);return Pe({format:"uint"},a,i??n.defaultReturnFormat)})}function ab(t,e,n,r={checkRevertBeforeSending:!0},s){const i=new zW((o,a)=>{setImmediate(()=>{qn(this,void 0,void 0,function*(){const c=new TG({web3Context:t,promiEvent:i,options:r,returnFormat:n});let l=Object.assign({},e);de(s)||(l=yield s.processTransaction(l));let u=no(Object.assign(Object.assign({},l),{from:cN("from",t,l),to:cN("to",t,l)}),Ut,{transactionSchema:t.config.customTransactionSchema});try{u=yield c.populateGasPrice({transaction:l,transactionFormatted:u}),yield c.checkRevertBeforeSending(u),c.emitSending(u);let d;t.wallet&&!de(u.from)&&(d=t.wallet.get(u.from));const h=yield c.signAndSend({wallet:d,tx:u}),f=Pe({format:"bytes32"},h,n??t.defaultReturnFormat);c.emitSent(u),c.emitTransactionHash(f);const m=yield nG(t,h,n??t.defaultReturnFormat),g=c.getReceiptWithEvents(Pe(_y,m,n??t.defaultReturnFormat));c.emitReceipt(g),o(yield c.handleResolve({receipt:g,tx:u})),c.emitConfirmation({receipt:g,transactionHash:h})}catch(d){a(yield c.handleError({error:d,tx:u}))}})})});return i}function VMe(t,e,n,r={checkRevertBeforeSending:!0}){const s=new zW((i,o)=>{setImmediate(()=>{qn(this,void 0,void 0,function*(){const a=new TG({web3Context:t,promiEvent:s,options:r,returnFormat:n}),c=Pe({format:"bytes"},e,Ut),l=op.fromSerializedData(sl(mr(c))),u=Object.assign(Object.assign({},l.toJSON()),{from:l.getSenderAddress().toString()});try{const{v:d,r:h,s:f}=u,m=PMe(u,["v","r","s"]);yield a.checkRevertBeforeSending(m),a.emitSending(c);const g=yield uN(t,()=>qn(this,void 0,void 0,function*(){return GW(t.requestManager,c)}));a.emitSent(c);const y=Pe({format:"bytes32"},g,n??t.defaultReturnFormat);a.emitTransactionHash(y);const v=yield nG(t,g,n??t.defaultReturnFormat),_=a.getReceiptWithEvents(Pe(_y,v,n??t.defaultReturnFormat));a.emitReceipt(_),i(yield a.handleResolve({receipt:_,tx:u})),a.emitConfirmation({receipt:_,transactionHash:g})}catch(d){o(yield a.handleError({error:d,tx:u}))}})})});return s}function HMe(t,e,n){return qn(this,arguments,void 0,function*(r,s,i,o=r.defaultReturnFormat){var a;const c=Pe({format:"bytes"},s,vi);if(!((a=r.wallet)===null||a===void 0)&&a.get(i)){const d=r.wallet.get(i).sign(c);return Pe(S5e,d,o)}if(typeof i=="number")throw new WRe(s,'RPC method "eth_sign" does not support index signatures');const l=yield O3e(r.requestManager,i,c);return Pe({format:"bytes"},l,o)})}function qMe(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultReturnFormat){const i=yield k3e(n.requestManager,no(r,Ut,{transactionSchema:n.config.customTransactionSchema}));return Kk(i)?N5e(i,s,{fillInputAndData:!0}):{raw:Pe({format:"bytes"},i.raw,s),tx:no(i.tx,s,{transactionSchema:n.config.customTransactionSchema,fillInputAndData:!0})}})}function MD(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultBlock,i=n.defaultReturnFormat){const o=Cs(s)?s:Pe({format:"uint"},s,Ut),a=yield M3e(n.requestManager,no(r,Ut,{transactionSchema:n.config.customTransactionSchema}),o);return Pe({format:"bytes"},a,i)})}function BD(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultBlock,i){const o=no(r,Ut,{transactionSchema:n.config.customTransactionSchema}),a=Cs(s)?s:Pe({format:"uint"},s,Ut),c=yield B3e(n.requestManager,o,a);return Pe({format:"uint"},c,i??n.defaultReturnFormat)})}function RG(t,e,n){return qn(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:s}=e;de(r)||(typeof r=="number"||typeof r=="bigint")&&(r=is(r)),de(s)||(typeof s=="number"||typeof s=="bigint")&&(s=is(s));const i=Object.assign(Object.assign({},e),{fromBlock:s,toBlock:r});return(yield Y3e(t.requestManager,i)).map(c=>typeof c=="string"?c:Pe(by,c,n??t.defaultReturnFormat))})}function NG(t,e){return qn(this,void 0,void 0,function*(){const n=yield n5e(t.requestManager);return Pe({format:"uint"},n,e??t.defaultReturnFormat)})}function zMe(t,e,n){return qn(this,arguments,void 0,function*(r,s,i,o=r.defaultBlock,a){const c=i.map(d=>Pe({format:"bytes"},d,Ut)),l=Cs(o)?o:Pe({format:"uint"},o,Ut),u=yield r5e(r.requestManager,s,c,l);return Pe(R5e,u,a??r.defaultReturnFormat)})}function WMe(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultBlock,i,o){const a=Pe({format:"uint"},r,Ut),c=Cs(s)?s:Pe({format:"uint"},s,Ut),l=Pe({type:"array",items:{format:"uint"}},i,wT),u=yield X3e(n.requestManager,a,c,l);return Pe(x5e,u,o??n.defaultReturnFormat)})}function OG(t,e){return qn(this,arguments,void 0,function*(n,r,s=n.defaultBlock,i){const o=Cs(s)?s:Pe({format:"uint"},s,Ut),a=yield i5e(n.requestManager,no(r,Ut,{transactionSchema:n.config.customTransactionSchema}),o);return Pe(A5e,a,i??n.defaultReturnFormat)})}function GMe(t,e,n,r,s){return qn(this,void 0,void 0,function*(){const i=yield o5e(t.requestManager,e,n,r);return Pe({format:"bytes"},i,s??t.defaultReturnFormat)})}var Ey=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function KMe(t,e){return Ey(this,void 0,void 0,function*(){const n=yield W3e(t.requestManager);return Pe({format:"uint"},n,e??t.defaultReturnFormat)})}function QMe(t,e,n){return Ey(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:s}=e;de(r)||(typeof r=="number"||typeof r=="bigint")&&(r=is(r)),de(s)||(typeof s=="number"||typeof s=="bigint")&&(s=is(s));const i=Object.assign(Object.assign({},e),{fromBlock:s,toBlock:r}),o=yield q3e(t.requestManager,i);return Pe({format:"uint"},o,n??t.defaultReturnFormat)})}function YMe(t,e){return Ey(this,void 0,void 0,function*(){const n=yield z3e(t.requestManager);return Pe({format:"uint"},n,e??t.defaultReturnFormat)})}function ZMe(t,e){return Ey(this,void 0,void 0,function*(){return yield G3e(t.requestManager,is(e))})}function JMe(t,e,n){return Ey(this,void 0,void 0,function*(){return(yield K3e(t.requestManager,is(e))).map(i=>typeof i=="string"?i:Pe(by,i,n??t.defaultReturnFormat))})}function XMe(t,e,n){return Ey(this,void 0,void 0,function*(){return(yield Q3e(t.requestManager,is(e))).map(i=>typeof i=="string"?i:Pe(by,i,n??t.defaultReturnFormat))})}class kG extends n_{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return Pe(by,e,super.returnFormat)}}class o4 extends n_{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return Pe({format:"string"},e,super.returnFormat)}}class bC extends n_{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return Pe(I5e,e,super.returnFormat)}}class DG extends n_{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if(typeof e=="boolean")this.emit("changed",e);else{const n=Object.fromEntries(Object.entries(e?.status||e).map(([r,s])=>[r.charAt(0).toLowerCase()+r.substring(1),s]));this.emit("changed",e.syncing),this.emit("data",Pe(T5e,n,super.returnFormat))}}}var Ht=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const gN={logs:kG,newPendingTransactions:o4,newHeads:bC,syncing:DG,pendingTransactions:o4,newBlockHeaders:bC};class ET extends Yi{constructor(e){if(typeof e=="string"||dC(e)){super({provider:e,registeredSubscriptions:gN});return}if(e.registeredSubscriptions){super(e);return}super(Object.assign(Object.assign({},e),{registeredSubscriptions:gN})),this.getFeeData=this.calculateFeeData}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return Ht(this,void 0,void 0,function*(){return g3e(this.requestManager)})}isSyncing(){return Ht(this,void 0,void 0,function*(){return WW(this.requestManager)})}getCoinbase(){return Ht(this,void 0,void 0,function*(){return y3e(this.requestManager)})}isMining(){return Ht(this,void 0,void 0,function*(){return w3e(this.requestManager)})}getHashrate(e){return Ht(this,void 0,void 0,function*(){var n;return e===void 0&&(e=(n=this.defaultReturnFormat)!==null&&n!==void 0?n:vi),this.getHashRate(e)})}getHashRate(){return Ht(this,arguments,void 0,function*(e=this.defaultReturnFormat){return NMe(this,e)})}getGasPrice(){return Ht(this,arguments,void 0,function*(e=this.defaultReturnFormat){return kD(this,e)})}getMaxPriorityFeePerGas(){return Ht(this,arguments,void 0,function*(e=this.defaultReturnFormat){return OMe(this,e)})}calculateFeeData(){return Ht(this,arguments,void 0,function*(e=BigInt(2),n=aT.Gwei){var r;const s=yield this.getBlock(void 0,!1),i=(r=s?.baseFeePerGas)!==null&&r!==void 0?r:void 0;let o;try{o=yield this.getGasPrice()}catch{}let a;try{a=yield this.getMaxPriorityFeePerGas()}catch{}let c;if(i){a=a??n;let l;typeof e=="number"?l=BigInt(Math.floor(e*1e3))/BigInt(1e3):l=e,c=i*l+a}return{gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:a,baseFeePerGas:i}})}getAccounts(){return Ht(this,void 0,void 0,function*(){var e;return((e=yield E3e(this.requestManager))!==null&&e!==void 0?e:[]).map(r=>ll(r))})}getBlockNumber(){return Ht(this,arguments,void 0,function*(e=this.defaultReturnFormat){return DD(this,e)})}getBalance(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultBlock,s=this.defaultReturnFormat){return kMe(this,n,r,s)})}getStorageAt(e,n){return Ht(this,arguments,void 0,function*(r,s,i=this.defaultBlock,o=this.defaultReturnFormat){return DMe(this,r,s,i,o)})}getCode(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultBlock,s=this.defaultReturnFormat){return MMe(this,n,r,s)})}getBlock(){return Ht(this,arguments,void 0,function*(e=this.defaultBlock,n=!1,r=this.defaultReturnFormat){return SG(this,e,n,r)})}getBlockTransactionCount(){return Ht(this,arguments,void 0,function*(e=this.defaultBlock,n=this.defaultReturnFormat){return BMe(this,e,n)})}getBlockUncleCount(){return Ht(this,arguments,void 0,function*(e=this.defaultBlock,n=this.defaultReturnFormat){return LMe(this,e,n)})}getUncle(){return Ht(this,arguments,void 0,function*(e=this.defaultBlock,n,r=this.defaultReturnFormat){return $Me(this,e,n,r)})}getTransaction(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){const s=yield UMe(this,n,r);if(!s)throw new h8;return s})}getPendingTransactions(){return Ht(this,arguments,void 0,function*(e=this.defaultReturnFormat){return FMe(this,e)})}getTransactionFromBlock(){return Ht(this,arguments,void 0,function*(e=this.defaultBlock,n,r=this.defaultReturnFormat){return jMe(this,e,n,r)})}getTransactionReceipt(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){const s=yield xG(this,n,r);if(!s)throw new h8;return s})}getTransactionCount(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultBlock,s=this.defaultReturnFormat){return PG(this,n,r,s)})}sendTransaction(e,n=this.defaultReturnFormat,r){return ab(this,e,n,r,this.transactionMiddleware)}sendSignedTransaction(e,n=this.defaultReturnFormat,r){return VMe(this,e,n,r)}sign(e,n){return Ht(this,arguments,void 0,function*(r,s,i=this.defaultReturnFormat){return HMe(this,r,s,i)})}signTransaction(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return qMe(this,n,r)})}call(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultBlock,s=this.defaultReturnFormat){return MD(this,n,r,s)})}estimateGas(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultBlock,s=this.defaultReturnFormat){return BD(this,n,r,s)})}getPastLogs(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return RG(this,n,r)})}getWork(){return Ht(this,void 0,void 0,function*(){return Z3e(this.requestManager)})}submitWork(e,n,r){return Ht(this,void 0,void 0,function*(){return J3e(this.requestManager,e,n,r)})}requestAccounts(){return Ht(this,void 0,void 0,function*(){return t5e(this.requestManager)})}getChainId(){return Ht(this,arguments,void 0,function*(e=this.defaultReturnFormat){return NG(this,e)})}getNodeInfo(){return Ht(this,void 0,void 0,function*(){return s5e(this.requestManager)})}getProof(e,n){return Ht(this,arguments,void 0,function*(r,s,i=this.defaultBlock,o=this.defaultReturnFormat){return zMe(this,r,s,i,o)})}getFeeHistory(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultBlock,s,i=this.defaultReturnFormat){return WMe(this,n,r,s,i)})}createAccessList(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultBlock,s=this.defaultReturnFormat){return OG(this,n,r,s)})}signTypedData(e,n,r,s){return Ht(this,void 0,void 0,function*(){var i;return r===void 0&&(r=!1),s===void 0&&(s=(i=this.defaultReturnFormat)!==null&&i!==void 0?i:vi),GMe(this,e,n,r,s)})}subscribe(e,n,r){return Ht(this,void 0,void 0,function*(){var s,i;r===void 0&&(r=(s=this.defaultReturnFormat)!==null&&s!==void 0?s:vi);const o=yield(i=this.subscriptionManager)===null||i===void 0?void 0:i.subscribe(e,n,r);return o instanceof kG&&e==="logs"&&typeof n=="object"&&!It(n.fromBlock)&&Number.isFinite(Number(n.fromBlock))&&setImmediate(()=>{this.getPastLogs(n).then(a=>{for(const c of a)o._processSubscriptionResult(c)}).catch(a=>{o._processSubscriptionError(a)})}),o})}static shouldClearSubscription({sub:e}){return!(e instanceof DG)}clearSubscriptions(e=!1){var n;return(n=this.subscriptionManager)===null||n===void 0?void 0:n.unsubscribe(e?ET.shouldClearSubscription:void 0)}createNewPendingTransactionFilter(){return Ht(this,arguments,void 0,function*(e=this.defaultReturnFormat){return KMe(this,e)})}createNewFilter(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return QMe(this,n,r)})}createNewBlockFilter(){return Ht(this,arguments,void 0,function*(e=this.defaultReturnFormat){return YMe(this,e)})}uninstallFilter(e){return Ht(this,void 0,void 0,function*(){return ZMe(this,e)})}getFilterChanges(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return JMe(this,n,r)})}getFilterLogs(e){return Ht(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return XMe(this,n,r)})}}const eBe=t=>{if(!de(t.common)){if(de(t.common.customChain))throw new YRe;if(de(t.common.customChain.chainId))throw new ZRe;if(!de(t.chainId)&&t.chainId!==t.common.customChain.chainId)throw new JRe({txChainId:t.chainId,customChainId:t.common.customChain.chainId})}},tBe=t=>{if(!de(t.common)&&!de(t.chain)&&!de(t.hardfork))throw new tNe;if(!de(t.chain)&&de(t.hardfork)||!de(t.hardfork)&&de(t.chain))throw new nNe({chain:t.chain,hardfork:t.hardfork})},nBe=t=>{if(!de(t.common)&&!de(t.common.baseChain)&&!de(t.chain)&&t.chain!==t.common.baseChain)throw new XRe({txChain:t.chain,baseChain:t.common.baseChain})},rBe=t=>{if(!de(t.common)&&!de(t.common.hardfork)&&!de(t.hardfork)&&t.hardfork!==t.common.hardfork)throw new eNe({txHardfork:t.hardfork,commonHardfork:t.common.hardfork})},a4=t=>{if(de(t.gas)||!bu(t.gas)||de(t.gasPrice)||!bu(t.gasPrice))throw new aNe({gas:t.gas,gasPrice:t.gasPrice});if(!de(t.maxFeePerGas)||!de(t.maxPriorityFeePerGas))throw new mz({maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas})},c4=t=>{if(!de(t.gasPrice)&&t.type==="0x2")throw new lNe(t.gasPrice);if(t.type==="0x0"||t.type==="0x1")throw new mz({maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas});if(de(t.maxFeePerGas)||!bu(t.maxFeePerGas)||de(t.maxPriorityFeePerGas)||!bu(t.maxPriorityFeePerGas))throw new cNe({maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas})},sBe=t=>{const e=!de(t.gas)||!de(t.gasLimit),n=e&&!de(t.gasPrice),r=e&&!de(t.maxPriorityFeePerGas)&&!de(t.maxFeePerGas);if(!n&&!r)throw new sNe({gas:t.gas,gasPrice:t.gasPrice,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas});if(n&&r)throw new oNe({gas:t.gas,gasPrice:t.gasPrice,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas});(n?a4:c4)(t),(!de(t.type)&&t.type>"0x1"?c4:a4)(t)},iBe=(t,e,n={transactionSchema:void 0})=>{if(!de(e)){e(t);return}if(typeof t!="object"||de(t))throw new uNe(t);eBe(t),tBe(t),nBe(t),rBe(t);const r=no(t,Ut,{transactionSchema:n.transactionSchema});if(sBe(r),de(r.nonce)||de(r.chainId)||r.nonce.startsWith("-")||r.chainId.startsWith("-"))throw new dNe({nonce:t.nonce,chainId:t.chainId})};var oBe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const aBe=t=>{var e,n;return Object.assign(Object.assign({},t),{nonce:t.nonce,gasPrice:t.gasPrice,gasLimit:(e=t.gasLimit)!==null&&e!==void 0?e:t.gas,to:t.to,value:t.value,data:(n=t.data)!==null&&n!==void 0?n:t.input,type:t.type,chainId:t.chainId,accessList:t.accessList,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas})},cBe=(t,e)=>{var n,r,s,i,o,a,c,l,u,d,h,f,m,g,y,v,_,A;const k=!de(t.chain)&&!de(t.hardfork)||!de(t.common);let S;if(!k)e.defaultCommon?(S=Object.assign({},e.defaultCommon),de(S.hardfork)&&(S.hardfork=(n=t.hardfork)!==null&&n!==void 0?n:e.defaultHardfork),de(S.baseChain)&&(S.baseChain=e.defaultChain)):S=ts.custom({name:"custom-network",chainId:Qi(t.chainId),networkId:de(t.networkId)?void 0:Qi(t.networkId),defaultHardfork:(r=t.hardfork)!==null&&r!==void 0?r:e.defaultHardfork},{baseChain:e.defaultChain});else{const R=(a=(o=(i=(s=t?.common)===null||s===void 0?void 0:s.customChain)===null||i===void 0?void 0:i.name)!==null&&o!==void 0?o:t.chain)!==null&&a!==void 0?a:"custom-network",T=Qi((u=(l=(c=t?.common)===null||c===void 0?void 0:c.customChain)===null||l===void 0?void 0:l.chainId)!==null&&u!==void 0?u:t?.chainId),b=Qi((f=(h=(d=t?.common)===null||d===void 0?void 0:d.customChain)===null||h===void 0?void 0:h.networkId)!==null&&f!==void 0?f:t?.networkId),E=(y=(g=(m=t?.common)===null||m===void 0?void 0:m.hardfork)!==null&&g!==void 0?g:t?.hardfork)!==null&&y!==void 0?y:e.defaultHardfork,x=(A=(_=(v=t.common)===null||v===void 0?void 0:v.baseChain)!==null&&_!==void 0?_:t.chain)!==null&&A!==void 0?A:e.defaultChain;T&&b&&R&&(S=ts.custom({name:R,chainId:T,networkId:b,defaultHardfork:E},{baseChain:x}))}return{common:S}},lBe=(t,e,n,...r)=>oBe(void 0,[t,e,n,...r],void 0,function*(s,i,o,a=!1,c=!0){const l=yield L5e({transaction:s,web3Context:i,privateKey:o,fillGasPrice:a,fillGasLimit:c}),u=no(l,Ut,{transactionSchema:i.config.customTransactionSchema});return iBe(u,void 0,{transactionSchema:i.config.customTransactionSchema}),op.fromTxData(aBe(u),cBe(u,i))}),l4=({address:t},e,n)=>{var r,s;const i=n?.topics,o=(r=n?.filter)!==null&&r!==void 0?r:{},a={};if(It(n?.fromBlock)||(a.fromBlock=Pe(gC.properties.number,n?.fromBlock,{number:aa.HEX,bytes:wu.HEX})),It(n?.toBlock)||(a.toBlock=Pe(gC.properties.number,n?.toBlock,{number:aa.HEX,bytes:wu.HEX})),i&&Array.isArray(i))a.topics=[...i];else if(a.topics=[],e&&!e.anonymous&&![zg,"allEvents"].includes(e.name)&&a.topics.push((s=e.signature)!==null&&s!==void 0?s:xD(cu(e))),![zg,"allEvents"].includes(e.name)&&e.inputs)for(const c of e.inputs){if(!c.indexed)continue;const l=o[c.name];if(!l){a.topics.push(null);continue}Array.isArray(l)?a.topics.push(l.map(u=>pN(c.type,u))):c.type==="string"?a.topics.push(Ug(l)):a.topics.push(pN(c.type,l))}return a.topics.length||delete a.topics,t&&(a.address=t.toLowerCase()),a},Ew=(t,e,n)=>{const r=Array.isArray(t.inputs)?t.inputs.length:0;if(t.inputs&&r!==e.length)throw new bi(`The number of arguments is not matching the methods required number. You need to pass ${r} arguments.`);let s;if(t.inputs?s=_T(Array.isArray(t.inputs)?t.inputs:[],e).replace("0x",""):s=_Me(e).replace("0x",""),H5e(t)){if(!n)throw new bi("The contract has no contract data option set. This is necessary to append the constructor parameters.");return n.startsWith("0x")?`${n}${s}`:`0x${n}${s}`}return`${ob(t)}${s}`};class MG extends n_{constructor(e,n){super(e,n),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return OD(this.abi,e,this.jsonInterface,super.returnFormat)}}Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));const AT=(t,e,n,r)=>{var s,i;const o={};return(!It(t.data)||r==="both")&&(o.data=Ew(e,n,(s=t.data)!==null&&s!==void 0?s:t.input)),(!It(t.input)||r==="both")&&(o.input=Ew(e,n,(i=t.input)!==null&&i!==void 0?i:t.data)),It(o.input)&&It(o.data)&&(o[r]=Ew(e,n)),{data:o.data,input:o.input}},yN=({abi:t,params:e,options:n,contractOptions:r})=>{var s,i,o;if(!((o=(i=(s=n?.input)!==null&&s!==void 0?s:n?.data)!==null&&i!==void 0?i:r.input)!==null&&o!==void 0?o:r.data)&&!n?.to&&!r.address)throw new bi("Contract address not specified");if(!n?.from&&!r.from)throw new bi('Contract "from" address not specified');let c=vh({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const l=AT(c,t,e,n?.dataInputFill);return c=Object.assign(Object.assign({},c),{data:l.data,input:l.input}),c},uBe=({abi:t,params:e,options:n,contractOptions:r})=>{if(!n?.to&&!r.address)throw new bi("Contract address not specified");let s=vh({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const i=AT(s,t,e,n?.dataInputFill);return s=Object.assign(Object.assign({},s),{data:i.data,input:i.input}),s},dBe=({abi:t,params:e,options:n,contractOptions:r})=>{let s=vh({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,data:r.data},n);const i=AT(s,t,e,n?.dataInputFill);return s=Object.assign(Object.assign({},s),{data:i.data,input:i.input}),s},u4=t=>typeof t=="object"&&!It(t)&&Object.keys(t).length!==0&&!Dd(t),hBe=({abi:t,params:e,options:n,contractOptions:r})=>{if(!n?.to&&!r.address)throw new bi("Contract address not specified");if(!n?.from&&!r.from)throw new bi('Contract "from" address not specified');let s=vh({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const i=AT(s,t,e,n?.dataInputFill);return s=Object.assign(Object.assign({},s),{data:i.data,input:i.input}),s};var fBe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class pBe{_contractMethodDeploySend(e){const n={transactionResolver:r=>{if(r.status===BigInt(0))throw new bi("code couldn't be stored",r);const s=this.parent.clone();return s.options.address=r.contractAddress,s},contractAbi:this.parent.options.jsonInterface,checkRevertBeforeSending:!1};return de(this.parent.getTransactionMiddleware())?ab(this.parent,e,this.parent.defaultReturnFormat,n):ab(this.parent,e,this.parent.defaultReturnFormat,n,this.parent.getTransactionMiddleware())}constructor(e,n){this.parent=e,this.deployOptions=n;const{args:r,abi:s,contractOptions:i,deployData:o}=this.calculateDeployParams();this.args=r,this.constructorAbi=s,this.contractOptions=i,this.deployData=o}send(e){const n=Object.assign({},e),r=this.populateTransaction(n);return this._contractMethodDeploySend(r)}populateTransaction(e){var n,r;const s=Object.assign(Object.assign({},this.contractOptions),{from:(r=(n=this.contractOptions.from)!==null&&n!==void 0?n:this.parent.defaultAccount)!==null&&r!==void 0?r:void 0}),i=yN({abi:this.constructorAbi,params:this.args,options:Object.assign(Object.assign({},e),{dataInputFill:this.parent.contractDataInputFill}),contractOptions:s});return i.dataInputFill&&delete i.dataInputFill,i}calculateDeployParams(){var e,n,r,s,i,o;let a=this.parent.options.jsonInterface.find(f=>f.type==="constructor");a||(a={type:"constructor",stateMutability:""});const c=Pe({format:"bytes"},(n=(e=this.deployOptions)===null||e===void 0?void 0:e.input)!==null&&n!==void 0?n:this.parent.options.input,vi),l=Pe({format:"bytes"},(s=(r=this.deployOptions)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:this.parent.options.data,vi);if((!c||c.trim()==="0x")&&(!l||l.trim()==="0x"))throw new bi("contract creation without any data provided.");const u=(o=(i=this.deployOptions)===null||i===void 0?void 0:i.arguments)!==null&&o!==void 0?o:[],d=Object.assign(Object.assign({},this.parent.options),{input:c,data:l});return{args:u,abi:a,contractOptions:d,deployData:c??l}}estimateGas(e){return fBe(this,arguments,void 0,function*(n,r=this.parent.defaultReturnFormat){const s=Object.assign({},n);return this.parent.contractMethodEstimateGas({abi:this.constructorAbi,params:this.args,returnFormat:r,options:s,contractOptions:this.contractOptions})})}encodeABI(){return Ew(this.constructorAbi,this.args,Pe({format:"bytes"},this.deployData,this.parent.defaultReturnFormat))}decodeData(e){return Object.assign(Object.assign({},mN(this.constructorAbi,e.replace(this.deployData,""),!1)),{__method__:this.constructorAbi.type})}}var mBe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class gBe extends hC{constructor(e,n){super(e.requestManager,e.registeredSubscriptions),this.parentContract=n}subscribe(e,n){const r=Object.create(null,{subscribe:{get:()=>super.subscribe}});return mBe(this,arguments,void 0,function*(s,i,o=vi){return r.subscribe.call(this,s,i??this.parentContract.options,o)})}}var Jh=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const yBe={logs:MG,newHeads:bC,newBlockHeaders:bC};class Bf extends Yi{get subscriptionManager(){return this._subscriptionManager}constructor(e,n,r,s,i){var o,a,c;const l=Dd(n)?n:Dd(r)?r:void 0;let u;u4(n)?u=n:u4(r)?u=r:u=s;let d;if(typeof n=="object"&&"provider"in n?d=n.provider:typeof r=="object"&&"provider"in r?d=r.provider:typeof s=="object"&&"provider"in s?d=s.provider:d=Bf.givenProvider,super(Object.assign(Object.assign({},u),{provider:d,registeredSubscriptions:yBe})),this.syncWithContext=!1,this._functions={},this._subscriptionManager=new gBe(super.subscriptionManager,this),u?.wallet&&(this._wallet=u.wallet),u?.accountProvider&&(this._accountProvider=u.accountProvider),!de(l)&&!de(l.data)&&!de(l.input)&&this.config.contractDataInputFill!=="both")throw new FRe({data:l.data,input:l.input});this._overloadedMethodAbis=new Map;const h=Wl(s)?s:Wl(r)?r:i??this.defaultReturnFormat,f=typeof n=="string"?n:void 0;this.config.contractDataInputFill=(o=l?.dataInputFill)!==null&&o!==void 0?o:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,h),this.defaultReturnFormat!==h&&(this.defaultReturnFormat=h),de(f)||this._parseAndSetAddress(f,h),this.options={address:f,jsonInterface:this._jsonInterface,gas:(a=l?.gas)!==null&&a!==void 0?a:l?.gasLimit,gasPrice:l?.gasPrice,from:l?.from,input:l?.input,data:l?.data},this.syncWithContext=(c=l?.syncWithContext)!==null&&c!==void 0?c:!1,u instanceof Yi&&this.subscribeToContextEvents(u),Object.defineProperty(this.options,"address",{set:m=>this._parseAndSetAddress(m,h),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:m=>this._parseAndSetJsonInterface(m,h),get:()=>this._jsonInterface}),u instanceof Yi&&u.on(sp.CONFIG_CHANGE,m=>{this.setConfig({[m.name]:m.newValue})})}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}get events(){return this._events}get methods(){return this._methods}clone(){let e;return this.options.address?e=new Bf([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):e=new Bf([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){return new pBe(this,e)}getPastEvents(e,n,r){return Jh(this,void 0,void 0,function*(){var s;const i=typeof e=="string"?e:zg,o=typeof e!="string"&&!Wl(e)?e:Wl(n)?{}:n,a=Wl(e)?e:Wl(n)?n:r??this.defaultReturnFormat,c=i==="allEvents"||i===zg?aN:this._jsonInterface.find(v=>"name"in v&&v.name===i);if(!c)throw new bi(`Event ${String(i)} not found.`);const{fromBlock:l,toBlock:u,topics:d,address:h}=l4(this.options,c,o??{}),f=yield RG(this,{fromBlock:l,toBlock:u,topics:d,address:h},a),m=f?f.map(v=>typeof v=="string"?v:OD(c,v,this._jsonInterface,a)):[],g=(s=o?.filter)!==null&&s!==void 0?s:{},y=Object.keys(g);return y.length>0?m.filter(v=>typeof v=="string"?!0:y.every(_=>{var A;if(Array.isArray(g[_]))return g[_].some(S=>String(v.returnValues[_]).toUpperCase()===String(S).toUpperCase());const k=(A=c.inputs)===null||A===void 0?void 0:A.filter(S=>S.name===_)[0];return k?.indexed&&k.type==="string"&&Ug(g[_])===String(v.returnValues[_])?!0:String(v.returnValues[_]).toUpperCase()===String(g[_]).toUpperCase()})):m})}_parseAndSetAddress(e,n=this.defaultReturnFormat){this._address=e&&ll(Pe({format:"address"},e,n))}decodeMethodData(e){const n=e.slice(0,10),s=this._jsonInterface.filter(i=>i.type!=="error").find(i=>n===ob(cu(i)));if(!s)throw new bi(`The ABI for the provided method signature ${n} was not found.`);return mN(s,e)}_parseAndSetJsonInterface(e,n=this.defaultReturnFormat){var r,s;this._functions={},this._methods={},this._events={};let i=[];const o=e.filter(c=>c.type!=="error"),a=e.filter(c=>vT(c));for(const c of o){const l=Object.assign(Object.assign({},c),{signature:""});if(bT(l)){const u=cu(l),d=ob(u);l.methodNameWithInputs=u,l.signature=d,l.constant=l.stateMutability==="view"||l.stateMutability==="pure"||l.constant,l.payable=l.stateMutability==="payable"||l.payable,this._overloadedMethodAbis.set(l.name,[...(r=this._overloadedMethodAbis.get(l.name))!==null&&r!==void 0?r:[],l]);const h=(s=this._overloadedMethodAbis.get(l.name))!==null&&s!==void 0?s:[],f=this._createContractMethod(h,a),m=this._createContractMethod(h,a,!0);this._functions[u]={signature:d,method:m},this._methods[l.name]=f,this._methods[u]=m,this._methods[d]=m}else if(SD(l)){const u=cu(l),d=xD(u),h=this._createContractEvent(l,n);l.signature=d,(!(u in this._events)||l.name==="bound")&&(this._events[u]=h),this._events[l.name]=h,this._events[d]=h}i=[...i,l]}this._events.allEvents=this._createContractEvent(aN,n),this._jsonInterface=[...i],this._errorsInterface=a}_getAbiParams(e,n){var r;try{return _w((r=e.inputs)!==null&&r!==void 0?r:[],n)}catch(s){throw new bi(`Invalid parameters for method ${e.name}: ${s.message}`)}}_createContractMethod(e,n,r=!1){const s=e[e.length-1];return(...i)=>{var o,a,c;let l;const u=(a=r?(o=this._overloadedMethodAbis.get(s.name))===null||o===void 0?void 0:o.filter(g=>g.signature===s.signature):this._overloadedMethodAbis.get(s.name))!==null&&a!==void 0?a:[];let d=u[0];const h=n,f=u.filter(g=>{var y;return((y=g.inputs)!==null&&y!==void 0?y:[]).length===i.length});if(u.length===1||f.length===0)l=this._getAbiParams(d,i),Et.validate((c=s.inputs)!==null&&c!==void 0?c:[],l);else{const g=[],y=[];for(const v of f)try{l=this._getAbiParams(v,i),Et.validate(v.inputs,l),y.push(v)}catch(_){g.push(_)}if(y.length===1?[d]=y:y.length>1&&([d]=y,console.warn(`Multiple methods found that is compatible with the given inputs.
	Found ${y.length} compatible methods: ${JSON.stringify(y.map(v=>`${v.methodNameWithInputs} (signature: ${v.signature})`))} 
	The first one will be used: ${d.methodNameWithInputs}`)),g.length===f.length)throw new Bg(g)}const m={arguments:l,call:(g,y)=>Jh(this,void 0,void 0,function*(){return this._contractMethodCall(d,l,h,g,y)}),send:g=>this._contractMethodSend(d,l,h,g),populateTransaction:(g,y)=>{var v,_;let A=y??this.options;A=Object.assign(Object.assign({},A),{input:void 0,from:(_=(v=A?.from)!==null&&v!==void 0?v:this.defaultAccount)!==null&&_!==void 0?_:void 0});const k=yN({abi:s,params:i,options:Object.assign(Object.assign({},g),{dataInputFill:this.config.contractDataInputFill}),contractOptions:A});return k.dataInputFill&&delete k.dataInputFill,k},estimateGas:(g,...y)=>Jh(this,[g,...y],void 0,function*(v,_=this.defaultReturnFormat){return this.contractMethodEstimateGas({abi:d,params:l,returnFormat:_,options:v})}),encodeABI:()=>Ew(d,l),decodeData:g=>mN(d,g),createAccessList:(g,y)=>Jh(this,void 0,void 0,function*(){return this._contractMethodCreateAccessList(d,l,h,g,y)})};return d.stateMutability==="payable",m}}_contractMethodCall(e,n,r,s,i){return Jh(this,void 0,void 0,function*(){var o;const a=uBe({abi:e,params:n,options:Object.assign(Object.assign({},s),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{const c=yield MD(this,a,i,this.defaultReturnFormat);return AMe(e,c)}catch(c){throw c instanceof Nf&&A1(r,c.cause),c}})}_contractMethodCreateAccessList(e,n,r,s,i){return Jh(this,void 0,void 0,function*(){var o;const a=hBe({abi:e,params:n,options:Object.assign(Object.assign({},s),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{return OG(this,a,i,this.defaultReturnFormat)}catch(c){throw c instanceof Nf&&A1(r,c.cause),c}})}_contractMethodSend(e,n,r,s,i){var o,a;let c=i??this.options;c=Object.assign(Object.assign({},c),{input:void 0,from:(a=(o=c.from)!==null&&o!==void 0?o:this.defaultAccount)!==null&&a!==void 0?a:void 0});const l=yN({abi:e,params:n,options:Object.assign(Object.assign({},s),{dataInputFill:this.config.contractDataInputFill}),contractOptions:c}),u=de(this.transactionMiddleware)?ab(this,l,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface}):ab(this,l,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface},this.transactionMiddleware);return u.on("error",d=>{d instanceof Nf&&A1(r,d.cause)}),u}contractMethodEstimateGas(e){return Jh(this,arguments,void 0,function*({abi:n,params:r,returnFormat:s,options:i,contractOptions:o}){const a=dBe({abi:n,params:r,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:o??this.options});return BD(this,a,Ql.LATEST,s??this.defaultReturnFormat)})}_createContractEvent(e,n=this.defaultReturnFormat){return(...r)=>{var s;const{topics:i,fromBlock:o}=l4(this.options,e,r[0]),a=new MG({address:this.options.address,topics:i,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:n});return de(o)||this.getPastEvents(e.name,{fromBlock:o,topics:i},n).then(c=>{c&&c.forEach(l=>a.emit("data",l))}).catch(c=>{a.emit("error",new Vl("Failed to get past events.",c))}),(s=this.subscriptionManager)===null||s===void 0||s.addSubscription(a).catch(c=>{a.emit("error",new Vl("Failed to subscribe.",c))}),a}}subscribeToContextEvents(e){const n=this;this.context=e,n.syncWithContext&&e.on(sp.CONFIG_CHANGE,r=>{n.setConfig({[r.name]:r.newValue})})}}const d4={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},Cm={setAddr:"addr",addr:"addr",pubkey:"pubkey",contenthash:"contenthash",text:"text",name:"name"},_C={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},wBe={"0x1":"main","0x5":"goerli"},vBe=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],bBe=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"setAddr",outputs:[],stateMutability:"nonpayable",type:"function"}];var _Be="AEkU4AngDVgB0QKRAQYBOwDqATEAnwDbAIUApABsAOAAbwCRAEYAiQBPAHYAPgA+ACsANwAlAGMAHwAvACsAJQAWAC8AGwAiACIALwAUACsAEQAiAAsAGwARABcAGAA6ACkALAAsADUAFgAsABEAHQAhAA8AGwAdABUAFgAZAA0ADQAXABAAGQAUABIEqgYJAR4UFjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqfu75wzbIM8IuykDsRQ7APcta6MAoX0YABcEJdcWAR0AuRnNBPoJIEw3CZcJiB4bVllM44NCABMADAAVAA5rVAAhAA4AR+4V2D3zOVjKleYuChAdX01YPewAEwAMABUADmsgXECXAMPrABsAOQzFABsVW6n7Adq4HB0FWwXiAtCfAsSwCkwcpGUUcxptTPUAuw1nAuEACy00iRfJkQKBewETGwC9DWcC4QALLQFIUCWRTAoDLfsFMgnXaRetAddDAEkrEncCMRYhAusnuTdrADnhAfUlAMcOy7UBG2OBALEFAAUAitNJBRvDHwcXAKgn0QGhKy0DmwBnAQoZPu03dAQYFwCqAccCIQDTKxJzOvNQsAWQOncnNUgF+icFWQVYr7gFaTtdQhI6WEGXe5NmX6H4CxMDxQcl8XcjBKNLAlNTAnUbqycBj6OlNVsDRRcEg2EJANEGqz8vIwcpAjldAGsBYR9xAIMdGQCVAUm3ACdpFwGvxQM3LSFDUwFvWQZlAmUA8UkXAykBBQBJQQCrAF0AcwArtQYH8+8ZjX8ACSEAKQCzG0cB0QHbBwsxl3iB6AAKABEANAA9ADgzd3nTwBBfEFwBTQlMbDoVCwKsD6YL5REVDNEqy9PYADSpB+sDUwfrA1MDUwfrB+sDUwfrA1MDUwNTA1McCvAa08AQXw9IBG0FjgWLBNYIgyZJEYEHKAjSVA10HhxHA0UA/CMlSRw7kzMLJUJMDE0DB/w2QmynfTgDRzGrVPWQogPLMk85bAEecRKgACoPcxw1tU5+ekdxoApLT661f0liTmcCvjqoP/gKIQmTb7t3TgY9EBcnoRDzDC8BsQE3DelL1ATtBjcExR95GRUPyZWYCKEt2QzpJt8unYBWI/EqfwXpS/A82QtJUWQPVQthCd86X4FKAx0BCSKHCtkNNQhpEO8KxWcN4RFBBzUD0UmWAKEG/QsNHTEVsSYMYqgLBTlzBvca8guLJqsTJXr4Bc8aHQZJASUa+wDLLuOFrFotXBhPWwX/CyEjwxSkUBwNIUCzeEQaFwcRJaUCjUNsSoNRMh6PIfI8OQ1iLg9ReAfxPAEZSwt9PJpGp0UKEc4+iT1EIkVMKAQxeywrJ4cJyw+BDLV8bgFVCR0JrQxtEy0REzfBCDUHFSmXICcRCB1GkWCWBPObA+8TzQMHBTsJPQcPA7EcKRMqFSUFCYEg0wLvNtEurwKLVnwBEwXHDyEf2xBMR9wO5QiXAmEDfyXnACkVHQATIpcIP18AW4/UUwEuxwjDamgjcANjFONdEW8HjQ5TB6McLxW7HN1wxF4HhgQon6sJVwFxCZUBWwTfCAU1V4ycID1nT4tUGJcgXUE7XfgCLQxhFZtEuYd0AocPZxIXATEBbwc1DP0CcxHpEWcQkQjnhgA1sTP0OiEESyF/IA0KIwNLbMoLIyb1DPRlAZ8SXgMINDl36menYLIgF/kHFTLBQVwh7QuOT8kMmBq9GD5UKhngB7sD7xrvJ+ZBUwX7A58POkkz6gS5C2UIhwk7AEUOnxMH0xhmCm2MzAEthwGzlQNTjX8Ca4sGMwcHAGMHgwV14QAZAqMInwABAMsDUwA1AqkHmQAVAIE9ATkDIysBHeECiwOPCC3HAZErAe8lBBe/DBEA8zNuRgLDrQKAZmaeBdlUAooCRTEBSSEEAUpDTQOrbd0A1wBHBg/bQwERp0bHFt8/AdtrJwDDAPcAATEHAT0ByQHvaQCzAVsLLQmer7EBSeUlAH8AEWcB0wKFANkAMQB77QFPAEkFVfUFzwJLRQENLRQnU10BtwMbAS8BCQB1BseJocUDGwRpB88CEBcV3QLvKgexAyLbE8lCwQK92lEAMhIKNAq1CrQfX/NcLwItbj1MAAofpD7DP0oFTTtPO1Q7TztUO087VDtPO1Q7TztUA5O73rveCmhfQWHnDKIN0ETEOkUT12BNYC4TxC2zFL0VyiVSGTkauCcBJeBVBQ8ALc9mLAgoNHEXuAA7KWSDPWOCHiwKRxzjU41U9C0XAK1LnjOrDagbEUQ8BUN16WImFgoKHgJkfQJiPldJq1c3HAKh8wJolAJmBQKfgDgXBwJmNwJmIgRqBHsDfw8Dfo45AjlzEzl+Oh8fAmwZAjIyOAYCbcMCbarrhi9jQScBYwDaAN0ARgEHlAyJAPoHvgAJsQJ3KwJ2njsCeUc/Ani2GVjXRapG0wJ8OwJ6xAJ9BQJ87AVVBRxH/Eh5XyAAJxFJVEpXERNKyALQ/QLQyEsjA4hLA4fiRMGRLgLynVz/AwOqS8pMKSHLTUhNqwKLOwKK1L0XAxk/YwGzAo4zAo5YPJN9Ao7VAo5YdFGwUzEGUtBUgQKT9wKTCADlABhVGlWrVcwCLBcpkYIy3XhiRTc1ApebAu+uWB2kAFUhApaLApZ4mAClWahaBX1JADcClrEClkpcQFzNApnHAplgXMZdAxUCnJc5vjqZApwSAp+XAp60hgAZCy0mCwKd7QKejgCxOWEwYesCns8CoGoBpQKemxsCnkqhY8RkIyEnAierAiZ6AqD3AqBIAqLZAqHAAqYrAqXKAqf7AHkCp+5oeGit/0VqGGrNAqzfAqyqAq1jAqz+AlcZAlXYArHd0wMfSmyTArK5CQKy5BNs3G1fbURbAyXJArZYNztujAMpQQK4WgK5QxECuSZzcDJw3QK9FQK71nCSAzINAr6Ecf4DM20CvhZzHnNLAsPHAsMAc350RzFBdNwDPKMDPJYDPbsCxXgCxkMCxgyFAshlTQLIQALJSwLJKgJkmQLdznh1XXiqeSFLzAMYn2b+AmHwGe+VIHsHXo5etw0Cz2cCz2grR0/O7w+bAMKpAs9vASXmA04OfkcBAtwjAtuGAtJLA1JYA1NbAP0DVYiAhTvHEulcQYIYgs+CyoOJAtrDAtnahAyERac4A4ahACsDZAqGbVX1AFEC32EC3rRvcwLiK+0QAfMsIwH0lwHyzoMC6+8C6Wx1Aur1AurgAPVDAbUC7oUC65iWppb/Au47A4XcmHVw3HGdAvL/AGUDjhKZjwL3DwORagOSgwL3lAL51QL4YpoYmqe3M5saA51/Av72ARcANZ8Yn68DBYkDpmYDptUAzcEDBmahhKIBBQMMRQELARsHaQZdtWMBALcEZ7sNhx6vCQATcTUAHwMvEkkDhXsBXyMdAIzrAB0A5p8Dm40IswYbn8EApwURu+kdPT4WeAVoNz5AK0IhQrRfcRFfvACWxQUyAJBMGZu5OyZgMhG6zw4vGMYYicn2BVcFWAVXBVgFYwVYBVcFWAVXBVgFVwVYBVcFWEYVCNeFZwICAgpkXukrBMkDsQYvu7sAuwSnuwDnQCkWsgVGPmk+cEI/QrZfdTdf6ABYETOrAIz+zGvL/KbnRno9JiMEKxYnNjV+bd9qwfEZwixpAWvXbjAXBV8FasnBybgIz0lbAAAACnxefYu+ADM/gQADFtEG5a0jBQCMwwsDAQ0A5WUdPSQfSkKxQrxBOCNfJ2A2JzgjCcE9CkQ/Qz54PoE+cD5xAolCvElCO1/LTk9qTQosa1QvagtuH1/gMzobCWebCmIjKzwdJkKrQrwrzAHL/F/JDh8uCQgJIn6d32o6LUoXyavJrAllwcvMCmBBXw/lEKMRAJONHUVCJRupbTnOOAozP0M+cEI/HAcKHUxHbFssLVrhvBIKfe0dK0I/HF0ISgkOM1RDQjcEO0OcLAqBGy1CPxv1CFMiIxgwMQAFj2HwXgpxZMlgC2AtI25DYBk5AhseYLMGAmsQZU5gTREBZOdgFWCVYH1gs2BLYJFoFhcGtQ7cVam8WgtDFqsBuyvNwQIfFQAcAx4BeQJsLzCVUoABigq4RxoA5CN0jgrKDaZN6gGbAoecTwVAXwD39wkANBZXDAulDCQfuq9HAE8MNAAVE58rggh6AtILS2URGwDYTgZ1BAoeWgAxALa4AZonCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cKAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4AZonLTsOzgKQGHtQu1jIdHKO16WbDvWZFT0b7AEpEFwSBg8bAccJOhCTBRArDDYLABEAs84BAgCkAOEAmIIABWtXLwAUAFsbxi5sdioNwRACOyQz0+EcHgsbfQJ7Ls6hHATBCqrxbAA3OS0Opge7CQAQOi7OERkAfavaHA+7GkcczaF3HgE9Kl8cAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvC7OoSoJPA67BZgBG2sKD4sa4QHDARELuxY7AKALOxC7BBige9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewAHuwG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOwAuuwLrDlaouwAeuwJVICp/AAG7AALjAAg7FTwVuwAbuwG9KOClWw6/xAD0AGj7L7ZtvgNIo7vIqDsDAbuVJ0sAAlsACrsEAOfdGbsIGnsIoQUK/3AA37unuxjbGruji3lyBvupm4MAErsGGwsBvAAAhgBtuwYAC7unOwEaO7oIoZzKAbsL7QfAqTsA4XsBvwAA5QAVuwAG+wAJuwBpiwAauwAOuwIYu45pFfsAAVsADmsALkseAAa7ABe7CCEADUoBwgC3ryYBwAAAtAAOmwG+J+QAsloAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAAFDsAEWsAD4sADesADbsAGQsGFhsAFTsAbpsWswG7ALoAEzsDAGkrCgDhSwACOwAEUgAXewUbAAbQABi7AAv7AF+7AGv7AOSLAbsAF3YBvAABcguhAAVKHgF7KFIAOUUA/gcNDHIAKCpwAaQFCF4BvF4jDAkHb0tsXyqJHzwUYi02A6EKtAHYABYC0QNuAXZyR1IUIQNPAhU+ASwGA3NGvHtSekAAKQAxAfsAUwrbAHuQLAErAHblDREyRgFKAFcFAAFQAQeKzAB4OwQgpQBaANYVAJVoNx+LAM1rsQDP1BYIwnVzGxhWHQnRAYiQqyJTU01IEjzCifkAfxw3QCkr4BGXTwByASksMClCGQ8DMFUE98XuAEtl3ABqAnECPxF6Osd4LjXVBgUAEBsdCggMKgQfHSlOU04IuboAChLNACYAARoAhgCJAI41AO4AtADgAJ08ALsAqwCmAKEA8gCfANMAnADrAQwBBwDAAHkAWgDLAM0BBwDXAOsAiACiATUA4wDYANUDAQcqM9TU1NS2wNzN0M5DMhcBTQFXL0cBVQFkAWMBVgFHS0NFaA0BThUHCAMyNgwHACINJCYpLDg6Oj09PT4/DkAeUVFRUVNTUlMpVFVXVlYcXWFhYGJhI2ZocG9ycnJycnJ0dHR0dHR0dHR0dHZ2d3Z1WwBA7ABFAJYAdAAuAGLyAIoAUwBTADMCc+kAh//y8gBgAI/sAJsASwBeAGD5+aoAgQCBAGUAUgCtAB4AsgB/AjwCPwD4AOMA+gD6AOQA+wDlAOUA5ADiACkCdwFNATwBOgFQAToBOgE6ATUBNAE0ATQBGAFUDwArCAAATRcKFgMVFg4AigCSAKIASwBkGAItAHAAaQCRAxIDJCoDHkE+RykAiwJLAMMCUwKgALoCkgKSApICkgKSApIChwKSApICkgKSApICkgKRApEClAKcApMCkgKSApACkAKQApACjgKRAnEB0AKTApsCkgKSApEWeQsA+gUDpwJdAjYXAVAQNQLeEQorEwFKNxNNkQF3pDwBZVkA/wM9RwEAAJMpHhiPagApYABpAC4AiQOUzIvwroRaBborDsIRAZ3VdCoLBCMxbAEzWmwBsgDdfoB/foB+gYKCfoOGhH6FiIaAh4KIgol+in6LfoyKjX6Ofo+CkH6RfpJ+k36Ug5WIloKXftoC2WzhAtdsAIJsJGygAINsbARCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAlmZsAKMDh2wAtGYBBWwAyVFsbADPbAIMbAD2WmwA9gEZAPYA9AD0APUA9AN8XmzUhCNlvwD2APQA9AD1APQcbGwAiVpsAPYAiQEZAPYAiQLsAPYAiQN8XmzUhCNlvxxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN8XmzUhCNlvxxsbACJWmwBGQD2AIkA9gCJAuwA9gCJA3xebNSEI2W/HGwCQwE2bAJKATlsAkvBbGwCV2xsA54C7AOeA54DnwOfA58DnwN8XmzUhCNlvxxsbACJWmwBGQOeAIkDngCJAuwDngCJA3xebNSEI2W/HGwEN2wAiQQ4AIkGjTFtIC9s1m4DJmwA/QDGWgJsbABVWv4UMgJsbACJAmwAVAEAuV5sAmxebGwAiV5sAmxebD3YAEls1gJsbEZFNiJ9FGVAe8xvEZKvxVfKZszAVTBzYBH2d1iyUXEHH7twNw7eZF5JJRHI5EgaRr5D20/3dfONrFLSq5qSrrgd2CEUq722WBQ/LzpA+bx1oREI5xy4BDSZNun0ZWORUJqInZSyMaioyvfSI0l5uFDzbWaQ28/zdB0hwR4OQZ0/jn9ALSLNikjFYGfqR389qtFlhD3a6KdIh97rhZYpywuLc7o8ql5/X8KCbPU3L/QlmCowhRXhsGDvg6wUNprA9bM/49uxlAj7ZVy3ouEY/BgFXBNyK0TLrSjZWeJm/T4nz6QGLT3cJNtWRZVZTvIdtaxMMJRHgig9+S11LjBh7Inr06ykoch1U097Rw0hvgmOrydQyaWcEQDg0RavuMuT0zYabUZl1e33HNSK1oNUCS03eh+9C2EvF3fq9h+XBaAMFuoWeZf+mfZgL4HzyiKDIUtfNU4oFu0aE9qt3VA3U4D3fOSrAcYVnjG3cSkp1vhXZnp3JQm4JknKdBitO2NVnGCYQwU3YMWHWB87NEd+4AHuOKI8BSIH92reW0pfs+kWCTJxDCbRjFv8Cfc4/DSBYJScJYTeAEgg9wTEvcwd/QuHRHqGzAQ4fXf5FUI1lPrO+fvEcPl4JInM1z9AtBT2bL4QYEREe7KiSnnxTwtmAFjn8lqT3mND8qTktX2F16Ae9cakqJ6/pEQsHURqyqWlRMCzKXRKfCHT7sYHWx9/T/ugYTFY6iVN3Btm58ATJR5alYZybKMWojwOw3HbFn23NFyeLl7+Er82RchyYuBoGQ3j7SAWNxiYvp5U+Fq/DEzB9cG5DlJWsqkosRze92OVlCtQEYo1S1lF72Z8xWc4ld/+fFcfTEDTFb9d8tJGQ75dpJEvcWyGmGBiTbiWDdGOcw93Dmxq5ISUrmasygONfHLvhgo83HQZenbdBtSzBkvYrCEQ/xEDMhMZsN6gqplx5jGG9mSQLhM81UEdEeJ59sdNJDAFy/gPyJoKlwPZgB/MkC/kICLiCB8va+nCdO2ry4aDfkmPFpF/H/SGQ3LJ6aAv9dtJ8DniHtLOckZix0BVb0iR5V3LAp521LBSIi6AtV7r2ZB/hQEvAw54EFNOQcFnl1xGUIc67tqK1INNwD2n/RbwgzO9h45LM6VMuN8V1ZNIQ6t+Xy3lTqyVCD5kqLy/t3/b8MLbgDg8JIWDkSZ+LrGhhr+gYpH+pr1TnCUnZPjpUdw6bSL6MWVXoDDciQDWECwU2e6VEpfrcOBbrSOijqGkEIoJPbpmeJLkcwbvA0yWIixQVjo0HnYh7fji+Dfdq1mtV1lG2Zz9R7eFMHS+FK7nybutu2fwzDpFldO2pZBshsHJWaltn3PWOoGJpCT2jE8EHOuC6FkejNWcfsWCqNqMLP9xTwcWArj2EiiI7D+EaDi7/2cqHL1gPiF6C/J7aUo7RQqogPZ11WqbyP97nsoMxPOC78wZMF7B1Y0g7JNXJV/nN1m4xx8hbqWz07KSaqr5hE4icB326DMR/vUKX9LoNjle/ZWtbUhrTAcsdgrLlG5Ne8aiR0bS/2ZhpNOVVxavWIZsEM/rd68EB4vjbbD13NkMK1qvMk74vGbSkL7ULO0sZ9R6APSCo6KH+Xn98wEdw1bCPAnDTaBsD6sidAGN58uiH4a3ovG1KyZAu2XtyGgF/vgWKGxw9R1lfAVcfuYE71DHuxtTzfGZnHaDpDGWmfEq0N4GawE7yIkaoz8jcmVmzJe1ydM8q0p08YIxFcY1YcqQc1djWBEoNETDFcgk5waRftEJasPREkrV++N/TOKkERF1fCLrXS8DFGYGRBeECMQRNEs0ES3FzUtXCcNxpYEM3Uei6XodZruXUIRnn+UXf2b/r7n1vQutoi6WoIbW7svDNWBbUWcDUc7F9SJK3bvSy9KIqhgyJHoW2Kpvv0J4ob14HFXGWWVsYXJzjwxS+SADShTgCRjhoDgjAYRGxwJ1Vonw+cpnCKhz8NQPrb0SFxHIRbmG95Q2hlC4mDxvPBRbkFa60cvWakd7f0kVBxxktzZ9agPJEWyA63RSHYVqt8cPrs2uFJ3rS3k9ETGKn5+A6F9IOrdZHfT1biEyUJKEvwzuscwshGCBJvd16TrefW03xVnJf4xvs72PdxrMidjJO8EiWyN/VWyB3fv9kc34YIuZTFtXGo9DuG3H1Uka5FgBMwDPEvRcSabi3WakNQkXFecJlFk6buLVk5YHpuKWTw6oF632FPPSVIVl5hgUAeHhj0t/sw/PEEvThLQDDFE34eCg/rLOyXT3r+L98oRKrlTO0MdALYQ3rRQqC7d822dJPGxF1K4J2TtfPSMFaCAg0n0NGk9yiaKKOJD1v2aBX9HUOIawjjfvwCmjHZJTR62R9c9x33JnBjWrN4QYEOmehy0oZMP9XM9Zyi6TYoe07PaLceRXcCWZiY/imRUWW6+mci7+wMxSdwMdbXckXtvhJH8sc4iQcTwm7yp+3f7CaesTTQB2qkgeXh+wFiSMXfMlH7Yil0OoZ2QTtRLTip2O0cLZ4SstqWHZ6H+8A2kZXhpm0kPbL9dUanTOvziqIUh6Ambwa3WrCb2eWbuCN3L1hgWUmjRC3JoL3dBhR3imSQI8xuCMfsszlji7cSShNSYdqCXPxEVwbqO9i5B6hf93YI7aeyI8jxgcVXK0I/klbvhSXjkjOIwZgPdVwmsFW7HGPLUAvDRuKm+itybRg7c8+Yqqjg824Qf+/NxsBSUNAK9KCoJpauFqK0XQULrWYj4FnxeKDuvr54iokpi+D57e6Y1zxRJJdsHnDR3JyraCUufHBRTKODWBVzthjm4k3/Hv+Q990XDVR+KW+TcJX045LW86EKhz/97aqj89A8ZvTk1//tczosU90loIPVaHuWegJU3wP//7XHcO7c0yQM2jM/IhQKrf8hiObHWiWDZManF8Uf/HzbmDfC2wT//aiZ4hGTv/xzgKwdb1sD6cGEkceow0s3b89/zg+3plyRm0HlZi886j5wUwFhdHiDTaBidZRo5cx/tMeLyguOATbzq17ydhzbrpxunuHx6lbFGiO97gsd4dk//7iCIo+Ew+hG2so5kvv+ITG4c1fzHPtu1Xn5QfUnqY3/uByVmB7gmnE/E+5zdm+6nDmoews5fr+NzThdSHzK4bBQOL9c4O8OI0xLSqjJ4lbniLJg1aFpQRLwaSMZmpkC9e/j6FOVrTQ6a/a4alGgfrl2ZL1sbHUQ3DOI7ntq9diHFfm3t1mul3rdJEJCHnlW/hlQntipMrpeMs7fUr6wK370D7VbXH0DUHzdYfRg/6Z11Ult1sffJS+heHbco15Sxy3+rDnPesqH1lajk0yu02hPUvEUqvcUXWXL7Ad0wNGMx5gOle4XJxq/r/YY0xdco2wRSEGwcT7YADlBrHc9ZbvzOL0QwyWCWWChB9Obg800v7tyBWaNvdwz+fL7Ph9i2irEeJkRgOzeEDw+JiD/V93vH9FgMEoFIJMoIuogmicZohf94SBuPn6hXaV9jP4VVVA/bu+Wg8S88GLtmEPSNRLdtlXx2XL/nuM8nKkhnlnjaropiKKLIH94pLIASci0pDBfj9Hi5BfaTSXQg5+PMjQX91Ktk4MOqK1K99l4BRPv5+vNovGZ3IxQv8ICvjV4/diThpoaM8uvd3D9d/DE477w3yAbW3IDm2i73pZ9aEj38JqS6h/s8/xgmUIVcuq2JTgefAyuoafzQxAuRASeg3NtG3ach/JEkyuX+JDt2PnDZTShUhyHHG3ttBg/6lhAchGjLJBtopj4e01MlCp2yqQRTr4sBBXru+lKaoanwYX8y2aWCJiR3KnhCOkYVFSvsO0oDRujUFOEptiNDTYrJoUbvOyvl4AhC9h3wORiTXK1MrpMfnvdnndnR/HRVSusMBgIxwrLdn3vq1VcncPiD0SquTx/kNmxeFyCT4uXVUd9AL+rSGmuq7OOCzDKeVPjiNWVaoP5KOFqYq5Xcuf/xW9S+u9eIq9GAtZWtQlgkRecjRtvG1NR4WXXpn+pwsTBTIy079Ikg8rSef1aVapIFcXCd6C2wHVjLXR+N0tw4Taw6x6H90BFRgNrtlq2up6hHKuV3inM5RJaQWZHd84e6RsKkk9po3dk9by54tpPw7cBkFas/G+GbHwuG+AwP55BZyXILTHCIVrPpXHEaUPYfL6nphJP1Rc10xG4UaCeY4IHCwuur8xmSQDgY4aVwhzWhjbtSHG8JO6P2i2nC9/0Bfx0zk6dYQq3aw7k5vIObD7SEKrxhz0fQ0+YTOfHW23CBNeZci1qNsUDhoeqmfyP6PvjoEjHk8QbrFyQVZPHVWijnb8YCM65iYNoEbvnchStZ/9cKg5Vd45j8KnB6UjzXl/bkyZx7VoD47ocUUi117WwgySSb4rXgLJ52Mv5XJbp3I+uBP81BUvOjy4Cacgi+GWWlC/8dwgqwiojjUBDnEOxyRyowwLQfytFra1OZS4XvRYr4uoamAfG3I/p2bA7G90yqKThH8Ke00Tqd+3l3dmJpaCZelBMYjGqNLVa3SM4+LQeL56gY6Bymy2LQPVOxjWfj5tq4o74swcxhyGJPynkS5xAjOXZP1/FAYcBT3u6qLoIkEfErwo4gozmyI1YCvM0oyI3ghjGPQSsof2sKUhq91WsKy9cYWN+4A2v4pG/Mxpdc6w6kI/HX7Xb0TuihmsiOy2wQIsrZbUmr3OBSUo6oDJNgQp+YqYkgTgYcWZDgawJw3DFfdzT//PhVUidgB2qa8uw/j9ToHBAS33iT8YLhhAfyXG0bQUFp7QmH7oQ3i6Flf4OTZLvJdh8pfuflmWu2ohm5pTiSg1pl3vq9uluTJwqXfh1hqy8e2iHoD+Y35gCIViTo6VOtK5dD8HYClucJucXASzwe2kPj4S4eYQtmkYHagXhAzp/F541xE8YFYqSPszDuz3soWzHy0p3E2jwZNQaIcGU9FNQwQxeDw0ZlK9dxXrj9IUHGUPTOyib8CqXmbZ7Ex54bn1rLx3qqAavu/gh6XjV0GmN1p+yyMK9HN5uYEvxgbAk43tsheREhyI+Q5WLIneKTGPmYiM/lxOp8fvqHy8YgXK0TlMiX0tliLI2JtfmWZP8eVV732sdYm+pcWzDzEmKLJZyeelyaZKkjPnnUO9keDwtgiLnmd5+t+Sr5y8brRnlvxcWEWfCqIALQYHvaXx6jTg4dAlye469uGwwOZVZCILLfGjaMg4LUCNMTtMSp1aC2y/3wR2t1v3w/iNBRQ+bNbtDqL2NAr7K4rUcyqbSpNrXZgAWXvjxBBtfYLK1uRYt3q2pfXJOAL0HtWcEwJLddOSJKV1SwvcvEuzg/4MPnA8MIUJOLqm3qI6wFyN99Ck6zYaV/zGSAzF/PGsaNa4vPLe5QnyuqVUnVQ6xELA6gbe53aGgeke+R/ycb2LJVyc7BhuzI90zA+c6wUDTb7NH//gdDSl2u/aW7lRJm8m1fLtPxcNuEM5JbkOCZKPM88HUsLRoC1pmKKlvWyeAXuxILbu0snpSxf8N+RgtLUSe5n2gdjOjoSTaN7mMZ7bF+cWk/MS8mFD4pcyl5UN7CbpFZH2a+Pm1VAnUTVfbw8qrmz1G9m5aKmRzY1SMhhPrlCn2t4uNUXNA3IFe6NOjSC1DEaAFZAfDlEkQCsbNhsZPj6NQPDSB3tLiTo0ZYoEbIeEIaKtU3Wk60rEszawTFuyHVd365LA/c/uarABN5M5rGq/dqTG3Ilye/5EKiYisisuzqNaZjmWv0z9TORc0CKbaTea214oNM9u2sXUZub/eqM3Pi/PjRSyQiOSwPWif2asTgu6hS6fb5UGosCWxdedMqdViIUUSSdIJx+qQ4KShfTT39VAWZbi+mB+iKICNwpt6cflY57Rcbs6d1kA26Iru73cuxYVlSvuJdcR5VfDYZRk8X0AXePROyw3Le6LaUdmTLzYsoNhhgQpd67xVNiHgk3pakmndeIAtTC4DCXy9oS6eU4CWxDdVmY53pKNbdAKmQsP37lrJZC6iDXMELGKcHjNuuZgcDyY8W/yv6ha3DX7OWm/35fpvhw55oitf4V+GULlcPWYyGGuVBdro19c8u0RDddDun40W7G5cSIzHLh/qZxb59R+EPY+wZ2XerkUim92hhXpKyW6WtAh6zQS97DrPyjCvKi3pCw96LeKynOpyjtsMQc2RmI/20zFOZcSa2AK++PoRcT6zeJyxlBZ7kk5mhqXGkLlM2hFKc+/T544xXP0Ua38Q6xdPTLTeG1PHnLMaOvksUQMrEFTB/lizCirmFQL8zYVU+OTeYQEFaITsBSMMYexS9HkajO2gGIf2micvntCZJsZQEwIH3/4JGJQGflBuH5rNXmnRRYXDQs3ZoEQoMtYDr1kFKUS/siiQSUxcTH9XYeBZiKDDFQoExREO9dddKQLO3BwMHvymCSTFyY+vxn3D27NDx6OlU092D5EDUwilttqVHpjJQDUceJYCLsK2swfXeNUVrBJT/w/sk+7si8rPtiMFis+oxvGdGQxirMBID700T39mULuNHzOyN+xBfcFACZcyngF1aSpv0JPkNUrAZTqfplv509cGXFUiEEm5dZb+OsP/blizqdK45/dSsIrufYTrCPY2lgJD6k6QljTfXVlHfYKSq+MsagyUcaMintyr95bD8kdTAeYNLNsMmo/Wdd8a2nStBP49ARIjqqpUHWY4q4mvO5Cq/CgCP+4/B+5zutGwX5pssgVLr1+fIM7WWLfiUQDk4c6ZdHZOWv5hG3g2dgQ5NXnpIY+BWwJpaouf25bXnjDzbHnQNofH/c6m+dEAS9Gs2h7pFRPKOBDnqswZ8KZjhId1ytHUTs533KwBoSiImoxKQUgZ7z6pA9QB3sZ8Cq0vwutJTTkfbX8AzCpm2cFXx/P22niUMHauU8IGc+78R6TsutoonoqFuoNA3l80t387YHMoL5KGAT1JO4zmx+vJ0LbLHlicHraSVYvJjnO9p++qnWgKw9OwFVVUagvZuf9qfiuum+hIicxP1q4zDnzkHsCNriLxBpxY9N+UOmqzdY1MunLMDgkMyi3uvnN3UBXJeZ8YLs5xr8QrOhimYoKuGBebZHAiBIkViv3DG8k2oNpp5OIgX6ulqaRN8V62QUPjn5tl1kPXhT9bcd8qIm8gi4or/FGbvQ6pgGSHmnayrugmf5E0upGxPRf/3xOtitGMaHLKJVm5zhglmVfI91o0yxhJZVS/5wQ8zfxK8Ylw0WmHXoGfRkoBRx9Hsnl/6sgTjAVwpmNuSeZtBwlX4qB8Bh8lxjqBDIuFGJ4I1wxN0XRlAAslzqMKwQfyA7OkuivCXfv+i+3XmhcBFM2n4jdT+NyUmBnQJPV3F2sZfKvJhUlXzSosFR4VevVVcOkFnnjdiRWc0TeSYxj41sJGYMbZTeLI3GvyZ8/gAAudQ1+4oFX+enX5V49MczGCYVBuoC4kHjp7ZVxj+clBwPr9k+v05SsezQK3enxLs1Nt/N7c7AImVUysjGou4iOohHo83Zs9/MI/OWB+OyXzOBD93NbApGHXrv8CVRHp2bwH+xB55cfNrdqFD35HSMx4iVmtzYAmSCIV8kXsHoq3DIb93riTWbubnjxbBW5zConVtbxLRStXHkIyAByaozME952Gc9aAdAbBpZSVCH88Uwb/4bPTVOVl+WoMYD7JIvK8VcMrJ8zHV4bbG0Dg7Kx17A4ej/ZcZ2Z5pVuVLUH1E/AccUTKm81SE+LQ6STTUDscUk0x2OWIbEORhg69tdoTGNkA1RfkGIRZHr5mCXOpLC55WWzCZoGPFUVtZRHwh0nq039CDdjEPo+JyaxSQAvDgR6Iqvxy0frrtEG1A385N81l05SSzN+IDm9bypF9m92EUqblnauZ5sjc37wRykOdl7w4o8WMgQsjii3EE/aJYDfHs1cH6DNBEujjcCc8qAefYFyIAURDcDnzun5UmkbBQsU4eu/W8I9nBE0qJKTdg2hwjq0+XV7a3TJ7R+alvJZCRia9lJ+grNB9dbrOmWEvUotMjvDhq4wV/kq4fvIBkzUGpDeYH74rne8uU3dgoNZdR9pUL6q9YDNRfOiF6Dyk+SYXQIghTjm9qR4tBHh0gnmF/9q3Qv22EzaLhSvDlDOxMrrCNRmLCl1jApzLrBCPn2mjn5zqK7OYK7VxOfQ5GfBfoPdyQwqFEgCVHkJ9oTnagRM3R0+rsuN5jQv9icCav/p1WqiEXSzCdLd/WEA6z6dDP7tPqPbeDYKAkVcz1lLGbFOC9b7cBd3MV0Ve8dZ89oR7OnxGS7uVpSry8banVZwpJg+nkH1jRBYa2BvBMY2xITH9ERXCjHzdZxs+ipdXP2DY7X+eWiBhtT2L0RRGTLPeazn5tpl4tu8iE2rWig731iuJDRbCHHy+g/Mb9+miAyVqfIpXT/iZeOxOxODO0hEpLM78I1+G2Z45yi3lS1K3m4WMQ559Lp4UML5vZUjYGJuxl+OPpUH5klpyBujkjprhei0TmUik10gjvNUp8mDkWlNKikmYspaVTqewbnOzJrmz8FLIpsT67EJLHIIfeDcWEfiP+DJrZ1jfxpoAb2abeMqLx+9RuZGzQoYtYVGgAWwEM9Kek2vPIeBNAKD6ao7nw6sgvfeLZPoXkbYO/tStHJdKzk+WFSFEU2NcALJAEP6S8pcnqqBBt57dwTrzQNCIdk2SocK4dLRbD/pu/VryKnm65ZYXiJCfHJk3mx9MRSl+nSK6OqEBSoGjz0/LADddwF/HqcfK3K3O+6YUGQcmj8pZL4PhZ6KrGkb8B38FmDvvLd3XQXbvS/FQmrXFTvJNkaN/FGo83KuS43BK1UfVnIqigGkCoP5fBda2MwAGTGNKX9K9t4Bx83pMFc5KSORmWKv+8VoVggWxoaBz3/9IBh6RwLd1tebwy89xvE5z6EEpXpDfrXWfRsMs6+ekUHH6idVosno55+xQ8Zqzelh0bxtJTgCcH3Z3/Cxlx9eNIS4JIFKOAVrDqbrXRszmY55a5+niJGHtkO3b6mnIDxLa1WXc7BAe33mt2KyM4Fbc3R6/WVTQN8QhlqAtave2WsQTqzWeSlKuGUVIJRqtObpv294rS0kDN1RKzdstZTXJebR2HlzsQ4P3NbMHUqFZMZw+/IKXnh4t+lY8qocp/B1oMszR03EFs3bPeND8QkItMvllObeCz3SZAjqZrobmLcrpFyQV7mwBjg3C3C8/bc5goQhv8j/IXMLGnt4mF7tybRDG5G0polxoUScQkPvmnga2/K+aapKeqSL0BTmo1Cm5g+booNOtdyKva2KoefRURaBk7113QKo3y+WTuFKtgETIK8HRluYS9DvlcciCDvnG8UaJRfZE2siZsiTHvRmN80xkUIInHeRZl5Re/+ATL6VhKFi8CZ/n/jbFV6T5pZ+Uoppvsi3qjacVFOJgWWfdlwVHKPW/TJO3na9hRM9bS2yo2rEsC6IBzRReVO6IesJU7PItzOamr+ROFfwGZmZ7ue8HNxAgLJKb7P3p8dMqk6Be5PJaT/5Rdc1deYVihWH9cjVKc9uz5EnfHqxLUkOO8iJUENBNVf5LyNy8zjLu/78k5WNTywiPfYeX3CPk7yc6CI3lum/CEZwfUaNpcI3KsPqfn2lmz3kd/acQjKA1ebkJaiuLD+epQ/Fc1llHXXMzofWzz/Kd29SNmOhcjMWw1jq1g3YfrXZ9rzXDYW4ZttfgfMi6oCUtBs0PkMVuxmq5lxEoCaSXPSqCJJ7MlKdRDidVt0AFlxk5cTdX++sBF2+E35mjwfm8ERVxH0FvuAQtsfA4V2G0TKTUxeyRGVjd/u6F1SvuAiU2/WaQjcNCU4Ep7VunXCYSbZj3U3wzu/LWM5MPlYuyQ3FOOCD/zt7K295hY2JhwF+ODDIZ676vGQFKveEQYkWj7lkK7rVmD7MhU0Y/tF8EcTTpo4/yqOufbd/zWIpMajnbDuWK2vn6OPPtz2rc9MIBNlPd8tt+yf+7SC4wqEPbozKMCwY5Bygx4JmoIEDsixWRDcdHd6S3/dZMHXOJAAv7+NIstl00crgSqHZKAEe4g3G4dzIV51EeZB01r7p8GNlfUnG/GjZgNGsqXZdYMBVtAtFNv3hJWPve4GvqZ2XxuiNkHTz5kxWgr0PjQdJlVywJ9Zf2ZvqeeTbolKtvK54re2Lq5BoyzfsRtvDfyao3kmyFzDQ88nM+qx83w74RDlkngtYiArI05Epre3GgBeSlMig0pE6RGQaFznKkGeb0SozLCyiOtxh7hgwZlbKbClzUUfC8ntMiHUOZE375RhTy9c4DA+oMLkUDkztSybZbdmP1xpaIbjUpPAHBq3cIq+CBFzbMlMMCCkUQ6d9LGV6GYCsYiEWZIy3nBnuxOYXeU4YTGDSin9e4/pCjPtQSHlg5LMEvIlF0ElthqrF129iK2RPBEWd3XWOl3SWV5uz5VUyZYp5kEFmz7QfP/B1W1BBzQ2iTGbSVT79lUHzcGXz3PJceSgz4uknETUwo0xffpr2KUvZF0i/r2sL3IFIClYx8CbIZE6Qt7MDJbOPB3xMScwaOcWG66IJfCnDkb0D2Mb+PHzX+oiCbxeTIogtyN+s2NJirNACk/OACSOTtV6vscwbzW4M168xqaI+RzR47S1nlV/rOoZnid87n/Ima2XYa3un3BuGAisNjb8eLMT9OnMtazQROFCuO1HiZXaOc0oUDbNC4eKLToOx8DzVhMgGA8XIAQ2x3b6I0uEyLssQjJX3QphcUMx4KsMgJ+72km4N2aqkBF2coKmUEt1eqIMGn+5txMT4kYVGd3ALO+y9Z4PP3d3l48JQK8s9ZZ/Qx/+NBKgBEJFlQ32psoJiihGO7FSYM5L81q72kaAYcilEFMG+ZK1BcMqELkflyCV7v8JEXLO4Rf/oZYNZHZVjJhfL6fnpP9Tio3Euue5uS7FMkfGOeRCTrBZ06Caev7tgufeTrX34Ur/Vvc+b8ksiIShNJtuF9WmYxOZ4xg8y6zTdy3KAB2y5kYkcRnXsptWwAFyKZ2I/QGySNeoQLkINUMloC+5L3WuMMx297Q1xUYLKqZ9XHavaobo6QQv4auMm+i84IhxRpPt9nUmcav9NcjCcP+TcMmxsQZ/F3mgeoA0fQgwvTsyXuuTaM3Sqtv2jaaajmaFQpK9W6uIbeqwvSDo34ZrY6elDUHwSCjHRRmlwmyy+eOra64Ssq0XSXYljMHtKY+FShcMkHsEUY/4Bw63dJ6KpwDaxmthlDdbdE+TvYF3v33cGSKqO+1H1pKYhJMvZD5ckQcHyNF8zrtiR5b0ko6NPGoRexUZTYP6VbUdn3zzxGBOi8Z0OqHjGqYxRXwN3mYi0GYEEZYq+Q3QvdKcEHILLLj8S+VFepSfErtmfZCdvxbfIifFSpEzKi+7VJsLMT+zEFeyp1OdwRC1VZrfTLIyR7xTPUcZFYPD9qI7D70uTb4hdpqPXsJIRNYbZtNwch1OI3trh3u2ScoQyM9POnInsUa+OovcwkUP1UfIzPb95n4BaF2ev57NHAej0+BVMF9/Cj9663HN2/JN3SQgslL914bKfiTTDFAz9PlQEL/dSv1H8xl3mtWxh1McFO9EJXlRDaKQDsyKO4vOJW90NFE6yw2tjbc2GeF95sbs0I9enAa6QwQVf/kJQhAD2BzUDKggOyjy1TEhED6sfk+418lQy3c/uj8aw8UEzZ6hIMCd8RohAkumMtIj9m73l2yPWoGHVTPaywkC7Yj9tBM1NxMgcrDwRtk4RO2WHT7Ql5kQCKdJj6kNuOTeyEBYBjLMhGz+O5/YGa84HEiTYEpZ6fFzy26GG2hWtTyteuYrhSyG56BjsT/wQeLRytpTY3D7sIMqZnJ9z1FDrfyjFlGl2TNw9BQysbaxOuwYYZs/7I6BANgkqCknWZC7/BBXvaeKwAmC959I+G39BUE9bExkNlbRoFRyEtNzv+NJ91FuisG3JCS6uYBeRnfv8AkAfKTeg9EYamqnsGfAV7d0f9DghHEQ5IsPGDIUhgoSj7obM4Bu5uhQ3/CYEDTHc92AsFvDK4XGrwUeGBWBHPlS+f4x+CxmmHz2sAGmSFNt65kwZC64mnaoWlu2310laYn8r62AqsR5dfjyK18MEdurdagldzfJtjFXlZs7St4QhdPiye6TPh2/ZAQLU/Fip5s7TDEM16KtRWrK9hmxnQ7bmfa/+7pa10Z8WDPK3NuJ+NN/RAbQ5vHx2uX0Lm7/w7cAEH/hvZA+mt7J7zGw7YtQYwnNN6dpgwkGjjrS3yQoeoYt1EnczmtmJfQZWzUlP3Hlg9Wzlr9IH23q3thGth+QNEANFettxKfskkGOlLk8AqoKJwDqOxAa6UzAx07plSSyNBJSGco9zjnC5gGbDoKvsMDuBR6bGRlGzJ+hFsGa/Izt78aI+WZ6dJlZKp4pGISuv9rV0sAS0MWEwCmfauO7oQZMiakHU35LBxiyJoOMddhUWgcZuC8r4Ksvn75TTcQXLJ7kWtYhGuGqPd9dZuFjBWQHNwosXY5snbHFQq72CvHXhIg+shQxycuLOuWYErwCLZeF24b7F78pO7xw4X6lIAR02hUOf5087Rl0nOaeb6CK4i/KA/EZv76ftOWZtjwxslNr0E/u8rWUmnf3amfg6UZmBAluuoj3Dd7UV+9IAJ6iYcDfSJlgmIImohjfIUMJ27z+opj50Ak9af2LCNrWrBJvMovA1OeNO+MF/MwZvnaCxTgG7Cw4QfSPF6AYCGFt21M8PySZFeV3t2Rqqs5JMzMYzGRgq4o+UaKRgBf9GHi/9X9HXA3wxkCsd/UhnHSh2zUVDiraio/6nP4y3XJqs8ABfALAtCYU7DHPMPRjgcM6Ad/HiSXDAbOdSMkvGZPAkHs8wuQTy6X2Ov/JFvcPuKfV3/r9Q28";const h4=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),f4=4;function EBe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let S=1;S<r;S++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,m=f>>1,g=h-1;let y=0;for(let S=0;S<d;S++)y=y<<1|u();let v=[],_=0,A=h;for(;;){let S=Math.floor(((y-_+1)*s-1)/A),R=0,T=r;for(;T-R>1;){let x=R+T>>>1;S<i[x]?T=x:R=x}if(R==0)break;v.push(R);let b=_+Math.floor(A*i[R]/s),E=_+Math.floor(A*i[R+1]/s)-1;for(;((b^E)&f)==0;)y=y<<1&g|u(),b=b<<1&g,E=E<<1&g|1;for(;b&~E&m;)y=y&f|y<<1&g>>>1|u(),b=b<<1^f,E=(E^f)<<1|f|1;_=b,A=1+E-b}let k=r-4;return v.map(S=>{switch(S-k){case 3:return k+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return k+256+(t[a++]<<8|t[a++]);case 1:return k+t[a++];default:return S-1}})}function ABe(t){let e=0;return()=>t[e++]}function BG(t){return ABe(EBe(CBe(t)))}function CBe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function IBe(t){return t&1?~t>>1:t>>1}function TBe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=IBe(e());return n}function cb(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function LG(t){return lb(()=>{let e=cb(t);if(e.length)return e})}function $G(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(SBe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(xBe(n,t))}return e.flat()}function lb(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function UG(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)TBe(t,n).forEach((i,o)=>r[o].push(i));return r}function SBe(t,e){let n=1+e(),r=e(),s=lb(e);return UG(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function xBe(t,e){let n=1+e();return UG(n,1+t,e).map(s=>[s[0],s.slice(1)])}function PBe(t){let e=[],n=cb(t);return s(r([]),[]),e;function r(i){let o=t(),a=lb(()=>{let c=cb(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function RBe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function FG(t){return`{${RBe(t)}}`}function NBe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function Gg(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function OBe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var kBe="AEUDVgHLCGMATwDUADIAdAAhADQAFAAtABQAIQAPACcADQASAAoAGAAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAeYDMwCxCl8B8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobWgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vAITAdQZWxDzALN9AhsZVwIcGSkCBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rlr3JG9m8w9lIAXltp/v8kfWaIaaR9OwpAES/I3ZVamDXSgB/UsOgAG6D0tq+5CIqE15FiAhV3yA2VhCQ7tj+m6xXaF53FIfGi/IAZIskMGAi2MU7MDVJNCbMzERyHZi+osdPtnFVbvq653O8rwaCy4IAf9OOok65AqJUtUriUfYsGPPVbe6jm0s9lbKlPCUKjdkHsFsEhvX4kT39ZCtAAbwQdn/h4TpO5hTByWAmr5n+Wuwhdegv6bmvX4LyOes3z2+cuHv2JFYwVMNuq2gzn8YHTjlUQd39osyWei4NKl3LAdfxlO876hh5ENp/cOvpuI9bF55guEthLLPOXjD4dktTH04P5TvZrWTM0e4+BHJxj7MLApXIFOs0sWKhNkG8iwuM5wR83my6V3wW06abhDzTXYfOr/ZpFXgXzmv4d12FFyP00/dPGbIVGV5ao8UufGzUwp/IHx6v/wDWJr9iaoCulhWwlZ7A8q/NMoD12+mBdNRgJYnThRLtMx1Bgwttn8/4Qn2CDfOSup9GVXEvA21ILgp0owHYxNOkpwLWz0G7K+WREIDjIzUzSn8I99CuJSmSpPyH0Ke6/NERYiNx+3dncSebPnOUnnWD61AhJ1n/tSLZmU5wYO5GfgzyAYJm6VL91LxZ8hL1lfximQxIDMRhIecQZBmeE5R0XlrpvwplVrJwpa8BBCdp93GPP9lyBeZ2zkRr920CR3cYbKpKHfogvm0nV7XdDz6EbjzlxADCMjSLXuXpIpyuizy39yY+I+H9rmpoIF3YwEjlH9MgGgWcCNTjHEWMqAbprn2Ox7rOHupaVE3lNyg3nt5XaZID6Y+uml5Ja+aOPu+BI+DZbiJVfaspUadakWUX6TA4dETkIqdJJHYnU4Z4yKpt5y8rVIahoMUf8A8kWtAQNCTbjp71gx3/zVdqNz1Sutkw0gFIMVm2BF4Xdv/0olw+NaDIR9Bb3DPweZA2K/cw+/b+AwyWl9ZOP67A9nexmeTNjfdzPGf9J6E6BMPKa5lJh+qNsdUz3HBUevU71eQFCqOcxiIYhacAhh/8PX0J5DdSViZ6WazDDx7cukJNpMfEkYLJ5Ao4vLoVd3d25Pg4qaVa2p2D2L3WvYPJ5Yf/A/MSxptjlgXL/KJtP2U0cRv2I09ATAiWCJYuRwiapeKFsqmi18yMMulDp3HdcIldq+7jkwsJUOHLHCzzzBw5XFvL0CAmo1ub456z7zb7shk3KPGCLZzr47oT1k/j06XNnJvG3Udv6XrP+wsqTBlZ5MaNPt9FOs/4Bt/ja/vbVhTNpBFl9Gq7MqINvGlWKOAwQzwOZy+EzSdjAqKJVV2YcskTuM94aIK+kc/AZaXiZLPREUDpkXIV947IFfj+85TrqPqLfkGcxgboMQjosf+az+odLNXdyp1mDNGsqSdK/pJ2Ca04mt/4d6s1X+lncOEYaGBBeW4pApGcjf7/XJCFbj3N3mFb+BtlIcw8ZiDKoClFX9Rf0bxCqtLpicObKJzBVVHr/6u4siH2hK75RNv7w9GfTbhJOQBYiFUZAByY4rn37tZBHT//kqKsNi3ryL9AqXJRzqiMIJMhILjoi/i8LVEsbu+Ih9bsyW16sgQqjYLO0qda6KaCPKj3DQcu6CfV5lKtjS3ZCdqLAZkOey9MR+QutJBGiz/r15GVD6rCVwJR4UUKC4GNJkfDf00OMW8aQtLSAGLXV8MIi9mbbl/qQEpxCm2L5hutFX4ekeLH4QgBWUFKs/2VVMKy46WtFE6AbwgmYm/Z0yHk5veDIrcl2HpVqb/rSE0PC9EbDzJEWqeaPhh7vF369Umq2kSiB3s5rBI6c/7N9bkRu4h2n+/h5nSwy+7n+/I+6oXQVANo2Jb5zDwtiBPf1ySCzHdT6yJShMzqSRZfnykX49CaFaxhoVF4PBhEuECJ1PrFYSpmHuyYsl14DTAV9ZxRms1XiR/kBrjhZjidOt0UNe+GSml7XNgpVw8YsUTmZXLTK+6iYnyW/wYR1W4UXwOi14xpFROHb6HcZzksgF5DbL2AFXzKNwHU2adjdAY+KCyM/cwRTBkkq/a227NI0q6DR2MkMCRu620t79bGcYUmACtqN3mk/0uNwd3JSXHqE1kzf6Yyj0W2083JNDRnIXDlgBxJ6uf58NN1f6FQiRCWB4egF8QDx74AixV8oTyw7PluIjr3/rj/WzgwPSq4xPojaF7V0xqG2u5ti2L1h6yYHv73Isrukr0kURDIEjClBsBx7kdcXUxaYMS0syT3ymLzDzslNDWQOT1Tao1YNmJHARUenhCkmV9tqCPGI5GqZaRpkiPxyjoncWjyOHYGqvbvRX+Bn1pn7EhRNXa1lqJPmoeN5VqdqIDPhEVhFsyG0d4iQEIYX0wZUbY2XbZWYlpZ/l66IrDDY0q1C1YzBDpHC4h05YqHQLqS9anyl22JQ6lEvjvdBwMHfE7z0luCXD34/rFeDa2TmSeEAykSpYO5j1G/nsgpR3qn0qaQEmLjnnLfcz+veoYqPnRqmRGwCJ6FJ3Gm/Z1/aVX5PSb03MMnjAf41ww54sD5k8FrkfBP+K0b1MrYpapWjtpZfve2HVf4ickX3LKSOhu7qI1Vd4c1kNrn2ajy1t4y93JhV4fnWCKq7OmFpcr7FjdJCXPTql0Drr14Ho3Z87+GPQ4Z/DcTiGqtvZxlRYi8cNuhXABveZIwNl/BX1huhVLaFax5OqypUrQRyb9OE3SSkPlDdy5uo5XGg2EIGEjLY1MO5cr1ibfiFWV7zspcTgkBKkwo5jPyAin04LqizZXb2tDRgwKJjGx4cVk3ngAQixwcxjYAg2Q7vmUR/hpwInMdw7OhC2qyf41vTPkudQAORS0DdLtOGQxb4fH2VYGsvJCkeWPeUwtf1/tuIhzXEThoCZzzSJqqjUtbaPI3ntHm3T5uf849hGUA0zU8ni5W+EEn3/0Y6oUhQFw9z0aGjkljBbAlFXc0y82G2wkd7VdgWa5KTgJJNjNwZMfmdnUIUn1JU5LiWX5UZEZbVlKSN76mlmjUR2ku+fucTNlO4IAAahnLjBhlvQNR9pe9swGBgq0YR7P3VCyI/seYwQ4QBzy9X+HPePgoF8WfKaJ4MBOhLCGHae6Z8xkNXwni9QAKvTNtVA56x8YJflZ/VvONRSlsSLmiSyNMnTjTaE1ko81zkzGEnVwEhjCzlwIqpxmpDAqwsEmtpdr3xpc7i/ZX3f2TzT3M0FdxIEQvO1jgmmiN+D1YpMduAzEhBtj2OBkMN/rv6p7Th4pSH6f5aH3aTvwFTl7EOSgGASI7ttyMehzpm4AVyK+bFEaFg9gnZsSUPpsbAe/0RFhrH+EXZ12Z7thf4dzN1+Sn+G8QrDA1VKaN4IFxD1rQz9Xq9Coii9S9/hPbTGjyBwFH3H1UdQuz5KsgPDEHua4/kPg2Gp/IIItsaLWBqiT9XH45MiQxSosGJ56H/0F2cjcCFd72l1665RNHURdC3lspI77esfJsl+rXXabkAy7vxDXG/XGGcKpwiKDPFfvMEgjkAHil4Za1F36RnyxxvdIAzvgfH8knukYDck07tc++DP4TdWeI7HXuq5Yl6VVFrUQtf64/dkXewlKZSHQo6YvCSpREB0GDrz+Ys2GfO8nw2SwrYwaf88AifzlPvP17bf1mI3AuccJvAjZIpBmqvharKFAebEjVKfGAwpQjWoXlm9LROsq9bCk1UeQ3CJxJqprzssS/Q04JeS1ReCCubL3J7sx86spkP4eNpp95UF+8K748icIs8vdILFklk9skQqi1So6cx3X906pvy1vz+KipTJ8fiVJxsV5MmT0XwA";const ub=44032,EC=4352,AC=4449,CC=4519,jG=19,VG=21,Kg=28,IC=VG*Kg,DBe=jG*IC,MBe=ub+DBe,BBe=EC+jG,LBe=AC+VG,$Be=CC+Kg;function q0(t){return t>>24&255}function HG(t){return t&16777215}let wN,p4,vN,C1;function UBe(){let t=BG(kBe);wN=new Map(LG(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),p4=new Set(cb(t)),vN=new Map,C1=new Map;for(let[e,n]of $G(t)){if(!p4.has(e)&&n.length==2){let[r,s]=n,i=C1.get(r);i||(i=new Map,C1.set(r,i)),i.set(s,e)}vN.set(e,n.reverse())}}function qG(t){return t>=ub&&t<MBe}function FBe(t,e){if(t>=EC&&t<BBe&&e>=AC&&e<LBe)return ub+(t-EC)*IC+(e-AC)*Kg;if(qG(t)&&e>CC&&e<$Be&&(t-ub)%Kg==0)return t+(e-CC);{let n=C1.get(t);return n&&(n=n.get(e),n)?n:-1}}function zG(t){wN||UBe();let e=[],n=[],r=!1;function s(i){let o=wN.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(qG(i)){let o=i-ub,a=o/IC|0,c=o%IC/Kg|0,l=o%Kg;s(EC+a),s(AC+c),l>0&&s(CC+l)}else{let o=vN.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=q0(e[0]);for(let o=1;o<e.length;o++){let a=q0(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=q0(e[--c]),i<=a))break}i=q0(e[o])}}return e}function jBe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=q0(i),a=HG(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=FBe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function WG(t){return zG(t).map(HG)}function VBe(t){return jBe(zG(t))}const m4=45,GG=".",KG=65039,QG=1,TC=t=>Array.from(t);function db(t,e){return t.P.has(e)||t.Q.has(e)}class HBe extends Array{get is_emoji(){return!0}}let bN,YG,bf,_N,ZG,sg,y2,Dm,nf,g4,EN;function LD(){if(bN)return;let t=BG(_Be);const e=()=>cb(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));bN=new Map($G(t)),YG=n(),bf=e(),_N=new Set(e().map(u=>bf[u])),bf=new Set(bf),ZG=n(),n();let s=LG(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};sg=lb(u=>{let d=lb(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=Gg(d),h&&(d=`Restricted[${d}]`);let f=o(),m=o(),g=!t();return{N:d,P:f,Q:m,M:g,R:h}}}),y2=n(),Dm=new Map;let a=e().concat(TC(y2)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),y2.has(u)||Dm.set(u,f)});for(let{V:u,M:d}of new Set(Dm.values())){let h=[];for(let m of u){let g=sg.filter(v=>db(v,m)),y=h.find(({G:v})=>g.some(_=>v.has(_)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(m),r(y.G,g)}let f=h.flatMap(m=>TC(m.G));for(let{G:m,V:g}of h){let y=new Set(f.filter(v=>!m.has(v)));for(let v of g)d.set(v,y)}}nf=new Set;let c=new Set;const l=u=>nf.has(u)?c.add(u):nf.add(u);for(let u of sg){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of nf)!Dm.has(u)&&!c.has(u)&&Dm.set(u,QG);r(nf,WG(nf)),g4=PBe(t).map(u=>HBe.from(u)).sort(OBe),EN=new Map;for(let u of g4){let d=[EN];for(let h of u){let f=d.map(m=>{let g=m.get(h);return g||(g=new Map,m.set(h,g)),g});h===KG?d.push(...f):d=f}for(let h of d)h.V=u}}function $D(t){return(JG(t)?"":`${UD(CT([t]))} `)+FG(t)}function UD(t){return`"${t}"‎`}function qBe(t){if(t.length>=4&&t[2]==m4&&t[3]==m4)throw new Error(`invalid label extension: "${Gg(t.slice(0,4))}"`)}function zBe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function WBe(t){let e=t[0],n=h4.get(e);if(n)throw Aw(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=h4.get(e);if(o){if(s==i)throw Aw(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw Aw(`trailing ${n}`)}function CT(t,e=1/0,n=FG){let r=[];GBe(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];JG(a)&&(r.push(Gg(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(Gg(t.slice(s,i))),r.join("")}function GBe(t,e){return LD(),bf.has(t)}function JG(t){return LD(),ZG.has(t)}function KBe(t){return JBe(QBe(t,VBe,tLe))}function QBe(t,e,n){if(!t)return[];LD();let r=0;return t.split(GG).map(s=>{let i=NBe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=eLe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(zBe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))qBe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(bf.has(u[0]))throw Aw("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&bf.has(y[0]))throw Aw(`emoji + combining mark: "${Gg(a[g-1])} + ${CT([y[0]])}"`)}WBe(u);let f=TC(new Set(h)),[m]=ZBe(f);XBe(m,h),YBe(m,f),l=m.N}}o.type=l}catch(a){o.error=a}return o})}function YBe(t,e){let n,r=[];for(let s of e){let i=Dm.get(s);if(i===QG)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):TC(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>db(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function ZBe(t){let e=sg;for(let n of t){let r=e.filter(s=>db(s,n));if(!r.length)throw sg.some(s=>db(s,n))?eK(e[0],n):XG(n);if(e=r,r.length==1)break}return e}function JBe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${UD(CT(e,63))}: ${s}`)}return Gg(r)}).join(GG)}function XG(t){return new Error(`disallowed character: ${$D(t)}`)}function eK(t,e){let n=$D(e),r=sg.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Aw(t){return new Error(`illegal placement: ${t}`)}function XBe(t,e){for(let n of e)if(!db(t,n))throw eK(t,n);if(t.M){let n=WG(e);for(let r=1,s=n.length;r<s;r++)if(_N.has(n[r])){let i=r+1;for(let o;i<s&&_N.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${$D(o)}`);if(i-r>f4)throw new Error(`excessive non-spacing marks: ${UD(CT(n.slice(r-1,i)))} (${i-r}/${f4})`);r=i}}}function eLe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=nLe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(nf.has(o))s.push(o);else{let a=bN.get(o);if(a)s.push(...a);else if(!YG.has(o))throw XG(o)}}}return s.length&&r.push(e(s)),r}function tLe(t){return t.filter(e=>e!=KG)}function nLe(t,e){let n=EN,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const rLe=t=>KBe(t),xc=t=>{let e="";for(let n=0;n<32;n+=1)e+="00";if(t){const r=rLe(t).split(".");for(let s=r.length-1;s>=0;s-=1){const i=Po(r[s]).slice(2);e=Po(`0x${e}${i}`).slice(2)}}return`0x${e}`};var $E=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class sLe{constructor(e,n){this.contract=new Bf(vBe,n??_C.main,e),this.context=e}getOwner(e){return $E(this,void 0,void 0,function*(){try{return this.contract.methods.owner(xc(e)).call()}catch{throw new Error}})}getTTL(e){return $E(this,void 0,void 0,function*(){try{return this.contract.methods.ttl(xc(e)).call()}catch{throw new Error}})}recordExists(e){return $E(this,void 0,void 0,function*(){try{return this.contract.methods.recordExists(xc(e)).call()}catch{throw new Error}})}getResolver(e){return $E(this,void 0,void 0,function*(){try{return this.contract.methods.resolver(xc(e)).call().then(n=>{if(typeof n=="string")return new Bf(bBe,n,this.context);throw new Error})}catch{throw new Error}})}get events(){return this.contract.events}}var Bl=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class iLe{constructor(e){this.registry=e}getResolverContractAdapter(e){return Bl(this,void 0,void 0,function*(){return this.registry.getResolver(e)})}checkInterfaceSupport(e,n){var r,s;return Bl(this,void 0,void 0,function*(){if(It(d4[n]))throw new u8((r=e.options.address)!==null&&r!==void 0?r:"",n);if(!(yield e.methods.supportsInterface(d4[n]).call()))throw new u8((s=e.options.address)!==null&&s!==void 0?s:"",n)})}supportsInterface(e,n){var r;return Bl(this,void 0,void 0,function*(){const s=yield this.getResolverContractAdapter(e);let i=n;if(!$n(i)){if(i=(r=t_(n))!==null&&r!==void 0?r:"",n==="")throw new Error("Invalid interface Id");i=i.slice(0,10)}return s.methods.supportsInterface(i).call()})}getAddress(e,n=60){return Bl(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,Cm.addr),r.methods.addr(xc(e),n).call()})}getPubkey(e){return Bl(this,void 0,void 0,function*(){const n=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(n,Cm.pubkey),n.methods.pubkey(xc(e)).call()})}getContenthash(e){return Bl(this,void 0,void 0,function*(){const n=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(n,Cm.contenthash),n.methods.contenthash(xc(e)).call()})}setAddress(e,n,r){return Bl(this,void 0,void 0,function*(){const s=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(s,Cm.setAddr),s.methods.setAddr(xc(e),n).send(r)})}getText(e,n){return Bl(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,Cm.text),r.methods.text(xc(e),n).call()})}getName(e,n=!0){return Bl(this,void 0,void 0,function*(){const r=`${e.toLowerCase().substring(2)}.addr.reverse`,s=yield this.getResolverContractAdapter(r);return n&&(yield this.checkInterfaceSupport(s,Cm.name)),s.methods.name(xc(r)).call()})}}var Go=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,[])).next())})};class tK extends Yi{constructor(e,n){super(n??""),this.registryAddress=e??_C.main,this._registry=new sLe(this.getContextObject(),e),this._resolver=new iLe(this._registry)}getResolver(e){return Go(this,void 0,void 0,function*(){return this._registry.getResolver(e)})}recordExists(e){return Go(this,void 0,void 0,function*(){return this._registry.recordExists(e)})}getTTL(e){return Go(this,void 0,void 0,function*(){return this._registry.getTTL(e)})}getOwner(e){return Go(this,void 0,void 0,function*(){return this._registry.getOwner(e)})}getAddress(e,n=60){return Go(this,void 0,void 0,function*(){return this._resolver.getAddress(e,n)})}getText(e,n){return Go(this,void 0,void 0,function*(){return xo(e)?this._resolver.getText(yield this._resolver.getName(e,!1),n):this._resolver.getText(e,n)})}getName(e,n=!0){return Go(this,void 0,void 0,function*(){return this._resolver.getName(e,n)})}getPubkey(e){return Go(this,void 0,void 0,function*(){return this._resolver.getPubkey(e)})}getContenthash(e){return Go(this,void 0,void 0,function*(){return this._resolver.getContenthash(e)})}checkNetwork(){return Go(this,void 0,void 0,function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const s=yield RMe(this);if(!(typeof s=="boolean"&&!s))throw new VRe;this._lastSyncCheck=e}if(this._detectedAddress)return this._detectedAddress;const n=yield CD(this,Object.assign(Object.assign({},this.defaultReturnFormat),{number:aa.HEX})),r=_C[wBe[n]];if(typeof r>"u")throw new jRe(n);return this._detectedAddress=r,this._detectedAddress})}supportsInterface(e,n){return Go(this,void 0,void 0,function*(){return this._resolver.supportsInterface(e,n)})}get events(){return this._registry.events}setAddress(e,n,r){return Go(this,void 0,void 0,function*(){return this._resolver.setAddress(e,n,r)})}}var Du=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const oLe=t=>Du(void 0,void 0,void 0,function*(){return(yield u5e(t)).map(ll)}),aLe=(t,e)=>Du(void 0,void 0,void 0,function*(){Et.validate(["string"],[e]);const n=yield d5e(t,e);return ll(n)}),cLe=(t,e,n,r)=>Du(void 0,void 0,void 0,function*(){return Et.validate(["address","string","uint"],[e,n,r]),h5e(t,e,n,r)}),lLe=(t,e)=>Du(void 0,void 0,void 0,function*(){return Et.validate(["address"],[e]),f5e(t,e)}),uLe=(t,e,n)=>Du(void 0,void 0,void 0,function*(){return Et.validate(["string","string"],[e,n]),p5e(t,e,n)}),dLe=(t,e,n,r)=>Du(void 0,void 0,void 0,function*(){const s=no(e,Ut,{transactionSchema:r?.customTransactionSchema});return m5e(t,s,n)}),hLe=(t,e,n,r)=>Du(void 0,void 0,void 0,function*(){const s=no(e,Ut,{transactionSchema:r?.customTransactionSchema});return g5e(t,s,n)}),fLe=(t,e,n,r)=>Du(void 0,void 0,void 0,function*(){Et.validate(["string","address","string"],[e,n,r]);const s=$n(e)?e:Ya(e);return y5e(t,s,n,r)}),pLe=(t,e,n)=>Du(void 0,void 0,void 0,function*(){Et.validate(["string","string"],[e,n]);const r=$n(e)?e:Ya(e);return w5e(t,r,n)});var Ll=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class nK extends Yi{getAccounts(){return Ll(this,void 0,void 0,function*(){return oLe(this.requestManager)})}newAccount(e){return Ll(this,void 0,void 0,function*(){return aLe(this.requestManager,e)})}unlockAccount(e,n,r){return Ll(this,void 0,void 0,function*(){return cLe(this.requestManager,e,n,r)})}lockAccount(e){return Ll(this,void 0,void 0,function*(){return lLe(this.requestManager,e)})}importRawKey(e,n){return Ll(this,void 0,void 0,function*(){return uLe(this.requestManager,e,n)})}sendTransaction(e,n){return Ll(this,void 0,void 0,function*(){return dLe(this.requestManager,e,n,this.config)})}signTransaction(e,n){return Ll(this,void 0,void 0,function*(){return hLe(this.requestManager,e,n,this.config)})}sign(e,n,r){return Ll(this,void 0,void 0,function*(){return fLe(this.requestManager,e,n,r)})}ecRecover(e,n){return Ll(this,void 0,void 0,function*(){return pLe(this.requestManager,e,n)})}}var Oc;(function(t){t.HTTPS="https",t.WebSocket="wss"})(Oc||(Oc={}));var Ze;(function(t){t.ETH_MAINNET="eth_mainnet",t.ETH_SEPOLIA="eth_sepolia",t.ETH_HOLESKY="eth_holesky",t.POLYGON_MAINNET="polygon_mainnet",t.POLYGON_AMOY="polygon_amoy",t.AVALANCHE_C_MAINNET="avalanche_c_mainnet",t.AVALANCHE_P_MAINNET="avalanche_p_mainnet",t.AVALANCHE_X_MAINNET="avalanche_x_mainnet",t.ARBITRUM_MAINNET="arbitrum_mainnet",t.ARBITRUM_SEPOLIA="arbitrum_sepolia",t.BASE_MAINNET="base_mainnet",t.BASE_SEPOLIA="base_sepolia",t.OPTIMISM_MAINNET="optimism_mainnet",t.OPTIMISM_SEPOLIA="optimism_sepolia",t.FANTOM_MAINNET="fantom_mainnet",t.FANTOM_TESTNET="fantom_testnet",t.DYMENSION_MAINNET="dymension_mainnet",t.DYMENSION_TESTNET="dymension_testnet",t.BNB_MAINNET="bnb_mainnet",t.BNB_TESTNET="bnb_testnet",t.BSC_MAINNET="bsc_mainnet",t.BSC_TESTNET="bsc_testnet",t.ARBITRUM_ONE="arbitrum_one",t.ARBITRUM_NOVA="arbitrum_nova",t.AVALANCHE_FUJI_C="avalanche_fuji_c",t.AVALANCHE_FUJI_P="avalanche_fuji_p",t.AVALANCHE_FUJI_X="avalanche_fuji_x",t.BLAST_MAINNET="blast_mainnet",t.OPBNB_MAINNET="opbnb_mainnet",t.OPBNB_TESTNET="opbnb_testnet",t.GNOSIS_MAINNET="gnosis_mainnet",t.GNOSIS_CHIADO="gnosis_chiado",t.PULSECHAIN_MAINNET="pulsechain_mainnet",t.PULSECHAIN_TESTNET="pulsechain_testnet",t.KAVA_MAINNET="kava_mainnet",t.CRONOS_MAINNET="cronos_mainnet",t.MANTLE_MAINNET="mantle_mainnet",t.CHILIZ_MAINNET="chiliz_mainnet",t.CHILIZ_SPICY="chiliz_spicy",t.MOONBEAM_MAINNET="moonbeam_mainnet",t.TAIKO_MAINNET="taiko_mainnet",t.TAIKO_HEKLA="taiko_hekla",t.LINEA_MAINNET="linea_mainnet",t.LINEA_SEPOLIA="linea_sepolia",t.BAHAMUT_MAINNET="bahamut_mainnet",t.SCROLL_MAINNET="scroll_mainnet",t.SCROLL_SEPOLIA="scroll_sepolia",t.TRON_MAINNET="tron_mainnet",t.SYSCOIN_MAINNET="syscoin_mainnet",t.SYSCOIN_TANENBAUM="syscoin_tanenbaum",t.MOONRIVER_MAINNET="moonriver_mainnet",t.HAQQ_MAINNET="haqq_mainnet",t.EVMOS_MAINNET="evmos_mainnet",t.EVMOS_TESTNET="evmos_testnet",t.BERACHAIN_TESTNET="berachain_testnet"})(Ze||(Ze={}));const mLe=1300;class gLe extends Dt{constructor(e){super("You've reach the rate limit of free RPC calls from our Partner Quick Nodes. There are two options you can either create a paid Quick Nodes account and get 20% off for 2 months using WEB3JS referral code, or use Free public RPC endpoint.",e),this.code=mLe}}const yLe=1301;class y4 extends Dt{constructor(e){super(`Invalid provider config options given for ${e}`),this.code=yLe}}var wLe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class rK extends cD{constructor(e,n,r,s,i){if(super(),i!==void 0&&n===Oc.HTTPS&&!("providerOptions"in i))throw new y4("HTTP Provider");if(i!==void 0&&n===Oc.WebSocket&&!("socketOptions"in i||"reconnectOptions"in i))throw new y4("Websocket Provider");this.transport=n,n===Oc.HTTPS?this.provider=new fT(this.getRPCURL(e,n,r,s),i):n===Oc.WebSocket&&(this.provider=new mW(this.getRPCURL(e,n,r,s),i?.socketOptions,i?.reconnectOptions))}request(e,n){return wLe(this,void 0,void 0,function*(){return this.transport===Oc.HTTPS?yield this.provider.request(e,n):this.provider.request(e)})}getStatus(){return this.provider.getStatus()}supportsSubscriptions(){return this.provider.supportsSubscriptions()}once(e,n){var r;!((r=this.provider)===null||r===void 0)&&r.once&&this.provider.once(e,n)}removeAllListeners(e){var n;!((n=this.provider)===null||n===void 0)&&n.removeAllListeners&&this.provider.removeAllListeners(e)}connect(){var e;!((e=this.provider)===null||e===void 0)&&e.connect&&this.provider.connect()}disconnect(e,n){var r;!((r=this.provider)===null||r===void 0)&&r.disconnect&&this.provider.disconnect(e,n)}reset(){var e;!((e=this.provider)===null||e===void 0)&&e.reset&&this.provider.reset()}on(e,n){this.provider&&this.provider.on(e,n)}removeListener(e,n){this.provider&&this.provider.removeListener(e,n)}}var vLe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const gs=t=>t!==void 0&&t.trim().length>0;class bLe extends rK{constructor(e=Ze.ETH_MAINNET,n=Oc.HTTPS,r="",s="",i){super(e,n,r,s,i)}request(e,n){const r=Object.create(null,{request:{get:()=>super.request}});return vLe(this,void 0,void 0,function*(){try{return yield r.request.call(this,e,n)}catch(s){throw s instanceof Rc&&s.statusCode===429?new gLe(s):s}})}getRPCURL(e,n,r,s){let i="",o="";switch(e){case Ze.ETH_MAINNET:i=gs(s)?s:"powerful-holy-bush.quiknode.pro",o=gs(r)?r:"3240624a343867035925ff7561eb60dfdba2a668";break;case Ze.ETH_SEPOLIA:i=gs(s)?s:"dimensional-fabled-glitter.ethereum-sepolia.quiknode.pro",o=gs(r)?r:"382a3b5a4b938f2d6e8686c19af4b22921fde2cd";break;case Ze.ETH_HOLESKY:i=gs(s)?s:"yolo-morning-card.ethereum-holesky.quiknode.pro",o=gs(r)?r:"481ebe70638c4dcf176af617a16d02ab866b9af9";break;case Ze.ARBITRUM_MAINNET:i=gs(s)?s:"autumn-divine-dinghy.arbitrum-mainnet.quiknode.pro",o=gs(r)?r:"a5d7bfbf60b5ae9ce3628e53d69ef50d529e9a8c";break;case Ze.ARBITRUM_SEPOLIA:i=gs(s)?s:"few-patient-pond.arbitrum-sepolia.quiknode.pro",o=gs(r)?r:"3be985450970628c860b959c65cd2642dcafe53c";break;case Ze.BNB_MAINNET:i=gs(s)?s:"purple-empty-reel.bsc.quiknode.pro",o=gs(r)?r:"ebf6c532961e21f092ff2facce1ec4c89c540158";break;case Ze.BNB_TESTNET:i=gs(s)?s:"floral-rough-scion.bsc-testnet.quiknode.pro",o=gs(r)?r:"5b297e5acff5f81f4c37ebf6f235f7299b6f9d28";break;case Ze.POLYGON_MAINNET:i=gs(s)?s:"small-chaotic-moon.matic.quiknode.pro",o=gs(r)?r:"847569f8a017e84d985e10d0f44365d965a951f1";break;case Ze.POLYGON_AMOY:i=gs(s)?s:"prettiest-side-shape.matic-amoy.quiknode.pro",o=gs(r)?r:"79a9476eea661d4f82de614db1d8a895b14b881c";break;default:throw new Error("Network info not avalible.")}return`${n}://${i}/${o}`}}const _Le=t=>t!==void 0&&t.trim().length>0,ELe=[Ze.DYMENSION_MAINNET,Ze.DYMENSION_TESTNET,Ze.KAVA_MAINNET,Ze.CRONOS_MAINNET,Ze.POLYGON_MAINNET];class SC extends rK{constructor(e=Ze.ETH_MAINNET,n=Oc.HTTPS,r="",s){super(e,n,"",r,s)}getRPCURL(e,n,r,s){if(!SC.networkHostMap[e])throw new Error("Network info not avalible.");const i=`${SC.networkHostMap[e]}.publicnode.com`,o=_Le(s)?s:i;return ELe.includes(e)&&n===Oc.WebSocket?`${n}://${o}/websocket`:`${n}://${o}`}}SC.networkHostMap={[Ze.POLYGON_AMOY]:"polygon-amoy-bor-rpc",[Ze.DYMENSION_MAINNET]:"dymension-evm-rpc",[Ze.DYMENSION_TESTNET]:"dymension-testnet-evm-rpc",[Ze.BLAST_MAINNET]:"blast-rpc",[Ze.GNOSIS_MAINNET]:"gnosis-rpc",[Ze.PULSECHAIN_MAINNET]:"pulsechain-rpc",[Ze.PULSECHAIN_TESTNET]:"pulsechain-testnet-rpc",[Ze.KAVA_MAINNET]:"kava-evm-rpc",[Ze.CRONOS_MAINNET]:"cronos-evm-rpc",[Ze.MANTLE_MAINNET]:"mantle-rpc",[Ze.TAIKO_MAINNET]:"taiko-rpc",[Ze.TAIKO_HEKLA]:"taiko-hekla-rpc",[Ze.LINEA_MAINNET]:"linea-rpc",[Ze.LINEA_SEPOLIA]:"linea-sepolia-rpc",[Ze.SCROLL_MAINNET]:"scroll-rpc",[Ze.SCROLL_SEPOLIA]:"scroll-sepolia-rpc",[Ze.SYSCOIN_MAINNET]:"syscoin-evm-rpc",[Ze.SYSCOIN_TANENBAUM]:"syscoin-tanenbaum-evm-rpc",[Ze.HAQQ_MAINNET]:"haqq-evm-rpc",[Ze.EVMOS_MAINNET]:"evmos-evm-rpc",[Ze.EVMOS_TESTNET]:"evmos-testnet-evm-rpc",[Ze.BERACHAIN_TESTNET]:"berachain-testnet-evm-rpc",[Ze.ETH_MAINNET]:"ethereum-rpc",[Ze.ETH_SEPOLIA]:"ethereum-sepolia-rpc",[Ze.ETH_HOLESKY]:"ethereum-holesky-rpc",[Ze.BSC_MAINNET]:"bsc-rpc",[Ze.BSC_TESTNET]:"bsc-testnet-rpc",[Ze.POLYGON_MAINNET]:"polygon-bor-rpc",[Ze.BASE_MAINNET]:"base-rpc",[Ze.BASE_SEPOLIA]:"base-sepolia-rpc",[Ze.ARBITRUM_ONE]:"arbitrum-one-rpc",[Ze.ARBITRUM_NOVA]:"arbitrum-nova-rpc",[Ze.ARBITRUM_SEPOLIA]:"arbitrum-sepolia-rpc",[Ze.AVALANCHE_C_MAINNET]:"avalanche-c-chain-rpc",[Ze.AVALANCHE_P_MAINNET]:"avalanche-p-chain-rpc",[Ze.AVALANCHE_X_MAINNET]:"avalanche-x-chain-rpc",[Ze.AVALANCHE_FUJI_C]:"avalanche-fuji-c-chain-rpc",[Ze.AVALANCHE_FUJI_P]:"avalanche-fuji-p-chain-rpc",[Ze.AVALANCHE_FUJI_X]:"avalanche-fuji-x-chain-rpc",[Ze.OPTIMISM_MAINNET]:"optimism-rpc",[Ze.OPTIMISM_SEPOLIA]:"optimism-sepolia-rpc",[Ze.FANTOM_MAINNET]:"fantom-rpc",[Ze.FANTOM_TESTNET]:"fantom-testnet-rpc",[Ze.OPBNB_MAINNET]:"opbnb-rpc",[Ze.OPBNB_TESTNET]:"opbnb-testnet-rpc",[Ze.GNOSIS_CHIADO]:"gnosis-chiado-rpc",[Ze.CHILIZ_MAINNET]:"chiliz-rpc",[Ze.CHILIZ_SPICY]:"chiliz-spicy-rpc",[Ze.MOONBEAM_MAINNET]:"moonbeam-rpc",[Ze.BAHAMUT_MAINNET]:"bahamut-rpc",[Ze.TRON_MAINNET]:"tron-evm-rpc",[Ze.MOONRIVER_MAINNET]:"moonriver-rpc"};const ALe=new bLe,CLe={encodeEventSignature:xD,encodeFunctionCall:EMe,encodeFunctionSignature:ob,encodeParameter:pN,encodeParameters:_T,decodeParameter:AG,decodeParameters:Mf,decodeLog:CG};var D0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const ILe=t=>{const e=(o,a)=>D0(void 0,void 0,void 0,function*(){const c=yield lBe(o,t),l=Pe({format:"bytes"},a,Ut);return c3e(c,l)}),n=o=>{const a=bD(o);return Object.assign(Object.assign({},a),{signTransaction:c=>D0(void 0,void 0,void 0,function*(){return e(c,a.privateKey)})})},r=(o,a,c)=>D0(void 0,void 0,void 0,function*(){var l;const u=yield h3e(o,a,(l=c?.nonStrict)!==null&&l!==void 0?l:!0);return Object.assign(Object.assign({},u),{signTransaction:d=>D0(void 0,void 0,void 0,function*(){return e(d,u.privateKey)})})}),s=()=>{const o=d3e();return Object.assign(Object.assign({},o),{signTransaction:a=>D0(void 0,void 0,void 0,function*(){return e(a,o.privateKey)})})},i=new fC({create:s,privateKeyToAccount:n,decrypt:r});return{signTransaction:e,create:s,privateKeyToAccount:n,decrypt:r,recoverTransaction:l3e,hashMessage:vD,sign:VW,recover:iN,encrypt:HW,wallet:i,privateKeyToAddress:yT,parseAndValidatePrivateKey:vy,privateKeyToPublicKey:u3e}},TLe={version:"4.16.0"};var SLe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},xC;(function(t){t.eip6963announceProvider="eip6963:announceProvider",t.eip6963requestProvider="eip6963:requestProvider"})(xC||(xC={}));const w2=new Map,sK="web3:providersMapUpdated",xLe=()=>SLe(void 0,void 0,void 0,function*(){return new Promise((t,e)=>{typeof window>"u"&&e(new Error("window object not available, EIP-6963 is intended to be used within a browser")),window.addEventListener(xC.eip6963announceProvider,(n=>{w2.set(n.detail.info.uuid,n.detail);const r=new CustomEvent(sK,{detail:w2});window.dispatchEvent(r),t(w2)})),window.dispatchEvent(new Event(xC.eip6963requestProvider))})}),PLe=t=>{if(typeof window>"u")throw new Error("window object not available, EIP-6963 is intended to be used within a browser");window.addEventListener(sK,t)};class Ay extends Yi{constructor(e=ALe){var n;(It(e)||typeof e=="string"&&e.trim()===""||typeof e!="string"&&!dC(e)&&!e.provider)&&console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let r={};typeof e=="string"||dC(e)?r.provider=e:e?r=e:r={},r.registeredSubscriptions=Object.assign(Object.assign({},gN),(n=r.registeredSubscriptions)!==null&&n!==void 0?n:{}),super(r);const s=ILe(this);this._wallet=s.wallet,this._accountProvider=s,this.utils=pW;const i=this;class o extends Bf{constructor(l,u,d,h,f){if(Dd(u)&&Dd(d))throw new d8("Should not provide options at both 2nd and 3rd parameters");let m,g={},y,v;if(!It(u)&&typeof u!="object"&&typeof u!="string")throw new d8;if(typeof u=="string"&&(m=u),Dd(u)?g=u:Dd(d)?g=d:g={},u instanceof Yi?y=u:d instanceof Yi?y=d:h instanceof Yi?y=h:y=i.getContextObject(),f?v=f:Wl(d)?v=d:Wl(h)&&(v=h),super(l,m,g,y,v),super.subscribeToContextEvents(i),!It(a)){const _=a.getTransactionMiddleware();It(_)||super.setTransactionMiddleware(_)}}}const a=i.use(ET);this.eth=Object.assign(a,{ens:i.use(tK,_C.main),Iban:Wr,net:i.use(ZW),personal:i.use(nK),Contract:o,abi:CLe,accounts:s})}}Ay.version=TLe.version;Ay.utils=pW;Ay.requestEIP6963Providers=xLe;Ay.onNewProviderDiscovered=PLe;Ay.modules={Web3Eth:ET,Iban:Wr,Net:ZW,ENS:tK,Personal:nK};const FD=Lt(!1),Cw=Lt(null),Cy=Lt(!1),jc=Lt(""),PC=Lt("0"),Vc=Lt(null),iK=async()=>{try{typeof window.ethereum<"u"?(Vc.value=new Ay(window.ethereum),FD.value=!0,Cw.value=null,(await window.ethereum.request({method:"eth_accounts"})).length>0&&await oK(),window.ethereum.on("accountsChanged",RLe),window.ethereum.on("chainChanged",NLe)):(Cw.value="MetaMask is not installed. Please install MetaMask to use this feature.",console.warn("⚠️ MetaMask not found"))}catch(t){Cw.value=`Failed to initialize Web3: ${t.message}`,console.error("❌ Web3 initialization failed:",t)}},oK=async()=>{try{if(!FD.value)throw new Error("Web3 is not ready");const t=await window.ethereum.request({method:"eth_requestAccounts"});t.length>0&&(jc.value=t[0],Cy.value=!0,await jD())}catch(t){Cw.value=`Failed to connect wallet: ${t.message}`,console.error("❌ Wallet connection failed:",t)}},aK=()=>{jc.value="",PC.value="0",Cy.value=!1},jD=async()=>{try{if(!Cy.value||!Vc.value)return"0";const t=await Vc.value.eth.getBalance(jc.value),e=Vc.value.utils.fromWei(t,"ether");return PC.value=parseFloat(e).toFixed(4),PC.value}catch(t){return console.error("❌ Failed to get balance:",t),"0"}},RLe=async t=>{t.length===0?aK():(jc.value=t[0],await jD())},NLe=()=>{window.location.reload()},OLe=async(t,e,n="")=>{try{if(!Cy.value)throw new Error("Wallet not connected");const r={from:jc.value,to:t,value:Vc.value.utils.toWei(e.toString(),"ether"),data:n};return await window.ethereum.request({method:"eth_sendTransaction",params:[r]})}catch(r){throw console.error("❌ Transaction failed:",r),r}},kLe=async t=>{try{if(!Cy.value)throw new Error("Wallet not connected");return await window.ethereum.request({method:"personal_sign",params:[t,jc.value]})}catch(e){throw console.error("❌ Message signing failed:",e),e}},DLe=async()=>{try{if(!Vc.value)return null;const t=await Vc.value.eth.net.getId(),e=await Vc.value.eth.net.getNetworkType();return{id:t,type:e}}catch(t){return console.error("❌ Failed to get network info:",t),null}},MLe=_r(()=>jc.value?`${jc.value.slice(0,6)}...${jc.value.slice(-4)}`:""),BLe=_r(()=>Vc.value?.eth?.net?.getId()===1);iK();function cK(){return{isWeb3Ready:FD,web3Error:Cw,isWalletConnected:Cy,walletAddress:jc,walletBalance:PC,web3Instance:Vc,shortAddress:MLe,isMainnet:BLe,initializeWeb3:iK,connectWallet:oK,disconnectWallet:aK,getBalance:jD,sendTransaction:OLe,signMessage:kLe,getNetworkInfo:DLe}}const lK="/assets/header-icon-DThv0V1b.png",LLe=()=>{};var w4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},$Le=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},dK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uK(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$Le(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new ULe;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ULe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FLe=function(t){const e=uK(t);return dK.encodeByteArray(e,!0)},RC=function(t){return FLe(t).replace(/\./g,"")},hK=function(t){try{return dK.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jLe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VLe=()=>jLe().__FIREBASE_DEFAULTS__,HLe=()=>{if(typeof process>"u"||typeof w4>"u")return;const t=w4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qLe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hK(t[1]);return e&&JSON.parse(e)},IT=()=>{try{return LLe()||VLe()||HLe()||qLe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fK=t=>IT()?.emulatorHosts?.[t],zLe=t=>{const e=fK(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pK=()=>IT()?.config,mK=t=>IT()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WLe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gK(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GLe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[RC(JSON.stringify(n)),RC(JSON.stringify(o)),""].join(".")}const Iw={};function KLe(){const t={prod:[],emulator:[]};for(const e of Object.keys(Iw))Iw[e]?t.emulator.push(e):t.prod.push(e);return t}function QLe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let v4=!1;function yK(t,e){if(typeof window>"u"||typeof document>"u"||!Iy(window.location.host)||Iw[t]===e||Iw[t]||v4)return;Iw[t]=e;function n(h){return`__firebase__banner__${h}`}const r="__firebase__banner",i=KLe().prod.length>0;function o(){const h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,f){h.setAttribute("width","24"),h.setAttribute("id",f),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{v4=!0,o()},h}function u(h,f){h.setAttribute("id",f),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=QLe(r),f=n("text"),m=document.getElementById(f)||document.createElement("span"),g=n("learnmore"),y=document.getElementById(g)||document.createElement("a"),v=n("preprendIcon"),_=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const A=h.element;a(A),u(y,g);const k=l();c(_,v),A.append(_,m,y,k),document.body.appendChild(A)}i?(m.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YLe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ri())}function ZLe(){const t=IT()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function JLe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XLe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e$e(){const t=ri();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function t$e(){return!ZLe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vK(){try{return typeof indexedDB=="object"}catch{return!1}}function bK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}function n$e(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$e="FirebaseError";class nc extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=r$e,Object.setPrototypeOf(this,nc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pp.prototype.create)}}class Pp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?s$e(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new nc(s,a,r)}}function s$e(t,e){return t.replace(i$e,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const i$e=/\{\$([^}]+)}/g;function o$e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ch(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(b4(i)&&b4(o)){if(!ch(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function b4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function z0(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function W0(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function a$e(t,e){const n=new c$e(t,e);return n.subscribe.bind(n)}class c$e{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l$e(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=v2),s.error===void 0&&(s.error=v2),s.complete===void 0&&(s.complete=v2);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l$e(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function v2(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$e=1e3,d$e=2,h$e=14400*1e3,f$e=.5;function _4(t,e=u$e,n=d$e){const r=e*Math.pow(n,t),s=Math.round(f$e*r*(Math.random()-.5)*2);return Math.min(h$e,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){return t&&t._delegate?t._delegate:t}class Za{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p$e{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WLe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g$e(e))try{this.getOrInitializeService({instanceIdentifier:rf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=rf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rf){return this.instances.has(e)}getOptions(e=rf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m$e(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rf){return this.component?this.component.multipleInstances?e:rf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m$e(t){return t===rf?void 0:t}function g$e(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y$e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new p$e(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(dn||(dn={}));const w$e={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},v$e=dn.INFO,b$e={[dn.DEBUG]:"log",[dn.VERBOSE]:"log",[dn.INFO]:"info",[dn.WARN]:"warn",[dn.ERROR]:"error"},_$e=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=b$e[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class TT{constructor(e){this.name=e,this._logLevel=v$e,this._logHandler=_$e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w$e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dn.DEBUG,...e),this._logHandler(this,dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dn.VERBOSE,...e),this._logHandler(this,dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dn.INFO,...e),this._logHandler(this,dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dn.WARN,...e),this._logHandler(this,dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dn.ERROR,...e),this._logHandler(this,dn.ERROR,...e)}}const E$e=(t,e)=>e.some(n=>t instanceof n);let E4,A4;function A$e(){return E4||(E4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C$e(){return A4||(A4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _K=new WeakMap,AN=new WeakMap,EK=new WeakMap,b2=new WeakMap,VD=new WeakMap;function I$e(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Wd(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_K.set(n,t)}).catch(()=>{}),VD.set(e,t),e}function T$e(t){if(AN.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});AN.set(t,e)}let CN={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return AN.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EK.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S$e(t){CN=t(CN)}function x$e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_2(this),e,...n);return EK.set(r,e.sort?e.sort():[e]),Wd(r)}:C$e().includes(t)?function(...e){return t.apply(_2(this),e),Wd(_K.get(this))}:function(...e){return Wd(t.apply(_2(this),e))}}function P$e(t){return typeof t=="function"?x$e(t):(t instanceof IDBTransaction&&T$e(t),E$e(t,A$e())?new Proxy(t,CN):t)}function Wd(t){if(t instanceof IDBRequest)return I$e(t);if(b2.has(t))return b2.get(t);const e=P$e(t);return e!==t&&(b2.set(t,e),VD.set(e,t)),e}const _2=t=>VD.get(t);function AK(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Wd(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Wd(o.result),c.oldVersion,c.newVersion,Wd(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const R$e=["get","getKey","getAll","getAllKeys","count"],N$e=["put","add","delete","clear"],E2=new Map;function C4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(E2.get(e))return E2.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=N$e.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||R$e.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return E2.set(e,i),i}S$e(t=>({...t,get:(e,n,r)=>C4(e,n)||t.get(e,n,r),has:(e,n)=>!!C4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O$e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k$e(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function k$e(t){return t.getComponent()?.type==="VERSION"}const IN="@firebase/app",I4="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new TT("@firebase/app"),D$e="@firebase/app-compat",M$e="@firebase/analytics-compat",B$e="@firebase/analytics",L$e="@firebase/app-check-compat",$$e="@firebase/app-check",U$e="@firebase/auth",F$e="@firebase/auth-compat",j$e="@firebase/database",V$e="@firebase/data-connect",H$e="@firebase/database-compat",q$e="@firebase/functions",z$e="@firebase/functions-compat",W$e="@firebase/installations",G$e="@firebase/installations-compat",K$e="@firebase/messaging",Q$e="@firebase/messaging-compat",Y$e="@firebase/performance",Z$e="@firebase/performance-compat",J$e="@firebase/remote-config",X$e="@firebase/remote-config-compat",e8e="@firebase/storage",t8e="@firebase/storage-compat",n8e="@firebase/firestore",r8e="@firebase/ai",s8e="@firebase/firestore-compat",i8e="firebase",o8e="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="[DEFAULT]",a8e={[IN]:"fire-core",[D$e]:"fire-core-compat",[B$e]:"fire-analytics",[M$e]:"fire-analytics-compat",[$$e]:"fire-app-check",[L$e]:"fire-app-check-compat",[U$e]:"fire-auth",[F$e]:"fire-auth-compat",[j$e]:"fire-rtdb",[V$e]:"fire-data-connect",[H$e]:"fire-rtdb-compat",[q$e]:"fire-fn",[z$e]:"fire-fn-compat",[W$e]:"fire-iid",[G$e]:"fire-iid-compat",[K$e]:"fire-fcm",[Q$e]:"fire-fcm-compat",[Y$e]:"fire-perf",[Z$e]:"fire-perf-compat",[J$e]:"fire-rc",[X$e]:"fire-rc-compat",[e8e]:"fire-gcs",[t8e]:"fire-gcs-compat",[n8e]:"fire-fst",[s8e]:"fire-fst-compat",[r8e]:"fire-vertex","fire-js":"fire-js",[i8e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Map,c8e=new Map,SN=new Map;function T4(t,e){try{t.container.addComponent(e)}catch(n){Eu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function il(t){const e=t.name;if(SN.has(e))return Eu.debug(`There were multiple attempts to register component ${e}.`),!1;SN.set(e,t);for(const n of NC.values())T4(n,t);for(const n of c8e.values())T4(n,t);return!0}function Rp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ra(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gd=new Pp("app","Firebase",l8e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8e{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Za("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=o8e;function CK(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:TN,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Gd.create("bad-app-name",{appName:String(s)});if(n||(n=pK()),!n)throw Gd.create("no-options");const i=NC.get(s);if(i){if(ch(n,i.options)&&ch(r,i.config))return i;throw Gd.create("duplicate-app",{appName:s})}const o=new y$e(s);for(const c of SN.values())o.addComponent(c);const a=new u8e(n,r,o);return NC.set(s,a),a}function HD(t=TN){const e=NC.get(t);if(!e&&t===TN&&pK())return CK();if(!e)throw Gd.create("no-app",{appName:t});return e}function da(t,e,n){let r=a8e[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Eu.warn(o.join(" "));return}il(new Za(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8e="firebase-heartbeat-database",h8e=1,hb="firebase-heartbeat-store";let A2=null;function IK(){return A2||(A2=AK(d8e,h8e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hb)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gd.create("idb-open",{originalErrorMessage:t.message})})),A2}async function f8e(t){try{const n=(await IK()).transaction(hb),r=await n.objectStore(hb).get(TK(t));return await n.done,r}catch(e){if(e instanceof nc)Eu.warn(e.message);else{const n=Gd.create("idb-get",{originalErrorMessage:e?.message});Eu.warn(n.message)}}}async function S4(t,e){try{const r=(await IK()).transaction(hb,"readwrite");await r.objectStore(hb).put(e,TK(t)),await r.done}catch(n){if(n instanceof nc)Eu.warn(n.message);else{const r=Gd.create("idb-set",{originalErrorMessage:n?.message});Eu.warn(r.message)}}}function TK(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8e=1024,m8e=30;class g8e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new w8e(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=x4();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>m8e){const s=v8e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Eu.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=x4(),{heartbeatsToSend:n,unsentEntries:r}=y8e(this._heartbeatsCache.heartbeats),s=RC(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Eu.warn(e),""}}}function x4(){return new Date().toISOString().substring(0,10)}function y8e(t,e=p8e){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),P4(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),P4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class w8e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vK()?bK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await f8e(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return S4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return S4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function P4(t){return RC(JSON.stringify({version:2,heartbeats:t})).length}function v8e(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8e(t){il(new Za("platform-logger",e=>new O$e(e),"PRIVATE")),il(new Za("heartbeat",e=>new g8e(e),"PRIVATE")),da(IN,I4,t),da(IN,I4,"esm2020"),da("fire-js","")}b8e("");function SK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _8e=SK,xK=new Pp("auth","Firebase",SK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new TT("@firebase/auth");function E8e(t,...e){OC.logLevel<=dn.WARN&&OC.warn(`Auth (${Ty}): ${t}`,...e)}function I1(t,...e){OC.logLevel<=dn.ERROR&&OC.error(`Auth (${Ty}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t,...e){throw qD(t,...e)}function Hc(t,...e){return qD(t,...e)}function PK(t,e,n){const r={..._8e(),[e]:n};return new Pp("auth","Firebase",r).create(e,{appName:t.name})}function lu(t){return PK(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qD(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xK.create(t,...e)}function Rt(t,e,...n){if(!t)throw qD(e,...n)}function Xl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw I1(e),new Error(e)}function Au(t,e){t||Xl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(){return typeof self<"u"&&self.location?.href||""}function A8e(){return R4()==="http:"||R4()==="https:"}function R4(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A8e()||wK()||"connection"in navigator)?navigator.onLine:!0}function I8e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n){this.shortDelay=e,this.longDelay=n,Au(n>e,"Short delay should be less than long delay!"),this.isMobile=YLe()||XLe()}get(){return C8e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t,e){Au(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x8e=new a_(3e4,6e4);function Mu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ul(t,e,n,r,s={}){return NK(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=o_({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const l={method:e,headers:c,...i};return JLe()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Iy(t.emulatorConfig.host)&&(l.credentials="include"),RK.fetch()(await OK(t,t.config.apiHost,n,a),l)})}async function NK(t,e,n){t._canInitEmulator=!1;const r={...T8e,...e};try{const s=new R8e(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw UE(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw UE(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw UE(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw UE(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw PK(t,u,l);Ja(t,u)}}catch(s){if(s instanceof nc)throw s;Ja(t,"network-request-failed",{message:String(s)})}}async function c_(t,e,n,r,s={}){const i=await ul(t,e,n,r,s);return"mfaPendingCredential"in i&&Ja(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function OK(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?zD(t.config,s):`${t.config.apiScheme}://${s}`;return S8e.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function P8e(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R8e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hc(this.auth,"network-request-failed")),x8e.get())})}}function UE(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Hc(t,e,r);return s.customData._tokenResponse=n,s}function N4(t){return t!==void 0&&t.enterprise!==void 0}class N8e{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return P8e(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O8e(t,e){return ul(t,"GET","/v2/recaptchaConfig",Mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k8e(t,e){return ul(t,"POST","/v1/accounts:delete",e)}async function kC(t,e){return ul(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function D8e(t,e=!1){const n=Hr(t),r=await n.getIdToken(e),s=WD(r);Rt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Tw(C2(s.auth_time)),issuedAtTime:Tw(C2(s.iat)),expirationTime:Tw(C2(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function C2(t){return Number(t)*1e3}function WD(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return I1("JWT malformed, contained fewer than 3 sections"),null;try{const s=hK(n);return s?JSON.parse(s):(I1("Failed to decode base64 JWT payload"),null)}catch(s){return I1("Caught error parsing JWT payload as JSON",s?.toString()),null}}function O4(t){const e=WD(t);return Rt(e,"internal-error"),Rt(typeof e.exp<"u","internal-error"),Rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qg(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nc&&M8e(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function M8e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tw(this.lastLoginAt),this.creationTime=Tw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(t){const e=t.auth,n=await t.getIdToken(),r=await Qg(t,kC(e,{idToken:n}));Rt(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?kK(s.providerUserInfo):[],o=$8e(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,l=a?c:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new PN(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,u)}async function L8e(t){const e=Hr(t);await DC(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $8e(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function kK(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8e(t,e){const n=await NK(t,{},async()=>{const r=o_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await OK(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Iy(t.emulatorConfig.host)&&(c.credentials="include"),RK.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function F8e(t,e){return ul(t,"POST","/v2/accounts:revokeToken",Mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Rt(e.idToken,"internal-error"),Rt(typeof e.idToken<"u","internal-error"),Rt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Rt(e.length!==0,"internal-error");const n=O4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await U8e(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ig;return r&&(Rt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Rt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Rt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ig,this.toJSON())}_performRefresh(){return Xl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t,e){Rt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ua{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new B8e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new PN(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Qg(this,this.stsTokenManager.getToken(this.auth,e));return Rt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return D8e(this,e)}reload(){return L8e(this)}_assign(e){this!==e&&(Rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ua({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await DC(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ra(this.auth.app))return Promise.reject(lu(this.auth));const e=await this.getIdToken();return await Qg(this,k8e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:f,providerData:m,stsTokenManager:g}=n;Rt(d&&g,e,"internal-error");const y=ig.fromJSON(this.name,g);Rt(typeof d=="string",e,"internal-error"),fd(r,e.name),fd(s,e.name),Rt(typeof h=="boolean",e,"internal-error"),Rt(typeof f=="boolean",e,"internal-error"),fd(i,e.name),fd(o,e.name),fd(a,e.name),fd(c,e.name),fd(l,e.name),fd(u,e.name);const v=new Ua({uid:d,auth:e,email:s,emailVerified:h,displayName:r,isAnonymous:f,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:y,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(v.providerData=m.map(_=>({..._}))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new ig;s.updateFromServerResponse(n);const i=new Ua({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await DC(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Rt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?kK(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new ig;a.updateFromIdToken(r);const c=new Ua({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new PN(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(c,l),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=new Map;function eu(t){Au(t instanceof Function,"Expected a class definition");let e=k4.get(t);return e?(Au(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,k4.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DK.type="NONE";const D4=DK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e,n){return`firebase:${t}:${e}:${n}`}class og{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=T1(this.userKey,s.apiKey,i),this.fullPersistenceKey=T1("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kC(this.auth,{idToken:e}).catch(()=>{});return n?Ua._fromGetAccountInfoResponse(this.auth,n,e):null}return Ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new og(eu(D4),e,r);const s=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let i=s[0]||eu(D4);const o=T1(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){let d;if(typeof u=="string"){const h=await kC(e,{idToken:u}).catch(()=>{});if(!h)break;d=await Ua._fromGetAccountInfoResponse(e,h,u)}else d=Ua._fromJSON(e,u);l!==i&&(a=d),i=l;break}}catch{}const c=s.filter(l=>l._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new og(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==i)try{await l._remove(o)}catch{}})),new og(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($K(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MK(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FK(e))return"Blackberry";if(jK(e))return"Webos";if(BK(e))return"Safari";if((e.includes("chrome/")||LK(e))&&!e.includes("edge/"))return"Chrome";if(UK(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function MK(t=ri()){return/firefox\//i.test(t)}function BK(t=ri()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LK(t=ri()){return/crios\//i.test(t)}function $K(t=ri()){return/iemobile/i.test(t)}function UK(t=ri()){return/android/i.test(t)}function FK(t=ri()){return/blackberry/i.test(t)}function jK(t=ri()){return/webos/i.test(t)}function GD(t=ri()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function j8e(t=ri()){return GD(t)&&!!window.navigator?.standalone}function V8e(){return e$e()&&document.documentMode===10}function VK(t=ri()){return GD(t)||UK(t)||jK(t)||FK(t)||/windows phone/i.test(t)||$K(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(t,e=[]){let n;switch(t){case"Browser":n=M4(ri());break;case"Worker":n=`${M4(ri())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ty}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q8e(t,e={}){return ul(t,"GET","/v2/passwordPolicy",Mu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8e=6;class W8e{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??z8e,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8e{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B4(this),this.idTokenSubscription=new B4(this),this.beforeStateQueue=new H8e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=eu(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await og.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kC(this,{idToken:e}),r=await Ua._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ra(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await DC(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=I8e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ra(this.app))return Promise.reject(lu(this));const n=e?Hr(e):null;return n&&Rt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ra(this.app)?Promise.reject(lu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ra(this.app)?Promise.reject(lu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q8e(this),n=new W8e(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await F8e(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&eu(e)||this._popupRedirectResolver;Rt(n,this,"argument-error"),this.redirectPersistenceManager=await og.create(this,[eu(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ra(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&E8e(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bh(t){return Hr(t)}class B4{constructor(e){this.auth=e,this.observer=null,this.addObserver=a$e(n=>this.observer=n)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ST={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K8e(t){ST=t}function qK(t){return ST.loadJS(t)}function Q8e(){return ST.recaptchaEnterpriseScript}function Y8e(){return ST.gapiScript}function Z8e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class J8e{constructor(){this.enterprise=new X8e}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class X8e{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const e4e="recaptcha-enterprise",zK="NO_RECAPTCHA";class t4e{constructor(e){this.type=e4e,this.auth=bh(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{O8e(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new N8e(c);return i.tenantId==null?i._agentRecaptchaConfig=l:i._tenantRecaptchaConfigs[i.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;N4(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(l=>{o(l)}).catch(()=>{o(zK)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J8e().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&N4(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Q8e();c.length!==0&&(c+=a),qK(c).then(()=>{s(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function L4(t,e,n,r=!1,s=!1){const i=new t4e(t);let o;if(s)o=zK;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function MC(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await L4(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await L4(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4e(t,e){const n=Rp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ch(i,e??{}))return s;Ja(s,"already-initialized")}return n.initialize({options:e})}function r4e(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(eu);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function s4e(t,e,n){const r=bh(t);Rt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=WK(e),{host:o,port:a}=i4e(e),c=a===null?"":`:${a}`,l={url:`${i}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Rt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Rt(ch(l,r.config.emulator)&&ch(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Iy(o)?(gK(`${i}//${o}${c}`),yK("Auth",!0)):o4e()}function WK(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i4e(t){const e=WK(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:$4(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:$4(o)}}}function $4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o4e(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xl("not implemented")}_getIdTokenResponse(e){return Xl("not implemented")}_linkToIdToken(e,n){return Xl("not implemented")}_getReauthenticationResolver(e){return Xl("not implemented")}}async function a4e(t,e){return ul(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4e(t,e){return c_(t,"POST","/v1/accounts:signInWithPassword",Mu(t,e))}async function l4e(t,e){return ul(t,"POST","/v1/accounts:sendOobCode",Mu(t,e))}async function u4e(t,e){return l4e(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4e(t,e){return c_(t,"POST","/v1/accounts:signInWithEmailLink",Mu(t,e))}async function h4e(t,e){return c_(t,"POST","/v1/accounts:signInWithEmailLink",Mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb extends KD{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fb(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fb(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return MC(e,n,"signInWithPassword",c4e);case"emailLink":return d4e(e,{email:this._email,oobCode:this._password});default:Ja(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return MC(e,r,"signUpPassword",a4e);case"emailLink":return h4e(e,{idToken:n,email:this._email,oobCode:this._password});default:Ja(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ag(t,e){return c_(t,"POST","/v1/accounts:signInWithIdp",Mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4e="http://localhost";class ap extends KD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ap(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ja("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ap(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ag(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ag(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ag(e,n)}buildRequest(){const e={requestUri:f4e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=o_(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4e(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m4e(t){const e=z0(W0(t)).link,n=e?z0(W0(e)).deep_link_id:null,r=z0(W0(t)).deep_link_id;return(r?z0(W0(r)).link:null)||r||n||e||t}class QD{constructor(e){const n=z0(W0(e)),r=n.apiKey??null,s=n.oobCode??null,i=p4e(n.mode??null);Rt(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=m4e(e);try{return new QD(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.providerId=Sy.PROVIDER_ID}static credential(e,n){return fb._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=QD.parseLink(n);return Rt(r,"argument-error"),fb._fromEmailAndCode(e,r.code,r.tenantId)}}Sy.PROVIDER_ID="password";Sy.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends GK{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends l_{constructor(){super("facebook.com")}static credential(e){return ap._fromParams({providerId:xd.PROVIDER_ID,signInMethod:xd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xd.credentialFromTaggedObject(e)}static credentialFromError(e){return xd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xd.credential(e.oauthAccessToken)}catch{return null}}}xd.FACEBOOK_SIGN_IN_METHOD="facebook.com";xd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends l_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ap._fromParams({providerId:Pd.PROVIDER_ID,signInMethod:Pd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pd.credentialFromTaggedObject(e)}static credentialFromError(e){return Pd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Pd.credential(n,r)}catch{return null}}}Pd.GOOGLE_SIGN_IN_METHOD="google.com";Pd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends l_{constructor(){super("github.com")}static credential(e){return ap._fromParams({providerId:Rd.PROVIDER_ID,signInMethod:Rd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rd.credentialFromTaggedObject(e)}static credentialFromError(e){return Rd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rd.credential(e.oauthAccessToken)}catch{return null}}}Rd.GITHUB_SIGN_IN_METHOD="github.com";Rd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends l_{constructor(){super("twitter.com")}static credential(e,n){return ap._fromParams({providerId:Nd.PROVIDER_ID,signInMethod:Nd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nd.credentialFromTaggedObject(e)}static credentialFromError(e){return Nd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nd.credential(n,r)}catch{return null}}}Nd.TWITTER_SIGN_IN_METHOD="twitter.com";Nd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4e(t,e){return c_(t,"POST","/v1/accounts:signUp",Mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ua._fromIdTokenResponse(e,r,s),o=U4(r);return new cp({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=U4(r);return new cp({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function U4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC extends nc{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,BC.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new BC(e,n,r,s)}}function KK(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?BC._fromErrorAndOperation(t,i,e,r):i})}async function y4e(t,e,n=!1){const r=await Qg(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cp._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4e(t,e,n=!1){const{auth:r}=t;if(ra(r.app))return Promise.reject(lu(r));const s="reauthenticate";try{const i=await Qg(t,KK(r,s,e,t),n);Rt(i.idToken,r,"internal-error");const o=WD(i.idToken);Rt(o,r,"internal-error");const{sub:a}=o;return Rt(t.uid===a,r,"user-mismatch"),cp._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Ja(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QK(t,e,n=!1){if(ra(t.app))return Promise.reject(lu(t));const r="signIn",s=await KK(t,r,e),i=await cp._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function v4e(t,e){return QK(bh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YK(t){const e=bh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function b4e(t,e,n){const r=bh(t);await MC(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",u4e)}async function _4e(t,e,n){if(ra(t.app))return Promise.reject(lu(t));const r=bh(t),o=await MC(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g4e).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&YK(t),c}),a=await cp._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function E4e(t,e,n){return ra(t.app)?Promise.reject(lu(t)):v4e(Hr(t),Sy.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&YK(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4e(t,e){return ul(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4e(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Hr(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Qg(r,A4e(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function I4e(t,e,n,r){return Hr(t).onIdTokenChanged(e,n,r)}function T4e(t,e,n){return Hr(t).beforeAuthStateChanged(e,n)}function S4e(t,e,n,r){return Hr(t).onAuthStateChanged(e,n,r)}function x4e(t){return Hr(t).signOut()}const LC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(LC,"1"),this.storage.removeItem(LC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4e=1e3,R4e=10;class JK extends ZK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);V8e()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,R4e):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},P4e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JK.type="LOCAL";const N4e=JK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK extends ZK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XK.type="SESSION";const eQ=XK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4e(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xT(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async l=>l(n.origin,i)),c=await O4e(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const l=YD("",20);s.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(h.data.response);break;default:clearTimeout(u),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(){return window}function D4e(t){qc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tQ(){return typeof qc().WorkerGlobalScope<"u"&&typeof qc().importScripts=="function"}async function M4e(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B4e(){return navigator?.serviceWorker?.controller||null}function L4e(){return tQ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nQ="firebaseLocalStorageDb",$4e=1,$C="firebaseLocalStorage",rQ="fbase_key";class u_{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function PT(t,e){return t.transaction([$C],e?"readwrite":"readonly").objectStore($C)}function U4e(){const t=indexedDB.deleteDatabase(nQ);return new u_(t).toPromise()}function RN(){const t=indexedDB.open(nQ,$4e);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($C,{keyPath:rQ})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($C)?e(r):(r.close(),await U4e(),e(await RN()))})})}async function F4(t,e,n){const r=PT(t,!0).put({[rQ]:e,value:n});return new u_(r).toPromise()}async function F4e(t,e){const n=PT(t,!1).get(e),r=await new u_(n).toPromise();return r===void 0?null:r.value}function j4(t,e){const n=PT(t,!0).delete(e);return new u_(n).toPromise()}const j4e=800,V4e=3;class sQ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await RN(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>V4e)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tQ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xT._getInstance(L4e()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await M4e(),!this.activeServiceWorker)return;this.sender=new k4e(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||B4e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await RN();return await F4(e,LC,"1"),await j4(e,LC),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>F4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>F4e(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>j4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=PT(s,!1).getAll();return new u_(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j4e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sQ.type="LOCAL";const H4e=sQ;new a_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4e(t,e){return e?eu(e):(Rt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD extends KD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ag(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ag(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ag(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function z4e(t){return QK(t.auth,new ZD(t),t.bypassAuthState)}function W4e(t){const{auth:e,user:n}=t;return Rt(n,e,"internal-error"),w4e(n,new ZD(t),t.bypassAuthState)}async function G4e(t){const{auth:e,user:n}=t;return Rt(n,e,"internal-error"),y4e(n,new ZD(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z4e;case"linkViaPopup":case"linkViaRedirect":return G4e;case"reauthViaPopup":case"reauthViaRedirect":return W4e;default:Ja(this.auth,"internal-error")}}resolve(e){Au(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Au(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4e=new a_(2e3,1e4);class Wm extends iQ{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Wm.currentPopupAction&&Wm.currentPopupAction.cancel(),Wm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Rt(e,this.auth,"internal-error"),e}async onExecution(){Au(this.filter.length===1,"Popup operations only handle one event");const e=YD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Hc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wm.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K4e.get())};e()}}Wm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4e="pendingRedirect",S1=new Map;class Y4e extends iQ{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=S1.get(this.auth._key());if(!e){try{const r=await Z4e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}S1.set(this.auth._key(),e)}return this.bypassAuthState||S1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z4e(t,e){const n=eUe(e),r=X4e(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function J4e(t,e){S1.set(t._key(),e)}function X4e(t){return eu(t._redirectPersistence)}function eUe(t){return T1(Q4e,t.config.apiKey,t.name)}async function tUe(t,e,n=!1){if(ra(t.app))return Promise.reject(lu(t));const r=bh(t),s=q4e(r,e),o=await new Y4e(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nUe=600*1e3;class rUe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sUe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!oQ(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Hc(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nUe&&this.cachedEventUids.clear(),this.cachedEventUids.has(V4(e))}saveEventToCache(e){this.cachedEventUids.add(V4(e)),this.lastProcessedEventTime=Date.now()}}function V4(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oQ({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function sUe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oQ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iUe(t,e={}){return ul(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oUe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aUe=/^https?/;async function cUe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iUe(t);for(const n of e)try{if(lUe(n))return}catch{}Ja(t,"unauthorized-domain")}function lUe(t){const e=xN(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aUe.test(n))return!1;if(oUe.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uUe=new a_(3e4,6e4);function H4(){const t=qc().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dUe(t){return new Promise((e,n)=>{function r(){H4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{H4(),n(Hc(t,"network-request-failed"))},timeout:uUe.get()})}if(qc().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qc().gapi?.load)r();else{const s=Z8e("iframefcb");return qc()[s]=()=>{gapi.load?r():n(Hc(t,"network-request-failed"))},qK(`${Y8e()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw x1=null,e})}let x1=null;function hUe(t){return x1=x1||dUe(t),x1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fUe=new a_(5e3,15e3),pUe="__/auth/iframe",mUe="emulator/auth/iframe",gUe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yUe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wUe(t){const e=t.config;Rt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zD(e,mUe):`https://${t.config.authDomain}/${pUe}`,r={apiKey:e.apiKey,appName:t.name,v:Ty},s=yUe.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${o_(r).slice(1)}`}async function vUe(t){const e=await hUe(t),n=qc().gapi;return Rt(n,t,"internal-error"),e.open({where:document.body,url:wUe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gUe,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Hc(t,"network-request-failed"),a=qc().setTimeout(()=>{i(o)},fUe.get());function c(){qc().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bUe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_Ue=500,EUe=600,AUe="_blank",CUe="http://localhost";class q4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IUe(t,e,n,r=_Ue,s=EUe){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...bUe,width:r.toString(),height:s.toString(),top:i,left:o},l=ri().toLowerCase();n&&(a=LK(l)?AUe:n),MK(l)&&(e=e||CUe,c.scrollbars="yes");const u=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(j8e(l)&&a!=="_self")return TUe(e||"",a),new q4(null);const d=window.open(e||"",a,u);Rt(d,t,"popup-blocked");try{d.focus()}catch{}return new q4(d)}function TUe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SUe="__/auth/handler",xUe="emulator/auth/handler",PUe=encodeURIComponent("fac");async function z4(t,e,n,r,s,i){Rt(t.config.authDomain,t,"auth-domain-config-required"),Rt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ty,eventId:s};if(e instanceof GK){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",o$e(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof l_){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${PUe}=${encodeURIComponent(c)}`:"";return`${RUe(t)}?${o_(a).slice(1)}${l}`}function RUe({config:t}){return t.emulator?zD(t,xUe):`https://${t.authDomain}/${SUe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="webStorageSupport";class NUe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eQ,this._completeRedirectFn=tUe,this._overrideRedirectResult=J4e}async _openPopup(e,n,r,s){Au(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await z4(e,n,r,xN(),s);return IUe(e,i,YD())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await z4(e,n,r,xN(),s);return D4e(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Au(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vUe(e),r=new rUe(e);return n.register("authEvent",s=>(Rt(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(I2,{type:I2},s=>{const i=s?.[0]?.[I2];i!==void 0&&n(!!i),Ja(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cUe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VK()||BK()||GD()}}const OUe=NUe;var W4="@firebase/auth",G4="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kUe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DUe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MUe(t){il(new Za("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Rt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HK(t)},l=new G8e(r,s,i,c);return r4e(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),il(new Za("auth-internal",e=>{const n=bh(e.getProvider("auth").getImmediate());return(r=>new kUe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),da(W4,G4,DUe(t)),da(W4,G4,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BUe=300,LUe=mK("authIdTokenMaxAge")||BUe;let K4=null;const $Ue=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LUe)return;const s=n?.token;K4!==s&&(K4=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aQ(t=HD()){const e=Rp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=n4e(t,{popupRedirectResolver:OUe,persistence:[H4e,N4e,eQ]}),r=mK("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=$Ue(i.toString());T4e(n,o,()=>o(n.currentUser)),I4e(n,a=>o(a))}}const s=fK("auth");return s&&s4e(n,`http://${s}`),n}function UUe(){return document.getElementsByTagName("head")?.[0]??document}K8e({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Hc("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",UUe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MUe("Browser");var Q4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kd,cQ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,b){function E(){}E.prototype=b.prototype,T.D=b.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(x,D,M){for(var $=Array(arguments.length-2),X=2;X<arguments.length;X++)$[X-2]=arguments[X];return b.prototype[D].apply(x,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,b,E){E||(E=0);var x=Array(16);if(typeof b=="string")for(var D=0;16>D;++D)x[D]=b.charCodeAt(E++)|b.charCodeAt(E++)<<8|b.charCodeAt(E++)<<16|b.charCodeAt(E++)<<24;else for(D=0;16>D;++D)x[D]=b[E++]|b[E++]<<8|b[E++]<<16|b[E++]<<24;b=T.g[0],E=T.g[1],D=T.g[2];var M=T.g[3],$=b+(M^E&(D^M))+x[0]+3614090360&4294967295;b=E+($<<7&4294967295|$>>>25),$=M+(D^b&(E^D))+x[1]+3905402710&4294967295,M=b+($<<12&4294967295|$>>>20),$=D+(E^M&(b^E))+x[2]+606105819&4294967295,D=M+($<<17&4294967295|$>>>15),$=E+(b^D&(M^b))+x[3]+3250441966&4294967295,E=D+($<<22&4294967295|$>>>10),$=b+(M^E&(D^M))+x[4]+4118548399&4294967295,b=E+($<<7&4294967295|$>>>25),$=M+(D^b&(E^D))+x[5]+1200080426&4294967295,M=b+($<<12&4294967295|$>>>20),$=D+(E^M&(b^E))+x[6]+2821735955&4294967295,D=M+($<<17&4294967295|$>>>15),$=E+(b^D&(M^b))+x[7]+4249261313&4294967295,E=D+($<<22&4294967295|$>>>10),$=b+(M^E&(D^M))+x[8]+1770035416&4294967295,b=E+($<<7&4294967295|$>>>25),$=M+(D^b&(E^D))+x[9]+2336552879&4294967295,M=b+($<<12&4294967295|$>>>20),$=D+(E^M&(b^E))+x[10]+4294925233&4294967295,D=M+($<<17&4294967295|$>>>15),$=E+(b^D&(M^b))+x[11]+2304563134&4294967295,E=D+($<<22&4294967295|$>>>10),$=b+(M^E&(D^M))+x[12]+1804603682&4294967295,b=E+($<<7&4294967295|$>>>25),$=M+(D^b&(E^D))+x[13]+4254626195&4294967295,M=b+($<<12&4294967295|$>>>20),$=D+(E^M&(b^E))+x[14]+2792965006&4294967295,D=M+($<<17&4294967295|$>>>15),$=E+(b^D&(M^b))+x[15]+1236535329&4294967295,E=D+($<<22&4294967295|$>>>10),$=b+(D^M&(E^D))+x[1]+4129170786&4294967295,b=E+($<<5&4294967295|$>>>27),$=M+(E^D&(b^E))+x[6]+3225465664&4294967295,M=b+($<<9&4294967295|$>>>23),$=D+(b^E&(M^b))+x[11]+643717713&4294967295,D=M+($<<14&4294967295|$>>>18),$=E+(M^b&(D^M))+x[0]+3921069994&4294967295,E=D+($<<20&4294967295|$>>>12),$=b+(D^M&(E^D))+x[5]+3593408605&4294967295,b=E+($<<5&4294967295|$>>>27),$=M+(E^D&(b^E))+x[10]+38016083&4294967295,M=b+($<<9&4294967295|$>>>23),$=D+(b^E&(M^b))+x[15]+3634488961&4294967295,D=M+($<<14&4294967295|$>>>18),$=E+(M^b&(D^M))+x[4]+3889429448&4294967295,E=D+($<<20&4294967295|$>>>12),$=b+(D^M&(E^D))+x[9]+568446438&4294967295,b=E+($<<5&4294967295|$>>>27),$=M+(E^D&(b^E))+x[14]+3275163606&4294967295,M=b+($<<9&4294967295|$>>>23),$=D+(b^E&(M^b))+x[3]+4107603335&4294967295,D=M+($<<14&4294967295|$>>>18),$=E+(M^b&(D^M))+x[8]+1163531501&4294967295,E=D+($<<20&4294967295|$>>>12),$=b+(D^M&(E^D))+x[13]+2850285829&4294967295,b=E+($<<5&4294967295|$>>>27),$=M+(E^D&(b^E))+x[2]+4243563512&4294967295,M=b+($<<9&4294967295|$>>>23),$=D+(b^E&(M^b))+x[7]+1735328473&4294967295,D=M+($<<14&4294967295|$>>>18),$=E+(M^b&(D^M))+x[12]+2368359562&4294967295,E=D+($<<20&4294967295|$>>>12),$=b+(E^D^M)+x[5]+4294588738&4294967295,b=E+($<<4&4294967295|$>>>28),$=M+(b^E^D)+x[8]+2272392833&4294967295,M=b+($<<11&4294967295|$>>>21),$=D+(M^b^E)+x[11]+1839030562&4294967295,D=M+($<<16&4294967295|$>>>16),$=E+(D^M^b)+x[14]+4259657740&4294967295,E=D+($<<23&4294967295|$>>>9),$=b+(E^D^M)+x[1]+2763975236&4294967295,b=E+($<<4&4294967295|$>>>28),$=M+(b^E^D)+x[4]+1272893353&4294967295,M=b+($<<11&4294967295|$>>>21),$=D+(M^b^E)+x[7]+4139469664&4294967295,D=M+($<<16&4294967295|$>>>16),$=E+(D^M^b)+x[10]+3200236656&4294967295,E=D+($<<23&4294967295|$>>>9),$=b+(E^D^M)+x[13]+681279174&4294967295,b=E+($<<4&4294967295|$>>>28),$=M+(b^E^D)+x[0]+3936430074&4294967295,M=b+($<<11&4294967295|$>>>21),$=D+(M^b^E)+x[3]+3572445317&4294967295,D=M+($<<16&4294967295|$>>>16),$=E+(D^M^b)+x[6]+76029189&4294967295,E=D+($<<23&4294967295|$>>>9),$=b+(E^D^M)+x[9]+3654602809&4294967295,b=E+($<<4&4294967295|$>>>28),$=M+(b^E^D)+x[12]+3873151461&4294967295,M=b+($<<11&4294967295|$>>>21),$=D+(M^b^E)+x[15]+530742520&4294967295,D=M+($<<16&4294967295|$>>>16),$=E+(D^M^b)+x[2]+3299628645&4294967295,E=D+($<<23&4294967295|$>>>9),$=b+(D^(E|~M))+x[0]+4096336452&4294967295,b=E+($<<6&4294967295|$>>>26),$=M+(E^(b|~D))+x[7]+1126891415&4294967295,M=b+($<<10&4294967295|$>>>22),$=D+(b^(M|~E))+x[14]+2878612391&4294967295,D=M+($<<15&4294967295|$>>>17),$=E+(M^(D|~b))+x[5]+4237533241&4294967295,E=D+($<<21&4294967295|$>>>11),$=b+(D^(E|~M))+x[12]+1700485571&4294967295,b=E+($<<6&4294967295|$>>>26),$=M+(E^(b|~D))+x[3]+2399980690&4294967295,M=b+($<<10&4294967295|$>>>22),$=D+(b^(M|~E))+x[10]+4293915773&4294967295,D=M+($<<15&4294967295|$>>>17),$=E+(M^(D|~b))+x[1]+2240044497&4294967295,E=D+($<<21&4294967295|$>>>11),$=b+(D^(E|~M))+x[8]+1873313359&4294967295,b=E+($<<6&4294967295|$>>>26),$=M+(E^(b|~D))+x[15]+4264355552&4294967295,M=b+($<<10&4294967295|$>>>22),$=D+(b^(M|~E))+x[6]+2734768916&4294967295,D=M+($<<15&4294967295|$>>>17),$=E+(M^(D|~b))+x[13]+1309151649&4294967295,E=D+($<<21&4294967295|$>>>11),$=b+(D^(E|~M))+x[4]+4149444226&4294967295,b=E+($<<6&4294967295|$>>>26),$=M+(E^(b|~D))+x[11]+3174756917&4294967295,M=b+($<<10&4294967295|$>>>22),$=D+(b^(M|~E))+x[2]+718787259&4294967295,D=M+($<<15&4294967295|$>>>17),$=E+(M^(D|~b))+x[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(D+($<<21&4294967295|$>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var E=b-this.blockSize,x=this.B,D=this.h,M=0;M<b;){if(D==0)for(;M<=E;)s(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<b;)if(x[D++]=T.charCodeAt(M++),D==this.blockSize){s(this,x),D=0;break}}else for(;M<b;)if(x[D++]=T[M++],D==this.blockSize){s(this,x),D=0;break}}this.h=D,this.o+=b},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var E=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=E&255,E/=256;for(this.u(T),T=Array(16),b=E=0;4>b;++b)for(var x=0;32>x;x+=8)T[E++]=this.g[b]>>>x&255;return T};function i(T,b){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=b(T)}function o(T,b){this.h=b;for(var E=[],x=!0,D=T.length-1;0<=D;D--){var M=T[D]|0;x&&M==b||(E[D]=M,x=!1)}this.g=E}var a={};function c(T){return-128<=T&&128>T?i(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return y(l(-T));for(var b=[],E=1,x=0;T>=E;x++)b[x]=T/E|0,E*=4294967296;return new o(b,0)}function u(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return y(u(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(b,8)),x=d,D=0;D<T.length;D+=8){var M=Math.min(8,T.length-D),$=parseInt(T.substring(D,D+M),b);8>M?(M=l(Math.pow(b,M)),x=x.j(M).add(l($))):(x=x.j(E),x=x.add(l($)))}return x}var d=c(0),h=c(1),f=c(16777216);t=o.prototype,t.m=function(){if(g(this))return-y(this).m();for(var T=0,b=1,E=0;E<this.g.length;E++){var x=this.i(E);T+=(0<=x?x:4294967296+x)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(m(this))return"0";if(g(this))return"-"+y(this).toString(T);for(var b=l(Math.pow(T,6)),E=this,x="";;){var D=k(E,b).g;E=v(E,D.j(b));var M=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=D,m(E))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function m(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function g(T){return T.h==-1}t.l=function(T){return T=v(this,T),g(T)?-1:m(T)?0:1};function y(T){for(var b=T.g.length,E=[],x=0;x<b;x++)E[x]=~T.g[x];return new o(E,~T.h).add(h)}t.abs=function(){return g(this)?y(this):this},t.add=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],x=0,D=0;D<=b;D++){var M=x+(this.i(D)&65535)+(T.i(D)&65535),$=(M>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);x=$>>>16,M&=65535,$&=65535,E[D]=$<<16|M}return new o(E,E[E.length-1]&-2147483648?-1:0)};function v(T,b){return T.add(y(b))}t.j=function(T){if(m(this)||m(T))return d;if(g(this))return g(T)?y(this).j(y(T)):y(y(this).j(T));if(g(T))return y(this.j(y(T)));if(0>this.l(f)&&0>T.l(f))return l(this.m()*T.m());for(var b=this.g.length+T.g.length,E=[],x=0;x<2*b;x++)E[x]=0;for(x=0;x<this.g.length;x++)for(var D=0;D<T.g.length;D++){var M=this.i(x)>>>16,$=this.i(x)&65535,X=T.i(D)>>>16,P=T.i(D)&65535;E[2*x+2*D]+=$*P,_(E,2*x+2*D),E[2*x+2*D+1]+=M*P,_(E,2*x+2*D+1),E[2*x+2*D+1]+=$*X,_(E,2*x+2*D+1),E[2*x+2*D+2]+=M*X,_(E,2*x+2*D+2)}for(x=0;x<b;x++)E[x]=E[2*x+1]<<16|E[2*x];for(x=b;x<2*b;x++)E[x]=0;return new o(E,0)};function _(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function A(T,b){this.g=T,this.h=b}function k(T,b){if(m(b))throw Error("division by zero");if(m(T))return new A(d,d);if(g(T))return b=k(y(T),b),new A(y(b.g),y(b.h));if(g(b))return b=k(T,y(b)),new A(y(b.g),b.h);if(30<T.g.length){if(g(T)||g(b))throw Error("slowDivide_ only works with positive integers.");for(var E=h,x=b;0>=x.l(T);)E=S(E),x=S(x);var D=R(E,1),M=R(x,1);for(x=R(x,2),E=R(E,2);!m(x);){var $=M.add(x);0>=$.l(T)&&(D=D.add(E),M=$),x=R(x,1),E=R(E,1)}return b=v(T,D.j(b)),new A(D,b)}for(D=d;0<=T.l(b);){for(E=Math.max(1,Math.floor(T.m()/b.m())),x=Math.ceil(Math.log(E)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=l(E),$=M.j(b);g($)||0<$.l(T);)E-=x,M=l(E),$=M.j(b);m(M)&&(M=h),D=D.add(M),T=v(T,$)}return new A(D,T)}t.A=function(T){return k(this,T).h},t.and=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],x=0;x<b;x++)E[x]=this.i(x)&T.i(x);return new o(E,this.h&T.h)},t.or=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],x=0;x<b;x++)E[x]=this.i(x)|T.i(x);return new o(E,this.h|T.h)},t.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],x=0;x<b;x++)E[x]=this.i(x)^T.i(x);return new o(E,this.h^T.h)};function S(T){for(var b=T.g.length+1,E=[],x=0;x<b;x++)E[x]=T.i(x)<<1|T.i(x-1)>>>31;return new o(E,T.h)}function R(T,b){var E=b>>5;b%=32;for(var x=T.g.length-E,D=[],M=0;M<x;M++)D[M]=0<b?T.i(M+E)>>>b|T.i(M+E+1)<<32-b:T.i(M+E);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cQ=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Kd=o}).apply(typeof Q4<"u"?Q4:typeof self<"u"?self:typeof window<"u"?window:{});var FE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lQ,G0,uQ,P1,NN,dQ,hQ,fQ;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,I,B){return p==Array.prototype||p==Object.prototype||(p[I]=B.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof FE=="object"&&FE];for(var I=0;I<p.length;++I){var B=p[I];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function s(p,I){if(I)e:{var B=r;p=p.split(".");for(var z=0;z<p.length-1;z++){var ie=p[z];if(!(ie in B))break e;B=B[ie]}p=p[p.length-1],z=B[p],I=I(z),I!=z&&I!=null&&e(B,p,{configurable:!0,writable:!0,value:I})}}function i(p,I){p instanceof String&&(p+="");var B=0,z=!1,ie={next:function(){if(!z&&B<p.length){var he=B++;return{value:I(he,p[he]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(p){return p||function(){return i(this,function(I,B){return B})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(p){var I=typeof p;return I=I!="object"?I:p?Array.isArray(p)?"array":I:"null",I=="array"||I=="object"&&typeof p.length=="number"}function l(p){var I=typeof p;return I=="object"&&p!=null||I=="function"}function u(p,I,B){return p.call.apply(p.bind,arguments)}function d(p,I,B){if(!p)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,z),p.apply(I,ie)}}return function(){return p.apply(I,arguments)}}function h(p,I,B){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function f(p,I){var B=Array.prototype.slice.call(arguments,1);return function(){var z=B.slice();return z.push.apply(z,arguments),p.apply(this,z)}}function m(p,I){function B(){}B.prototype=I.prototype,p.aa=I.prototype,p.prototype=new B,p.prototype.constructor=p,p.Qb=function(z,ie,he){for(var $e=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)$e[Wn-2]=arguments[Wn];return I.prototype[ie].apply(z,$e)}}function g(p){const I=p.length;if(0<I){const B=Array(I);for(let z=0;z<I;z++)B[z]=p[z];return B}return[]}function y(p,I){for(let B=1;B<arguments.length;B++){const z=arguments[B];if(c(z)){const ie=p.length||0,he=z.length||0;p.length=ie+he;for(let $e=0;$e<he;$e++)p[ie+$e]=z[$e]}else p.push(z)}}class v{constructor(I,B){this.i=I,this.j=B,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function _(p){return/^[\s\xa0]*$/.test(p)}function A(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function k(p){return k[" "](p),p}k[" "]=function(){};var S=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function R(p,I,B){for(const z in p)I.call(B,p[z],z,p)}function T(p,I){for(const B in p)I.call(void 0,p[B],B,p)}function b(p){const I={};for(const B in p)I[B]=p[B];return I}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(p,I){let B,z;for(let ie=1;ie<arguments.length;ie++){z=arguments[ie];for(B in z)p[B]=z[B];for(let he=0;he<E.length;he++)B=E[he],Object.prototype.hasOwnProperty.call(z,B)&&(p[B]=z[B])}}function D(p){var I=1;p=p.split(":");const B=[];for(;0<I&&p.length;)B.push(p.shift()),I--;return p.length&&B.push(p.join(":")),B}function M(p){a.setTimeout(()=>{throw p},0)}function $(){var p=J;let I=null;return p.g&&(I=p.g,p.g=p.g.next,p.g||(p.h=null),I.next=null),I}class X{constructor(){this.h=this.g=null}add(I,B){const z=P.get();z.set(I,B),this.h?this.h.next=z:this.g=z,this.h=z}}var P=new v(()=>new L,p=>p.reset());class L{constructor(){this.next=this.g=this.h=null}set(I,B){this.h=I,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let W,Y=!1,J=new X,V=()=>{const p=a.Promise.resolve(void 0);W=()=>{p.then(se)}};var se=()=>{for(var p;p=$();){try{p.h.call(p.g)}catch(B){M(B)}var I=P;I.j(p),100>I.h&&(I.h++,p.next=I.g,I.g=p)}Y=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(p,I){this.type=p,this.g=this.target=I,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,I=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const B=()=>{};a.addEventListener("test",B,I),a.removeEventListener("test",B,I)}catch{}return p})();function Se(p,I){if(Ee.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var B=this.type=p.type,z=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=I,I=p.relatedTarget){if(S){e:{try{k(I.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(I=null)}}else B=="mouseover"?I=p.fromElement:B=="mouseout"&&(I=p.toElement);this.relatedTarget=I,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Me[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Se.aa.h.call(this)}}m(Se,Ee);var Me={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ge(p,I,B,z,ie){this.listener=p,this.proxy=null,this.src=I,this.type=B,this.capture=!!z,this.ha=ie,this.key=++oe,this.da=this.fa=!1}function Ne(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function mt(p){this.src=p,this.g={},this.h=0}mt.prototype.add=function(p,I,B,z,ie){var he=p.toString();p=this.g[he],p||(p=this.g[he]=[],this.h++);var $e=Z(p,I,z,ie);return-1<$e?(I=p[$e],B||(I.fa=!1)):(I=new ge(I,this.src,he,!!z,ie),I.fa=B,p.push(I)),I};function Q(p,I){var B=I.type;if(B in p.g){var z=p.g[B],ie=Array.prototype.indexOf.call(z,I,void 0),he;(he=0<=ie)&&Array.prototype.splice.call(z,ie,1),he&&(Ne(I),p.g[B].length==0&&(delete p.g[B],p.h--))}}function Z(p,I,B,z){for(var ie=0;ie<p.length;++ie){var he=p[ie];if(!he.da&&he.listener==I&&he.capture==!!B&&he.ha==z)return ie}return-1}var te="closure_lm_"+(1e6*Math.random()|0),me={};function we(p,I,B,z,ie){if(Array.isArray(I)){for(var he=0;he<I.length;he++)we(p,I[he],B,z,ie);return null}return B=Je(B),p&&p[ce]?p.K(I,B,l(z)?!!z.capture:!1,ie):ve(p,I,B,!1,z,ie)}function ve(p,I,B,z,ie,he){if(!I)throw Error("Invalid event type");var $e=l(ie)?!!ie.capture:!!ie,Wn=Le(p);if(Wn||(p[te]=Wn=new mt(p)),B=Wn.add(I,B,z,$e,he),B.proxy)return B;if(z=He(),B.proxy=z,z.src=p,z.listener=B,p.addEventListener)pe||(ie=$e),ie===void 0&&(ie=!1),p.addEventListener(I.toString(),z,ie);else if(p.attachEvent)p.attachEvent(Ie(I.toString()),z);else if(p.addListener&&p.removeListener)p.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return B}function He(){function p(B){return I.call(p.src,p.listener,B)}const I=Qe;return p}function De(p,I,B,z,ie){if(Array.isArray(I))for(var he=0;he<I.length;he++)De(p,I[he],B,z,ie);else z=l(z)?!!z.capture:!!z,B=Je(B),p&&p[ce]?(p=p.i,I=String(I).toString(),I in p.g&&(he=p.g[I],B=Z(he,B,z,ie),-1<B&&(Ne(he[B]),Array.prototype.splice.call(he,B,1),he.length==0&&(delete p.g[I],p.h--)))):p&&(p=Le(p))&&(I=p.g[I.toString()],p=-1,I&&(p=Z(I,B,z,ie)),(B=-1<p?I[p]:null)&&ke(B))}function ke(p){if(typeof p!="number"&&p&&!p.da){var I=p.src;if(I&&I[ce])Q(I.i,p);else{var B=p.type,z=p.proxy;I.removeEventListener?I.removeEventListener(B,z,p.capture):I.detachEvent?I.detachEvent(Ie(B),z):I.addListener&&I.removeListener&&I.removeListener(z),(B=Le(I))?(Q(B,p),B.h==0&&(B.src=null,I[te]=null)):Ne(p)}}}function Ie(p){return p in me?me[p]:me[p]="on"+p}function Qe(p,I){if(p.da)p=!0;else{I=new Se(I,this);var B=p.listener,z=p.ha||p.src;p.fa&&ke(p),p=B.call(z,I)}return p}function Le(p){return p=p[te],p instanceof mt?p:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Je(p){return typeof p=="function"?p:(p[tt]||(p[tt]=function(I){return p.handleEvent(I)}),p[tt])}function ft(){ue.call(this),this.i=new mt(this),this.M=this,this.F=null}m(ft,ue),ft.prototype[ce]=!0,ft.prototype.removeEventListener=function(p,I,B,z){De(this,p,I,B,z)};function F(p,I){var B,z=p.F;if(z)for(B=[];z;z=z.F)B.push(z);if(p=p.M,z=I.type||I,typeof I=="string")I=new Ee(I,p);else if(I instanceof Ee)I.target=I.target||p;else{var ie=I;I=new Ee(z,p),x(I,ie)}if(ie=!0,B)for(var he=B.length-1;0<=he;he--){var $e=I.g=B[he];ie=C($e,z,!0,I)&&ie}if($e=I.g=p,ie=C($e,z,!0,I)&&ie,ie=C($e,z,!1,I)&&ie,B)for(he=0;he<B.length;he++)$e=I.g=B[he],ie=C($e,z,!1,I)&&ie}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var p=this.i,I;for(I in p.g){for(var B=p.g[I],z=0;z<B.length;z++)Ne(B[z]);delete p.g[I],p.h--}}this.F=null},ft.prototype.K=function(p,I,B,z){return this.i.add(String(p),I,!1,B,z)},ft.prototype.L=function(p,I,B,z){return this.i.add(String(p),I,!0,B,z)};function C(p,I,B,z){if(I=p.i.g[String(I)],!I)return!0;I=I.concat();for(var ie=!0,he=0;he<I.length;++he){var $e=I[he];if($e&&!$e.da&&$e.capture==B){var Wn=$e.listener,Zr=$e.ha||$e.src;$e.fa&&Q(p.i,$e),ie=Wn.call(Zr,z)!==!1&&ie}}return ie&&!z.defaultPrevented}function N(p,I,B){if(typeof p=="function")B&&(p=h(p,B));else if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:a.setTimeout(p,I||0)}function G(p){p.g=N(()=>{p.g=null,p.i&&(p.i=!1,G(p))},p.l);const I=p.h;p.h=null,p.m.apply(null,I)}class ee extends ue{constructor(I,B){super(),this.m=I,this.l=B,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(p){ue.call(this),this.h=p,this.g={}}m(ae,ue);var ye=[];function Bt(p){R(p.g,function(I,B){this.g.hasOwnProperty(B)&&ke(I)},p),p.g={}}ae.prototype.N=function(){ae.aa.N.call(this),Bt(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=a.JSON.stringify,nn=a.JSON.parse,zn=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function ln(){}ln.prototype.h=null;function E_(p){return p.h||(p.h=p.i())}function A_(){}var Bu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lu(){Ee.call(this,"d")}m(Lu,Ee);function kp(){Ee.call(this,"c")}m(kp,Ee);var rc={},C_=null;function Dp(){return C_=C_||new ft}rc.La="serverreachability";function I_(p){Ee.call(this,rc.La,p)}m(I_,Ee);function Ah(p){const I=Dp();F(I,new I_(I))}rc.STAT_EVENT="statevent";function dl(p,I){Ee.call(this,rc.STAT_EVENT,p),this.stat=I}m(dl,Ee);function Br(p){const I=Dp();F(I,new dl(I,p))}rc.Ma="timingevent";function T_(p,I){Ee.call(this,rc.Ma,p),this.size=I}m(T_,Ee);function Ch(p,I){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},I)}function Ih(){this.g=!0}Ih.prototype.xa=function(){this.g=!1};function JT(p,I,B,z,ie,he){p.info(function(){if(p.g)if(he)for(var $e="",Wn=he.split("&"),Zr=0;Zr<Wn.length;Zr++){var bn=Wn[Zr].split("=");if(1<bn.length){var ds=bn[0];bn=bn[1];var hs=ds.split("_");$e=2<=hs.length&&hs[1]=="type"?$e+(ds+"="+bn+"&"):$e+(ds+"=redacted&")}}else $e=null;else $e=he;return"XMLHTTP REQ ("+z+") [attempt "+ie+"]: "+I+`
`+B+`
`+$e})}function XT(p,I,B,z,ie,he,$e){p.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ie+"]: "+I+`
`+B+`
`+he+" "+$e})}function sc(p,I,B,z){p.info(function(){return"XMLHTTP TEXT ("+I+"): "+Mp(p,B)+(z?" "+z:"")})}function $u(p,I){p.info(function(){return"TIMEOUT: "+I})}Ih.prototype.info=function(){};function Mp(p,I){if(!p.g)return I;if(!I)return null;try{var B=JSON.parse(I);if(B){for(p=0;p<B.length;p++)if(Array.isArray(B[p])){var z=B[p];if(!(2>z.length)){var ie=z[1];if(Array.isArray(ie)&&!(1>ie.length)){var he=ie[0];if(he!="noop"&&he!="stop"&&he!="close")for(var $e=1;$e<ie.length;$e++)ie[$e]=""}}}}return Gt(B)}catch{return I}}var Bp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ky;function $p(){}m($p,ln),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},ky=new $p;function ii(p,I,B,z){this.j=p,this.i=I,this.l=B,this.R=z||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new us}function us(){this.i=null,this.g="",this.h=!1}var Fs={},Is={};function Yr(p,I,B){p.L=1,p.v=pl(Nr(I)),p.m=B,p.P=!0,Th(p,null)}function Th(p,I){p.F=Date.now(),ba(p),p.A=Nr(p.v);var B=p.A,z=p.R;Array.isArray(z)||(z=[String(z)]),jp(B.i,"t",z),p.C=0,B=p.j.J,p.h=new us,p.g=F_(p.j,B?I:null,!p.m),0<p.O&&(p.M=new ee(h(p.Y,p,p.g),p.O)),I=p.U,B=p.g,z=p.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(ye[0]=ie.toString()),ie=ye);for(var he=0;he<ie.length;he++){var $e=we(B,ie[he],z||I.handleEvent,!1,I.h||I);if(!$e)break;I.g[$e.key]=$e}I=p.H?b(p.H):{},p.m?(p.u||(p.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,I)):(p.u="GET",p.g.ea(p.A,p.u,null,I)),Ah(),JT(p.i,p.u,p.A,p.l,p.R,p.m)}ii.prototype.ca=function(p){p=p.target;const I=this.M;I&&js(p)==3?I.j():this.Y(p)},ii.prototype.Y=function(p){try{if(p==this.g)e:{const hs=js(this.g);var I=this.g.Ba();const fs=this.g.Z();if(!(3>hs)&&(hs!=3||this.g&&(this.h.h||this.g.oa()||B_(this.g)))){this.J||hs!=4||I==7||(I==8||0>=fs?Ah(3):Ah(2)),Sh(this);var B=this.g.Z();this.X=B;t:if(hl(this)){var z=B_(this.g);p="";var ie=z.length,he=js(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ic(this),Do(this);var $e="";break t}this.h.i=new a.TextDecoder}for(I=0;I<ie;I++)this.h.h=!0,p+=this.h.i.decode(z[I],{stream:!(he&&I==ie-1)});z.length=0,this.h.g+=p,this.C=0,$e=this.h.g}else $e=this.g.oa();if(this.o=B==200,XT(this.i,this.u,this.A,this.l,this.R,hs,B),this.o){if(this.T&&!this.K){t:{if(this.g){var Wn,Zr=this.g;if((Wn=Zr.g?Zr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Wn)){var bn=Wn;break t}}bn=null}if(B=bn)sc(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xh(this,B);else{this.o=!1,this.s=3,Br(12),ic(this),Do(this);break e}}if(this.P){B=!0;let xi;for(;!this.J&&this.C<$e.length;)if(xi=fl(this,$e),xi==Is){hs==4&&(this.s=4,Br(14),B=!1),sc(this.i,this.l,null,"[Incomplete Response]");break}else if(xi==Fs){this.s=4,Br(15),sc(this.i,this.l,$e,"[Invalid Chunk]"),B=!1;break}else sc(this.i,this.l,xi,null),xh(this,xi);if(hl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hs!=4||$e.length!=0||this.h.h||(this.s=1,Br(16),B=!1),this.o=this.o&&B,!B)sc(this.i,this.l,$e,"[Invalid Chunked Response]"),ic(this),Do(this);else if(0<$e.length&&!this.W){this.W=!0;var ds=this.j;ds.g==this&&ds.ba&&!ds.M&&(ds.j.info("Great, no buffering proxy detected. Bytes received: "+$e.length),Zy(ds),ds.M=!0,Br(11))}}else sc(this.i,this.l,$e,null),xh(this,$e);hs==4&&ic(this),this.o&&!this.J&&(hs==4?Jy(this.j,this):(this.o=!1,ba(this)))}else L_(this.g),B==400&&0<$e.indexOf("Unknown SID")?(this.s=3,Br(12)):(this.s=0,Br(13)),ic(this),Do(this)}}}catch{}finally{}};function hl(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function fl(p,I){var B=p.C,z=I.indexOf(`
`,B);return z==-1?Is:(B=Number(I.substring(B,z)),isNaN(B)?Fs:(z+=1,z+B>I.length?Is:(I=I.slice(z,z+B),p.C=z+B,I)))}ii.prototype.cancel=function(){this.J=!0,ic(this)};function ba(p){p.S=Date.now()+p.I,Dy(p,p.I)}function Dy(p,I){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Ch(h(p.ba,p),I)}function Sh(p){p.B&&(a.clearTimeout(p.B),p.B=null)}ii.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?($u(this.i,this.A),this.L!=2&&(Ah(),Br(17)),ic(this),this.s=2,Do(this)):Dy(this,this.S-p)};function Do(p){p.j.G==0||p.J||Jy(p.j,p)}function ic(p){Sh(p);var I=p.M;I&&typeof I.ma=="function"&&I.ma(),p.M=null,Bt(p.U),p.g&&(I=p.g,p.g=null,I.abort(),I.ma())}function xh(p,I){try{var B=p.j;if(B.G!=0&&(B.g==p||Up(B.h,p))){if(!p.K&&Up(B.h,p)&&B.G==3){try{var z=B.Da.g.parse(I)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ie=z;if(ie[0]==0){e:if(!B.u){if(B.g)if(B.g.F+3e3<p.F)Dh(B),Nh(B);else break e;Yy(B),Br(18)}}else B.za=ie[1],0<B.za-B.T&&37500>ie[2]&&B.F&&B.v==0&&!B.C&&(B.C=Ch(h(B.Za,B),6e3));if(1>=$y(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else Ea(B,11)}else if((p.K||B.g==p)&&Dh(B),!_(I))for(ie=B.Da.g.parse(I),I=0;I<ie.length;I++){let bn=ie[I];if(B.T=bn[0],bn=bn[1],B.G==2)if(bn[0]=="c"){B.K=bn[1],B.ia=bn[2];const ds=bn[3];ds!=null&&(B.la=ds,B.j.info("VER="+B.la));const hs=bn[4];hs!=null&&(B.Aa=hs,B.j.info("SVER="+B.Aa));const fs=bn[5];fs!=null&&typeof fs=="number"&&0<fs&&(z=1.5*fs,B.L=z,B.j.info("backChannelRequestTimeoutMs_="+z)),z=B;const xi=p.g;if(xi){const Mh=xi.g?xi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mh){var he=z.h;he.g||Mh.indexOf("spdy")==-1&&Mh.indexOf("quic")==-1&&Mh.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Fp(he,he.h),he.h=null))}if(z.D){const Qp=xi.g?xi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qp&&(z.ya=Qp,In(z.I,z.D,Qp))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-p.F,B.j.info("Handshake RTT: "+B.R+"ms")),z=B;var $e=p;if(z.qa=Xy(z,z.J?z.ia:null,z.W),$e.K){Uy(z.h,$e);var Wn=$e,Zr=z.L;Zr&&(Wn.I=Zr),Wn.B&&(Sh(Wn),ba(Wn)),z.g=$e}else kh(z);0<B.i.length&&Oh(B)}else bn[0]!="stop"&&bn[0]!="close"||Ea(B,7);else B.G==3&&(bn[0]=="stop"||bn[0]=="close"?bn[0]=="stop"?Ea(B,7):zp(B):bn[0]!="noop"&&B.l&&B.l.ta(bn),B.v=0)}}Ah(4)}catch{}}var My=class{constructor(p,I){this.g=p,this.map=I}};function By(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ly(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function $y(p){return p.h?1:p.g?p.g.size:0}function Up(p,I){return p.h?p.h==I:p.g?p.g.has(I):!1}function Fp(p,I){p.g?p.g.add(I):p.h=I}function Uy(p,I){p.h&&p.h==I?p.h=null:p.g&&p.g.has(I)&&p.g.delete(I)}By.prototype.cancel=function(){if(this.i=Fy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Fy(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let I=p.i;for(const B of p.g.values())I=I.concat(B.D);return I}return g(p.i)}function S_(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var I=[],B=p.length,z=0;z<B;z++)I.push(p[z]);return I}I=[],B=0;for(z in p)I[B++]=p[z];return I}function x_(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var I=[];p=p.length;for(var B=0;B<p;B++)I.push(B);return I}I=[],B=0;for(const z in p)I[B++]=z;return I}}}function jy(p,I){if(p.forEach&&typeof p.forEach=="function")p.forEach(I,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,I,void 0);else for(var B=x_(p),z=S_(p),ie=z.length,he=0;he<ie;he++)I.call(void 0,z[he],B&&B[he],p)}var io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oi(p,I){if(p){p=p.split("&");for(var B=0;B<p.length;B++){var z=p[B].indexOf("="),ie=null;if(0<=z){var he=p[B].substring(0,z);ie=p[B].substring(z+1)}else he=p[B];I(he,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function ai(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ai){this.h=p.h,Uu(this,p.j),this.o=p.o,this.g=p.g,Fu(this,p.s),this.l=p.l;var I=p.i,B=new Si;B.i=I.i,I.g&&(B.g=new Map(I.g),B.h=I.h),oo(this,B),this.m=p.m}else p&&(I=String(p).match(io))?(this.h=!1,Uu(this,I[1]||"",!0),this.o=Mo(I[2]||""),this.g=Mo(I[3]||"",!0),Fu(this,I[4]),this.l=Mo(I[5]||"",!0),oo(this,I[6]||"",!0),this.m=Mo(I[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}ai.prototype.toString=function(){var p=[],I=this.j;I&&p.push(ml(I,gl,!0),":");var B=this.g;return(B||I=="file")&&(p.push("//"),(I=this.o)&&p.push(ml(I,gl,!0),"@"),p.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.s,B!=null&&p.push(":",String(B))),(B=this.l)&&(this.g&&B.charAt(0)!="/"&&p.push("/"),p.push(ml(B,B.charAt(0)=="/"?R_:Vy,!0))),(B=this.i.toString())&&p.push("?",B),(B=this.m)&&p.push("#",ml(B,eS)),p.join("")};function Nr(p){return new ai(p)}function Uu(p,I,B){p.j=B?Mo(I,!0):I,p.j&&(p.j=p.j.replace(/:$/,""))}function Fu(p,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);p.s=I}else p.s=null}function oo(p,I,B){I instanceof Si?(p.i=I,N_(p.i,p.h)):(B||(I=ml(I,_a)),p.i=new Si(I,p.h))}function In(p,I,B){p.i.set(I,B)}function pl(p){return In(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Mo(p,I){return p?I?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ml(p,I,B){return typeof p=="string"?(p=encodeURI(p).replace(I,P_),B&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function P_(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var gl=/[#\/\?@]/g,Vy=/[#\?:]/g,R_=/[#\?]/g,_a=/[#\?@]/g,eS=/#/g;function Si(p,I){this.h=this.g=null,this.i=p||null,this.j=!!I}function ao(p){p.g||(p.g=new Map,p.h=0,p.i&&oi(p.i,function(I,B){p.add(decodeURIComponent(I.replace(/\+/g," ")),B)}))}t=Si.prototype,t.add=function(p,I){ao(this),this.i=null,p=Bo(this,p);var B=this.g.get(p);return B||this.g.set(p,B=[]),B.push(I),this.h+=1,this};function Hy(p,I){ao(p),I=Bo(p,I),p.g.has(I)&&(p.i=null,p.h-=p.g.get(I).length,p.g.delete(I))}function ju(p,I){return ao(p),I=Bo(p,I),p.g.has(I)}t.forEach=function(p,I){ao(this),this.g.forEach(function(B,z){B.forEach(function(ie){p.call(I,ie,z,this)},this)},this)},t.na=function(){ao(this);const p=Array.from(this.g.values()),I=Array.from(this.g.keys()),B=[];for(let z=0;z<I.length;z++){const ie=p[z];for(let he=0;he<ie.length;he++)B.push(I[z])}return B},t.V=function(p){ao(this);let I=[];if(typeof p=="string")ju(this,p)&&(I=I.concat(this.g.get(Bo(this,p))));else{p=Array.from(this.g.values());for(let B=0;B<p.length;B++)I=I.concat(p[B])}return I},t.set=function(p,I){return ao(this),this.i=null,p=Bo(this,p),ju(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[I]),this.h+=1,this},t.get=function(p,I){return p?(p=this.V(p),0<p.length?String(p[0]):I):I};function jp(p,I,B){Hy(p,I),0<B.length&&(p.i=null,p.g.set(Bo(p,I),g(B)),p.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],I=Array.from(this.g.keys());for(var B=0;B<I.length;B++){var z=I[B];const he=encodeURIComponent(String(z)),$e=this.V(z);for(z=0;z<$e.length;z++){var ie=he;$e[z]!==""&&(ie+="="+encodeURIComponent(String($e[z]))),p.push(ie)}}return this.i=p.join("&")};function Bo(p,I){return I=String(I),p.j&&(I=I.toLowerCase()),I}function N_(p,I){I&&!p.j&&(ao(p),p.i=null,p.g.forEach(function(B,z){var ie=z.toLowerCase();z!=ie&&(Hy(this,z),jp(this,ie,B))},p)),p.j=I}function O_(p,I){const B=new Ih;if(a.Image){const z=new Image;z.onload=f(ci,B,"TestLoadImage: loaded",!0,I,z),z.onerror=f(ci,B,"TestLoadImage: error",!1,I,z),z.onabort=f(ci,B,"TestLoadImage: abort",!1,I,z),z.ontimeout=f(ci,B,"TestLoadImage: timeout",!1,I,z),a.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=p}else I(!1)}function k_(p,I){const B=new Ih,z=new AbortController,ie=setTimeout(()=>{z.abort(),ci(B,"TestPingServer: timeout",!1,I)},1e4);fetch(p,{signal:z.signal}).then(he=>{clearTimeout(ie),he.ok?ci(B,"TestPingServer: ok",!0,I):ci(B,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ie),ci(B,"TestPingServer: error",!1,I)})}function ci(p,I,B,z,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),z(B)}catch{}}function tS(){this.g=new zn}function D_(p,I,B){const z=B||"";try{jy(p,function(ie,he){let $e=ie;l(ie)&&($e=Gt(ie)),I.push(z+he+"="+encodeURIComponent($e))})}catch(ie){throw I.push(z+"type="+encodeURIComponent("_badmap")),ie}}function Vu(p){this.l=p.Ub||null,this.j=p.eb||!1}m(Vu,ln),Vu.prototype.g=function(){return new yl(this.l,this.j)},Vu.prototype.i=(function(p){return function(){return p}})({});function yl(p,I){ft.call(this),this.D=p,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(yl,ft),t=yl.prototype,t.open=function(p,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=I,this.readyState=1,oc(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(I.body=p),(this.D||a).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ph(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,oc(this)),this.g&&(this.readyState=3,oc(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vp(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vp(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var I=p.value?p.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!p.done}))&&(this.response=this.responseText+=I)}p.done?Ph(this):oc(this),this.readyState==3&&Vp(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Ph(this))},t.Qa=function(p){this.g&&(this.response=p,Ph(this))},t.ga=function(){this.g&&Ph(this)};function Ph(p){p.readyState=4,p.l=null,p.j=null,p.v=null,oc(p)}t.setRequestHeader=function(p,I){this.u.append(p,I)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],I=this.h.entries();for(var B=I.next();!B.done;)B=B.value,p.push(B[0]+": "+B[1]),B=I.next();return p.join(`\r
`)};function oc(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function M_(p){let I="";return R(p,function(B,z){I+=z,I+=":",I+=B,I+=`\r
`}),I}function Hp(p,I,B){e:{for(z in B){var z=!1;break e}z=!0}z||(B=M_(B),typeof p=="string"?B!=null&&encodeURIComponent(String(B)):In(p,I,B))}function lr(p){ft.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(lr,ft);var qy=/^https?$/i,zy=["POST","PUT"];t=lr.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,I,B,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);I=I?I.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ky.g(),this.v=this.o?E_(this.o):E_(ky),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(I,String(p),!0),this.B=!1}catch(he){Wy(this,he);return}if(p=B||"",B=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ie in z)B.set(ie,z[ie]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const he of z.keys())B.set(he,z.get(he));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(B.keys()).find(he=>he.toLowerCase()=="content-type"),ie=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zy,I,void 0))||z||ie||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,$e]of B)this.g.setRequestHeader(he,$e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gy(this),this.u=!0,this.g.send(p),this.u=!1}catch(he){Wy(this,he)}};function Wy(p,I){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=I,p.m=5,Hu(p),Rh(p)}function Hu(p){p.A||(p.A=!0,F(p,"complete"),F(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,F(this,"complete"),F(this,"abort"),Rh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rh(this,!0)),lr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qp(this):this.bb())},t.bb=function(){qp(this)};function qp(p){if(p.h&&typeof o<"u"&&(!p.v[1]||js(p)!=4||p.Z()!=2)){if(p.u&&js(p)==4)N(p.Ea,0,p);else if(F(p,"readystatechange"),js(p)==4){p.h=!1;try{const $e=p.Z();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var B;if(!(B=I)){var z;if(z=$e===0){var ie=String(p.D).match(io)[1]||null;!ie&&a.self&&a.self.location&&(ie=a.self.location.protocol.slice(0,-1)),z=!qy.test(ie?ie.toLowerCase():"")}B=z}if(B)F(p,"complete"),F(p,"success");else{p.m=6;try{var he=2<js(p)?p.g.statusText:""}catch{he=""}p.l=he+" ["+p.Z()+"]",Hu(p)}}finally{Rh(p)}}}}function Rh(p,I){if(p.g){Gy(p);const B=p.g,z=p.v[0]?()=>{}:null;p.g=null,p.v=null,I||F(p,"ready");try{B.onreadystatechange=z}catch{}}}function Gy(p){p.I&&(a.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function js(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<js(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var I=this.g.responseText;return p&&I.indexOf(p)==0&&(I=I.substring(p.length)),nn(I)}};function B_(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function L_(p){const I={};p=(p.g&&2<=js(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<p.length;z++){if(_(p[z]))continue;var B=D(p[z]);const ie=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const he=I[ie]||[];I[ie]=he,he.push(B)}T(I,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qu(p,I,B){return B&&B.internalChannelParams&&B.internalChannelParams[p]||I}function Ky(p){this.Aa=0,this.i=[],this.j=new Ih,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qu("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qu("baseRetryDelayMs",5e3,p),this.cb=qu("retryDelaySeedMs",1e4,p),this.Wa=qu("forwardChannelMaxRetries",2,p),this.wa=qu("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new By(p&&p.concurrentRequestLimit),this.Da=new tS,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ky.prototype,t.la=8,t.G=1,t.connect=function(p,I,B,z){Br(0),this.W=p,this.H=I||{},B&&z!==void 0&&(this.H.OSID=B,this.H.OAID=z),this.F=this.X,this.I=Xy(this,null,this.W),Oh(this)};function zp(p){if(Wp(p),p.G==3){var I=p.U++,B=Nr(p.I);if(In(B,"SID",p.K),In(B,"RID",I),In(B,"TYPE","terminate"),zu(p,B),I=new ii(p,p.j,I),I.L=2,I.v=pl(Nr(B)),B=!1,a.navigator&&a.navigator.sendBeacon)try{B=a.navigator.sendBeacon(I.v.toString(),"")}catch{}!B&&a.Image&&(new Image().src=I.v,B=!0),B||(I.g=F_(I.j,null),I.g.ea(I.v)),I.F=Date.now(),ba(I)}U_(p)}function Nh(p){p.g&&(Zy(p),p.g.cancel(),p.g=null)}function Wp(p){Nh(p),p.u&&(a.clearTimeout(p.u),p.u=null),Dh(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function Oh(p){if(!Ly(p.h)&&!p.s){p.s=!0;var I=p.Ga;W||V(),Y||(W(),Y=!0),J.add(I,p),p.B=0}}function nS(p,I){return $y(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=I.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Ch(h(p.Ga,p,I),ac(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ie=new ii(this,this.j,p);let he=this.o;if(this.S&&(he?(he=b(he),x(he,this.S)):he=this.S),this.m!==null||this.O||(ie.H=he,he=null),this.P)e:{for(var I=0,B=0;B<this.i.length;B++){t:{var z=this.i[B];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(I+=z,4096<I){I=B;break e}if(I===4096||B===this.i.length-1){I=B+1;break e}}I=1e3}else I=1e3;I=Qy(this,ie,I),B=Nr(this.I),In(B,"RID",p),In(B,"CVER",22),this.D&&In(B,"X-HTTP-Session-Id",this.D),zu(this,B),he&&(this.O?I="headers="+encodeURIComponent(String(M_(he)))+"&"+I:this.m&&Hp(B,this.m,he)),Fp(this.h,ie),this.Ua&&In(B,"TYPE","init"),this.P?(In(B,"$req",I),In(B,"SID","null"),ie.T=!0,Yr(ie,B,null)):Yr(ie,B,I),this.G=2}}else this.G==3&&(p?$_(this,p):this.i.length==0||Ly(this.h)||$_(this))};function $_(p,I){var B;I?B=I.l:B=p.U++;const z=Nr(p.I);In(z,"SID",p.K),In(z,"RID",B),In(z,"AID",p.T),zu(p,z),p.m&&p.o&&Hp(z,p.m,p.o),B=new ii(p,p.j,B,p.B+1),p.m===null&&(B.H=p.o),I&&(p.i=I.D.concat(p.i)),I=Qy(p,B,1e3),B.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Fp(p.h,B),Yr(B,z,I)}function zu(p,I){p.H&&R(p.H,function(B,z){In(I,z,B)}),p.l&&jy({},function(B,z){In(I,z,B)})}function Qy(p,I,B){B=Math.min(p.i.length,B);var z=p.l?h(p.l.Na,p.l,p):null;e:{var ie=p.i;let he=-1;for(;;){const $e=["count="+B];he==-1?0<B?(he=ie[0].g,$e.push("ofs="+he)):he=0:$e.push("ofs="+he);let Wn=!0;for(let Zr=0;Zr<B;Zr++){let bn=ie[Zr].g;const ds=ie[Zr].map;if(bn-=he,0>bn)he=Math.max(0,ie[Zr].g-100),Wn=!1;else try{D_(ds,$e,"req"+bn+"_")}catch{z&&z(ds)}}if(Wn){z=$e.join("&");break e}}}return p=p.i.splice(0,B),I.D=p,z}function kh(p){if(!p.g&&!p.u){p.Y=1;var I=p.Fa;W||V(),Y||(W(),Y=!0),J.add(I,p),p.v=0}}function Yy(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Ch(h(p.Fa,p),ac(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Gp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Ch(h(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Br(10),Nh(this),Gp(this))};function Zy(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function Gp(p){p.g=new ii(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var I=Nr(p.qa);In(I,"RID","rpc"),In(I,"SID",p.K),In(I,"AID",p.T),In(I,"CI",p.F?"0":"1"),!p.F&&p.ja&&In(I,"TO",p.ja),In(I,"TYPE","xmlhttp"),zu(p,I),p.m&&p.o&&Hp(I,p.m,p.o),p.L&&(p.g.I=p.L);var B=p.g;p=p.ia,B.L=1,B.v=pl(Nr(I)),B.m=null,B.P=!0,Th(B,p)}t.Za=function(){this.C!=null&&(this.C=null,Nh(this),Yy(this),Br(19))};function Dh(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function Jy(p,I){var B=null;if(p.g==I){Dh(p),Zy(p),p.g=null;var z=2}else if(Up(p.h,I))B=I.D,Uy(p.h,I),z=1;else return;if(p.G!=0){if(I.o)if(z==1){B=I.m?I.m.length:0,I=Date.now()-I.F;var ie=p.B;z=Dp(),F(z,new T_(z,B)),Oh(p)}else kh(p);else if(ie=I.s,ie==3||ie==0&&0<I.X||!(z==1&&nS(p,I)||z==2&&Yy(p)))switch(B&&0<B.length&&(I=p.h,I.i=I.i.concat(B)),ie){case 1:Ea(p,5);break;case 4:Ea(p,10);break;case 3:Ea(p,6);break;default:Ea(p,2)}}}function ac(p,I){let B=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(B*=2),B*I}function Ea(p,I){if(p.j.info("Error code "+I),I==2){var B=h(p.fb,p),z=p.Xa;const ie=!z;z=new ai(z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Uu(z,"https"),pl(z),ie?O_(z.toString(),B):k_(z.toString(),B)}else Br(2);p.G=0,p.l&&p.l.sa(I),U_(p),Wp(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Br(2)):(this.j.info("Failed to ping google.com"),Br(1))};function U_(p){if(p.G=0,p.ka=[],p.l){const I=Fy(p.h);(I.length!=0||p.i.length!=0)&&(y(p.ka,I),y(p.ka,p.i),p.h.i.length=0,g(p.i),p.i.length=0),p.l.ra()}}function Xy(p,I,B){var z=B instanceof ai?Nr(B):new ai(B);if(z.g!="")I&&(z.g=I+"."+z.g),Fu(z,z.s);else{var ie=a.location;z=ie.protocol,I=I?I+"."+ie.hostname:ie.hostname,ie=+ie.port;var he=new ai(null);z&&Uu(he,z),I&&(he.g=I),ie&&Fu(he,ie),B&&(he.l=B),z=he}return B=p.D,I=p.ya,B&&I&&In(z,B,I),In(z,"VER",p.la),zu(p,z),z}function F_(p,I,B){if(I&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=p.Ca&&!p.pa?new lr(new Vu({eb:B})):new lr(p.pa),I.Ha(p.J),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function j_(){}t=j_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kp(){}Kp.prototype.g=function(p,I){return new li(p,I)};function li(p,I){ft.call(this),this.g=new Ky(I),this.l=p,this.h=I&&I.messageUrlParams||null,p=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(p?p["X-WebChannel-Content-Type"]=I.messageContentType:p={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(p?p["X-WebChannel-Client-Profile"]=I.va:p={"X-WebChannel-Client-Profile":I.va}),this.g.S=p,(p=I&&I.Sb)&&!_(p)&&(this.g.m=p),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!_(I)&&(this.g.D=I,p=this.h,p!==null&&I in p&&(p=this.h,I in p&&delete p[I])),this.j=new Wu(this)}m(li,ft),li.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},li.prototype.close=function(){zp(this.g)},li.prototype.o=function(p){var I=this.g;if(typeof p=="string"){var B={};B.__data__=p,p=B}else this.u&&(B={},B.__data__=Gt(p),p=B);I.i.push(new My(I.Ya++,p)),I.G==3&&Oh(I)},li.prototype.N=function(){this.g.l=null,delete this.j,zp(this.g),delete this.g,li.aa.N.call(this)};function e0(p){Lu.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var I=p.__sm__;if(I){e:{for(const B in I){p=B;break e}p=void 0}(this.i=p)&&(p=this.i,I=I!==null&&p in I?I[p]:void 0),this.data=I}else this.data=p}m(e0,Lu);function t0(){kp.call(this),this.status=1}m(t0,kp);function Wu(p){this.g=p}m(Wu,j_),Wu.prototype.ua=function(){F(this.g,"a")},Wu.prototype.ta=function(p){F(this.g,new e0(p))},Wu.prototype.sa=function(p){F(this.g,new t0)},Wu.prototype.ra=function(){F(this.g,"b")},Kp.prototype.createWebChannel=Kp.prototype.g,li.prototype.send=li.prototype.o,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,fQ=function(){return new Kp},hQ=function(){return Dp()},dQ=rc,NN={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bp.NO_ERROR=0,Bp.TIMEOUT=8,Bp.HTTP_ERROR=6,P1=Bp,Lp.COMPLETE="complete",uQ=Lp,A_.EventType=Bu,Bu.OPEN="a",Bu.CLOSE="b",Bu.ERROR="c",Bu.MESSAGE="d",ft.prototype.listen=ft.prototype.K,G0=A_,lr.prototype.listenOnce=lr.prototype.L,lr.prototype.getLastError=lr.prototype.Ka,lr.prototype.getLastErrorCode=lr.prototype.Ba,lr.prototype.getStatus=lr.prototype.Z,lr.prototype.getResponseJson=lr.prototype.Oa,lr.prototype.getResponseText=lr.prototype.oa,lr.prototype.send=lr.prototype.ea,lr.prototype.setWithCredentials=lr.prototype.Ha,lQ=lr}).apply(typeof FE<"u"?FE:typeof self<"u"?self:typeof window<"u"?window:{});const Y4="@firebase/firestore",Z4="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ys.UNAUTHENTICATED=new Ys(null),Ys.GOOGLE_CREDENTIALS=new Ys("google-credentials-uid"),Ys.FIRST_PARTY=new Ys("first-party-uid"),Ys.MOCK_USER=new Ys("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xy="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=new TT("@firebase/firestore");function Mm(){return lp.logLevel}function st(t,...e){if(lp.logLevel<=dn.DEBUG){const n=e.map(JD);lp.debug(`Firestore (${xy}): ${t}`,...n)}}function Cu(t,...e){if(lp.logLevel<=dn.ERROR){const n=e.map(JD);lp.error(`Firestore (${xy}): ${t}`,...n)}}function Yg(t,...e){if(lp.logLevel<=dn.WARN){const n=e.map(JD);lp.warn(`Firestore (${xy}): ${t}`,...n)}}function JD(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pQ(t,r,n)}function pQ(t,e,n){let r=`FIRESTORE (${xy}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Cu(r),new Error(r)}function Hn(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||pQ(e,s,r)}function zt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends nc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FUe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ys.UNAUTHENTICATED)))}shutdown(){}}class jUe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class VUe{constructor(e){this.t=e,this.currentUser=Ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Hn(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new uu;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new uu,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new uu)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Hn(typeof r.accessToken=="string",31837,{l:r}),new mQ(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Hn(e===null||typeof e=="string",2055,{h:e}),new Ys(e)}}class HUe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ys.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qUe{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new HUe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ys.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zUe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ra(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Hn(this.o===void 0,3512);const r=i=>{i.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,st("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Hn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new J4(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WUe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=WUe(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function hn(t,e){return t<e?-1:t>e?1:0}function ON(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return T2(s)===T2(i)?hn(s,i):T2(s)?1:-1}return hn(t.length,e.length)}const GUe=55296,KUe=57343;function T2(t){const e=t.charCodeAt(0);return e>=GUe&&e<=KUe}function Zg(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="__name__";class Ic{constructor(e,n,r){n===void 0?n=0:n>e.length&&Nt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Nt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ic.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ic?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ic.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return hn(e.length,n.length)}static compareSegments(e,n){const r=Ic.isNumericId(e),s=Ic.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ic.extractNumericId(e).compare(Ic.extractNumericId(n)):ON(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kd.fromString(e.substring(4,e.length-2))}}class gr extends Ic{construct(e,n,r){return new gr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ye(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new gr(n)}static emptyPath(){return new gr([])}}const QUe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ds extends Ic{construct(e,n,r){return new Ds(e,n,r)}static isValidIdentifier(e){return QUe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ds.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X4}static keyField(){return new Ds([X4])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ye(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Ye(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ye(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Ye(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ds(n)}static emptyPath(){return new Ds([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.path=e}static fromPath(e){return new wt(gr.fromString(e))}static fromName(e){return new wt(gr.fromString(e).popFirst(5))}static empty(){return new wt(gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new gr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gQ(t,e,n){if(!n)throw new Ye(_e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YUe(t,e,n,r){if(e===!0&&r===!0)throw new Ye(_e.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eU(t){if(!wt.isDocumentKey(t))throw new Ye(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tU(t){if(wt.isDocumentKey(t))throw new Ye(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yQ(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function RT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Nt(12329,{type:typeof t})}function Iu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ye(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=RT(t);throw new Ye(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t,e){const n={typeString:t};return e&&(n.value=e),n}function d_(t,e){if(!yQ(t))throw new Ye(_e.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Ye(_e.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=-62135596800,rU=1e6;class br{static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rU);return new br(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ye(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ye(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nU)throw new Ye(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rU}_compareTo(e){return this.seconds===e.seconds?hn(this.nanoseconds,e.nanoseconds):hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:br._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(d_(e,br._jsonSchema))return new br(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nU;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}br._jsonSchemaVersion="firestore/timestamp/1.0",br._jsonSchema={type:Qr("string",br._jsonSchemaVersion),seconds:Qr("number"),nanoseconds:Qr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new br(0,0))}static max(){return new Ft(new br(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=-1;function ZUe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ft.fromTimestamp(r===1e9?new br(n+1,0):new br(n,r));return new lh(s,wt.empty(),e)}function JUe(t){return new lh(t.readTime,t.key,pb)}class lh{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new lh(Ft.min(),wt.empty(),pb)}static max(){return new lh(Ft.max(),wt.empty(),pb)}}function XUe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=wt.comparator(t.documentKey,e.documentKey),n!==0?n:hn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eFe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tFe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Py(t){if(t.code!==_e.FAILED_PRECONDITION||t.message!==eFe)throw t;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ae(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ae?n:Ae.resolve(n)}catch(n){return Ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ae.reject(n)}static resolve(e){return new Ae(((n,r)=>{n(e)}))}static reject(e){return new Ae(((n,r)=>{r(e)}))}static waitFor(e){return new Ae(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=Ae.resolve(!1);for(const r of e)n=n.next((s=>s?Ae.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new Ae(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next((u=>{o[l]=u,++a,a===i&&r(o)}),(u=>s(u)))}}))}static doWhile(e,n){return new Ae(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function nFe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ry(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}NT.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=-1;function OT(t){return t==null}function UC(t){return t===0&&1/t==-1/0}function rFe(t){return typeof t=="number"&&Number.isInteger(t)&&!UC(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wQ="";function sFe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sU(e)),e=iFe(t.get(n),e);return sU(e)}function iFe(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case wQ:n+="";break;default:n+=i}}return n}function sU(t){return t+wQ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _h(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vQ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){this.comparator=e,this.root=n||Ns.EMPTY}insert(e,n){return new Rr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ns.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ns.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jE(this.root,e,this.comparator,!1)}getReverseIterator(){return new jE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jE(this.root,e,this.comparator,!0)}}class jE{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ns{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ns.RED,this.left=s??Ns.EMPTY,this.right=i??Ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ns(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ns.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Nt(27949);return e+(this.isRed()?0:1)}}Ns.EMPTY=null,Ns.RED=!0,Ns.BLACK=!1;Ns.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt(57766)}get value(){throw Nt(16141)}get color(){throw Nt(16727)}get left(){throw Nt(29726)}get right(){throw Nt(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ns(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oU(this.data.getIterator())}getIteratorFrom(e){return new oU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof cs)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new cs(this.comparator);return n.data=e,n}}class oU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.fields=e,e.sort(Ds.comparator)}static empty(){return new _o([])}unionWith(e){let n=new cs(Ds.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _o(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zg(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bQ("Invalid base64 string: "+i):i}})(e);return new Bs(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Bs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bs.EMPTY_BYTE_STRING=new Bs("");const oFe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uh(t){if(Hn(!!t,39018),typeof t=="string"){let e=0;const n=oFe.exec(t);if(Hn(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ur(t.seconds),nanos:Ur(t.nanos)}}function Ur(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dh(t){return typeof t=="string"?Bs.fromBase64String(t):Bs.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Q="server_timestamp",EQ="__type__",AQ="__previous_value__",CQ="__local_write_time__";function t6(t){return(t?.mapValue?.fields||{})[EQ]?.stringValue===_Q}function kT(t){const e=t.mapValue.fields[AQ];return t6(e)?kT(e):e}function mb(t){const e=uh(t.mapValue.fields[CQ].timestampValue);return new br(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aFe{constructor(e,n,r,s,i,o,a,c,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}}const FC="(default)";class gb{constructor(e,n){this.projectId=e,this.database=n||FC}static empty(){return new gb("","")}get isDefaultDatabase(){return this.database===FC}isEqual(e){return e instanceof gb&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ="__type__",cFe="__max__",VE={mapValue:{}},TQ="__vector__",jC="value";function hh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?t6(t)?4:uFe(t)?9007199254740991:lFe(t)?10:11:Nt(28295,{value:t})}function ol(t,e){if(t===e)return!0;const n=hh(t);if(n!==hh(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mb(t).isEqual(mb(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=uh(s.timestampValue),a=uh(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return dh(s.bytesValue).isEqual(dh(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ur(s.geoPointValue.latitude)===Ur(i.geoPointValue.latitude)&&Ur(s.geoPointValue.longitude)===Ur(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ur(s.integerValue)===Ur(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ur(s.doubleValue),a=Ur(i.doubleValue);return o===a?UC(o)===UC(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Zg(t.arrayValue.values||[],e.arrayValue.values||[],ol);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(iU(o)!==iU(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ol(o[c],a[c])))return!1;return!0})(t,e);default:return Nt(52216,{left:t})}}function yb(t,e){return(t.values||[]).find((n=>ol(n,e)))!==void 0}function Jg(t,e){if(t===e)return 0;const n=hh(t),r=hh(e);if(n!==r)return hn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return hn(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=Ur(i.integerValue||i.doubleValue),c=Ur(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return aU(t.timestampValue,e.timestampValue);case 4:return aU(mb(t),mb(e));case 5:return ON(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=dh(i),c=dh(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=hn(a[l],c[l]);if(u!==0)return u}return hn(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=hn(Ur(i.latitude),Ur(o.latitude));return a!==0?a:hn(Ur(i.longitude),Ur(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return cU(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},c=o.fields||{},l=a[jC]?.arrayValue,u=c[jC]?.arrayValue,d=hn(l?.values?.length||0,u?.values?.length||0);return d!==0?d:cU(l,u)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===VE.mapValue&&o===VE.mapValue)return 0;if(i===VE.mapValue)return 1;if(o===VE.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){const h=ON(c[d],u[d]);if(h!==0)return h;const f=Jg(a[c[d]],l[u[d]]);if(f!==0)return f}return hn(c.length,u.length)})(t.mapValue,e.mapValue);default:throw Nt(23264,{he:n})}}function aU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return hn(t,e);const n=uh(t),r=uh(e),s=hn(n.seconds,r.seconds);return s!==0?s:hn(n.nanos,r.nanos)}function cU(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Jg(n[s],r[s]);if(i)return i}return hn(n.length,r.length)}function Xg(t){return kN(t)}function kN(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=uh(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dh(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return wt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=kN(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${kN(n.fields[o])}`;return s+"}"})(t.mapValue):Nt(61005,{value:t})}function R1(t){switch(hh(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kT(t);return e?16+R1(e):16;case 5:return 2*t.stringValue.length;case 6:return dh(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+R1(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return _h(r.fields,((i,o)=>{s+=i.length+R1(o)})),s})(t.mapValue);default:throw Nt(13486,{value:t})}}function lU(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function DN(t){return!!t&&"integerValue"in t}function n6(t){return!!t&&"arrayValue"in t}function uU(t){return!!t&&"nullValue"in t}function dU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function N1(t){return!!t&&"mapValue"in t}function lFe(t){return(t?.mapValue?.fields||{})[IQ]?.stringValue===TQ}function Sw(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _h(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Sw(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sw(t.arrayValue.values[n]);return e}return{...t}}function uFe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cFe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!N1(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sw(n)}setAll(e){let n=Ds.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Sw(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());N1(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ol(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];N1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_h(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Gi(Sw(this.value))}}function SQ(t){const e=[];return _h(t.fields,((n,r)=>{const s=new Ds([n]);if(N1(r)){const i=SQ(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new _o(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Js(e,0,Ft.min(),Ft.min(),Ft.min(),Gi.empty(),0)}static newFoundDocument(e,n,r,s){return new Js(e,1,n,Ft.min(),r,s,0)}static newNoDocument(e,n){return new Js(e,2,n,Ft.min(),Ft.min(),Gi.empty(),0)}static newUnknownDocument(e,n){return new Js(e,3,n,Ft.min(),Ft.min(),Gi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Js&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Js(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.position=e,this.inclusive=n}}function hU(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=wt.comparator(wt.fromName(o.referenceValue),n.key):r=Jg(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function fU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ol(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n="asc"){this.field=e,this.dir=n}}function dFe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{}class Kr extends xQ{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fFe(e,n,r):n==="array-contains"?new gFe(e,r):n==="in"?new yFe(e,r):n==="not-in"?new wFe(e,r):n==="array-contains-any"?new vFe(e,r):new Kr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pFe(e,r):new mFe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jg(n,this.value)):n!==null&&hh(this.value)===hh(n)&&this.matchesComparison(Jg(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xa extends xQ{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xa(e,n)}matches(e){return PQ(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function PQ(t){return t.op==="and"}function RQ(t){return hFe(t)&&PQ(t)}function hFe(t){for(const e of t.filters)if(e instanceof Xa)return!1;return!0}function MN(t){if(t instanceof Kr)return t.field.canonicalString()+t.op.toString()+Xg(t.value);if(RQ(t))return t.filters.map((e=>MN(e))).join(",");{const e=t.filters.map((n=>MN(n))).join(",");return`${t.op}(${e})`}}function NQ(t,e){return t instanceof Kr?(function(r,s){return s instanceof Kr&&r.op===s.op&&r.field.isEqual(s.field)&&ol(r.value,s.value)})(t,e):t instanceof Xa?(function(r,s){return s instanceof Xa&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&NQ(o,s.filters[a])),!0):!1})(t,e):void Nt(19439)}function OQ(t){return t instanceof Kr?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xg(n.value)}`})(t):t instanceof Xa?(function(n){return n.op.toString()+" {"+n.getFilters().map(OQ).join(" ,")+"}"})(t):"Filter"}class fFe extends Kr{constructor(e,n,r){super(e,n,r),this.key=wt.fromName(r.referenceValue)}matches(e){const n=wt.comparator(e.key,this.key);return this.matchesComparison(n)}}class pFe extends Kr{constructor(e,n){super(e,"in",n),this.keys=kQ("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class mFe extends Kr{constructor(e,n){super(e,"not-in",n),this.keys=kQ("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function kQ(t,e){return(e.arrayValue?.values||[]).map((n=>wt.fromName(n.referenceValue)))}class gFe extends Kr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return n6(n)&&yb(n.arrayValue,this.value)}}class yFe extends Kr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yb(this.value.arrayValue,n)}}class wFe extends Kr{constructor(e,n){super(e,"not-in",n)}matches(e){if(yb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yb(this.value.arrayValue,n)}}class vFe extends Kr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!n6(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>yb(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bFe{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function pU(t,e=null,n=[],r=[],s=null,i=null,o=null){return new bFe(t,e,n,r,s,i,o)}function r6(t){const e=zt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>MN(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),OT(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Xg(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Xg(r))).join(",")),e.Te=n}return e.Te}function s6(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dFe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NQ(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fU(t.startAt,e.startAt)&&fU(t.endAt,e.endAt)}function BN(t){return wt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _Fe(t,e,n,r,s,i,o,a){return new h_(t,e,n,r,s,i,o,a)}function i6(t){return new h_(t)}function mU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DQ(t){return t.collectionGroup!==null}function xw(t){const e=zt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new cs(Ds.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((l=>{l.isInequality()&&(a=a.add(l.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new HC(i,r))})),n.has(Ds.keyField().canonicalString())||e.Ie.push(new HC(Ds.keyField(),r))}return e.Ie}function zc(t){const e=zt(t);return e.Ee||(e.Ee=EFe(e,xw(t))),e.Ee}function EFe(t,e){if(t.limitType==="F")return pU(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new HC(s.field,i)}));const n=t.endAt?new VC(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new VC(t.startAt.position,t.startAt.inclusive):null;return pU(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function LN(t,e){const n=t.filters.concat([e]);return new h_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $N(t,e,n){return new h_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function DT(t,e){return s6(zc(t),zc(e))&&t.limitType===e.limitType}function MQ(t){return`${r6(zc(t))}|lt:${t.limitType}`}function Bm(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>OQ(s))).join(", ")}]`),OT(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Xg(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Xg(s))).join(",")),`Target(${r})`})(zc(t))}; limitType=${t.limitType})`}function MT(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):wt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of xw(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,c){const l=hU(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,xw(r),s)||r.endAt&&!(function(o,a,c){const l=hU(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,xw(r),s))})(t,e)}function AFe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BQ(t){return(e,n)=>{let r=!1;for(const s of xw(t)){const i=CFe(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function CFe(t,e,n){const r=t.field.isKeyField()?wt.comparator(e.key,n.key):(function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Jg(c,l):Nt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Nt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_h(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return vQ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IFe=new Rr(wt.comparator);function Tu(){return IFe}const LQ=new Rr(wt.comparator);function K0(...t){let e=LQ;for(const n of t)e=e.insert(n.key,n);return e}function $Q(t){let e=LQ;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function _f(){return Pw()}function UQ(){return Pw()}function Pw(){return new Np((t=>t.toString()),((t,e)=>t.isEqual(e)))}const TFe=new Rr(wt.comparator),SFe=new cs(wt.comparator);function pn(...t){let e=SFe;for(const n of t)e=e.add(n);return e}const xFe=new cs(hn);function PFe(){return xFe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:UC(e)?"-0":e}}function FQ(t){return{integerValue:""+t}}function RFe(t,e){return rFe(e)?FQ(e):o6(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this._=void 0}}function NFe(t,e,n){return t instanceof qC?(function(s,i){const o={fields:{[EQ]:{stringValue:_Q},[CQ]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&t6(i)&&(i=kT(i)),i&&(o.fields[AQ]=i),{mapValue:o}})(n,e):t instanceof wb?VQ(t,e):t instanceof vb?HQ(t,e):(function(s,i){const o=jQ(s,i),a=gU(o)+gU(s.Ae);return DN(o)&&DN(s.Ae)?FQ(a):o6(s.serializer,a)})(t,e)}function OFe(t,e,n){return t instanceof wb?VQ(t,e):t instanceof vb?HQ(t,e):n}function jQ(t,e){return t instanceof zC?(function(r){return DN(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class qC extends BT{}class wb extends BT{constructor(e){super(),this.elements=e}}function VQ(t,e){const n=qQ(e);for(const r of t.elements)n.some((s=>ol(s,r)))||n.push(r);return{arrayValue:{values:n}}}class vb extends BT{constructor(e){super(),this.elements=e}}function HQ(t,e){let n=qQ(e);for(const r of t.elements)n=n.filter((s=>!ol(s,r)));return{arrayValue:{values:n}}}class zC extends BT{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function gU(t){return Ur(t.integerValue||t.doubleValue)}function qQ(t){return n6(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kFe(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof wb&&s instanceof wb||r instanceof vb&&s instanceof vb?Zg(r.elements,s.elements,ol):r instanceof zC&&s instanceof zC?ol(r.Ae,s.Ae):r instanceof qC&&s instanceof qC})(t.transform,e.transform)}class DFe{constructor(e,n){this.version=e,this.transformResults=n}}class Wc{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wc}static exists(e){return new Wc(void 0,e)}static updateTime(e){return new Wc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function O1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let LT=class{};function zQ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new GQ(t.key,Wc.none()):new f_(t.key,t.data,Wc.none());{const n=t.data,r=Gi.empty();let s=new cs(Ds.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Eh(t.key,r,new _o(s.toArray()),Wc.none())}}function MFe(t,e,n){t instanceof f_?(function(s,i,o){const a=s.value.clone(),c=wU(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Eh?(function(s,i,o){if(!O1(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=wU(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(WQ(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Rw(t,e,n,r){return t instanceof f_?(function(i,o,a,c){if(!O1(i.precondition,o))return a;const l=i.value.clone(),u=vU(i.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Eh?(function(i,o,a,c){if(!O1(i.precondition,o))return a;const l=vU(i.fieldTransforms,c,o),u=o.data;return u.setAll(WQ(i)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,a){return O1(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function BFe(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=jQ(r.transform,s||null);i!=null&&(n===null&&(n=Gi.empty()),n.set(r.field,i))}return n||null}function yU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zg(r,s,((i,o)=>kFe(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class f_ extends LT{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Eh extends LT{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function WQ(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function wU(t,e,n){const r=new Map;Hn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,OFe(o,a,n[s]))}return r}function vU(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NFe(i,o,e))}return r}class GQ extends LT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LFe extends LT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Fe{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&MFe(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rw(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rw(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UQ();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=zQ(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ft.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),pn())}isEqual(e){return this.batchId===e.batchId&&Zg(this.mutations,e.mutations,((n,r)=>yU(n,r)))&&Zg(this.baseMutations,e.baseMutations,((n,r)=>yU(n,r)))}}class a6{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Hn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return TFe})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new a6(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UFe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FFe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zr,_n;function jFe(t){switch(t){case _e.OK:return Nt(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return Nt(15467,{code:t})}}function KQ(t){if(t===void 0)return Cu("GRPC error has no .code"),_e.UNKNOWN;switch(t){case zr.OK:return _e.OK;case zr.CANCELLED:return _e.CANCELLED;case zr.UNKNOWN:return _e.UNKNOWN;case zr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case zr.INTERNAL:return _e.INTERNAL;case zr.UNAVAILABLE:return _e.UNAVAILABLE;case zr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case zr.NOT_FOUND:return _e.NOT_FOUND;case zr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case zr.ABORTED:return _e.ABORTED;case zr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case zr.DATA_LOSS:return _e.DATA_LOSS;default:return Nt(39323,{code:t})}}(_n=zr||(zr={}))[_n.OK=0]="OK",_n[_n.CANCELLED=1]="CANCELLED",_n[_n.UNKNOWN=2]="UNKNOWN",_n[_n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_n[_n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_n[_n.NOT_FOUND=5]="NOT_FOUND",_n[_n.ALREADY_EXISTS=6]="ALREADY_EXISTS",_n[_n.PERMISSION_DENIED=7]="PERMISSION_DENIED",_n[_n.UNAUTHENTICATED=16]="UNAUTHENTICATED",_n[_n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_n[_n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_n[_n.ABORTED=10]="ABORTED",_n[_n.OUT_OF_RANGE=11]="OUT_OF_RANGE",_n[_n.UNIMPLEMENTED=12]="UNIMPLEMENTED",_n[_n.INTERNAL=13]="INTERNAL",_n[_n.UNAVAILABLE=14]="UNAVAILABLE",_n[_n.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VFe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HFe=new Kd([4294967295,4294967295],0);function bU(t){const e=VFe().encode(t),n=new cQ;return n.update(e),new Uint8Array(n.digest())}function _U(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Kd([n,r],0),new Kd([s,i],0)]}class c6{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Q0(`Invalid padding: ${n}`);if(r<0)throw new Q0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Q0(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Q0(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Kd.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Kd.fromNumber(r)));return s.compare(HFe)===1&&(s=new Kd([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=bU(e),[r,s]=_U(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new c6(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=bU(e),[r,s]=_U(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Q0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,p_.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $T(Ft.min(),s,new Rr(hn),Tu(),pn())}}class p_{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new p_(r,n,pn(),pn(),pn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class QQ{constructor(e,n){this.targetId=e,this.Ce=n}}class YQ{constructor(e,n,r=Bs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class EU{constructor(){this.ve=0,this.Fe=AU(),this.Me=Bs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pn(),n=pn(),r=pn();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Nt(38017,{changeType:i})}})),new p_(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=AU()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Hn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qFe{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tu(),this.Je=HE(),this.He=HE(),this.Ye=new Rr(hn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Nt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(BN(i))if(r===0){const o=new wt(i.path);this.et(n,o,Js.newNoDocument(o,Ft.min()))}else Hn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=dh(r).toUint8Array()}catch(c){if(c instanceof bQ)return Yg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new c6(o,s,i)}catch(c){return Yg(c instanceof Q0?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&BN(a.target)){const c=new wt(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Js.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=pn();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new $T(e,n,this.Ye,this.je,r);return this.je=Tu(),this.Je=HE(),this.He=HE(),this.Ye=new Rr(hn),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new EU,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new cs(hn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new cs(hn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||st("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new EU),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function HE(){return new Rr(wt.comparator)}function AU(){return new Rr(wt.comparator)}const zFe={asc:"ASCENDING",desc:"DESCENDING"},WFe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GFe={and:"AND",or:"OR"};class KFe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function UN(t,e){return t.useProto3Json||OT(e)?e:{value:e}}function WC(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZQ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QFe(t,e){return WC(t,e.toTimestamp())}function Gc(t){return Hn(!!t,49232),Ft.fromTimestamp((function(n){const r=uh(n);return new br(r.seconds,r.nanos)})(t))}function l6(t,e){return FN(t,e).canonicalString()}function FN(t,e){const n=(function(s){return new gr(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function JQ(t){const e=gr.fromString(t);return Hn(rY(e),10190,{key:e.toString()}),e}function jN(t,e){return l6(t.databaseId,e.path)}function S2(t,e){const n=JQ(e);if(n.get(1)!==t.databaseId.projectId)throw new Ye(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ye(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new wt(eY(n))}function XQ(t,e){return l6(t.databaseId,e)}function YFe(t){const e=JQ(t);return e.length===4?gr.emptyPath():eY(e)}function VN(t){return new gr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eY(t){return Hn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CU(t,e,n){return{name:jN(t,e),fields:n.value.mapValue.fields}}function ZFe(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Nt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(l,u){return l.useProto3Json?(Hn(u===void 0||typeof u=="string",58123),Bs.fromBase64String(u||"")):(Hn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Bs.fromUint8Array(u||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){const u=l.code===void 0?_e.UNKNOWN:KQ(l.code);return new Ye(u,l.message||"")})(o);n=new YQ(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=S2(t,r.document.name),i=Gc(r.document.updateTime),o=r.document.createTime?Gc(r.document.createTime):Ft.min(),a=new Gi({mapValue:{fields:r.document.fields}}),c=Js.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new k1(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=S2(t,r.document),i=r.readTime?Gc(r.readTime):Ft.min(),o=Js.newNoDocument(s,i),a=r.removedTargetIds||[];n=new k1([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=S2(t,r.document),i=r.removedTargetIds||[];n=new k1([],i,s,null)}else{if(!("filter"in e))return Nt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new FFe(s,i),a=r.targetId;n=new QQ(a,o)}}return n}function JFe(t,e){let n;if(e instanceof f_)n={update:CU(t,e.key,e.value)};else if(e instanceof GQ)n={delete:jN(t,e.key)};else if(e instanceof Eh)n={update:CU(t,e.key,e.data),updateMask:a9e(e.fieldMask)};else{if(!(e instanceof LFe))return Nt(16599,{Vt:e.type});n={verify:jN(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof qC)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wb)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof vb)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zC)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Nt(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:QFe(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Nt(27497)})(t,e.precondition)),n}function XFe(t,e){return t&&t.length>0?(Hn(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?Gc(s.updateTime):Gc(i);return o.isEqual(Ft.min())&&(o=Gc(i)),new DFe(o,s.transformResults||[])})(n,e)))):[]}function e9e(t,e){return{documents:[XQ(t,e.path)]}}function t9e(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=XQ(t,s);const i=(function(l){if(l.length!==0)return nY(Xa.create(l,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(l){if(l.length!==0)return l.map((u=>(function(h){return{field:Lm(h.field),direction:s9e(h.dir)}})(u)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=UN(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:s}}function n9e(t){let e=YFe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Hn(r===1,65062);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=(function(d){const h=tY(d);return h instanceof Xa&&RQ(h)?h.getFilters():[h]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((h=>(function(m){return new HC($m(m.field),(function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(m.direction))})(h)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let h;return h=typeof d=="object"?d.value:d,OT(h)?null:h})(n.limit));let c=null;n.startAt&&(c=(function(d){const h=!!d.before,f=d.values||[];return new VC(f,h)})(n.startAt));let l=null;return n.endAt&&(l=(function(d){const h=!d.before,f=d.values||[];return new VC(f,h)})(n.endAt)),_Fe(e,s,o,i,a,"F",c,l)}function r9e(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tY(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$m(n.unaryFilter.field);return Kr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$m(n.unaryFilter.field);return Kr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$m(n.unaryFilter.field);return Kr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$m(n.unaryFilter.field);return Kr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Nt(61313);default:return Nt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Kr.create($m(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Nt(58110);default:return Nt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Xa.create(n.compositeFilter.filters.map((r=>tY(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Nt(1026)}})(n.compositeFilter.op))})(t):Nt(30097,{filter:t})}function s9e(t){return zFe[t]}function i9e(t){return WFe[t]}function o9e(t){return GFe[t]}function Lm(t){return{fieldPath:t.canonicalString()}}function $m(t){return Ds.fromServerFormat(t.fieldPath)}function nY(t){return t instanceof Kr?(function(n){if(n.op==="=="){if(dU(n.value))return{unaryFilter:{field:Lm(n.field),op:"IS_NAN"}};if(uU(n.value))return{unaryFilter:{field:Lm(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dU(n.value))return{unaryFilter:{field:Lm(n.field),op:"IS_NOT_NAN"}};if(uU(n.value))return{unaryFilter:{field:Lm(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lm(n.field),op:i9e(n.op),value:n.value}}})(t):t instanceof Xa?(function(n){const r=n.getFilters().map((s=>nY(s)));return r.length===1?r[0]:{compositeFilter:{op:o9e(n.op),filters:r}}})(t):Nt(54877,{filter:t})}function a9e(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function rY(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,s,i=Ft.min(),o=Ft.min(),a=Bs.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Bd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9e{constructor(e){this.yt=e}}function l9e(t){const e=n9e({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$N(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9e{constructor(){this.Cn=new d9e}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ae.resolve()}getCollectionParents(e,n){return Ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ae.resolve()}deleteFieldIndex(e,n){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,n){return Ae.resolve()}getDocumentsMatchingTarget(e,n){return Ae.resolve(null)}getIndexType(e,n){return Ae.resolve(0)}getFieldIndexes(e,n){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,n){return Ae.resolve(lh.min())}getMinOffsetFromCollectionGroup(e,n){return Ae.resolve(lh.min())}updateCollectionGroup(e,n,r){return Ae.resolve()}updateIndexEntries(e,n){return Ae.resolve()}}class d9e{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new cs(gr.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new cs(gr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sY=41943040;class Fi{static withCacheSize(e){return new Fi(e,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(sY,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ey(0)}static cr(){return new ey(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU="LruGarbageCollector",h9e=1048576;function SU([t,e],[n,r]){const s=hn(t,n);return s===0?hn(e,r):s}class f9e{constructor(e){this.Ir=e,this.buffer=new cs(SU),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();SU(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class p9e{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){st(TU,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ry(n)?st(TU,"Ignoring IndexedDB error during garbage collection: ",n):await Py(n)}await this.Vr(3e5)}))}}class m9e{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ae.resolve(NT.ce);const r=new f9e(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(IU)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IU):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,a=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(l=Date.now(),Mm()<=dn.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function g9e(t,e){return new m9e(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9e{constructor(){this.changes=new Np((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Js.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9e{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Rw(r.mutation,s,_o.empty(),br.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,pn()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=pn()){const s=_f();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=K0();return i.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=_f();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,pn())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=Tu();const o=Pw(),a=(function(){return Pw()})();return n.forEach(((c,l)=>{const u=r.get(l.key);s.has(l.key)&&(u===void 0||u.mutation instanceof Eh)?i=i.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Rw(u.mutation,l,u.mutation.getFieldMask(),br.now())):o.set(l.key,_o.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((l,u)=>o.set(l,u))),n.forEach(((l,u)=>a.set(l,new w9e(u,o.get(l)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Pw();let s=new Rr(((o,a)=>o-a)),i=pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||_o.empty();u=a.applyToLocalView(l,u),r.set(c,u);const d=(s.get(a.batchId)||pn()).add(c);s=s.insert(a.batchId,d)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,d=UQ();u.forEach((h=>{if(!i.has(h)){const f=zQ(n.get(h),r.get(h));f!==null&&d.set(h,f),i=i.add(h)}})),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Ae.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DQ(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Ae.resolve(_f());let a=pb,c=i;return o.next((l=>Ae.forEach(l,((u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(u)?Ae.resolve():this.remoteDocumentCache.getEntry(e,u).next((h=>{c=c.insert(u,h)}))))).next((()=>this.populateOverlays(e,l,i))).next((()=>this.computeViews(e,c,l,pn()))).next((u=>({batchId:a,changes:$Q(u)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new wt(n)).next((r=>{let s=K0();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=K0();return this.indexManager.getCollectionParents(e,i).next((a=>Ae.forEach(a,(c=>{const l=(function(d,h){return new h_(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,s).next((u=>{u.forEach(((d,h)=>{o=o.insert(d,h)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,Js.newInvalidDocument(u)))}));let a=K0();return o.forEach(((c,l)=>{const u=i.get(c);u!==void 0&&Rw(u.mutation,l,_o.empty(),br.now()),MT(n,l)&&(a=a.insert(c,l))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9e{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Gc(s.createTime)}})(n)),Ae.resolve()}getNamedQuery(e,n){return Ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:l9e(s.bundledQuery),readTime:Gc(s.readTime)}})(n)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9e{constructor(){this.overlays=new Rr(wt.comparator),this.qr=new Map}getOverlay(e,n){return Ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_f();return Ae.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),Ae.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),Ae.resolve()}getOverlaysForCollection(e,n,r){const s=_f(),i=n.length+1,o=new wt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return Ae.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Rr(((l,u)=>l-u));const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=i.get(l.largestBatchId);u===null&&(u=_f(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=_f(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((l,u)=>a.set(l,u))),!(a.size()>=s)););return Ae.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UFe(n,r));let i=this.qr.get(n);i===void 0&&(i=pn(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9e{constructor(){this.sessionToken=Bs.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.Qr=new cs(vs.$r),this.Ur=new cs(vs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new vs(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new vs(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new wt(new gr([])),r=new vs(n,e),s=new vs(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new wt(new gr([])),r=new vs(n,e),s=new vs(n,e+1);let i=pn();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new vs(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vs{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return wt.comparator(e.key,n.key)||hn(e.Yr,n.Yr)}static Kr(e,n){return hn(e.Yr,n.Yr)||wt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9e{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new cs(vs.$r)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $Fe(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new vs(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ae.resolve(o)}lookupMutationBatch(e,n){return Ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return Ae.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?e6:this.tr-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vs(n,0),s=new vs(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const a=this.Xr(o.Yr);i.push(a)})),Ae.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cs(hn);return n.forEach((s=>{const i=new vs(s,0),o=new vs(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{r=r.add(a.Yr)}))})),Ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;wt.isDocumentKey(i)||(i=i.child(""));const o=new vs(new wt(i),0);let a=new cs(hn);return this.Zr.forEachWhile((c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.Yr)),!0)}),o),Ae.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Hn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Ae.forEach(n.mutations,(s=>{const i=new vs(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new vs(n,0),s=this.Zr.firstAfterOrEqual(r);return Ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9e{constructor(e){this.ri=e,this.docs=(function(){return new Rr(wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ae.resolve(r?r.document.mutableCopy():Js.newInvalidDocument(n))}getEntries(e,n){let r=Tu();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Js.newInvalidDocument(s))})),Ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Tu();const o=n.path,a=new wt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||XUe(JUe(u),r)<=0||(s.has(u.key)||MT(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Ae.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Nt(9500)}ii(e,n){return Ae.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new I9e(this)}getSize(e){return Ae.resolve(this.size)}}class I9e extends y9e{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),Ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9e{constructor(e){this.persistence=e,this.si=new Np((n=>r6(n)),s6),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.oi=0,this._i=new u6,this.targetCount=0,this.ai=ey.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ey(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ae.resolve()}updateTargetData(e,n){return this.Pr(n),Ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),Ae.waitFor(i).next((()=>s))}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Ae.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Ae.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),Ae.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Ae.resolve(r)}containsKey(e,n){return Ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(e,n){this.ui={},this.overlays={},this.ci=new NT(0),this.li=!1,this.li=!0,this.hi=new E9e,this.referenceDelegate=e(this),this.Pi=new T9e(this),this.indexManager=new u9e,this.remoteDocumentCache=(function(s){return new C9e(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new c9e(n),this.Ii=new b9e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _9e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new A9e(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){st("MemoryPersistence","Starting transaction:",e);const s=new S9e(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return Ae.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class S9e extends tFe{constructor(e){super(),this.currentSequenceNumber=e}}class d6{constructor(e){this.persistence=e,this.Ri=new u6,this.Vi=null}static mi(e){return new d6(e)}get fi(){if(this.Vi)return this.Vi;throw Nt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Ae.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.fi,(r=>{const s=wt.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,Ft.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ae.or([()=>Ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class GC{constructor(e,n){this.persistence=e,this.pi=new Np((r=>sFe(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=g9e(this,n)}static mi(e,n){return new GC(e,n)}Ei(){}di(e){return Ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Ae.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?Ae.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,i.removeEntry(o,Ft.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ae.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Ae.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=R1(e.data.value)),n}br(e,n,r){return Ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Ae.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=pn(),s=pn();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new h6(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9e{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return t$e()?8:nFe(ri())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new x9e;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Mm()<=dn.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Bm(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ae.resolve()):(Mm()<=dn.DEBUG&&st("QueryEngine","Query:",Bm(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Mm()<=dn.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Bm(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zc(n))):Ae.resolve())}ys(e,n){if(mU(n))return Ae.resolve(null);let r=zc(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=$N(n,null,"F"),r=zc(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=pn(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const l=this.Ds(n,a);return this.Cs(n,l,o,c.readTime)?this.ys(e,$N(n,null,"F")):this.vs(e,l,n,c)}))))})))))}ws(e,n,r,s){return mU(n)||s.isEqual(Ft.min())?Ae.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?Ae.resolve(null):(Mm()<=dn.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bm(n)),this.vs(e,o,n,ZUe(s,pb)).next((a=>a)))}))}Ds(e,n){let r=new cs(BQ(e));return n.forEach(((s,i)=>{MT(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Mm()<=dn.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Bm(n)),this.ps.getDocumentsMatchingQuery(e,n,lh.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="LocalStore",R9e=3e8;class N9e{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Rr(hn),this.xs=new Np((i=>r6(i)),s6),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v9e(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function O9e(t,e,n,r){return new N9e(t,e,n,r)}async function oY(t,e){const n=zt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let c=pn();for(const l of s){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next((l=>({Ls:l,removedBatchIds:o,addedBatchIds:a})))}))}))}function k9e(t,e){const n=zt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){const d=l.batch,h=d.keys();let f=Ae.resolve();return h.forEach((m=>{f=f.next((()=>u.getEntry(c,m))).next((g=>{const y=l.docVersions.get(m);Hn(y!==null,48541),g.version.compareTo(y)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))}))})),f.next((()=>a.mutationQueue.removeMutationBatch(c,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=pn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function aY(t){const e=zt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function D9e(t,e){const n=zt(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach(((u,d)=>{const h=s.get(d);if(!h)return;a.push(n.Pi.removeMatchingKeys(i,u.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,u.addedDocuments,d))));let f=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Bs.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),s=s.insert(d,f),(function(g,y,v){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=R9e?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0})(h,f,u)&&a.push(n.Pi.updateTargetData(i,f))}));let c=Tu(),l=pn();if(e.documentUpdates.forEach((u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))})),a.push(M9e(i,o,e.documentUpdates).next((u=>{c=u.ks,l=u.qs}))),!r.isEqual(Ft.min())){const u=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(u)}return Ae.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,l))).next((()=>c))})).then((i=>(n.Ms=s,i)))}function M9e(t,e,n){let r=pn(),s=pn();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Tu();return n.forEach(((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(Ft.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):st(f6,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)})),{ks:o,qs:s}}))}function B9e(t,e){const n=zt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=e6),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function L9e(t,e){const n=zt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,Ae.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new Bd(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function HN(t,e,n){const r=zt(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Ry(o))throw o;st(f6,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function xU(t,e,n){const r=zt(t);let s=Ft.min(),i=pn();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,l,u){const d=zt(c),h=d.xs.get(u);return h!==void 0?Ae.resolve(d.Ms.get(h)):d.Pi.getTargetData(l,u)})(r,o,zc(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((c=>{i=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ft.min(),n?i:pn()))).next((a=>($9e(r,AFe(e),a),{documents:a,Qs:i})))))}function $9e(t,e,n){let r=t.Os.get(e)||Ft.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class PU{constructor(){this.activeTargetIds=PFe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U9e{constructor(){this.Mo=new PU,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new PU,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9e{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="ConnectivityMonitor";class NU{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(RU,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){st(RU,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qE=null;function qN(){return qE===null?qE=(function(){return 268435456+Math.round(2147483648*Math.random())})():qE++,"0x"+qE.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="RestConnection",j9e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V9e{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===FC?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=qN(),a=this.zo(e,n.toUriEncodedString());st(x2,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:l}=new URL(a),u=Iy(l);return this.Jo(e,a,c,r,u).then((d=>(st(x2,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw Yg(x2,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xy})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=j9e[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9e{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="WebChannelConnection";class q9e extends V9e{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=qN();return new Promise(((a,c)=>{const l=new lQ;l.setWithCredentials(!0),l.listenOnce(uQ.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case P1.NO_ERROR:const d=l.getResponseJson();st(Gs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case P1.TIMEOUT:st(Gs,`RPC '${e}' ${o} timed out`),c(new Ye(_e.DEADLINE_EXCEEDED,"Request time out"));break;case P1.HTTP_ERROR:const h=l.getStatus();if(st(Gs,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f?.error;if(m&&m.status&&m.message){const g=(function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(_)>=0?_:_e.UNKNOWN})(m.status);c(new Ye(g,m.message))}else c(new Ye(_e.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ye(_e.UNAVAILABLE,"Connection failed."));break;default:Nt(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{st(Gs,`RPC '${e}' ${o} completed.`)}}));const u=JSON.stringify(s);st(Gs,`RPC '${e}' ${o} sending request:`,s),l.send(n,"POST",u,r,15)}))}T_(e,n,r){const s=qN(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fQ(),a=hQ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=i.join("");st(Gs,`Creating RPC '${e}' stream ${s}: ${u}`,c);const d=o.createWebChannel(u,c);this.I_(d);let h=!1,f=!1;const m=new H9e({Yo:y=>{f?st(Gs,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(h||(st(Gs,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),st(Gs,`RPC '${e}' stream ${s} sending:`,y),d.send(y))},Zo:()=>d.close()}),g=(y,v,_)=>{y.listen(v,(A=>{try{_(A)}catch(k){setTimeout((()=>{throw k}),0)}}))};return g(d,G0.EventType.OPEN,(()=>{f||(st(Gs,`RPC '${e}' stream ${s} transport opened.`),m.o_())})),g(d,G0.EventType.CLOSE,(()=>{f||(f=!0,st(Gs,`RPC '${e}' stream ${s} transport closed`),m.a_(),this.E_(d))})),g(d,G0.EventType.ERROR,(y=>{f||(f=!0,Yg(Gs,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),m.a_(new Ye(_e.UNAVAILABLE,"The operation could not be completed")))})),g(d,G0.EventType.MESSAGE,(y=>{if(!f){const v=y.data[0];Hn(!!v,16349);const _=v,A=_?.error||_[0]?.error;if(A){st(Gs,`RPC '${e}' stream ${s} received error:`,A);const k=A.status;let S=(function(b){const E=zr[b];if(E!==void 0)return KQ(E)})(k),R=A.message;S===void 0&&(S=_e.INTERNAL,R="Unknown error status: "+k+" with message "+A.message),f=!0,m.a_(new Ye(S,R)),d.close()}else st(Gs,`RPC '${e}' stream ${s} received:`,v),m.u_(v)}})),g(a,dQ.STAT_EVENT,(y=>{y.stat===NN.PROXY?st(Gs,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===NN.NOPROXY&&st(Gs,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{m.__()}),0),m}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function P2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){return new KFe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&st("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="PersistentStream";class lY{constructor(e,n,r,s,i,o,a,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cY(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(Cu(n.toString()),Cu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new Ye(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return st(OU,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(st(OU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class z9e extends lY{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZFe(this.serializer,e),r=(function(i){if(!("targetChange"in i))return Ft.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ft.min():o.readTime?Gc(o.readTime):Ft.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=VN(this.serializer),n.addTarget=(function(i,o){let a;const c=o.target;if(a=BN(c)?{documents:e9e(i,c)}:{query:t9e(i,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZQ(i,o.resumeToken);const l=UN(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Ft.min())>0){a.readTime=WC(i,o.snapshotVersion.toTimestamp());const l=UN(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);const r=r9e(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=VN(this.serializer),n.removeTarget=e,this.q_(n)}}class W9e extends lY{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Hn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Hn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Hn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=XFe(e.writeResults,e.commitTime),r=Gc(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=VN(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>JFe(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9e{}class K9e extends G9e{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ye(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,FN(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(_e.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,FN(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ye(_e.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Q9e{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cu(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="RemoteStore";class Y9e{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Op(this)&&(st(up,"Restarting streams for network reachability change."),await(async function(c){const l=zt(c);l.Ea.add(4),await m_(l),l.Ra.set("Unknown"),l.Ea.delete(4),await FT(l)})(this))}))})),this.Ra=new Q9e(r,s)}}async function FT(t){if(Op(t))for(const e of t.da)await e(!0)}async function m_(t){for(const e of t.da)await e(!1)}function uY(t,e){const n=zt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),y6(n)?g6(n):Ny(n).O_()&&m6(n,e))}function p6(t,e){const n=zt(t),r=Ny(n);n.Ia.delete(e),r.O_()&&dY(n,e),n.Ia.size===0&&(r.O_()?r.L_():Op(n)&&n.Ra.set("Unknown"))}function m6(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ft.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ny(t).Y_(e)}function dY(t,e){t.Va.Ue(e),Ny(t).Z_(e)}function g6(t){t.Va=new qFe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ny(t).start(),t.Ra.ua()}function y6(t){return Op(t)&&!Ny(t).x_()&&t.Ia.size>0}function Op(t){return zt(t).Ea.size===0}function hY(t){t.Va=void 0}async function Z9e(t){t.Ra.set("Online")}async function J9e(t){t.Ia.forEach(((e,n)=>{m6(t,e)}))}async function X9e(t,e){hY(t),y6(t)?(t.Ra.ha(e),g6(t)):t.Ra.set("Unknown")}async function e7e(t,e,n){if(t.Ra.set("Online"),e instanceof YQ&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(t,e)}catch(r){st(up,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await KC(t,r)}else if(e instanceof k1?t.Va.Ze(e):e instanceof QQ?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ft.min()))try{const r=await aY(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=i.Ia.get(l);u&&i.Ia.set(l,u.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,l)=>{const u=i.Ia.get(c);if(!u)return;i.Ia.set(c,u.withResumeToken(Bs.EMPTY_BYTE_STRING,u.snapshotVersion)),dY(i,c);const d=new Bd(u.target,c,l,u.sequenceNumber);m6(i,d)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){st(up,"Failed to raise snapshot:",r),await KC(t,r)}}async function KC(t,e,n){if(!Ry(e))throw e;t.Ea.add(1),await m_(t),t.Ra.set("Offline"),n||(n=()=>aY(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{st(up,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await FT(t)}))}function fY(t,e){return e().catch((n=>KC(t,n,e)))}async function jT(t){const e=zt(t),n=fh(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:e6;for(;t7e(e);)try{const s=await B9e(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,n7e(e,s)}catch(s){await KC(e,s)}pY(e)&&mY(e)}function t7e(t){return Op(t)&&t.Ta.length<10}function n7e(t,e){t.Ta.push(e);const n=fh(t);n.O_()&&n.X_&&n.ea(e.mutations)}function pY(t){return Op(t)&&!fh(t).x_()&&t.Ta.length>0}function mY(t){fh(t).start()}async function r7e(t){fh(t).ra()}async function s7e(t){const e=fh(t);for(const n of t.Ta)e.ea(n.mutations)}async function i7e(t,e,n){const r=t.Ta.shift(),s=a6.from(r,e,n);await fY(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await jT(t)}async function o7e(t,e){e&&fh(t).X_&&await(async function(r,s){if((function(o){return jFe(o)&&o!==_e.ABORTED})(s.code)){const i=r.Ta.shift();fh(r).B_(),await fY(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await jT(r)}})(t,e),pY(t)&&mY(t)}async function kU(t,e){const n=zt(t);n.asyncQueue.verifyOperationInProgress(),st(up,"RemoteStore received new credentials");const r=Op(n);n.Ea.add(3),await m_(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await FT(n)}async function a7e(t,e){const n=zt(t);e?(n.Ea.delete(2),await FT(n)):e||(n.Ea.add(2),await m_(n),n.Ra.set("Unknown"))}function Ny(t){return t.ma||(t.ma=(function(n,r,s){const i=zt(n);return i.sa(),new z9e(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:Z9e.bind(null,t),t_:J9e.bind(null,t),r_:X9e.bind(null,t),H_:e7e.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),y6(t)?g6(t):t.Ra.set("Unknown")):(await t.ma.stop(),hY(t))}))),t.ma}function fh(t){return t.fa||(t.fa=(function(n,r,s){const i=zt(n);return i.sa(),new W9e(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:r7e.bind(null,t),r_:o7e.bind(null,t),ta:s7e.bind(null,t),na:i7e.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await jT(t)):(await t.fa.stop(),t.Ta.length>0&&(st(up,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new uu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new w6(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ye(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function v6(t,e){if(Cu("AsyncQueue",`${e}: ${t}`),Ry(t))return new Ye(_e.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{static emptySet(e){return new cg(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||wt.comparator(n.key,r.key):(n,r)=>wt.comparator(n.key,r.key),this.keyedMap=K0(),this.sortedSet=new Rr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cg)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new cg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.ga=new Rr(wt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Nt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ty{constructor(e,n,r,s,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new ty(e,n,cg.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&DT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7e{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class l7e{constructor(){this.queries=MU(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=zt(n),i=s.queries;s.queries=MU(),i.forEach(((o,a)=>{for(const c of a.Sa)c.onError(r)}))})(this,new Ye(_e.ABORTED,"Firestore shutting down"))}}function MU(){return new Np((t=>MQ(t)),DT)}async function gY(t,e){const n=zt(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new c7e,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=v6(o,`Initialization of query '${Bm(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&b6(n)}async function yY(t,e){const n=zt(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function u7e(t,e){const n=zt(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&b6(n)}function d7e(t,e,n){const r=zt(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function b6(t){t.Ca.forEach((e=>{e.next()}))}var zN,BU;(BU=zN||(zN={})).Ma="default",BU.Cache="cache";class wY{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ty(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ty.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(e){this.key=e}}class bY{constructor(e){this.key=e}}class h7e{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pn(),this.mutatedKeys=pn(),this.eu=BQ(e),this.tu=new cg(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new DU,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((u,d)=>{const h=s.get(u),f=MT(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?m!==g&&(r.track({type:3,doc:f}),y=!0):this.su(h,f)||(r.track({type:2,doc:f}),y=!0,(c&&this.eu(f,c)>0||l&&this.eu(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(c||l)&&(a=!0)),y&&(f?(o=o.add(f),i=g?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((u,d)=>(function(f,m){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt(20277,{Rt:y})}};return g(f)-g(m)})(u.type,d.type)||this.eu(u.doc,d.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new ty(this.query,e.tu,i,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new DU,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new bY(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new vY(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=pn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ty.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _6="SyncEngine";class f7e{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class p7e{constructor(e){this.key=e,this.hu=!1}}class m7e{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Np((a=>MQ(a)),DT),this.Iu=new Map,this.Eu=new Set,this.du=new Rr(wt.comparator),this.Au=new Map,this.Ru=new u6,this.Vu={},this.mu=new Map,this.fu=ey.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g7e(t,e,n=!0){const r=TY(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await _Y(r,e,n,!0),s}async function y7e(t,e){const n=TY(t);await _Y(n,e,!0,!1)}async function _Y(t,e,n,r){const s=await L9e(t.localStore,zc(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await w7e(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&uY(t.remoteStore,s),a}async function w7e(t,e,n,r,s){t.pu=(d,h,f)=>(async function(g,y,v,_){let A=y.view.ru(v);A.Cs&&(A=await xU(g.localStore,y.query,!1).then((({documents:T})=>y.view.ru(T,A))));const k=_&&_.targetChanges.get(y.targetId),S=_&&_.targetMismatches.get(y.targetId)!=null,R=y.view.applyChanges(A,g.isPrimaryClient,k,S);return $U(g,y.targetId,R.au),R.snapshot})(t,d,h,f);const i=await xU(t.localStore,e,!0),o=new h7e(e,i.Qs),a=o.ru(i.documents),c=p_.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,c);$U(t,n,l.au);const u=new f7e(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function v7e(t,e,n){const r=zt(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!DT(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await HN(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&p6(r.remoteStore,s.targetId),WN(r,s.targetId)})).catch(Py)):(WN(r,s.targetId),await HN(r.localStore,s.targetId,!0))}async function b7e(t,e){const n=zt(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),p6(n.remoteStore,r.targetId))}async function _7e(t,e,n){const r=x7e(t);try{const s=await(function(o,a){const c=zt(o),l=br.now(),u=a.reduce(((f,m)=>f.add(m.key)),pn());let d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",(f=>{let m=Tu(),g=pn();return c.Ns.getEntries(f,u).next((y=>{m=y,m.forEach(((v,_)=>{_.isValidDocument()||(g=g.add(v))}))})).next((()=>c.localDocuments.getOverlayedDocuments(f,m))).next((y=>{d=y;const v=[];for(const _ of a){const A=BFe(_,d.get(_.key).overlayedDocument);A!=null&&v.push(new Eh(_.key,A,SQ(A.value.mapValue),Wc.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,v,a)})).next((y=>{h=y;const v=y.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,y.batchId,v)}))})).then((()=>({batchId:h.batchId,changes:$Q(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new Rr(hn)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l})(r,s.batchId,n),await g_(r,s.changes),await jT(r.remoteStore)}catch(s){const i=v6(s,"Failed to persist write");n.reject(i)}}async function EY(t,e){const n=zt(t);try{const r=await D9e(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Hn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Hn(o.hu,14607):s.removedDocuments.size>0&&(Hn(o.hu,42227),o.hu=!1))})),await g_(n,r,e)}catch(r){await Py(r)}}function LU(t,e,n){const r=zt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const c=zt(o);c.onlineState=a;let l=!1;c.queries.forEach(((u,d)=>{for(const h of d.Sa)h.va(a)&&(l=!0)})),l&&b6(c)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E7e(t,e,n){const r=zt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Rr(wt.comparator);o=o.insert(i,Js.newNoDocument(i,Ft.min()));const a=pn().add(i),c=new $T(Ft.min(),new Map,new Rr(hn),o,a);await EY(r,c),r.du=r.du.remove(i),r.Au.delete(e),E6(r)}else await HN(r.localStore,e,!1).then((()=>WN(r,e,n))).catch(Py)}async function A7e(t,e){const n=zt(t),r=e.batch.batchId;try{const s=await k9e(n.localStore,e);CY(n,r,null),AY(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await g_(n,s)}catch(s){await Py(s)}}async function C7e(t,e,n){const r=zt(t);try{const s=await(function(o,a){const c=zt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next((d=>(Hn(d!==null,37113),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d)))).next((()=>c.mutationQueue.performConsistencyCheck(l))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u))).next((()=>c.localDocuments.getDocuments(l,u)))}))})(r.localStore,e);CY(r,e,n),AY(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await g_(r,s)}catch(s){await Py(s)}}function AY(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function CY(t,e,n){const r=zt(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function WN(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||IY(t,r)}))}function IY(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(p6(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),E6(t))}function $U(t,e,n){for(const r of n)r instanceof vY?(t.Ru.addReference(r.key,e),I7e(t,r)):r instanceof bY?(st(_6,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||IY(t,r.key)):Nt(19791,{wu:r})}function I7e(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(st(_6,"New document in limbo: "+n),t.Eu.add(r),E6(t))}function E6(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new wt(gr.fromString(e)),r=t.fu.next();t.Au.set(r,new p7e(n)),t.du=t.du.insert(n,r),uY(t.remoteStore,new Bd(zc(i6(n.path)),r,"TargetPurposeLimboResolution",NT.ce))}}async function g_(t,e,n){const r=zt(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{o.push(r.pu(c,e,n).then((l=>{if((l||n)&&r.isPrimaryClient){const u=l?!l.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,u?"current":"not-current")}if(l){s.push(l);const u=h6.As(c.targetId,l);i.push(u)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(c,l){const u=zt(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>Ae.forEach(l,(h=>Ae.forEach(h.Es,(f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f))).next((()=>Ae.forEach(h.ds,(f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))))))}catch(d){if(!Ry(d))throw d;st(f6,"Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=u.Ms.get(h),m=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(h,g)}}})(r.localStore,i))}async function T7e(t,e){const n=zt(t);if(!n.currentUser.isEqual(e)){st(_6,"User change. New user:",e.toKey());const r=await oY(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((c=>{c.reject(new Ye(_e.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await g_(n,r.Ls)}}function S7e(t,e){const n=zt(t),r=n.Au.get(e);if(r&&r.hu)return pn().add(r.key);{let s=pn();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function TY(t){const e=zt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EY.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S7e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E7e.bind(null,e),e.Pu.H_=u7e.bind(null,e.eventManager),e.Pu.yu=d7e.bind(null,e.eventManager),e}function x7e(t){const e=zt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A7e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C7e.bind(null,e),e}class QC{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=UT(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return O9e(this.persistence,new P9e,e.initialUser,this.serializer)}Cu(e){return new iY(d6.mi,this.serializer)}Du(e){return new U9e}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}QC.provider={build:()=>new QC};class P7e extends QC{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Hn(this.persistence.referenceDelegate instanceof GC,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new p9e(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new iY((r=>GC.mi(r,n)),this.serializer)}}class GN{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T7e.bind(null,this.syncEngine),await a7e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new l7e})()}createDatastore(e){const n=UT(e.databaseInfo.databaseId),r=(function(i){return new q9e(i)})(e.databaseInfo);return(function(i,o,a,c){return new K9e(i,o,a,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new Y9e(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>LU(this.syncEngine,n,0)),(function(){return NU.v()?new NU:new F9e})())}createSyncEngine(e,n){return(function(s,i,o,a,c,l,u){const d=new m7e(s,i,o,a,c,l);return u&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=zt(n);st(up,"RemoteStore shutting down."),r.Ea.add(5),await m_(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}GN.provider={build:()=>new GN};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="FirestoreClient";class R7e{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ys.UNAUTHENTICATED,this.clientId=XD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{st(ph,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(st(ph,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new uu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=v6(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function R2(t,e){t.asyncQueue.verifyOperationInProgress(),st(ph,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await oY(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function UU(t,e){t.asyncQueue.verifyOperationInProgress();const n=await N7e(t);st(ph,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>kU(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>kU(e.remoteStore,s))),t._onlineComponents=e}async function N7e(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){st(ph,"Using user provided OfflineComponentProvider");try{await R2(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===_e.FAILED_PRECONDITION||s.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Yg("Error using user provided cache. Falling back to memory cache: "+n),await R2(t,new QC)}}else st(ph,"Using default OfflineComponentProvider"),await R2(t,new P7e(void 0));return t._offlineComponents}async function xY(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(st(ph,"Using user provided OnlineComponentProvider"),await UU(t,t._uninitializedComponentsProvider._online)):(st(ph,"Using default OnlineComponentProvider"),await UU(t,new GN))),t._onlineComponents}function O7e(t){return xY(t).then((e=>e.syncEngine))}async function PY(t){const e=await xY(t),n=e.eventManager;return n.onListen=g7e.bind(null,e.syncEngine),n.onUnlisten=v7e.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y7e.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b7e.bind(null,e.syncEngine),n}function k7e(t,e,n={}){const r=new uu;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const u=new SY({next:h=>{u.Nu(),o.enqueueAndForget((()=>yY(i,d)));const f=h.docs.has(a);!f&&h.fromCache?l.reject(new Ye(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new Ye(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new wY(i6(a.path),u,{includeMetadataChanges:!0,qa:!0});return gY(i,d)})(await PY(t),t.asyncQueue,e,n,r))),r.promise}function D7e(t,e,n={}){const r=new uu;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const u=new SY({next:h=>{u.Nu(),o.enqueueAndForget((()=>yY(i,d))),h.fromCache&&c.source==="server"?l.reject(new Ye(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new wY(a,u,{includeMetadataChanges:!0,qa:!0});return gY(i,d)})(await PY(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RY(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NY="firestore.googleapis.com",jU=!0;class VU{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ye(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NY,this.ssl=jU}else this.host=e.host,this.ssl=e.ssl??jU;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sY;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h9e)throw new Ye(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YUe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RY(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ye(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ye(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ye(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VT{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VU({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ye(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ye(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VU(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new FUe;switch(r.type){case"firstParty":return new qUe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ye(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=FU.get(n);r&&(st("ComponentProvider","Removing Datastore"),FU.delete(n),r.terminate())})(this),Promise.resolve()}}function M7e(t,e,n,r={}){t=Iu(t,VT);const s=Iy(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(gK(`https://${a}`),yK("Firestore",!0)),i.host!==NY&&i.host!==a&&Yg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!ch(c,o)&&(t._setSettings(c),r.mockUserToken)){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ys.MOCK_USER;else{l=GLe(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Ye(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ys(d)}t._authCredentials=new jUe(new mQ(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HT=class OY{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new OY(this.firestore,e,this._query)}};class Vr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vr(this.firestore,e,this._key)}toJSON(){return{type:Vr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(d_(n,Vr._jsonSchema))return new Vr(e,r||null,new wt(gr.fromString(n.referencePath)))}}Vr._jsonSchemaVersion="firestore/documentReference/1.0",Vr._jsonSchema={type:Qr("string",Vr._jsonSchemaVersion),referencePath:Qr("string")};class Qd extends HT{constructor(e,n,r){super(e,n,i6(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vr(this.firestore,null,new wt(e))}withConverter(e){return new Qd(this.firestore,e,this._path)}}function B7e(t,e,...n){if(t=Hr(t),gQ("collection","path",e),t instanceof VT){const r=gr.fromString(e,...n);return tU(r),new Qd(t,null,r)}{if(!(t instanceof Vr||t instanceof Qd))throw new Ye(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gr.fromString(e,...n));return tU(r),new Qd(t.firestore,null,r)}}function dp(t,e,...n){if(t=Hr(t),arguments.length===1&&(e=XD.newId()),gQ("doc","path",e),t instanceof VT){const r=gr.fromString(e,...n);return eU(r),new Vr(t,null,new wt(r))}{if(!(t instanceof Vr||t instanceof Qd))throw new Ye(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gr.fromString(e,...n));return eU(r),new Vr(t.firestore,t instanceof Qd?t.converter:null,new wt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU="AsyncQueue";class qU{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cY(this,"async_queue_retry"),this._c=()=>{const r=P2();r&&st(HU,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=P2();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=P2();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new uu;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ry(e))throw e;st(HU,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Cu("INTERNAL UNHANDLED ERROR: ",zU(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=w6.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&Nt(47125,{Pc:zU(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zU(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class y_ extends VT{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new qU,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qU(e),this._firestoreClient=void 0,await e}}}function kY(t,e){const n=typeof t=="object"?t:HD(),r=typeof t=="string"?t:FC,s=Rp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zLe("firestore");i&&M7e(s,...i)}return s}function A6(t){if(t._terminated)throw new Ye(_e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||L7e(t),t._firestoreClient}function L7e(t){const e=t._freezeSettings(),n=(function(s,i,o,a){return new aFe(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,RY(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new R7e(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(Bs.fromBase64String(e))}catch(n){throw new Ye(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sa(Bs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(d_(e,sa._jsonSchema))return sa.fromBase64String(e.bytes)}}sa._jsonSchemaVersion="firestore/bytes/1.0",sa._jsonSchema={type:Qr("string",sa._jsonSchemaVersion),bytes:Qr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ye(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ds(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ye(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ye(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return hn(this._lat,e._lat)||hn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kc._jsonSchemaVersion}}static fromJSON(e){if(d_(e,Kc._jsonSchema))return new Kc(e.latitude,e.longitude)}}Kc._jsonSchemaVersion="firestore/geoPoint/1.0",Kc._jsonSchema={type:Qr("string",Kc._jsonSchemaVersion),latitude:Qr("number"),longitude:Qr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(d_(e,Qc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Qc(e.vectorValues);throw new Ye(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qc._jsonSchemaVersion="firestore/vectorValue/1.0",Qc._jsonSchema={type:Qr("string",Qc._jsonSchemaVersion),vectorValues:Qr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7e=/^__.*__$/;class U7e{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Eh(e,this.data,this.fieldMask,n,this.fieldTransforms):new f_(e,this.data,n,this.fieldTransforms)}}class DY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Eh(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MY(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt(40011,{Ac:t})}}class I6{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new I6({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return YC(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MY(this.Ac)&&$7e.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class F7e{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||UT(e)}Cc(e,n,r,s=!1){return new I6({Ac:e,methodName:n,Dc:r,path:Ds.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function T6(t){const e=t._freezeSettings(),n=UT(t._databaseId);return new F7e(t._databaseId,!!e.ignoreUndefinedProperties,n)}function j7e(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);S6("Data must be an object, but it was:",o,r);const a=BY(r,o);let c,l;if(i.merge)c=new _o(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const h=KN(e,d,n);if(!o.contains(h))throw new Ye(_e.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);$Y(u,h)||u.push(h)}c=new _o(u),l=o.fieldTransforms.filter((d=>c.covers(d.field)))}else c=null,l=o.fieldTransforms;return new U7e(new Gi(a),c,l)}class zT extends C6{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zT}}function V7e(t,e,n,r){const s=t.Cc(1,e,n);S6("Data must be an object, but it was:",s,r);const i=[],o=Gi.empty();_h(r,((c,l)=>{const u=x6(e,c,n);l=Hr(l);const d=s.yc(u);if(l instanceof zT)i.push(u);else{const h=w_(l,d);h!=null&&(i.push(u),o.set(u,h))}}));const a=new _o(i);return new DY(o,a,s.fieldTransforms)}function H7e(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[KN(e,r,n)],c=[s];if(i.length%2!=0)throw new Ye(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)a.push(KN(e,i[h])),c.push(i[h+1]);const l=[],u=Gi.empty();for(let h=a.length-1;h>=0;--h)if(!$Y(l,a[h])){const f=a[h];let m=c[h];m=Hr(m);const g=o.yc(f);if(m instanceof zT)l.push(f);else{const y=w_(m,g);y!=null&&(l.push(f),u.set(f,y))}}const d=new _o(l);return new DY(u,d,o.fieldTransforms)}function q7e(t,e,n,r=!1){return w_(n,t.Cc(r?4:3,e))}function w_(t,e){if(LY(t=Hr(t)))return S6("Unsupported field value:",e,t),BY(t,e);if(t instanceof C6)return(function(r,s){if(!MY(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let c=w_(a,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Hr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RFe(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=br.fromDate(r);return{timestampValue:WC(s.serializer,i)}}if(r instanceof br){const i=new br(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:WC(s.serializer,i)}}if(r instanceof Kc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sa)return{bytesValue:ZQ(s.serializer,r._byteString)};if(r instanceof Vr){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:l6(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Qc)return(function(o,a){return{mapValue:{fields:{[IQ]:{stringValue:TQ},[jC]:{arrayValue:{values:o.toArray().map((l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return o6(a.serializer,l)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${RT(r)}`)})(t,e)}function BY(t,e){const n={};return vQ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_h(t,((r,s)=>{const i=w_(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function LY(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof br||t instanceof Kc||t instanceof sa||t instanceof Vr||t instanceof C6||t instanceof Qc)}function S6(t,e,n){if(!LY(n)||!yQ(n)){const r=RT(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function KN(t,e,n){if((e=Hr(e))instanceof qT)return e._internalPath;if(typeof e=="string")return x6(t,e);throw YC("Field path arguments must be of type string or ",t,!1,void 0,n)}const z7e=new RegExp("[~\\*/\\[\\]]");function x6(t,e,n){if(e.search(z7e)>=0)throw YC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qT(...e.split("."))._internalPath}catch{throw YC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function YC(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Ye(_e.INVALID_ARGUMENT,a+t+c)}function $Y(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W7e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(P6("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class W7e extends UY{data(){return super.data()}}function P6(t,e){return typeof e=="string"?x6(t,e):e instanceof qT?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7e(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ye(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class R6{}class K7e extends R6{}function Q7e(t,e,...n){let r=[];e instanceof R6&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof N6)).length,a=i.filter((c=>c instanceof WT)).length;if(o>1||o>0&&a>0)throw new Ye(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class WT extends K7e{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new WT(e,n,r)}_apply(e){const n=this._parse(e);return FY(e._query,n),new HT(e.firestore,e.converter,LN(e._query,n))}_parse(e){const n=T6(e.firestore);return(function(i,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ye(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){GU(d,u);const m=[];for(const g of d)m.push(WU(c,i,g));h={arrayValue:{values:m}}}else h=WU(c,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||GU(d,u),h=q7e(a,o,d,u==="in"||u==="not-in");return Kr.create(l,u,h)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Y7e(t,e,n){const r=e,s=P6("where",t);return WT._create(s,r,n)}class N6 extends R6{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new N6(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Xa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)FY(o,c),o=LN(o,c)})(e._query,n),new HT(e.firestore,e.converter,LN(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function WU(t,e,n){if(typeof(n=Hr(n))=="string"){if(n==="")throw new Ye(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DQ(e)&&n.indexOf("/")!==-1)throw new Ye(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gr.fromString(n));if(!wt.isDocumentKey(r))throw new Ye(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lU(t,new wt(r))}if(n instanceof Vr)return lU(t,n._key);throw new Ye(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${RT(n)}.`)}function GU(t,e){if(!Array.isArray(t)||t.length===0)throw new Ye(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FY(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ye(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ye(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Z7e{convertValue(e,n="none"){switch(hh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Nt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _h(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[jC].arrayValue?.values?.map((r=>Ur(r.doubleValue)));return new Qc(n)}convertGeoPoint(e){return new Kc(Ur(e.latitude),Ur(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kT(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mb(e));default:return null}}convertTimestamp(e){const n=uh(e);return new br(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gr.fromString(e);Hn(rY(r),9688,{name:e});const s=new gb(r.get(1),r.get(3)),i=new wt(r.popFirst(5));return s.isEqual(n)||Cu(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7e(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Y0{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lf extends UY{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new D1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(P6("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ye(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Lf._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Lf._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lf._jsonSchema={type:Qr("string",Lf._jsonSchemaVersion),bundleSource:Qr("string","DocumentSnapshot"),bundleName:Qr("string"),bundle:Qr("string")};class D1 extends Lf{data(e={}){return super.data(e)}}class lg{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Y0(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new D1(this._firestore,this._userDataWriter,r.key,r,new Y0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ye(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const c=new D1(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Y0(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const c=new D1(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Y0(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:X7e(a.type),doc:c,oldIndex:l,newIndex:u}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ye(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lg._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=XD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function X7e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(t){t=Iu(t,Vr);const e=Iu(t.firestore,y_);return k7e(A6(e),t._key).then((n=>nje(e,t,n)))}lg._jsonSchemaVersion="firestore/querySnapshot/1.0",lg._jsonSchema={type:Qr("string",lg._jsonSchemaVersion),bundleSource:Qr("string","QuerySnapshot"),bundleName:Qr("string"),bundle:Qr("string")};class jY extends Z7e{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vr(this.firestore,null,n)}}function eje(t){t=Iu(t,HT);const e=Iu(t.firestore,y_),n=A6(e),r=new jY(e);return G7e(t._query),D7e(n,t._query).then((s=>new lg(e,r,t,s)))}function tje(t,e,n){t=Iu(t,Vr);const r=Iu(t.firestore,y_),s=J7e(t.converter,e);return VY(r,[j7e(T6(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wc.none())])}function ZC(t,e,n,...r){t=Iu(t,Vr);const s=Iu(t.firestore,y_),i=T6(s);let o;return o=typeof(e=Hr(e))=="string"||e instanceof qT?H7e(i,"updateDoc",t._key,e,n,r):V7e(i,"updateDoc",t._key,e),VY(s,[o.toMutation(t._key,Wc.exists(!0))])}function VY(t,e){return(function(r,s){const i=new uu;return r.asyncQueue.enqueueAndForget((async()=>_7e(await O7e(r),s,i))),i.promise})(A6(t),e)}function nje(t,e,n){const r=n.docs.get(e._key),s=new jY(t);return new Lf(t,s,e._key,r,new Y0(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){xy=s})(Ty),il(new Za("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new y_(new VUe(r.getProvider("auth-internal")),new zUe(o,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ye(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gb(l.options.projectId,u)})(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),da(Y4,Z4,e),da(Y4,Z4,"esm2020")})();var rje="firebase",sje="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */da(rje,sje,"app");const HY="@firebase/installations",k6="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qY=1e4,zY=`w:${k6}`,WY="FIS_v2",ije="https://firebaseinstallations.googleapis.com/v1",oje=3600*1e3,aje="installations",cje="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lje={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},hp=new Pp(aje,cje,lje);function GY(t){return t instanceof nc&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KY({projectId:t}){return`${ije}/projects/${t}/installations`}function QY(t){return{token:t.token,requestStatus:2,expiresIn:dje(t.expiresIn),creationTime:Date.now()}}async function YY(t,e){const r=(await e.json()).error;return hp.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ZY({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function uje(t,{refreshToken:e}){const n=ZY(t);return n.append("Authorization",hje(e)),n}async function JY(t){const e=await t();return e.status>=500&&e.status<600?t():e}function dje(t){return Number(t.replace("s","000"))}function hje(t){return`${WY} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fje({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=KY(t),s=ZY(t),i=e.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&s.append("x-firebase-client",l)}const o={fid:n,authVersion:WY,appId:t.appId,sdkVersion:zY},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await JY(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:QY(l.authToken)}}else throw await YY("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XY(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pje(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mje=/^[cdef][\w-]{21}$/,QN="";function gje(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=yje(t);return mje.test(n)?n:QN}catch{return QN}}function yje(t){return pje(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eZ=new Map;function tZ(t,e){const n=GT(t);nZ(n,e),wje(n,e)}function nZ(t,e){const n=eZ.get(t);if(n)for(const r of n)r(e)}function wje(t,e){const n=vje();n&&n.postMessage({key:t,fid:e}),bje()}let Ef=null;function vje(){return!Ef&&"BroadcastChannel"in self&&(Ef=new BroadcastChannel("[Firebase] FID Change"),Ef.onmessage=t=>{nZ(t.data.key,t.data.fid)}),Ef}function bje(){eZ.size===0&&Ef&&(Ef.close(),Ef=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _je="firebase-installations-database",Eje=1,fp="firebase-installations-store";let N2=null;function D6(){return N2||(N2=AK(_je,Eje,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fp)}}})),N2}async function JC(t,e){const n=GT(t),s=(await D6()).transaction(fp,"readwrite"),i=s.objectStore(fp),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&tZ(t,e.fid),e}async function rZ(t){const e=GT(t),r=(await D6()).transaction(fp,"readwrite");await r.objectStore(fp).delete(e),await r.done}async function KT(t,e){const n=GT(t),s=(await D6()).transaction(fp,"readwrite"),i=s.objectStore(fp),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&tZ(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M6(t){let e;const n=await KT(t.appConfig,r=>{const s=Aje(r),i=Cje(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===QN?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Aje(t){const e=t||{fid:gje(),registrationStatus:0};return sZ(e)}function Cje(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(hp.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Ije(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Tje(t)}:{installationEntry:e}}async function Ije(t,e){try{const n=await fje(t,e);return JC(t.appConfig,n)}catch(n){throw GY(n)&&n.customData.serverCode===409?await rZ(t.appConfig):await JC(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Tje(t){let e=await KU(t.appConfig);for(;e.registrationStatus===1;)await XY(100),e=await KU(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await M6(t);return r||n}return e}function KU(t){return KT(t,e=>{if(!e)throw hp.create("installation-not-found");return sZ(e)})}function sZ(t){return Sje(t)?{fid:t.fid,registrationStatus:0}:t}function Sje(t){return t.registrationStatus===1&&t.registrationTime+qY<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xje({appConfig:t,heartbeatServiceProvider:e},n){const r=Pje(t,n),s=uje(t,n),i=e.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&s.append("x-firebase-client",l)}const o={installation:{sdkVersion:zY,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await JY(()=>fetch(r,a));if(c.ok){const l=await c.json();return QY(l)}else throw await YY("Generate Auth Token",c)}function Pje(t,{fid:e}){return`${KY(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B6(t,e=!1){let n;const r=await KT(t.appConfig,i=>{if(!iZ(i))throw hp.create("not-registered");const o=i.authToken;if(!e&&Oje(o))return i;if(o.requestStatus===1)return n=Rje(t,e),i;{if(!navigator.onLine)throw hp.create("app-offline");const a=Dje(i);return n=Nje(t,a),a}});return n?await n:r.authToken}async function Rje(t,e){let n=await QU(t.appConfig);for(;n.authToken.requestStatus===1;)await XY(100),n=await QU(t.appConfig);const r=n.authToken;return r.requestStatus===0?B6(t,e):r}function QU(t){return KT(t,e=>{if(!iZ(e))throw hp.create("not-registered");const n=e.authToken;return Mje(n)?{...e,authToken:{requestStatus:0}}:e})}async function Nje(t,e){try{const n=await xje(t,e),r={...e,authToken:n};return await JC(t.appConfig,r),n}catch(n){if(GY(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await rZ(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await JC(t.appConfig,r)}throw n}}function iZ(t){return t!==void 0&&t.registrationStatus===2}function Oje(t){return t.requestStatus===2&&!kje(t)}function kje(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+oje}function Dje(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Mje(t){return t.requestStatus===1&&t.requestTime+qY<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bje(t){const e=t,{installationEntry:n,registrationPromise:r}=await M6(e);return r?r.catch(console.error):B6(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lje(t,e=!1){const n=t;return await $je(n),(await B6(n,e)).token}async function $je(t){const{registrationPromise:e}=await M6(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uje(t){if(!t||!t.options)throw O2("App Configuration");if(!t.name)throw O2("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw O2(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function O2(t){return hp.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oZ="installations",Fje="installations-internal",jje=t=>{const e=t.getProvider("app").getImmediate(),n=Uje(e),r=Rp(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Vje=t=>{const e=t.getProvider("app").getImmediate(),n=Rp(e,oZ).getImmediate();return{getId:()=>Bje(n),getToken:s=>Lje(n,s)}};function Hje(){il(new Za(oZ,jje,"PUBLIC")),il(new Za(Fje,Vje,"PRIVATE"))}Hje();da(HY,k6);da(HY,k6,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="analytics",qje="firebase_id",zje="origin",Wje=60*1e3,Gje="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",L6="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new TT("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kje={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Co=new Pp("analytics","Analytics",Kje);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qje(t){if(!t.startsWith(L6)){const e=Co.create("invalid-gtag-resource",{gtagURL:t});return Xi.warn(e.message),""}return t}function aZ(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Yje(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Zje(t,e){const n=Yje("firebase-js-sdk-policy",{createScriptURL:Qje}),r=document.createElement("script"),s=`${L6}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Jje(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Xje(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await aZ(n)).find(l=>l.measurementId===s);c&&await e[c.appId]}}catch(a){Xi.error(a)}t("config",s,i)}async function eVe(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await aZ(n);for(const c of o){const l=a.find(d=>d.measurementId===c),u=l&&e[l.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Xi.error(i)}}function tVe(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await eVe(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await Xje(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,l]=o;t("get",a,c,l)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Xi.error(a)}}return s}function nVe(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=tVe(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function rVe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(L6)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sVe=30,iVe=1e3;class oVe{constructor(e={},n=iVe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const cZ=new oVe;function aVe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function cVe(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:aVe(n)},s=Gje.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();a.error?.message&&(o=a.error.message)}catch{}throw Co.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function lVe(t,e=cZ,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Co.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Co.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new hVe;return setTimeout(async()=>{a.abort()},Wje),lZ({appId:r,apiKey:s,measurementId:i},o,a,e)}async function lZ(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=cZ){const{appId:i,measurementId:o}=t;try{await uVe(r,e)}catch(a){if(o)return Xi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a?.message}]`),{appId:i,measurementId:o};throw a}try{const a=await cVe(t);return s.deleteThrottleMetadata(i),a}catch(a){const c=a;if(!dVe(c)){if(s.deleteThrottleMetadata(i),o)return Xi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:o};throw a}const l=Number(c?.customData?.httpStatus)===503?_4(n,s.intervalMillis,sVe):_4(n,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return s.setThrottleMetadata(i,u),Xi.debug(`Calling attemptFetch again in ${l} millis`),lZ(t,u,r,s)}}function uVe(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Co.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function dVe(t){if(!(t instanceof nc)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class hVe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function fVe(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pVe(){if(vK())try{await bK()}catch(t){return Xi.warn(Co.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Xi.warn(Co.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function mVe(t,e,n,r,s,i,o){const a=lVe(t);a.then(h=>{n[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&Xi.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Xi.error(h)),e.push(a);const c=pVe().then(h=>{if(h)return r.getId()}),[l,u]=await Promise.all([a,c]);rVe(i)||Zje(i,l.measurementId),s("js",new Date);const d=o?.config??{};return d[zje]="firebase",d.update=!0,u!=null&&(d[qje]=u),s("config",l.measurementId,d),l.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gVe{constructor(e){this.app=e}_delete(){return delete Nw[this.app.options.appId],Promise.resolve()}}let Nw={},YU=[];const ZU={};let k2="dataLayer",yVe="gtag",JU,uZ,XU=!1;function wVe(){const t=[];if(wK()&&t.push("This is a browser extension environment."),n$e()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Co.create("invalid-analytics-context",{errorInfo:e});Xi.warn(n.message)}}function vVe(t,e,n){wVe();const r=t.options.appId;if(!r)throw Co.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Xi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Co.create("no-api-key");if(Nw[r]!=null)throw Co.create("already-exists",{id:r});if(!XU){Jje(k2);const{wrappedGtag:i,gtagCore:o}=nVe(Nw,YU,ZU,k2,yVe);uZ=i,JU=o,XU=!0}return Nw[r]=mVe(t,YU,ZU,e,JU,k2,n),new gVe(t)}function bVe(t=HD()){t=Hr(t);const e=Rp(t,XC);return e.isInitialized()?e.getImmediate():_Ve(t)}function _Ve(t,e={}){const n=Rp(t,XC);if(n.isInitialized()){const s=n.getImmediate();if(ch(e,n.getOptions()))return s;throw Co.create("already-initialized")}return n.initialize({options:e})}function EVe(t,e,n,r){t=Hr(t),fVe(uZ,Nw[t.app.options.appId],e,n,r).catch(s=>Xi.error(s))}const eF="@firebase/analytics",tF="0.10.18";function AVe(){il(new Za(XC,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return vVe(r,s,n)},"PUBLIC")),il(new Za("analytics-internal",t,"PRIVATE")),da(eF,tF),da(eF,tF,"esm2020");function t(e){try{const n=e.getProvider(XC).getImmediate();return{logEvent:(r,s,i)=>EVe(n,r,s,i)}}catch(n){throw Co.create("interop-component-reg-failed",{reason:n})}}}AVe();const CVe={apiKey:"AIzaSyCoDtDcP6vRaDBzHmxsqrqArCML0dsxjNE",authDomain:"coinphantom-e995b.firebaseapp.com",projectId:"coinphantom-e995b",storageBucket:"coinphantom-e995b.firebasestorage.app",messagingSenderId:"784143371426",appId:"1:784143371426:web:0185e75229808663331bfb",measurementId:"G-ZPL33FRZNP"};let Od,Ow,YN,nF;try{Od=CK(CVe),Ow=kY(Od),YN=aQ(Od),nF=bVe(Od)}catch(t){console.warn("Firebase initialization failed:",t),Od={name:"mock-app"},Ow={collection:()=>({})},YN={currentUser:null},nF=null}typeof window<"u"&&(window.firebase={app:Od,firestore:Ow,auth:YN,firestore:{collection:t=>{const{collection:e,query:n,where:r,getDocs:s}=require("firebase/firestore");return{where:(i,o,a)=>({get:async()=>{const c=n(e(Ow,t),r(i,o,a));return{docs:(await s(c)).docs.map(u=>({id:u.id,data:()=>u.data()}))}}}),get:async()=>({docs:(await s(e(Ow,t))).docs.map(o=>({id:o.id,data:()=>o.data()}))})}}}});const Oy=aQ(Od),Yd=kY(Od),dZ=Lt(!1),Io=Lt(null),ec=Lt(null),pp=Lt(!1),hZ=async()=>{try{S4e(Oy,t=>{ec.value=t,dZ.value=!0,t?IVe(t.uid):ec.value=null})}catch(t){Io.value=`Failed to initialize Firebase: ${t.message}`,console.error("❌ Firebase initialization failed:",t)}},IVe=async t=>{try{const e=await O6(dp(Yd,"users",t));if(e.exists())return e.data();await TVe(t)}catch(e){console.error("❌ Failed to load user data:",e)}},TVe=async t=>{try{const e=Oy.currentUser;if(!e)return;const n={uid:t,email:e.email,displayName:e.displayName||"",photoURL:e.photoURL||"",createdAt:new Date,updatedAt:new Date,tokenBalance:0,nftBalance:0,totalEarned:0,referralEarnings:0,referralCode:SVe(),referralCount:0,level:"F0",dailyTasks:{checkIn:!1},completedTasks:[],lastCheckIn:null};await tje(dp(Yd,"users",t),n)}catch(e){console.error("❌ Failed to create user document:",e)}},SVe=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},xVe=async(t,e)=>{try{return pp.value=!0,Io.value=null,{success:!0,user:(await E4e(Oy,t,e)).user}}catch(n){return Io.value=$6(n.code),console.error("❌ Sign in failed:",n),{success:!1,error:Io.value}}finally{pp.value=!1}},PVe=async(t,e,n="")=>{try{pp.value=!0,Io.value=null;const r=await _4e(Oy,t,e);return n&&await C4e(r.user,{displayName:n}),{success:!0,user:r.user}}catch(r){return Io.value=$6(r.code),console.error("❌ Sign up failed:",r),{success:!1,error:Io.value}}finally{pp.value=!1}},RVe=async()=>{try{return await x4e(Oy),{success:!0}}catch(t){return Io.value=`Failed to sign out: ${t.message}`,console.error("❌ Sign out failed:",t),{success:!1,error:Io.value}}},NVe=async t=>{try{return pp.value=!0,Io.value=null,await b4e(Oy,t),{success:!0}}catch(e){return Io.value=$6(e.code),console.error("❌ Password reset failed:",e),{success:!1,error:Io.value}}finally{pp.value=!1}},OVe=async t=>{try{if(!ec.value)throw new Error("No user logged in");const e=dp(Yd,"users",ec.value.uid);return await ZC(e,{...t,updatedAt:new Date}),{success:!0}}catch(e){return console.error("❌ Failed to update user data:",e),{success:!1,error:e.message}}},kVe=async(t=null)=>{try{const e=t||ec.value?.uid;if(!e)throw new Error("No user ID provided");const n=await O6(dp(Yd,"users",e));return n.exists()?{success:!0,data:n.data()}:{success:!1,error:"User not found"}}catch(e){return console.error("❌ Failed to get user data:",e),{success:!1,error:e.message}}},DVe=async t=>{try{if(!ec.value)throw new Error("No user logged in");const e=dp(Yd,"users",ec.value.uid),n=await O6(e);if(!n.exists())throw new Error("User document not found");const r=n.data(),i={checkIn:1,telegramGroup:2,telegramChannel:2,facebookPage:2,twitterFollow:2,socialShare:3,connect_wallet:5}[t]||0,o=r.tokenBalance+i,a={tokenBalance:o,totalEarned:r.totalEarned+i,updatedAt:new Date};if(t==="checkIn")a[`dailyTasks.${t}`]=!0,a.lastCheckIn=new Date;else{const c=r.completedTasks||[];c.includes(t)||(a.completedTasks=[...c,t])}return await ZC(e,a),{success:!0,reward:i,newBalance:o}}catch(e){return console.error("❌ Failed to claim task reward:",e),{success:!1,error:e.message}}},MVe=async t=>{try{if(!ec.value)throw new Error("No user logged in");const e=B7e(Yd,"users"),n=Q7e(e,Y7e("referralCode","==",t)),r=await eje(n);if(r.empty)throw new Error("Invalid referral code");const s=r.docs[0],i=s.data();return await ZC(dp(Yd,"users",s.id),{referralCount:i.referralCount+1,referralEarnings:i.referralEarnings+5,updatedAt:new Date}),await ZC(dp(Yd,"users",ec.value.uid),{referredBy:t,updatedAt:new Date}),{success:!0}}catch(e){return console.error("❌ Failed to add referral:",e),{success:!1,error:e.message}}},$6=t=>({"auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters.","auth/invalid-email":"Invalid email address.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/user-disabled":"This account has been disabled.","auth/operation-not-allowed":"This operation is not allowed.","auth/network-request-failed":"Network error. Please check your connection."})[t]||"An error occurred. Please try again.",BVe=_r(()=>!!ec.value);hZ();function fZ(){return{isFirebaseReady:dZ,firebaseError:Io,currentUser:ec,isLoading:pp,isAuthenticated:BVe,initializeFirebase:hZ,signIn:xVe,signUp:PVe,signOut:RVe,resetPassword:NVe,updateUserData:OVe,getUserData:kVe,claimTaskReward:DVe,addReferral:MVe}}const LVe={name:"WalletStatus",setup(){const t=Lt(!1),e=Lt(null),n=Lt(null),r=Lt("Ethereum"),s=_r(()=>n.value?`${n.value.slice(0,6)}...${n.value.slice(-4)}`:""),i=c=>({metamask:"fab fa-ethereum",coinbase:"fas fa-wallet",trust:"fas fa-shield-alt",binance:"fas fa-wallet",okx:"fas fa-key","io.metamask":"fab fa-ethereum","com.coinbase.wallet":"fas fa-wallet","com.trustwallet.app":"fas fa-shield-alt","com.binance.wallet":"fas fa-wallet","com.okex.wallet":"fas fa-key"})[c]||"fas fa-wallet",o=()=>{t.value=!1,e.value=null,n.value=null,window.dispatchEvent(new CustomEvent("wallet-disconnected"))},a=c=>{const{address:l,wallet:u}=c.detail;t.value=!0,e.value=u,n.value=l};return wp(()=>{window.addEventListener("wallet-connected",a)}),sy(()=>{window.removeEventListener("wallet-connected",a)}),{isConnected:t,connectedWallet:e,walletAddress:n,networkName:r,shortAddress:s,getWalletIcon:i,disconnect:o}}},$Ve={key:0,class:"wallet-status"},UVe={class:"wallet-info"},FVe={class:"wallet-icon"},jVe={class:"wallet-details"},VVe={class:"address"},HVe={class:"network"};function qVe(t,e,n,r,s,i){return r.isConnected?(dt(),Ct("div",$Ve,[H("div",UVe,[H("div",FVe,[H("i",{class:jn(r.getWalletIcon(r.connectedWallet))},null,2)]),H("div",jVe,[H("div",VVe,xt(r.shortAddress),1),H("div",HVe,xt(r.networkName),1)])]),H("button",{onClick:e[0]||(e[0]=(...o)=>r.disconnect&&r.disconnect(...o)),class:"disconnect-btn",title:"Disconnect"},e[1]||(e[1]=[H("i",{class:"fas fa-times"},null,-1)]))])):pi("",!0)}const rF=Nb(LVe,[["render",qVe],["__scopeId","data-v-ef0bc432"]]),pZ=Symbol(),zVe={install(t,e){const{config:n,reconnectOnMount:r=!0}=e;t.provide(pZ,n);const{onMount:s}=ZSe(n,{...e,reconnectOnMount:r});s()}},WVe="0.2.0",GVe=()=>`@wagmi/vue@${WVe}`;class mZ extends Ru{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/vue"}get version(){return GVe()}}class KVe extends mZ{constructor(){super("No `config` found in Vue context, use `WagmiPlugin` to properly initialize the library.",{docsPath:"/api/TODO"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiPluginNotFoundError"})}}class QVe extends mZ{constructor(){super("Wagmi composables can only be used inside `setup()` function or functions that support injection context.",{docsPath:"/api/TODO"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiInjectionContextError"})}}function YVe(t,e){for(const n of Object.keys(t))t[n]=e[n]}function U6(t={}){const e=_s(t);if(e.config)return e.config;if(!c9())throw new QVe;const n=Eo(pZ);if(!n)throw new KVe;return n}function ZVe(t={}){const e=U6(t),n=yp(eg(e)),r=Bq(e,{onChange(s){YVe(n,s)}});return cO(()=>r()),HF(Sb(n))}var v_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},b_=typeof window>"u"||"Deno"in globalThis;function Oa(){}function JVe(t,e){return typeof t=="function"?t(e):t}function XVe(t){return typeof t=="number"&&t>=0&&t!==1/0}function eHe(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ZN(t,e){return typeof t=="function"?t(e):t}function tHe(t,e){return typeof t=="function"?t(e):t}function sF(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==F6(o,e.options))return!1}else if(!bb(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function iF(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(mp(e.options.mutationKey)!==mp(i))return!1}else if(!bb(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function F6(t,e){return(e?.queryKeyHashFn||mp)(t)}function mp(t){return JSON.stringify(t,(e,n)=>JN(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function bb(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>bb(t[n],e[n])):!1}function gZ(t,e){if(t===e)return t;const n=oF(t)&&oF(e);if(n||JN(t)&&JN(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=gZ(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function nHe(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function oF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function JN(t){if(!aF(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!aF(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function aF(t){return Object.prototype.toString.call(t)==="[object Object]"}function rHe(t){return new Promise(e=>{setTimeout(e,t)})}function sHe(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?gZ(t,e):e}function iHe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function oHe(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var j6=Symbol();function yZ(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===j6?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function aHe(t,e){return typeof t=="function"?t(...e):!!t}var cHe=class extends v_{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!b_&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},wZ=new cHe,lHe=class extends v_{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!b_&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},eI=new lHe;function uHe(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function dHe(t){return Math.min(1e3*2**t,3e4)}function vZ(t){return(t??"online")==="online"?eI.isOnline():!0}var bZ=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function _Z(t){let e=!1,n=0,r;const s=uHe(),i=()=>s.status!=="pending",o=g=>{i()||(h(new bZ(g)),t.abort?.())},a=()=>{e=!0},c=()=>{e=!1},l=()=>wZ.isFocused()&&(t.networkMode==="always"||eI.isOnline())&&t.canRun(),u=()=>vZ(t.networkMode)&&t.canRun(),d=g=>{i()||(r?.(),s.resolve(g))},h=g=>{i()||(r?.(),s.reject(g))},f=()=>new Promise(g=>{r=y=>{(i()||l())&&g(y)},t.onPause?.()}).then(()=>{r=void 0,i()||t.onContinue?.()}),m=()=>{if(i())return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(d).catch(v=>{if(i())return;const _=t.retry??(b_?0:3),A=t.retryDelay??dHe,k=typeof A=="function"?A(n,v):A,S=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,v);if(e||!S){h(v);return}n++,t.onFail?.(n,v),rHe(k).then(()=>l()?void 0:f()).then(()=>{e?h(v):m()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r?.(),s),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?m():f().then(m),s)}}var hHe=t=>setTimeout(t,0);function fHe(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=hHe;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Xs=fHe(),EZ=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),XVe(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(b_?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},pHe=class extends EZ{#e;#t;#n;#r;#s;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=gHe(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=sHe(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Oa).catch(Oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>tHe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===j6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ZN(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!eHe(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const a=this.observers.find(c=>c.options.queryFn);a&&this.setOptions(a.options)}const n=new AbortController,r=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},s=()=>{const a=yZ(this.options,e),l=(()=>{const u={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(u),u})();return this.#a=!1,this.options.persister?this.options.persister(a,l,this):a(l)},o=(()=>{const a={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(a),a})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#s=_Z({initialPromise:e?.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onFail:(a,c)=>{this.#i({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const a=await this.#s.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#n.config.onSuccess?.(a,this),this.#n.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof bZ){if(a.silent)return this.#s.promise;if(a.revert){if(this.setState({...this.#t,fetchStatus:"idle"}),this.state.data===void 0)throw a;return this.state.data}}throw this.#i({type:"error",error:a}),this.#n.config.onError?.(a,this),this.#n.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...mHe(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Xs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function mHe(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vZ(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function gHe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var AZ=class extends v_{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,r){const s=n.queryKey,i=n.queryHash??F6(s,n);let o=this.get(i);return o||(o=new pHe({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Xs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>sF(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>sF(e,r)):n}notify(e){Xs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Xs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Xs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},yHe=class extends EZ{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||CZ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})};this.#n=_Z({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(s,i)=>{this.#r({type:"failed",failureCount:s,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",r=!this.#n.canStart();try{if(n)e();else{this.#r({type:"pending",variables:t,isPaused:r}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:r})}const s=await this.#n.start();return await this.#t.config.onSuccess?.(s,t,this.state.context,this),await this.options.onSuccess?.(s,t,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,t,this.state.context),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#t.config.onError?.(s,t,this.state.context,this),await this.options.onError?.(s,t,this.state.context),await this.#t.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,t,this.state.context),s}finally{this.#r({type:"error",error:s})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Xs.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function CZ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var IZ=class extends v_{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,n,r){const s=new yHe({mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){this.#e.add(e);const n=zE(e);if(typeof n=="string"){const r=this.#t.get(n);r?r.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=zE(e);if(typeof n=="string"){const r=this.#t.get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=zE(e);if(typeof n=="string"){const s=this.#t.get(n)?.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){const n=zE(e);return typeof n=="string"?this.#t.get(n)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Xs.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(r=>iF(n,r))}findAll(e={}){return this.getAll().filter(n=>iF(e,n))}notify(e){Xs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Xs.batch(()=>Promise.all(e.map(n=>n.continue().catch(Oa))))}};function zE(t){return t.options.scope?.id}function cF(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let u=!1;const d=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},h=yZ(e.options,e.fetchOptions),f=async(m,g,y)=>{if(u)return Promise.reject();if(g==null&&m.pages.length)return Promise.resolve(m);const _=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:g,direction:y?"backward":"forward",meta:e.options.meta};return d(R),R})(),A=await h(_),{maxPages:k}=e.options,S=y?oHe:iHe;return{pages:S(m.pages,A,k),pageParams:S(m.pageParams,g,k)}};if(s&&i.length){const m=s==="backward",g=m?wHe:lF,y={pages:i,pageParams:o},v=g(r,y);a=await f(y,v,m)}else{const m=t??i.length;do{const g=c===0?o[0]??r.initialPageParam:lF(r,a);if(c>0&&g==null)break;a=await f(a,g),c++}while(c<m)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=l}}}function lF(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function wHe(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var vHe=class{#e;#t;#n;#r;#s;#o;#a;#i;constructor(e={}){this.#e=e.queryCache||new AZ,this.#t=e.mutationCache||new IZ,this.#n=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=wZ.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=eI.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),r=this.#e.build(this,n),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ZN(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:r})=>{const s=r.data;return[n,s]})}setQueryData(e,n,r){const s=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(s.queryHash)?.state.data,a=JVe(n,o);if(a!==void 0)return this.#e.build(this,s).setData(a,{...r,manual:!0})}setQueriesData(e,n,r){return Xs.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,n,r)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;Xs.batch(()=>{n.findAll(e).forEach(r=>{n.remove(r)})})}resetQueries(e,n){const r=this.#e;return Xs.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const r={revert:!0,...n},s=Xs.batch(()=>this.#e.findAll(e).map(i=>i.cancel(r)));return Promise.all(s).then(Oa).catch(Oa)}invalidateQueries(e,n={}){return Xs.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const r={...n,cancelRefetch:n.cancelRefetch??!0},s=Xs.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(Oa)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Oa)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const r=this.#e.build(this,n);return r.isStaleByTime(ZN(n.staleTime,r))?r.fetch(n):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Oa).catch(Oa)}fetchInfiniteQuery(e){return e.behavior=cF(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Oa).catch(Oa)}ensureInfiniteQueryData(e){return e.behavior=cF(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return eI.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#r.set(mp(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#r.values()],r={};return n.forEach(s=>{bb(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,n){this.#s.set(mp(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],r={};return n.forEach(s=>{bb(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=F6(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===j6&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},bHe=class extends v_{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),nHe(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&mp(n.mutationKey)!==mp(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#o()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#s(){const e=this.#n?.state??CZ();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){Xs.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}};function _He(t){return{mutationFn(e){return NR(t,e)},mutationKey:["disconnect"]}}var EHe="VUE_QUERY_CLIENT";function TZ(t){const e=t?`:${t}`:"";return`${EHe}${e}`}function AHe(t,e){Object.keys(t).forEach(n=>{t[n]=e[n]})}function XN(t,e,n="",r=0){if(e){const s=e(t,n,r);if(s===void 0&&os(t)||s!==void 0)return s}if(Array.isArray(t))return t.map((s,i)=>XN(s,e,String(i),r+1));if(typeof t=="object"&&IHe(t)){const s=Object.entries(t).map(([i,o])=>[i,XN(o,e,i,r+1)]);return Object.fromEntries(s)}return t}function CHe(t,e){return XN(t,e)}function on(t,e=!1){return CHe(t,(n,r,s)=>{if(s===1&&r==="queryKey")return on(n,!0);if(e&&THe(n))return on(n(),e);if(os(n))return on(_s(n),e)})}function IHe(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function THe(t){return typeof t=="function"}function SHe(t=""){if(!c9())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const e=TZ(t),n=Eo(e);if(!n)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return n}var xHe=class extends AZ{find(t){return super.find(on(t))}findAll(t={}){return super.findAll(on(t))}},PHe=class extends IZ{find(t){return super.find(on(t))}findAll(t={}){return super.findAll(on(t))}},SZ=class extends vHe{constructor(t={}){const e={defaultOptions:t.defaultOptions,queryCache:t.queryCache||new xHe,mutationCache:t.mutationCache||new PHe};super(e),this.isRestoring=Lt(!1)}isFetching(t={}){return super.isFetching(on(t))}isMutating(t={}){return super.isMutating(on(t))}getQueryData(t){return super.getQueryData(on(t))}ensureQueryData(t){return super.ensureQueryData(on(t))}getQueriesData(t){return super.getQueriesData(on(t))}setQueryData(t,e,n={}){return super.setQueryData(on(t),e,on(n))}setQueriesData(t,e,n={}){return super.setQueriesData(on(t),e,on(n))}getQueryState(t){return super.getQueryState(on(t))}removeQueries(t={}){return super.removeQueries(on(t))}resetQueries(t={},e={}){return super.resetQueries(on(t),on(e))}cancelQueries(t={},e={}){return super.cancelQueries(on(t),on(e))}invalidateQueries(t={},e={}){const n=on(t),r=on(e);if(super.invalidateQueries({...n,refetchType:"none"},r),n.refetchType==="none")return Promise.resolve();const s={...n,type:n.refetchType??n.type??"active"};return Pb().then(()=>super.refetchQueries(s,r))}refetchQueries(t={},e={}){return super.refetchQueries(on(t),on(e))}fetchQuery(t){return super.fetchQuery(on(t))}prefetchQuery(t){return super.prefetchQuery(on(t))}fetchInfiniteQuery(t){return super.fetchInfiniteQuery(on(t))}prefetchInfiniteQuery(t){return super.prefetchInfiniteQuery(on(t))}setDefaultOptions(t){super.setDefaultOptions(on(t))}setQueryDefaults(t,e){super.setQueryDefaults(on(t),on(e))}getQueryDefaults(t){return super.getQueryDefaults(on(t))}setMutationDefaults(t,e){super.setMutationDefaults(on(t),on(e))}getMutationDefaults(t){return super.getMutationDefaults(on(t))}},RHe={install:(t,e={})=>{const n=TZ(e.queryClientKey);let r;if("queryClient"in e&&e.queryClient)r=e.queryClient;else{const o="queryClientConfig"in e?e.queryClientConfig:void 0;r=new SZ(o)}b_||r.mount();let s=()=>{};if(e.clientPersister){r.isRestoring&&(r.isRestoring.value=!0);const[o,a]=e.clientPersister(r);s=o,a.then(()=>{r.isRestoring&&(r.isRestoring.value=!1),e.clientPersisterOnSuccess?.(r)})}const i=()=>{r.unmount(),s()};if(t.onUnmount)t.onUnmount(i);else{const o=t.unmount;t.unmount=function(){i(),o()}}t.provide(n,r)}};function NHe(t,e){const n=SHe(),r=_r(()=>n.defaultMutationOptions(on(t))),s=new bHe(n,r.value),i=r.value.shallow?fO(s.getCurrentResult()):yp(s.getCurrentResult()),o=s.subscribe(u=>{AHe(i,u)}),a=(u,d)=>{s.mutate(u,d).catch(()=>{})};Tf(r,()=>{s.setOptions(r.value)}),cO(()=>{o()});const c=r.value.shallow?ree(i):Sb(i),l=HF(c);return Tf(()=>i.error,u=>{if(u&&aHe(r.value.throwOnError,[u]))throw u}),{...l,mutate:a,mutateAsync:i.mutate,reset:i.reset}}function OHe(t={}){const e=U6(t),n=Lt(Ac(e)),r=Lq(e,{onChange(s){n.value=s}});return cO(()=>r()),Sb(n)}function kHe(t={}){const{mutation:e}=t,n=U6(t),r=OHe({config:n}),s=_He(n),{mutate:i,mutateAsync:o,...a}=NHe({...e,...s});return{...a,connectors:_r(()=>r.value.map(c=>c.connector)),disconnect:i,disconnectAsync:o}}const DHe={class:"wallet-address"},MHe={key:0,class:"wallet-dropdown"},BHe={class:"dropdown-content"},LHe={__name:"ReownWalletButton",setup(t){const{open:e}=dSe(),{address:n}=ZVe(),{disconnect:r}=kHe(),s=Lt(!1),i=Lt(null),o=_r(()=>!!n?.value),a=_r(()=>n.value?`${n.value.slice(0,6)}...${n.value.slice(-4)}`:""),c=()=>{s.value=!s.value},l=u=>{i.value&&!i.value.contains(u.target)&&(s.value=!1)};return wp(()=>{document.addEventListener("click",l)}),sy(()=>{document.removeEventListener("click",l)}),(u,d)=>{const h=tu("appkit-button");return o.value?(dt(),Ct("div",{key:1,class:"wallet-container",ref_key:"walletContainer",ref:i,onMouseenter:d[1]||(d[1]=f=>s.value=!0),onMouseleave:d[2]||(d[2]=f=>s.value=!1)},[H("div",{class:"wallet-info",onClick:c},[H("span",DHe,xt(a.value),1),s.value?(dt(),Ct("div",MHe,[H("div",BHe,[d[3]||(d[3]=H("p",{class:"wallet-detail"},"Connected Wallet",-1)),H("button",{class:"wallet-disconnect",onClick:d[0]||(d[0]=(...f)=>_s(r)&&_s(r)(...f))},"Disconnect")])])):pi("",!0)])],544)):(dt(),ia(h,{key:0,features:{chain:!1}}))}}},uF=Nb(LHe,[["__scopeId","data-v-8ce6ae4f"]]),$He={class:"header"},UHe={class:"navbar"},FHe={class:"nav-container"},jHe={class:"nav-logo"},VHe={class:"nav-menu desktop-menu"},HHe={class:"nav-list"},qHe=["onMouseenter","onMouseleave"],zHe=["onClick"],WHe=["onClick"],GHe=["onClick"],KHe={class:"nav-actions"},QHe={class:"wallet-section"},YHe={key:0,class:"user-menu"},ZHe=["src"],JHe={class:"mobile-nav-list"},XHe={key:0,class:"mobile-dropdown"},eqe=["onClick"],tqe=["onClick"],nqe=["onClick"],rqe={class:"mobile-actions"},sqe={class:"mobile-wallet-section"},iqe={__name:"Header",setup(t){const e=lz(),n=Lt(!1),r=Lt(null),s=Lt(!1),{walletAddress:i,disconnectWallet:o}=cK(),{currentUser:a,signOut:c}=fZ(),l=Lt([{id:"game",name:"Game",url:"/game",icon:"fas fa-gamepad"},{id:"marketplace",name:"Marketplace",url:"/marketplace",icon:"fas fa-store"},{id:"collection",name:"Collection",url:"/collection",icon:"fas fa-images"},{id:"investment",name:"Investment",url:"/investment",icon:"fas fa-chart-pie"},{id:"profile",name:"Profile",url:"/profile",icon:"fas fa-user",submenu:[{id:"my-profile",name:"My Profile",url:"/profile",icon:"fas fa-user-circle"},{id:"dashboard",name:"Dashboard",url:"/dashboard",icon:"fas fa-chart-line"},{id:"tasks",name:"Daily Tasks",url:"/tasks",icon:"fas fa-tasks"},{id:"wallet-test",name:"Wallet Test",url:"/wallet-test",icon:"fas fa-wallet"},{id:"referral",name:"Referral",url:"/referral",icon:"fas fa-users"}]},{id:"more",name:"More",url:"#",icon:"fas fa-ellipsis-h",submenu:[{id:"blindbox",name:"Blindbox",url:"/blindbox",icon:"fas fa-box-open"},{id:"swap",name:"Swap",url:"/swap",icon:"fas fa-exchange-alt"},{id:"creators",name:"Creators",url:"/creators",icon:"fas fa-palette"},{id:"whitepaper",name:"Whitepaper",url:"/whitepaper",icon:"fas fa-file-alt"}]}]);_r(()=>i.value?`${i.value.slice(0,6)}...${i.value.slice(-4)}`:"");const u=S=>{e.push(S)},d=()=>{n.value=!n.value,n.value?document.body.style.overflow="hidden":document.body.style.overflow=""},h=S=>{window.innerWidth>991&&(r.value=S)},f=S=>{window.innerWidth>991&&(r.value=null)},m=S=>{window.innerWidth<=991&&(r.value=r.value===S?null:S)},g=()=>{s.value=!s.value},y=()=>{s.value=!1},v=S=>{window.innerWidth<=991&&(n.value=!1,document.body.style.overflow=""),r.value=null,y(),S.action==="logout"?_():S.url&&S.url!=="#"&&e.push(S.url)},_=async()=>{try{confirm("Bạn có chắc chắn muốn đăng xuất?")&&(await c(),o(),e.push("/"),y())}catch(S){console.error("Logout error:",S)}},A=()=>{window.innerWidth>991&&(n.value=!1,r.value=null,document.body.style.overflow="")},k=S=>{S.target.closest(".user-menu")||y()};return wp(()=>{window.addEventListener("resize",A),document.addEventListener("click",k)}),sy(()=>{window.removeEventListener("resize",A),document.removeEventListener("click",k)}),(S,R)=>(dt(),Ct("header",$He,[H("nav",UHe,[H("div",FHe,[H("div",jHe,[H("div",{class:"logo",onClick:R[0]||(R[0]=T=>u("/"))},R[3]||(R[3]=[H("img",{src:lK,alt:"PixelPayot",class:"logo-img"},null,-1),H("span",{class:"logo-text"},"PixelPayot",-1)]))]),H("div",VHe,[H("ul",HHe,[(dt(!0),Ct(ar,null,Ma(l.value,T=>(dt(),Ct("li",{class:"nav-item",key:T.id},[T.submenu?(dt(),Ct("div",{key:0,class:"nav-dropdown",onMouseenter:b=>h(T.id),onMouseleave:b=>f(T.id)},[H("div",{class:jn(["nav-link dropdown-toggle",{active:r.value===T.id}]),onClick:b=>m(T.id)},[H("i",{class:jn(T.icon)},null,2),H("span",null,xt(T.name),1),R[4]||(R[4]=H("i",{class:"fas fa-chevron-down"},null,-1))],10,zHe),H("ul",{class:jn(["dropdown-menu",{show:r.value===T.id}])},[(dt(!0),Ct(ar,null,Ma(T.submenu,b=>(dt(),Ct("li",{key:b.id},[H("div",{class:"dropdown-item",onClick:E=>v(b)},[H("i",{class:jn(b.icon)},null,2),H("span",null,xt(b.name),1)],8,WHe)]))),128))],2)],40,qHe)):(dt(),Ct("div",{key:1,class:jn(["nav-link",{active:S.$route.path===T.url}]),onClick:b=>v(T)},[H("i",{class:jn(T.icon)},null,2),H("span",null,xt(T.name),1)],10,GHe))]))),128))])]),H("div",KHe,[H("div",QHe,[cn(rF),cn(uF)]),_s(a)?(dt(),Ct("div",YHe,[H("div",{class:"user-avatar",onClick:g},[H("img",{src:_s(a).photoURL||"../assets/images/default-avatar.png",alt:"User"},null,8,ZHe),R[5]||(R[5]=H("i",{class:"fas fa-chevron-down"},null,-1))]),H("ul",{class:jn(["user-dropdown",{show:s.value}])},[H("li",null,[H("div",{onClick:R[1]||(R[1]=T=>v({url:"/profile",action:"navigate"}))},R[6]||(R[6]=[H("i",{class:"fas fa-user"},null,-1),H("span",null,"Profile",-1)]))]),H("li",null,[H("div",{onClick:R[2]||(R[2]=T=>v({url:"/dashboard",action:"navigate"}))},R[7]||(R[7]=[H("i",{class:"fas fa-chart-line"},null,-1),H("span",null,"Dashboard",-1)]))]),H("li",null,[H("div",{onClick:_},R[8]||(R[8]=[H("i",{class:"fas fa-sign-out-alt"},null,-1),H("span",null,"Logout",-1)]))])],2)])):pi("",!0)]),H("div",{class:jn(["mobile-menu-toggle",{active:n.value}]),onClick:d},R[9]||(R[9]=[H("span",null,null,-1),H("span",null,null,-1),H("span",null,null,-1)]),2)]),H("div",{class:jn(["mobile-menu",{show:n.value}])},[H("ul",JHe,[(dt(!0),Ct(ar,null,Ma(l.value,T=>(dt(),Ct("li",{class:"mobile-nav-item",key:T.id},[T.submenu?(dt(),Ct("div",XHe,[H("div",{class:jn(["mobile-nav-link",{active:r.value===T.id}]),onClick:b=>m(T.id)},[H("i",{class:jn(T.icon)},null,2),H("span",null,xt(T.name),1),R[10]||(R[10]=H("i",{class:"fas fa-chevron-down"},null,-1))],10,eqe),H("ul",{class:jn(["mobile-dropdown-menu",{show:r.value===T.id}])},[(dt(!0),Ct(ar,null,Ma(T.submenu,b=>(dt(),Ct("li",{key:b.id},[H("div",{class:"mobile-dropdown-item",onClick:E=>v(b)},[H("i",{class:jn(b.icon)},null,2),H("span",null,xt(b.name),1)],8,tqe)]))),128))],2)])):(dt(),Ct("div",{key:1,class:jn(["mobile-nav-link",{active:S.$route.path===T.url}]),onClick:b=>v(T)},[H("i",{class:jn(T.icon)},null,2),H("span",null,xt(T.name),1)],10,nqe))]))),128))]),H("div",rqe,[H("div",sqe,[cn(rF),cn(uF)])])],2)])]))}},oqe=Nb(iqe,[["__scopeId","data-v-b16261ec"]]),aqe="/assets/footer-pattern-BU5Dn35q.png",cqe={id:"footer",class:"padding-large pattern-blur"},lqe={class:"container"},uqe={class:"row d-flex flex-wrap justify-content-between"},dqe={class:"col-lg-4 col-md-6"},hqe={class:"footer-item item-001"},fqe={class:"social-media"},pqe={class:"d-flex list-unstyled"},mqe={class:"bg-blue-trans border-rounded-circle"},gqe={class:"bg-blue-trans border-rounded-circle"},yqe={class:"bg-blue-trans border-rounded-circle"},wqe={class:"bg-blue-trans border-rounded-circle"},vqe={class:"bg-blue-trans border-rounded-circle"},bqe={class:"col-lg-2 col-md-6"},_qe={class:"footer-item item-002 content-light"},Eqe={class:"footer-menu list-unstyled"},Aqe={class:"col-lg-2 col-md-6"},Cqe={class:"footer-item item-003 content-light"},Iqe={class:"footer-menu list-unstyled"},Tqe={class:"col-lg-2 col-md-6"},Sqe={class:"footer-item item-004 content-light"},xqe={class:"footer-menu list-unstyled"},Pqe={class:"col-lg-2 col-md-6"},Rqe={class:"footer-item item-005 content-light"},Nqe={class:"footer-menu list-unstyled"},Oqe={id:"footer-bottom"},kqe={class:"container"},Dqe={class:"row text-center"},Mqe={__name:"Footer",setup(t){const e=_r(()=>new Date().getFullYear()),n=r=>{const s={facebook:"https://facebook.com/coinpayot",twitter:"https://twitter.com/coinpayot",instagram:"https://instagram.com/coinpayot",youtube:"https://youtube.com/coinpayot",linkedin:"https://linkedin.com/company/coinpayot"};s[r]&&window.open(s[r],"_blank")};return(r,s)=>{const i=tu("router-link");return dt(),Ct(ar,null,[H("footer",cqe,[s[31]||(s[31]=H("div",{class:"pattern-overlay pattern-blur-footer right-side-pattern"},[H("img",{src:aqe})],-1)),H("div",lqe,[H("div",uqe,[H("div",dqe,[H("div",hqe,[s[10]||(s[10]=H("img",{src:lK,alt:"logo"},null,-1)),s[11]||(s[11]=H("p",null,"PixelPayot is a platform that allows you to earn money by playing games.",-1)),H("div",fqe,[H("ul",pqe,[H("li",mqe,[H("a",{href:"#",onClick:s[0]||(s[0]=o=>n("facebook"))},s[5]||(s[5]=[H("i",{class:"icon icon-facebook"},null,-1)]))]),H("li",gqe,[H("a",{href:"#",onClick:s[1]||(s[1]=o=>n("twitter"))},s[6]||(s[6]=[H("i",{class:"icon icon-twitter"},null,-1)]))]),H("li",yqe,[H("a",{href:"#",onClick:s[2]||(s[2]=o=>n("instagram"))},s[7]||(s[7]=[H("i",{class:"icon icon-instagram"},null,-1)]))]),H("li",wqe,[H("a",{href:"#",onClick:s[3]||(s[3]=o=>n("youtube"))},s[8]||(s[8]=[H("i",{class:"icon icon-youtube"},null,-1)]))]),H("li",vqe,[H("a",{href:"#",onClick:s[4]||(s[4]=o=>n("linkedin"))},s[9]||(s[9]=[H("i",{class:"icon icon-linkedin"},null,-1)]))])])])])]),H("div",bqe,[H("div",_qe,[s[16]||(s[16]=H("h4",null,"Marketplace",-1)),H("ul",Eqe,[H("li",null,[cn(i,{to:"/marketplace"},{default:ws(()=>s[12]||(s[12]=[Cr("NFTs",-1)])),_:1,__:[12]})]),H("li",null,[cn(i,{to:"/collection"},{default:ws(()=>s[13]||(s[13]=[Cr("Art",-1)])),_:1,__:[13]})]),H("li",null,[cn(i,{to:"/blindbox"},{default:ws(()=>s[14]||(s[14]=[Cr("Collectibles",-1)])),_:1,__:[14]})]),s[15]||(s[15]=H("li",null,[H("a",{href:"#"},"Virtual world")],-1))])])]),H("div",Aqe,[H("div",Cqe,[s[20]||(s[20]=H("h4",null,"Info",-1)),H("ul",Iqe,[H("li",null,[cn(i,{to:"/dashboard"},{default:ws(()=>s[17]||(s[17]=[Cr("Activity",-1)])),_:1,__:[17]})]),H("li",null,[cn(i,{to:"/profile"},{default:ws(()=>s[18]||(s[18]=[Cr("Stats",-1)])),_:1,__:[18]})]),s[19]||(s[19]=H("li",null,[H("a",{href:"#leaderboard"},"Rankings")],-1))])])]),H("div",Tqe,[H("div",Sqe,[s[25]||(s[25]=H("h4",null,"Company",-1)),H("ul",xqe,[H("li",null,[cn(i,{to:"/whitepaper"},{default:ws(()=>s[21]||(s[21]=[Cr("About",-1)])),_:1,__:[21]})]),s[23]||(s[23]=H("li",null,[H("a",{href:"#support"},"Support")],-1)),s[24]||(s[24]=H("li",null,[H("a",{href:"#features"},"Features")],-1)),H("li",null,[cn(i,{to:"/creators"},{default:ws(()=>s[22]||(s[22]=[Cr("Top Creators",-1)])),_:1,__:[22]})])])])]),H("div",Pqe,[H("div",Rqe,[s[30]||(s[30]=H("h4",null,"Resources",-1)),H("ul",Nqe,[H("li",null,[cn(i,{to:"/whitepaper"},{default:ws(()=>s[26]||(s[26]=[Cr("Info",-1)])),_:1,__:[26]})]),H("li",null,[cn(i,{to:"/referral"},{default:ws(()=>s[27]||(s[27]=[Cr("Affiliates",-1)])),_:1,__:[27]})]),s[28]||(s[28]=H("li",null,[H("a",{href:"#association"},"Associated")],-1)),s[29]||(s[29]=H("li",null,[H("a",{href:"#blog"},"Blog")],-1))])])])])])]),s[32]||(s[32]=H("hr",null,null,-1)),H("div",Oqe,[H("div",kqe,[H("div",Dqe,[H("p",null,"© "+xt(e.value)+" Copyright PixelPayot. All rights reserved",1)])])])],64)}}},Bqe=Nb(Mqe,[["__scopeId","data-v-01eb4ec7"]]),Lqe={class:"home"},$qe={class:"hero-section"},Uqe={class:"container"},Fqe={class:"row align-items-center min-vh-100"},jqe={class:"col-lg-6 col-md-12"},Vqe={class:"hero-content"},Hqe={class:"hero-actions"},qqe={class:"games-section"},zqe={class:"container"},Wqe={class:"games-grid"},Gqe={class:"game-card"},Kqe={class:"game-content"},Qqe={class:"game-card"},Yqe={class:"game-content"},Zqe={class:"nft-investment-section"},Jqe={class:"container"},Xqe={class:"row g-4"},eze={class:"nft-investment-card"},tze={class:"nft-image"},nze=["src","alt"],rze={class:"nft-content"},sze={class:"nft-description"},ize={class:"nft-stats"},oze={class:"stat"},aze={class:"value"},cze={class:"stat"},lze={class:"value"},uze={class:"nft-actions"},dze=["onClick"],hze=["onClick"],fze={class:"nft-purchase-section"},pze={class:"container"},mze={class:"row g-4"},gze={class:"nft-purchase-card"},yze={class:"nft-image"},wze=["src","alt"],vze={class:"nft-content"},bze={class:"nft-creator"},_ze={class:"nft-price"},Eze={class:"price"},Aze={class:"usd-price"},Cze=["onClick"],Ize={class:"nft-storage-section"},Tze={class:"container"},Sze={class:"storage-stats"},xze={class:"row g-4"},Pze={class:"col-lg-3 col-md-6"},Rze={class:"stat-card"},Nze={class:"stat-content"},Oze={class:"col-lg-3 col-md-6"},kze={class:"stat-card"},Dze={class:"stat-content"},Mze={class:"col-lg-3 col-md-6"},Bze={class:"stat-card"},Lze={class:"stat-content"},$ze={class:"col-lg-3 col-md-6"},Uze={class:"stat-card"},Fze={class:"stat-content"},jze={class:"nft-grid"},Vze={class:"row g-4"},Hze={class:"personal-nft-card"},qze={class:"nft-image"},zze=["src","alt"],Wze={class:"nft-content"},Gze={class:"nft-description"},Kze={class:"nft-meta"},Qze={class:"acquisition-date"},Yze={class:"current-value"},Zze={class:"modal-body"},Jze={key:0,class:"nft-preview"},Xze=["src","alt"],eWe={class:"nft-info"},tWe={class:"nft-description"},nWe={key:0,class:"nft-stats"},rWe={class:"stat-label"},sWe={class:"stat-value"},iWe={class:"purchase-form"},oWe={class:"form-group"},aWe={class:"purchase-summary"},cWe={class:"summary-item"},lWe={class:"summary-item"},uWe={class:"summary-item total"},dWe=["disabled"],hWe={class:"modal-body"},fWe={key:0,class:"nft-details"},pWe={class:"nft-image-large"},mWe=["src","alt"],gWe={class:"nft-info-detailed"},yWe={class:"nft-description"},wWe={class:"nft-meta"},vWe={class:"meta-item"},bWe={class:"meta-value"},_We={class:"meta-item"},EWe={class:"meta-value"},AWe={key:0,class:"meta-item"},CWe={class:"meta-value"},IWe={key:1,class:"meta-item"},TWe={class:"meta-value"},SWe={key:0,class:"nft-stats-detailed"},xWe={class:"stats-grid"},PWe={class:"stat-content"},RWe={class:"stat-label"},NWe={class:"stat-value"},OWe={class:"nft-actions-modal"},kWe={class:"toast-content"},DWe={__name:"Home",setup(t){lz();const{isWalletConnected:e,walletAddress:n}=cK(),r=Lt(!1),s=Lt(!1),i=Lt(null),o=Lt(""),a=Lt(!1),c=Lt(""),l=Lt("success");Lt(""),Lt("Welcome to TOKENPPO"),Lt("The Future of Digital Assets and Gaming"),Lt("Discover, collect, and trade unique NFTs in our revolutionary gaming ecosystem. Join thousands of players worldwide in the ultimate digital asset experience."),Lt([{id:1,icon:"fas fa-shield-alt",title:"Secure Trading",description:"Advanced blockchain security ensures safe transactions"},{id:2,icon:"fas fa-rocket",title:"Fast Transactions",description:"Lightning-fast blockchain technology for instant trades"},{id:3,icon:"fas fa-chart-line",title:"Market Analytics",description:"Real-time market data and trading insights"},{id:4,icon:"fas fa-users",title:"Community Driven",description:"Join our growing community of traders and gamers"}]),Lt([{id:1,name:"Alex Chen",avatar:"/src/assets/images/creator1.jpg",link:"/creator/alex-chen",followers:"12.5K",totalSales:"2.4K PPO"},{id:2,name:"Sarah Kim",avatar:"/src/assets/images/creator2.jpg",link:"/creator/sarah-kim",followers:"8.9K",totalSales:"1.8K PPO"},{id:3,name:"Mike Johnson",avatar:"/src/assets/images/creator3.jpg",link:"/creator/mike-johnson",followers:"15.2K",totalSales:"3.1K PPO"},{id:4,name:"Emma Wilson",avatar:"/src/assets/images/creator4.jpg",link:"/creator/emma-wilson",followers:"9.7K",totalSales:"2.0K PPO"}]),Lt([{id:1,name:"Pixel Warriors",image:"/src/assets/images/collection1.jpg",link:"/collection/pixel-warriors",items:"10,000",floorPrice:"500 PPO"},{id:2,name:"Cyber Punks",image:"/src/assets/images/collection2.jpg",link:"/collection/cyber-punks",items:"8,888",floorPrice:"800 PPO"},{id:3,name:"Space Explorers",image:"/src/assets/images/collection3.jpg",link:"/collection/space-explorers",items:"12,500",floorPrice:"300 PPO"},{id:4,name:"Fantasy Creatures",image:"/src/assets/images/collection4.jpg",link:"/collection/fantasy-creatures",items:"15,000",floorPrice:"600 PPO"}]);const u=Lt([{id:1,title:"Legendary Dragon",image:"/src/assets/images/nft1.jpg",rarity:"SSS",rarityClass:"bg-danger",price:"15,500",usdPrice:"31,000",roi:"+45%",creator:"Alex Chen",description:"Rare legendary dragon with fire breathing abilities",stats:{attack:95,defense:88,speed:92}},{id:2,title:"Epic Sword",image:"/src/assets/images/nft2.jpg",rarity:"SS",rarityClass:"bg-warning",price:"8,200",usdPrice:"16,400",roi:"+32%",creator:"Sarah Kim",description:"Epic weapon with unique enchantments",stats:{attack:88,defense:75,speed:85}},{id:3,title:"Rare Mount",image:"/src/assets/images/nft4.jpg",rarity:"S",rarityClass:"bg-success",price:"4,100",usdPrice:"8,200",roi:"+18%",creator:"Mike Johnson",description:"Rare mount with special movement abilities",stats:{attack:65,defense:70,speed:95}},{id:4,title:"Mythical Armor",image:"/src/assets/images/nft3.jpg",rarity:"SSS",rarityClass:"bg-danger",price:"22,800",usdPrice:"45,600",roi:"+67%",creator:"Emma Wilson",description:"Mythical armor with legendary protection",stats:{attack:45,defense:98,speed:60}}]),d=Lt([{id:1,title:"Warrior Character",image:"/src/assets/images/nft-item1.jpg",rarity:"SSS",rarityClass:"bg-danger",price:"12,500",usdPrice:"25,000",creator:"Alex Chen",description:"Powerful warrior character with unique abilities",stats:{level:85,experience:"2.5M",skills:12}},{id:2,title:"Magic Staff",image:"/src/assets/images/nft-item2.jpg",rarity:"SS",rarityClass:"bg-warning",price:"7,800",usdPrice:"15,600",creator:"Sarah Kim",description:"Enchanted staff with powerful magic spells",stats:{magic:92,durability:85,enchantments:8}},{id:3,title:"Stealth Cloak",image:"/src/assets/images/nft-item3.jpg",rarity:"S",rarityClass:"bg-success",price:"3,200",usdPrice:"6,400",creator:"Mike Johnson",description:"Invisibility cloak with stealth bonuses",stats:{stealth:95,defense:60,agility:88}},{id:4,title:"Ancient Relic",image:"/src/assets/images/nft-item4.jpg",rarity:"SSS",rarityClass:"bg-danger",price:"18,900",usdPrice:"37,800",creator:"Emma Wilson",description:"Ancient relic with mysterious powers",stats:{power:98,rarity:100,mystery:95}}]),h=computed(()=>e.value?[{id:1,title:"My Dragon",image:"/src/assets/images/nft1.jpg",rarity:"SSS",rarityClass:"bg-danger",description:"My personal legendary dragon companion",acquiredDate:"2024-01-15",currentValue:"18,450"},{id:2,title:"My Sword",image:"/src/assets/images/nft2.jpg",rarity:"SSS",rarityClass:"bg-warning",description:"Epic weapon with unique enchantments",acquiredDate:"2024-02-20",currentValue:"8,750"},{id:3,title:"My Mount",image:"/src/assets/images/nft4.jpg",rarity:"★★★★★",rarityClass:"bg-success",description:"Rare mount with special movement abilities",acquiredDate:"2024-03-10",currentValue:"4,200"}]:[]),f=computed(()=>e.value?"15,450":"0"),m=computed(()=>e.value?2:0),g=computed(()=>e.value?25:0);Lt([{id:1,title:"Best NFTs arts collections from best artists",category:"Art",image:"/src/assets/images/nft-item1.jpg",link:"/blog/1"},{id:2,title:"Best NFTs arts collections from best artists",category:"Design",image:"/src/assets/images/nft-item2.jpg",link:"/blog/2"},{id:3,title:"Best NFTs arts collections from best artists",category:"NFTs",image:"/src/assets/images/nft-item3.jpg",link:"/blog/3"},{id:4,title:"Best NFTs arts collections from best artists",category:"Arts",image:"/src/assets/images/nft-item4.jpg",link:"/blog/4"}]);const y=T=>{if(!e.value){S("Please connect your wallet first to buy NFTs","error");return}i.value=T,o.value=T.price,r.value=!0},v=()=>{r.value=!1,i.value=null,o.value=""},_=T=>{i.value=T,s.value=!0},A=()=>{s.value=!1,i.value=null},k=()=>{if(!e.value){S("Please connect your wallet first","error");return}if(!o.value||parseFloat(o.value)<=0){S("Please enter a valid amount","error");return}console.log("Buying NFT:",{nft:i.value.title,amount:o.value,wallet:n.value}),S("NFT purchased successfully!","success"),v()},S=(T,b="success")=>{c.value=T,l.value=b,a.value=!0,setTimeout(()=>{a.value=!1},3e3)},R=()=>{a.value=!1};return wp(()=>{new Swiper(".product-swiper",{modules:[Navigation,Pagination],slidesPerView:1,spaceBetween:30,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{640:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}}})}),(T,b)=>{const E=tu("router-link");return dt(),Ct("div",Lqe,[cn(oqe),H("section",$qe,[b[8]||(b[8]=Ca('<div class="hero-background" data-v-2a6c7dc1><div class="floating-elements" data-v-2a6c7dc1><div class="floating-icon floating-icon-1" data-v-2a6c7dc1><i class="fas fa-gamepad" data-v-2a6c7dc1></i></div><div class="floating-icon floating-icon-2" data-v-2a6c7dc1><i class="fas fa-coins" data-v-2a6c7dc1></i></div><div class="floating-icon floating-icon-3" data-v-2a6c7dc1><i class="fab fa-ethereum" data-v-2a6c7dc1></i></div><div class="floating-icon floating-icon-4" data-v-2a6c7dc1><i class="fas fa-trophy" data-v-2a6c7dc1></i></div></div></div>',1)),H("div",Uqe,[H("div",Fqe,[H("div",jqe,[H("div",Vqe,[b[6]||(b[6]=Ca('<div class="hero-badge" data-v-2a6c7dc1><i class="fas fa-rocket me-2" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>Play-to-Earn Gaming Platform</span></div><h1 class="hero-title" data-v-2a6c7dc1><span class="gradient-text" data-v-2a6c7dc1>PixelPayot</span><br data-v-2a6c7dc1><span class="typewriter" data-v-2a6c7dc1>Modern GameFi</span><br data-v-2a6c7dc1><span class="highlight-text" data-v-2a6c7dc1>Experience</span></h1><p class="hero-description" data-v-2a6c7dc1> Dive into the ultimate play-to-earn gaming ecosystem where every shot counts, every victory rewards you, and every moment brings you closer to legendary status. </p><div class="hero-stats" data-v-2a6c7dc1><div class="stat-card" data-v-2a6c7dc1><div class="stat-icon" data-v-2a6c7dc1><svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-2a6c7dc1><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-2a6c7dc1></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-2a6c7dc1></g><g id="SVGRepo_iconCarrier" data-v-2a6c7dc1><path d="M20 18L17 18M17 18L14 18M17 18V15M17 18V21M11 21H4C4 17.134 7.13401 14 11 14C11.695 14 12.3663 14.1013 13 14.2899M15 7C15 9.20914 13.2091 11 11 11C8.79086 11 7 9.20914 7 7C7 4.79086 8.79086 3 11 3C13.2091 3 15 4.79086 15 7Z" stroke="#fb00ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2a6c7dc1></path></g></svg></div><div class="stat-content" data-v-2a6c7dc1><h4 data-v-2a6c7dc1>10K+</h4><span data-v-2a6c7dc1>Active Players</span></div></div><div class="stat-card" data-v-2a6c7dc1><div class="stat-icon" data-v-2a6c7dc1><svg width="32px" height="32px" viewBox="-2 0 20 20" xmlns="http://www.w3.org/2000/svg" fill="#000000" data-v-2a6c7dc1><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-2a6c7dc1></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-2a6c7dc1></g><g id="SVGRepo_iconCarrier" data-v-2a6c7dc1><g id="reward-4" transform="translate(-4 -2)" data-v-2a6c7dc1><path id="secondary" fill="#fb00ff" d="M12,3a7,7,0,1,0,7,7,7,7,0,0,0-7-7Zm1.24,8.75L12,11.15l-1.24.6L11,10.48l-1-.89,1.38-.19L12,8.25l.62,1.15L14,9.59l-1,.89Z" data-v-2a6c7dc1></path> <path id="primary" d="M16.11,15.66,17,21l-5-1L7,21l.89-5.34" fill="none" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-v-2a6c7dc1></path> <path id="primary-2" data-name="primary" d="M12.62,9.4,14,9.59l-1,.89.24,1.27L12,11.15l-1.24.6L11,10.48l-1-.89,1.38-.19L12,8.25ZM12,3a7,7,0,1,0,7,7,7,7,0,0,0-7-7Z" fill="none" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-v-2a6c7dc1></path></g></g></svg></div><div class="stat-content" data-v-2a6c7dc1><h4 data-v-2a6c7dc1>$1.5M</h4><span data-v-2a6c7dc1>Total Rewards</span></div></div><div class="stat-card" data-v-2a6c7dc1><div class="stat-icon" data-v-2a6c7dc1><svg width="32px" height="32px" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-2a6c7dc1><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-2a6c7dc1></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-2a6c7dc1></g><g id="SVGRepo_iconCarrier" data-v-2a6c7dc1><rect width="48" height="48" fill="white" fill-opacity="0.01" data-v-2a6c7dc1></rect> <path d="M24 4L29.2533 7.83204L35.7557 7.81966L37.7533 14.0077L43.0211 17.8197L41 24L43.0211 30.1803L37.7533 33.9923L35.7557 40.1803L29.2533 40.168L24 44L18.7467 40.168L12.2443 40.1803L10.2467 33.9923L4.97887 30.1803L7 24L4.97887 17.8197L10.2467 14.0077L12.2443 7.81966L18.7467 7.83204L24 4Z" fill="#fb00ff" stroke="#ffffff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-2a6c7dc1></path> <path d="M17 24L22 29L32 19" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-2a6c7dc1></path></g></svg></div><div class="stat-content" data-v-2a6c7dc1><h4 data-v-2a6c7dc1>95%</h4><span data-v-2a6c7dc1>Success Rate</span></div></div></div>',4)),H("div",Hqe,[cn(E,{to:"/arrow-game",class:"btn btn-hero-primary"},{default:ws(()=>b[4]||(b[4]=[H("i",{class:"fas fa-crosshairs me-2"},null,-1),Cr(" Play Archery ",-1)])),_:1,__:[4]}),cn(E,{to:"/arrow-game-modern",class:"btn btn-hero-secondary"},{default:ws(()=>b[5]||(b[5]=[H("i",{class:"fas fa-gamepad me-2"},null,-1),Cr(" Modern Archery ",-1)])),_:1,__:[5]})])])]),b[7]||(b[7]=Ca('<div class="col-lg-6 col-md-12" data-v-2a6c7dc1><div class="hero-visual" data-v-2a6c7dc1><div class="hero-image-container" data-v-2a6c7dc1><img src="'+$2e+'" alt="PixelPayot Gaming" class="hero-image" data-v-2a6c7dc1><div class="floating-cards" data-v-2a6c7dc1><div class="game-card card-1" data-v-2a6c7dc1><i class="fas fa-trophy" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>Win Rewards</span></div><div class="game-card card-2" data-v-2a6c7dc1><i class="fas fa-chart-line" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>Earn PPO</span></div><div class="game-card card-3" data-v-2a6c7dc1><i class="fas fa-users" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>Join Community</span></div></div></div></div></div>',1))])])]),b[58]||(b[58]=Ca('<section id="daily-tasks" class="daily-tasks-section" data-v-2a6c7dc1><div class="container" data-v-2a6c7dc1><div class="section-header text-center mb-5" data-v-2a6c7dc1><div class="section-badge" data-v-2a6c7dc1><i class="fas fa-tasks me-2" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>Daily Missions</span></div><h2 class="section-title" data-v-2a6c7dc1>Complete Tasks &amp; Earn Rewards</h2><p class="section-description" data-v-2a6c7dc1> Join thousands of players earning $PPO tokens daily through engaging missions </p></div><div class="row g-4" data-v-2a6c7dc1><div class="col-lg-6 col-md-12" data-v-2a6c7dc1><div class="tasks-card" data-v-2a6c7dc1><div class="card-header" data-v-2a6c7dc1><div class="header-icon" data-v-2a6c7dc1><svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-2a6c7dc1><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-2a6c7dc1></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-2a6c7dc1></g><g id="SVGRepo_iconCarrier" data-v-2a6c7dc1><path d="M16.19 2H7.81C4.17 2 2 4.17 2 7.81V16.19C2 19.83 4.17 22 7.81 22H16.19C19.83 22 22 19.83 22 16.19V7.81C22 4.17 19.83 2 16.19 2ZM9.97 14.9L7.72 17.15C7.57 17.3 7.38 17.37 7.19 17.37C7 17.37 6.8 17.3 6.66 17.15L5.91 16.4C5.61 16.11 5.61 15.63 5.91 15.34C6.2 15.05 6.67 15.05 6.97 15.34L7.19 15.56L8.91 13.84C9.2 13.55 9.67 13.55 9.97 13.84C10.26 14.13 10.26 14.61 9.97 14.9ZM9.97 7.9L7.72 10.15C7.57 10.3 7.38 10.37 7.19 10.37C7 10.37 6.8 10.3 6.66 10.15L5.91 9.4C5.61 9.11 5.61 8.63 5.91 8.34C6.2 8.05 6.67 8.05 6.97 8.34L7.19 8.56L8.91 6.84C9.2 6.55 9.67 6.55 9.97 6.84C10.26 7.13 10.26 7.61 9.97 7.9ZM17.56 16.62H12.31C11.9 16.62 11.56 16.28 11.56 15.87C11.56 15.46 11.9 15.12 12.31 15.12H17.56C17.98 15.12 18.31 15.46 18.31 15.87C18.31 16.28 17.98 16.62 17.56 16.62ZM17.56 9.62H12.31C11.9 9.62 11.56 9.28 11.56 8.87C11.56 8.46 11.9 8.12 12.31 8.12H17.56C17.98 8.12 18.31 8.46 18.31 8.87C18.31 9.28 17.98 9.62 17.56 9.62Z" fill="#fb00ff" data-v-2a6c7dc1></path></g></svg></div><div class="header-content" data-v-2a6c7dc1><h3 data-v-2a6c7dc1>Daily Tasks</h3><p data-v-2a6c7dc1>Complete tasks to earn $PPO tokens</p></div><div class="progress-indicator" data-v-2a6c7dc1><span class="progress-text" data-v-2a6c7dc1>1/6</span></div></div><div class="card-body" data-v-2a6c7dc1><div class="task-list" data-v-2a6c7dc1><div class="modern-task-item" data-v-2a6c7dc1><div class="task-icon" data-v-2a6c7dc1><i class="fas fa-calendar-check" data-v-2a6c7dc1></i></div><div class="task-content" data-v-2a6c7dc1><h5 data-v-2a6c7dc1>Daily Check-in</h5><p class="task-reward" data-v-2a6c7dc1>+1 PPO</p></div><button class="btn btn-task completed" data-v-2a6c7dc1><i class="fas fa-check-circle" data-v-2a6c7dc1></i></button></div><div class="modern-task-item" data-v-2a6c7dc1><div class="task-icon" data-v-2a6c7dc1><i class="fab fa-telegram" data-v-2a6c7dc1></i></div><div class="task-content" data-v-2a6c7dc1><h5 data-v-2a6c7dc1>Join Telegram Group</h5><p class="task-reward" data-v-2a6c7dc1>+2 PPO</p></div><button class="btn btn-task" data-task="telegramGroup" data-v-2a6c7dc1><i class="fas fa-users" data-v-2a6c7dc1></i></button></div><div class="modern-task-item" data-v-2a6c7dc1><div class="task-icon" data-v-2a6c7dc1><i class="fab fa-telegram" data-v-2a6c7dc1></i></div><div class="task-content" data-v-2a6c7dc1><h5 data-v-2a6c7dc1>Subscribe Channel</h5><p class="task-reward" data-v-2a6c7dc1>+2 PPO</p></div><button class="btn btn-task" data-task="telegramChannel" data-v-2a6c7dc1><i class="fas fa-bell" data-v-2a6c7dc1></i></button></div><div class="modern-task-item" data-v-2a6c7dc1><div class="task-icon" data-v-2a6c7dc1><i class="fab fa-facebook" data-v-2a6c7dc1></i></div><div class="task-content" data-v-2a6c7dc1><h5 data-v-2a6c7dc1>Like Facebook Page</h5><p class="task-reward" data-v-2a6c7dc1>+2 PPO</p></div><button class="btn btn-task" data-task="facebookPage" data-v-2a6c7dc1><i class="fas fa-thumbs-up" data-v-2a6c7dc1></i></button></div><div class="modern-task-item" data-v-2a6c7dc1><div class="task-icon" data-v-2a6c7dc1><i class="fab fa-x-twitter" data-v-2a6c7dc1></i></div><div class="task-content" data-v-2a6c7dc1><h5 data-v-2a6c7dc1>Follow on X</h5><p class="task-reward" data-v-2a6c7dc1>+2 PPO</p></div><button class="btn btn-task" data-task="twitterFollow" data-v-2a6c7dc1><i class="fas fa-user-plus" data-v-2a6c7dc1></i></button></div><div class="modern-task-item special" data-v-2a6c7dc1><div class="task-icon" data-v-2a6c7dc1><i class="fas fa-share-alt" data-v-2a6c7dc1></i></div><div class="task-content" data-v-2a6c7dc1><h5 data-v-2a6c7dc1>Share &amp; Earn</h5><p class="task-reward" data-v-2a6c7dc1>+3 PPO</p><small class="task-note" data-v-2a6c7dc1>Share about PixelPayot</small></div><button class="btn btn-task" data-task="socialShare" data-v-2a6c7dc1><i class="fas fa-share" data-v-2a6c7dc1></i></button></div></div><div class="claim-section" data-v-2a6c7dc1><div class="rewards-summary" data-v-2a6c7dc1><div class="rewards-icon" data-v-2a6c7dc1><i class="fas fa-gift" data-v-2a6c7dc1></i></div><div class="rewards-content" data-v-2a6c7dc1><h4 data-v-2a6c7dc1>Available Rewards</h4><span class="rewards-amount" data-v-2a6c7dc1>0 PPO</span></div><button class="btn btn-claim-rewards" disabled data-v-2a6c7dc1><i class="fas fa-download" data-v-2a6c7dc1></i> Claim </button></div></div></div></div></div><div class="col-lg-6 col-md-12" data-v-2a6c7dc1><div class="stats-card" data-v-2a6c7dc1><div class="card-header" data-v-2a6c7dc1><div class="header-icon" data-v-2a6c7dc1><i class="fas fa-chart-line" data-v-2a6c7dc1></i></div><div class="header-content" data-v-2a6c7dc1><h3 data-v-2a6c7dc1>Your Statistics</h3><p data-v-2a6c7dc1>Track your progress and earnings</p></div><div class="level-badge" data-v-2a6c7dc1><span class="level-text" data-v-2a6c7dc1>Level F0</span></div></div><div class="card-body" data-v-2a6c7dc1><div class="stats-grid" data-v-2a6c7dc1><div class="stat-item" data-v-2a6c7dc1><div class="stat-icon wallet" data-v-2a6c7dc1><i class="fas fa-wallet" data-v-2a6c7dc1></i></div><div class="stat-content" data-v-2a6c7dc1><span class="stat-value" data-v-2a6c7dc1>0</span><span class="stat-label" data-v-2a6c7dc1>PPO Balance</span></div></div><div class="stat-item" data-v-2a6c7dc1><div class="stat-icon nft" data-v-2a6c7dc1><i class="fas fa-images" data-v-2a6c7dc1></i></div><div class="stat-content" data-v-2a6c7dc1><span class="stat-value" data-v-2a6c7dc1>0</span><span class="stat-label" data-v-2a6c7dc1>NFTs Owned</span></div></div><div class="stat-item" data-v-2a6c7dc1><div class="stat-icon earnings" data-v-2a6c7dc1><i class="fas fa-star" data-v-2a6c7dc1></i></div><div class="stat-content" data-v-2a6c7dc1><span class="stat-value" data-v-2a6c7dc1>0</span><span class="stat-label" data-v-2a6c7dc1>Total Earned</span></div></div><div class="stat-item" data-v-2a6c7dc1><div class="stat-icon referral" data-v-2a6c7dc1><i class="fas fa-users" data-v-2a6c7dc1></i></div><div class="stat-content" data-v-2a6c7dc1><span class="stat-value" data-v-2a6c7dc1>0</span><span class="stat-label" data-v-2a6c7dc1>Referrals</span></div></div></div><div class="referral-section" data-v-2a6c7dc1><div class="referral-header" data-v-2a6c7dc1><div class="referral-icon" data-v-2a6c7dc1><i class="fas fa-user-friends" data-v-2a6c7dc1></i></div><div class="referral-content" data-v-2a6c7dc1><h4 data-v-2a6c7dc1>Invite Friends</h4><p data-v-2a6c7dc1>Earn 5 PPO for each referral</p></div></div><div class="referral-link" data-v-2a6c7dc1><input type="text" class="form-control" id="referralLink" readonly placeholder="Your referral link will appear here" data-v-2a6c7dc1><button class="btn btn-copy" data-v-2a6c7dc1><i class="fas fa-copy" data-v-2a6c7dc1></i></button></div><div class="referral-progress" data-v-2a6c7dc1><div class="progress-info" data-v-2a6c7dc1><span class="current-refs" data-v-2a6c7dc1>0 Referrals</span><span class="next-level" data-v-2a6c7dc1>15 needed for Level F1</span></div><div class="progress-bar" data-v-2a6c7dc1><div class="progress-fill" style="width:0%;" data-v-2a6c7dc1></div></div></div></div></div></div></div></div></div></section>',1)),H("section",qqe,[H("div",zqe,[b[21]||(b[21]=Ca('<div class="section-header text-center mb-5" data-v-2a6c7dc1><div class="section-badge" data-v-2a6c7dc1><i class="fas fa-gamepad me-2" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>Play &amp; Earn Games</span></div><h2 class="section-title" data-v-2a6c7dc1>Choose Your Adventure</h2><p class="section-description" data-v-2a6c7dc1> Play exciting games and earn PPO tokens while having fun </p></div>',1)),H("div",Wqe,[H("div",Gqe,[b[13]||(b[13]=H("div",{class:"game-icon"},[H("i",{class:"fas fa-crosshairs"})],-1)),H("div",Kqe,[b[10]||(b[10]=H("h3",null,"PPO Archery",-1)),b[11]||(b[11]=H("p",null,"Test your aim and precision in this classic archery game. Hit targets to earn PPO tokens!",-1)),b[12]||(b[12]=H("div",{class:"game-features"},[H("span",{class:"feature"},"🎯 Precision Aiming"),H("span",{class:"feature"},"💰 Earn PPO Tokens"),H("span",{class:"feature"},"🏆 Leaderboards")],-1)),cn(E,{to:"/arrow-game",class:"btn btn-game"},{default:ws(()=>b[9]||(b[9]=[H("i",{class:"fas fa-play me-2"},null,-1),Cr(" Play Now ",-1)])),_:1,__:[9]})]),b[14]||(b[14]=H("div",{class:"game-glow"},null,-1))]),H("div",Qqe,[b[19]||(b[19]=H("div",{class:"game-icon"},[H("i",{class:"fas fa-gamepad"})],-1)),H("div",Yqe,[b[16]||(b[16]=H("h3",null,"Modern Archery",-1)),b[17]||(b[17]=H("p",null,"Experience the next generation of archery with enhanced graphics and gameplay mechanics.",-1)),b[18]||(b[18]=H("div",{class:"game-features"},[H("span",{class:"feature"},"🎨 Modern Graphics"),H("span",{class:"feature"},"⚡ Enhanced Gameplay"),H("span",{class:"feature"},"🎮 Mobile Optimized")],-1)),cn(E,{to:"/arrow-game-modern",class:"btn btn-game"},{default:ws(()=>b[15]||(b[15]=[H("i",{class:"fas fa-play me-2"},null,-1),Cr(" Play Now ",-1)])),_:1,__:[15]})]),b[20]||(b[20]=H("div",{class:"game-glow"},null,-1))])])])]),b[59]||(b[59]=Ca('<section class="features-section" data-v-2a6c7dc1><div class="container" data-v-2a6c7dc1><div class="section-header text-center mb-5" data-v-2a6c7dc1><div class="section-badge" data-v-2a6c7dc1><i class="fas fa-star me-2" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>Platform Features</span></div><h2 class="section-title" data-v-2a6c7dc1>Experience Next-Gen Gaming</h2><p class="section-description" data-v-2a6c7dc1> Discover powerful features that make PixelPayot the ultimate GameFi destination </p></div><div class="features-grid" data-v-2a6c7dc1><div class="feature-card" data-v-2a6c7dc1><div class="feature-icon" data-v-2a6c7dc1><i class="fas fa-bolt" data-v-2a6c7dc1></i></div><div class="feature-content" data-v-2a6c7dc1><h3 data-v-2a6c7dc1>Lightning Fast</h3><p data-v-2a6c7dc1>Experience instant transactions with our optimized blockchain integration</p><div class="feature-stats" data-v-2a6c7dc1><span class="stat" data-v-2a6c7dc1>0.1s</span><span class="stat-label" data-v-2a6c7dc1>Transaction Time</span></div></div><div class="feature-glow" data-v-2a6c7dc1></div></div><div class="feature-card" data-v-2a6c7dc1><div class="feature-icon" data-v-2a6c7dc1><i class="fas fa-shield-alt" data-v-2a6c7dc1></i></div><div class="feature-content" data-v-2a6c7dc1><h3 data-v-2a6c7dc1>Secure &amp; Safe</h3><p data-v-2a6c7dc1>Bank-grade security with multi-signature wallet protection</p><div class="feature-stats" data-v-2a6c7dc1><span class="stat" data-v-2a6c7dc1>99.9%</span><span class="stat-label" data-v-2a6c7dc1>Uptime</span></div></div><div class="feature-glow" data-v-2a6c7dc1></div></div><div class="feature-card" data-v-2a6c7dc1><div class="feature-icon" data-v-2a6c7dc1><i class="fas fa-users" data-v-2a6c7dc1></i></div><div class="feature-content" data-v-2a6c7dc1><h3 data-v-2a6c7dc1>Community Driven</h3><p data-v-2a6c7dc1>Join a thriving community of gamers and earn together</p><div class="feature-stats" data-v-2a6c7dc1><span class="stat" data-v-2a6c7dc1>24/7</span><span class="stat-label" data-v-2a6c7dc1>Support</span></div></div><div class="feature-glow" data-v-2a6c7dc1></div></div></div></div></section><section id="association-with" class="padding-large pt-5 pattern-blur" data-v-2a6c7dc1><div class="pattern-overlay left-side-pattern" data-v-2a6c7dc1><img src="'+U2e+'" data-v-2a6c7dc1></div><div class="container" data-v-2a6c7dc1><div class="row justify-content-between" data-v-2a6c7dc1><img src="'+F2e+'" alt="brand" class="col-md-2 img-fluid" data-v-2a6c7dc1><img src="'+j2e+'" alt="brand" class="col-md-2 img-fluid" data-v-2a6c7dc1><img src="'+V2e+'" alt="brand" class="col-md-2 img-fluid" data-v-2a6c7dc1><img src="'+H2e+'" alt="brand" class="col-md-2 img-fluid" data-v-2a6c7dc1><img src="'+q2e+'" alt="brand" class="col-md-2 img-fluid" data-v-2a6c7dc1></div></div></section>',2)),H("section",Zqe,[H("div",Jqe,[b[27]||(b[27]=Ca('<div class="section-header text-center mb-5" data-v-2a6c7dc1><div class="section-badge" data-v-2a6c7dc1><i class="fas fa-chart-line me-2" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>NFT Investment</span></div><h2 class="section-title" data-v-2a6c7dc1>Invest in Premium NFTs</h2><p class="section-description" data-v-2a6c7dc1> Discover high-value NFTs with potential for significant returns </p></div>',1)),H("div",Xqe,[(dt(!0),Ct(ar,null,Ma(u.value,x=>(dt(),Ct("div",{class:"col-lg-4 col-md-6",key:x.id},[H("div",eze,[H("div",tze,[H("img",{src:x.image,alt:x.title},null,8,nze),H("div",{class:jn(["nft-badge",x.rarityClass])},xt(x.rarity),3),b[22]||(b[22]=H("div",{class:"nft-overlay"},[H("button",{class:"btn btn-invest"},[H("i",{class:"fas fa-chart-line me-2"}),Cr(" Invest Now ")])],-1))]),H("div",rze,[H("h4",null,xt(x.title),1),H("p",sze,xt(x.description),1),H("div",ize,[H("div",oze,[b[23]||(b[23]=H("span",{class:"label"},"Current Price",-1)),H("span",aze,xt(x.price)+" PPO",1)]),H("div",cze,[b[24]||(b[24]=H("span",{class:"label"},"ROI Potential",-1)),H("span",lze,xt(x.roi),1)])]),H("div",uze,[H("button",{class:"btn btn-primary btn-sm",onClick:D=>_(x)},b[25]||(b[25]=[H("i",{class:"fas fa-eye me-1"},null,-1),Cr(" View Details ",-1)]),8,dze),H("button",{class:"btn btn-success btn-sm",onClick:D=>y(x)},b[26]||(b[26]=[H("i",{class:"fas fa-shopping-cart me-1"},null,-1),Cr(" Buy Now ",-1)]),8,hze)])])])]))),128))])])]),H("section",fze,[H("div",pze,[b[29]||(b[29]=Ca('<div class="section-header text-center mb-5" data-v-2a6c7dc1><div class="section-badge" data-v-2a6c7dc1><i class="fas fa-shopping-bag me-2" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>NFT Purchase</span></div><h2 class="section-title" data-v-2a6c7dc1>Buy Exclusive NFTs</h2><p class="section-description" data-v-2a6c7dc1> Purchase unique NFTs directly from our marketplace </p></div>',1)),H("div",mze,[(dt(!0),Ct(ar,null,Ma(d.value,x=>(dt(),Ct("div",{class:"col-lg-3 col-md-6",key:x.id},[H("div",gze,[H("div",yze,[H("img",{src:x.image,alt:x.title},null,8,wze),H("div",{class:jn(["nft-badge",x.rarityClass])},xt(x.rarity),3)]),H("div",vze,[H("h5",null,xt(x.title),1),H("p",bze,"by "+xt(x.creator),1),H("div",_ze,[H("span",Eze,xt(x.price)+" PPO",1),H("span",Aze,"≈ $"+xt(x.usdPrice),1)]),H("button",{class:"btn btn-primary w-100",onClick:D=>y(x)},b[28]||(b[28]=[H("i",{class:"fas fa-shopping-cart me-2"},null,-1),Cr(" Purchase ",-1)]),8,Cze)])])]))),128))])])]),b[60]||(b[60]=Ca('<section class="nft-trading-section" data-v-2a6c7dc1><div class="container" data-v-2a6c7dc1><div class="section-header text-center mb-5" data-v-2a6c7dc1><div class="section-badge" data-v-2a6c7dc1><i class="fas fa-gamepad me-2" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>NFT Game Trading</span></div><h2 class="section-title" data-v-2a6c7dc1>Trade Game NFTs</h2><p class="section-description" data-v-2a6c7dc1> Buy and sell game NFTs, characters, weapons, and collectibles </p></div><div class="trading-container" data-v-2a6c7dc1><div class="row" data-v-2a6c7dc1><div class="col-lg-8" data-v-2a6c7dc1><div class="trading-chart" data-v-2a6c7dc1><div class="chart-header" data-v-2a6c7dc1><h4 data-v-2a6c7dc1>Game NFT Market Overview</h4><div class="chart-controls" data-v-2a6c7dc1><button class="btn btn-sm btn-outline-primary" data-v-2a6c7dc1>24H</button><button class="btn btn-sm btn-outline-primary active" data-v-2a6c7dc1>7D</button><button class="btn btn-sm btn-outline-primary" data-v-2a6c7dc1>30D</button></div></div><div class="chart-placeholder" data-v-2a6c7dc1><i class="fas fa-chart-line" data-v-2a6c7dc1></i><p data-v-2a6c7dc1>Game NFT Trading Chart</p></div></div></div><div class="col-lg-4" data-v-2a6c7dc1><div class="trading-sidebar" data-v-2a6c7dc1><div class="order-book" data-v-2a6c7dc1><h5 data-v-2a6c7dc1>Game NFT Order Book</h5><div class="order-list" data-v-2a6c7dc1><div class="order-item buy" data-v-2a6c7dc1><span class="price" data-v-2a6c7dc1>850 PPO</span><span class="amount" data-v-2a6c7dc1>1</span></div><div class="order-item buy" data-v-2a6c7dc1><span class="price" data-v-2a6c7dc1>800 PPO</span><span class="amount" data-v-2a6c7dc1>2</span></div><div class="order-item sell" data-v-2a6c7dc1><span class="price" data-v-2a6c7dc1>900 PPO</span><span class="amount" data-v-2a6c7dc1>1</span></div><div class="order-item sell" data-v-2a6c7dc1><span class="price" data-v-2a6c7dc1>950 PPO</span><span class="amount" data-v-2a6c7dc1>3</span></div></div></div><div class="trade-form" data-v-2a6c7dc1><h5 data-v-2a6c7dc1>Place Game NFT Order</h5><div class="form-group" data-v-2a6c7dc1><label data-v-2a6c7dc1>Price (PPO)</label><input type="number" class="form-control" placeholder="0.00" data-v-2a6c7dc1></div><div class="form-group" data-v-2a6c7dc1><label data-v-2a6c7dc1>Amount</label><input type="number" class="form-control" placeholder="0.00" data-v-2a6c7dc1></div><div class="btn-group w-100" data-v-2a6c7dc1><button class="btn btn-success" data-v-2a6c7dc1>Buy Game NFT</button><button class="btn btn-danger" data-v-2a6c7dc1>Sell Game NFT</button></div></div></div></div></div></div></div></section>',1)),H("section",Ize,[H("div",Tze,[b[39]||(b[39]=Ca('<div class="section-header text-center mb-5" data-v-2a6c7dc1><div class="section-badge" data-v-2a6c7dc1><i class="fas fa-gamepad me-2" data-v-2a6c7dc1></i><span data-v-2a6c7dc1>My Game NFT Collection</span></div><h2 class="section-title" data-v-2a6c7dc1>Your Game NFT Vault</h2><p class="section-description" data-v-2a6c7dc1> Manage and view your personal game NFT collection </p></div>',1)),H("div",Sze,[H("div",xze,[H("div",Pze,[H("div",Rze,[b[31]||(b[31]=H("div",{class:"stat-icon"},[H("i",{class:"fas fa-images"})],-1)),H("div",Nze,[H("h3",null,xt(_s(h).length),1),b[30]||(b[30]=H("span",null,"Total NFTs",-1))])])]),H("div",Oze,[H("div",kze,[b[33]||(b[33]=H("div",{class:"stat-icon"},[H("i",{class:"fas fa-dollar-sign"})],-1)),H("div",Dze,[H("h3",null,"$"+xt(_s(f)),1),b[32]||(b[32]=H("span",null,"Total Value",-1))])])]),H("div",Mze,[H("div",Bze,[b[35]||(b[35]=H("div",{class:"stat-icon"},[H("i",{class:"fas fa-trophy"})],-1)),H("div",Lze,[H("h3",null,xt(_s(m)),1),b[34]||(b[34]=H("span",null,"Rare Items",-1))])])]),H("div",$ze,[H("div",Uze,[b[37]||(b[37]=H("div",{class:"stat-icon"},[H("i",{class:"fas fa-chart-line"})],-1)),H("div",Fze,[H("h3",null,xt(_s(g))+"%",1),b[36]||(b[36]=H("span",null,"Growth",-1))])])])])]),H("div",jze,[H("div",Vze,[(dt(!0),Ct(ar,null,Ma(_s(h),x=>(dt(),Ct("div",{class:"col-lg-4 col-md-6",key:x.id},[H("div",Hze,[H("div",qze,[H("img",{src:x.image,alt:x.title},null,8,zze),H("div",{class:jn(["nft-badge",x.rarityClass])},xt(x.rarity),3),b[38]||(b[38]=Ca('<div class="nft-actions" data-v-2a6c7dc1><button class="btn btn-sm btn-outline-light" data-v-2a6c7dc1><i class="fas fa-eye" data-v-2a6c7dc1></i></button><button class="btn btn-sm btn-outline-light" data-v-2a6c7dc1><i class="fas fa-share" data-v-2a6c7dc1></i></button><button class="btn btn-sm btn-outline-light" data-v-2a6c7dc1><i class="fas fa-ellipsis-h" data-v-2a6c7dc1></i></button></div>',1))]),H("div",Wze,[H("h5",null,xt(x.title),1),H("p",Gze,xt(x.description),1),H("div",Kze,[H("span",Qze,"Acquired: "+xt(x.acquiredDate),1),H("span",Yze,"Value: $"+xt(x.currentValue),1)])])])]))),128))])])])]),r.value?(dt(),Ct("div",{key:0,class:"modal-overlay",onClick:v},[H("div",{class:"buy-modal",onClick:b[1]||(b[1]=G2(()=>{},["stop"]))},[H("div",{class:"modal-header"},[b[41]||(b[41]=H("h3",null,"Buy NFT",-1)),H("button",{class:"close-btn",onClick:v},b[40]||(b[40]=[H("i",{class:"fas fa-times"},null,-1)]))]),H("div",Zze,[i.value?(dt(),Ct("div",Jze,[H("img",{src:i.value.image,alt:i.value.title,class:"nft-image"},null,8,Xze),H("div",eWe,[H("h4",null,xt(i.value.title),1),H("p",tWe,xt(i.value.description),1),i.value.stats?(dt(),Ct("div",nWe,[(dt(!0),Ct(ar,null,Ma(i.value.stats,(x,D)=>(dt(),Ct("div",{class:"stat-item",key:D},[H("span",rWe,xt(D.charAt(0).toUpperCase()+D.slice(1))+":",1),H("span",sWe,xt(x),1)]))),128))])):pi("",!0)])])):pi("",!0),H("div",iWe,[H("div",oWe,[b[42]||(b[42]=H("label",null,"Purchase Amount (PPO)",-1)),yee(H("input",{"onUpdate:modelValue":b[0]||(b[0]=x=>o.value=x),type:"number",class:"form-control",placeholder:"Enter amount",step:"0.01",min:"0"},null,512),[[Yte,o.value]])]),H("div",aWe,[H("div",cWe,[b[43]||(b[43]=H("span",null,"NFT Price:",-1)),H("span",null,xt(i.value?.price)+" PPO",1)]),H("div",lWe,[b[44]||(b[44]=H("span",null,"Your Offer:",-1)),H("span",null,xt(o.value)+" PPO",1)]),H("div",uWe,[b[45]||(b[45]=H("span",null,"Total:",-1)),H("span",null,xt(o.value)+" PPO",1)])]),H("button",{class:"btn btn-success w-100",onClick:k,disabled:!o.value||parseFloat(o.value)<=0},b[46]||(b[46]=[H("i",{class:"fas fa-shopping-cart me-2"},null,-1),Cr("Confirm Purchase ",-1)]),8,dWe)])])])])):pi("",!0),s.value?(dt(),Ct("div",{key:1,class:"modal-overlay",onClick:A},[H("div",{class:"details-modal",onClick:b[3]||(b[3]=G2(()=>{},["stop"]))},[H("div",{class:"modal-header"},[b[48]||(b[48]=H("h3",null,"NFT Details",-1)),H("button",{class:"close-btn",onClick:A},b[47]||(b[47]=[H("i",{class:"fas fa-times"},null,-1)]))]),H("div",hWe,[i.value?(dt(),Ct("div",fWe,[H("div",pWe,[H("img",{src:i.value.image,alt:i.value.title},null,8,mWe),H("div",{class:jn(["nft-badge",i.value.rarityClass])},xt(i.value.rarity),3)]),H("div",gWe,[H("h2",null,xt(i.value.title),1),H("p",yWe,xt(i.value.description),1),H("div",wWe,[H("div",vWe,[b[49]||(b[49]=H("span",{class:"meta-label"},"Creator:",-1)),H("span",bWe,xt(i.value.creator),1)]),H("div",_We,[b[50]||(b[50]=H("span",{class:"meta-label"},"Price:",-1)),H("span",EWe,xt(i.value.price)+" PPO",1)]),i.value.usdPrice?(dt(),Ct("div",AWe,[b[51]||(b[51]=H("span",{class:"meta-label"},"USD Value:",-1)),H("span",CWe,"$"+xt(i.value.usdPrice),1)])):pi("",!0),i.value.roi?(dt(),Ct("div",IWe,[b[52]||(b[52]=H("span",{class:"meta-label"},"ROI:",-1)),H("span",TWe,xt(i.value.roi),1)])):pi("",!0)]),i.value.stats?(dt(),Ct("div",SWe,[b[54]||(b[54]=H("h4",null,"Statistics",-1)),H("div",xWe,[(dt(!0),Ct(ar,null,Ma(i.value.stats,(x,D)=>(dt(),Ct("div",{class:"stat-card",key:D},[b[53]||(b[53]=H("div",{class:"stat-icon"},[H("i",{class:"fas fa-chart-bar"})],-1)),H("div",PWe,[H("span",RWe,xt(D.charAt(0).toUpperCase()+D.slice(1)),1),H("span",NWe,xt(x),1)])]))),128))])])):pi("",!0),H("div",OWe,[H("button",{class:"btn btn-success btn-large",onClick:b[2]||(b[2]=x=>y(i.value))},b[55]||(b[55]=[H("i",{class:"fas fa-shopping-cart me-2"},null,-1),Cr("Buy Now ",-1)])),H("button",{class:"btn btn-outline-primary btn-large",onClick:A},b[56]||(b[56]=[H("i",{class:"fas fa-times me-2"},null,-1),Cr("Close ",-1)]))])])])):pi("",!0)])])])):pi("",!0),a.value?(dt(),Ct("div",{key:2,class:jn(["toast-notification",l.value])},[H("div",kWe,[H("i",{class:jn(l.value==="success"?"fas fa-check-circle":"fas fa-exclamation-circle")},null,2),H("span",null,xt(c.value),1)]),H("button",{class:"toast-close",onClick:R},b[57]||(b[57]=[H("i",{class:"fas fa-times"},null,-1)]))],2)):pi("",!0),cn(Bqe)])}}},MWe=Nb(DWe,[["__scopeId","data-v-2a6c7dc1"]]),BWe=[{path:"/",name:"Home",component:MWe},{path:"/game",name:"Game",component:()=>un(()=>import("./Game-xIb1rhLP.js"),__vite__mapDeps([56,57]))},{path:"/dashboard",name:"Dashboard",component:()=>un(()=>import("./Dashboard-B80Z31gx.js"),__vite__mapDeps([58,59]))},{path:"/marketplace",name:"Marketplace",component:()=>un(()=>import("./Marketplace-BXx4QsBR.js"),__vite__mapDeps([60,61]))},{path:"/collection",name:"Collection",component:()=>un(()=>import("./Collection-DUuhuhIY.js"),__vite__mapDeps([62,63]))},{path:"/blindbox",name:"Blindbox",component:()=>un(()=>import("./Blindbox-oZiY_adS.js"),__vite__mapDeps([64,65]))},{path:"/investment",name:"Investment",component:()=>un(()=>import("./Investment-BjXu2Vcq.js"),__vite__mapDeps([66,67]))},{path:"/nft-investment",name:"NFTInvestment",component:()=>un(()=>import("./NFTInvestment-COuw6ZQE.js"),__vite__mapDeps([68,69]))},{path:"/referral",name:"Referral",component:()=>un(()=>import("./Referral-Bk342VZK.js"),__vite__mapDeps([70,71]))},{path:"/profile",name:"Profile",component:()=>un(()=>import("./Profile-CpLNOjoA.js"),__vite__mapDeps([72,73]))},{path:"/whitepaper",name:"Whitepaper",component:()=>un(()=>import("./Whitepaper-Cl1_ojsA.js"),__vite__mapDeps([74,75]))},{path:"/swap",name:"Swap",component:()=>un(()=>import("./Swap-nFZ1cLy7.js"),__vite__mapDeps([76,77]))},{path:"/creators",name:"Creators",component:()=>un(()=>import("./Creators-Lvm6m50S.js"),__vite__mapDeps([78,79]))},{path:"/tasks",name:"Tasks",component:()=>un(()=>import("./Tasks-gDzBC_hj.js"),__vite__mapDeps([80,81]))},{path:"/signup",name:"Signup",component:()=>un(()=>import("./Signup-CJrgrjmc.js"),__vite__mapDeps([82,83]))},{path:"/arrow-game",name:"ArrowGame",component:()=>un(()=>import("./ArrowGame-D_ww-OlC.js"),__vite__mapDeps([84,85]))},{path:"/arrow-game-modern",name:"ArrowGameModern",component:()=>un(()=>import("./ArrowGameModern-BhtXmaLA.js"),__vite__mapDeps([86,87]))},{path:"/wallet-test",name:"WalletTest",component:()=>un(()=>import("./WalletTest-Bifmgdg4.js"),__vite__mapDeps([88,89]))}],LWe=B2e({history:d2e(),routes:BWe,scrollBehavior(t,e,n){return n||{top:0,left:0}}}),al=Lt([{id:"checkIn",name:"Daily Check-in",description:"Check in daily to earn rewards",reward:1,type:"daily",icon:"fas fa-calendar-check",completed:!1,cooldown:1440*60*1e3,lastCompleted:null},{id:"connect_wallet",name:"Connect Wallet",description:"Connect your wallet to earn rewards",reward:5,type:"one_time",icon:"fas fa-wallet",completed:!1,cooldown:0,lastCompleted:null},{id:"telegramGroup",name:"Join Telegram Group",description:"Join our Telegram group",reward:2,type:"one_time",icon:"fab fa-telegram",completed:!1,cooldown:0,lastCompleted:null},{id:"telegramChannel",name:"Join Telegram Channel",description:"Subscribe to our Telegram channel",reward:2,type:"one_time",icon:"fab fa-telegram",completed:!1,cooldown:0,lastCompleted:null},{id:"facebookPage",name:"Like Facebook Page",description:"Like our Facebook page",reward:2,type:"one_time",icon:"fab fa-facebook",completed:!1,cooldown:0,lastCompleted:null},{id:"twitterFollow",name:"Follow Twitter",description:"Follow us on Twitter",reward:2,type:"one_time",icon:"fab fa-twitter",completed:!1,cooldown:0,lastCompleted:null},{id:"socialShare",name:"Social Share",description:"Share on social media",reward:3,type:"one_time",icon:"fas fa-share-alt",completed:!1,cooldown:0,lastCompleted:null}]),_b=Lt(0),$We=Lt([]),eO=Lt(!1),V6=Lt(null),H6=Lt(!1),q6=Lt(null),{currentUser:z6,updateUserData:UWe,getUserData:FWe,claimTaskReward:jWe}=fZ(),xZ=t=>{const{address:e,wallet:n}=t.detail;H6.value=!0,q6.value=e;const r=al.value.find(s=>s.id==="connect_wallet");r&&!r.completed&&NZ("connect_wallet")},PZ=()=>{H6.value=!1,q6.value=null},VWe=_r(()=>al.value.reduce((t,e)=>e.completed?t:t+e.reward,0)),RZ=_r(()=>al.value.filter(t=>t.completed).length),tO=_r(()=>al.value.length),HWe=_r(()=>tO.value===0?0:Math.round(RZ.value/tO.value*100)),NZ=async t=>{try{const e=al.value.find(n=>n.id===t);if(!e)throw new Error("Task not found");if(e.completed)throw new Error("Task already completed");if(e.type==="daily"&&e.lastCompleted){const n=Date.now()-e.lastCompleted;if(n<e.cooldown){const r=e.cooldown-n,s=Math.floor(r/(1e3*60*60)),i=Math.floor(r%(1e3*60*60)/(1e3*60));throw new Error(`Task available in ${s}h ${i}m`)}}if(e.completed=!0,e.lastCompleted=Date.now(),z6.value)try{await UWe({completedTasks:al.value.filter(n=>n.completed).map(n=>n.id),lastTaskCompletion:Date.now()})}catch(n){console.warn("Failed to update user data:",n.message)}try{await jWe(t,e.reward)}catch(n){console.warn("Failed to claim reward:",n.message)}return _b.value+=e.reward,{success:!0,reward:e.reward,task:e,newBalance:_b.value}}catch(e){return V6.value=e.message,{success:!1,error:e.message}}},qWe=()=>{al.value.forEach(t=>{t.type==="daily"&&(t.completed=!1,t.lastCompleted=null)})},W6=async()=>{if(z6.value)try{eO.value=!0;const t=await FWe();if(t){_b.value=t.balance||0;const e=t.completedTasks||[];al.value.forEach(n=>{e.includes(n.id)&&(n.completed=!0)})}}catch(t){V6.value=t.message}finally{eO.value=!1}};wp(()=>{window.addEventListener("wallet-connected",xZ),window.addEventListener("wallet-disconnected",PZ),W6()});sy(()=>{window.removeEventListener("wallet-connected",xZ),window.removeEventListener("wallet-disconnected",PZ)});Tf(z6,t=>{t?W6():(_b.value=0,al.value.forEach(e=>{e.completed=!1,e.lastCompleted=null}))});function OZ(){return{tasks:al,userBalance:_b,userTasks:$We,isLoading:eO,error:V6,isWalletConnected:H6,walletAddress:q6,totalRewards:VWe,completedTasksCount:RZ,totalTasksCount:tO,progressPercentage:HWe,completeTask:NZ,resetDailyTasks:qWe,loadUserTasks:W6}}const zWe=Uq({chains:[xR,PR],transports:{[xR.id]:Fm(),[PR.id]:Fm()}});var WWe=Object.defineProperty,dF=Object.getOwnPropertySymbols,GWe=Object.prototype.hasOwnProperty,KWe=Object.prototype.propertyIsEnumerable,hF=(t,e,n)=>e in t?WWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kZ=(t,e)=>{for(var n in e||(e={}))GWe.call(e,n)&&hF(t,n,e[n]);if(dF)for(var n of dF(e))KWe.call(e,n)&&hF(t,n,e[n]);return t},QT=t=>typeof t=="function",YT=t=>typeof t=="string",DZ=t=>YT(t)&&t.trim().length>0,QWe=t=>typeof t=="number",Af=t=>typeof t>"u",Eb=t=>typeof t=="object"&&t!==null,YWe=t=>Yc(t,"tag")&&DZ(t.tag),MZ=t=>window.TouchEvent&&t instanceof TouchEvent,BZ=t=>Yc(t,"component")&&LZ(t.component),ZWe=t=>QT(t)||Eb(t),LZ=t=>!Af(t)&&(YT(t)||ZWe(t)||BZ(t)),fF=t=>Eb(t)&&["height","width","right","left","top","bottom"].every(e=>QWe(t[e])),Yc=(t,e)=>(Eb(t)||QT(t))&&e in t,JWe=(t=>()=>t++)(0);function D2(t){return MZ(t)?t.targetTouches[0].clientX:t.clientX}function pF(t){return MZ(t)?t.targetTouches[0].clientY:t.clientY}var XWe=t=>{Af(t.remove)?t.parentNode&&t.parentNode.removeChild(t):t.remove()},__=t=>BZ(t)?__(t.component):YWe(t)?Su({render(){return t}}):typeof t=="string"?t:Sn(_s(t)),eGe=t=>{if(typeof t=="string")return t;const e=Yc(t,"props")&&Eb(t.props)?t.props:{},n=Yc(t,"listeners")&&Eb(t.listeners)?t.listeners:{};return{component:__(t),props:e,listeners:n}},tGe=()=>typeof window<"u",G6=class{constructor(){this.allHandlers={}}getHandlers(t){return this.allHandlers[t]||[]}on(t,e){const n=this.getHandlers(t);n.push(e),this.allHandlers[t]=n}off(t,e){const n=this.getHandlers(t);n.splice(n.indexOf(e)>>>0,1)}emit(t,e){this.getHandlers(t).forEach(r=>r(e))}},nGe=t=>["on","off","emit"].every(e=>Yc(t,e)&&QT(t[e])),yo;(function(t){t.SUCCESS="success",t.ERROR="error",t.WARNING="warning",t.INFO="info",t.DEFAULT="default"})(yo||(yo={}));var Ab;(function(t){t.TOP_LEFT="top-left",t.TOP_CENTER="top-center",t.TOP_RIGHT="top-right",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_CENTER="bottom-center",t.BOTTOM_RIGHT="bottom-right"})(Ab||(Ab={}));var wo;(function(t){t.ADD="add",t.DISMISS="dismiss",t.UPDATE="update",t.CLEAR="clear",t.UPDATE_DEFAULTS="update_defaults"})(wo||(wo={}));var Fa="Vue-Toastification",Da={type:{type:String,default:yo.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},$Z={type:Da.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},M1={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:Da.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},nO={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},UZ={transition:{type:[Object,String],default:`${Fa}__bounce`}},rGe={position:{type:String,default:Ab.TOP_RIGHT},draggable:Da.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:Da.trueBoolean,pauseOnHover:Da.trueBoolean,closeOnClick:Da.trueBoolean,timeout:nO.timeout,hideProgressBar:nO.hideProgressBar,toastClassName:Da.classNames,bodyClassName:Da.classNames,icon:$Z.customIcon,closeButton:M1.component,closeButtonClassName:M1.classNames,showCloseButtonOnHover:M1.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new G6}},sGe={id:{type:[String,Number],required:!0,default:0},type:Da.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},iGe={container:{type:[Object,Function],default:()=>document.body},newestOnTop:Da.trueBoolean,maxToasts:{type:Number,default:20},transition:UZ.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:t=>t},filterToasts:{type:Function,default:t=>t},containerClassName:Da.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},du={CORE_TOAST:rGe,TOAST:sGe,CONTAINER:iGe,PROGRESS_BAR:nO,ICON:$Z,TRANSITION:UZ,CLOSE_BUTTON:M1},FZ=Su({name:"VtProgressBar",props:du.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${Fa}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function oGe(t,e){return dt(),Ct("div",{style:Ib(t.style),class:jn(t.cpClass)},null,6)}FZ.render=oGe;var aGe=FZ,jZ=Su({name:"VtCloseButton",props:du.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?__(this.component):"button"},classes(){const t=[`${Fa}__close-button`];return this.showOnHover&&t.push("show-on-hover"),t.concat(this.classNames)}}}),cGe=Cr(" × ");function lGe(t,e){return dt(),ia(gO(t.buttonComponent),hI({"aria-label":t.ariaLabel,class:t.classes},t.$attrs),{default:ws(()=>[cGe]),_:1},16,["aria-label","class"])}jZ.render=lGe;var uGe=jZ,VZ={},dGe={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},hGe=H("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),fGe=[hGe];function pGe(t,e){return dt(),Ct("svg",dGe,fGe)}VZ.render=pGe;var mGe=VZ,HZ={},gGe={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},yGe=H("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),wGe=[yGe];function vGe(t,e){return dt(),Ct("svg",gGe,wGe)}HZ.render=vGe;var mF=HZ,qZ={},bGe={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},_Ge=H("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),EGe=[_Ge];function AGe(t,e){return dt(),Ct("svg",bGe,EGe)}qZ.render=AGe;var CGe=qZ,zZ={},IGe={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},TGe=H("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),SGe=[TGe];function xGe(t,e){return dt(),Ct("svg",IGe,SGe)}zZ.render=xGe;var PGe=zZ,WZ=Su({name:"VtIcon",props:du.ICON,computed:{customIconChildren(){return Yc(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return YT(this.customIcon)?this.trimValue(this.customIcon):Yc(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return Yc(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:LZ(this.customIcon)?__(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[yo.DEFAULT]:mF,[yo.INFO]:mF,[yo.SUCCESS]:mGe,[yo.ERROR]:PGe,[yo.WARNING]:CGe}[this.type]},iconClasses(){const t=[`${Fa}__icon`];return this.hasCustomIcon?t.concat(this.customIconClass):t}},methods:{trimValue(t,e=""){return DZ(t)?t.trim():e}}});function RGe(t,e){return dt(),ia(gO(t.component),{class:jn(t.iconClasses)},{default:ws(()=>[Cr(xt(t.customIconChildren),1)]),_:1},8,["class"])}WZ.render=RGe;var NGe=WZ,GZ=Su({name:"VtToast",components:{ProgressBar:aGe,CloseButton:uGe,Icon:NGe},inheritAttrs:!1,props:Object.assign({},du.CORE_TOAST,du.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const t=[`${Fa}__toast`,`${Fa}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&t.push("disable-transition"),this.rtl&&t.push(`${Fa}__toast--rtl`),t},bodyClasses(){return[`${Fa}__toast-${YT(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return fF(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:Yc,getVueComponentFromObj:__,closeToast(){this.eventBus.emit(wo.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const t=this.$el;t.addEventListener("touchstart",this.onDragStart,{passive:!0}),t.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const t=this.$el;t.removeEventListener("touchstart",this.onDragStart),t.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(t){this.beingDragged=!0,this.dragPos={x:D2(t),y:pF(t)},this.dragStart=D2(t),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(t){this.beingDragged&&(t.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:D2(t),y:pF(t)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,fF(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),OGe=["role"];function kGe(t,e){const n=tu("Icon"),r=tu("CloseButton"),s=tu("ProgressBar");return dt(),Ct("div",{class:jn(t.classes),style:Ib(t.draggableStyle),onClick:e[0]||(e[0]=(...i)=>t.clickHandler&&t.clickHandler(...i)),onMouseenter:e[1]||(e[1]=(...i)=>t.hoverPause&&t.hoverPause(...i)),onMouseleave:e[2]||(e[2]=(...i)=>t.hoverPlay&&t.hoverPlay(...i))},[t.icon?(dt(),ia(n,{key:0,"custom-icon":t.icon,type:t.type},null,8,["custom-icon","type"])):pi("v-if",!0),H("div",{role:t.accessibility.toastRole||"alert",class:jn(t.bodyClasses)},[typeof t.content=="string"?(dt(),Ct(ar,{key:0},[Cr(xt(t.content),1)],2112)):(dt(),ia(gO(t.getVueComponentFromObj(t.content)),hI({key:1,"toast-id":t.id},t.hasProp(t.content,"props")?t.content.props:{},kee(t.hasProp(t.content,"listeners")?t.content.listeners:{}),{onCloseToast:t.closeToast}),null,16,["toast-id","onCloseToast"]))],10,OGe),t.closeButton?(dt(),ia(r,{key:1,component:t.closeButton,"class-names":t.closeButtonClassName,"show-on-hover":t.showCloseButtonOnHover,"aria-label":t.accessibility.closeButtonLabel,onClick:G2(t.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):pi("v-if",!0),t.timeout?(dt(),ia(s,{key:2,"is-running":t.isRunning,"hide-progress-bar":t.hideProgressBar,timeout:t.timeout,onCloseToast:t.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):pi("v-if",!0)],38)}GZ.render=kGe;var DGe=GZ,KZ=Su({name:"VtTransition",props:du.TRANSITION,emits:["leave"],methods:{hasProp:Yc,leave(t){t instanceof HTMLElement&&(t.style.left=t.offsetLeft+"px",t.style.top=t.offsetTop+"px",t.style.width=getComputedStyle(t).width,t.style.position="absolute")}}});function MGe(t,e){return dt(),ia(qte,{tag:"div","enter-active-class":t.transition.enter?t.transition.enter:`${t.transition}-enter-active`,"move-class":t.transition.move?t.transition.move:`${t.transition}-move`,"leave-active-class":t.transition.leave?t.transition.leave:`${t.transition}-leave-active`,onLeave:t.leave},{default:ws(()=>[Oee(t.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}KZ.render=MGe;var BGe=KZ,QZ=Su({name:"VueToastification",devtools:{hide:!0},components:{Toast:DGe,VtTransition:BGe},props:Object.assign({},du.CORE_TOAST,du.CONTAINER,du.TRANSITION),data(){return{count:0,positions:Object.values(Ab),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const t=this.eventBus;t.on(wo.ADD,this.addToast),t.on(wo.CLEAR,this.clearToasts),t.on(wo.DISMISS,this.dismissToast),t.on(wo.UPDATE,this.updateToast),t.on(wo.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(t){QT(t)&&(t=await t()),XWe(this.$el),t.appendChild(this.$el)},setToast(t){Af(t.id)||(this.toasts[t.id]=t)},addToast(t){t.content=eGe(t.content);const e=Object.assign({},this.defaults,t.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[t.type],t),n=this.defaults.filterBeforeCreate(e,this.toastArray);n&&this.setToast(n)},dismissToast(t){const e=this.toasts[t];!Af(e)&&!Af(e.onClose)&&e.onClose(),delete this.toasts[t]},clearToasts(){Object.keys(this.toasts).forEach(t=>{this.dismissToast(t)})},getPositionToasts(t){const e=this.filteredToasts.filter(n=>n.position===t).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?e.reverse():e},updateDefaults(t){Af(t.container)||this.setup(t.container),this.defaults=Object.assign({},this.defaults,t)},updateToast({id:t,options:e,create:n}){this.toasts[t]?(e.timeout&&e.timeout===this.toasts[t].timeout&&e.timeout++,this.setToast(Object.assign({},this.toasts[t],e))):n&&this.addToast(Object.assign({},{id:t},e))},getClasses(t){return[`${Fa}__container`,t].concat(this.defaults.containerClassName)}}});function LGe(t,e){const n=tu("Toast"),r=tu("VtTransition");return dt(),Ct("div",null,[(dt(!0),Ct(ar,null,Ma(t.positions,s=>(dt(),Ct("div",{key:s},[cn(r,{transition:t.defaults.transition,class:jn(t.getClasses(s))},{default:ws(()=>[(dt(!0),Ct(ar,null,Ma(t.getPositionToasts(s),i=>(dt(),ia(n,hI({key:i.id},i),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}QZ.render=LGe;var $Ge=QZ,gF=(t={},e=!0)=>{const n=t.eventBus=t.eventBus||new G6;e&&Pb(()=>{const i=M9($Ge,kZ({},t)),o=i.mount(document.createElement("div")),a=t.onMounted;if(Af(a)||a(o,i),t.shareAppContext){const c=t.shareAppContext;c===!0?console.warn(`[${Fa}] App to share context with was not provided.`):(i._context.components=c._context.components,i._context.directives=c._context.directives,i._context.mixins=c._context.mixins,i._context.provides=c._context.provides,i.config.globalProperties=c.config.globalProperties)}});const r=(i,o)=>{const a=Object.assign({},{id:JWe(),type:yo.DEFAULT},o,{content:i});return n.emit(wo.ADD,a),a.id};r.clear=()=>n.emit(wo.CLEAR,void 0),r.updateDefaults=i=>{n.emit(wo.UPDATE_DEFAULTS,i)},r.dismiss=i=>{n.emit(wo.DISMISS,i)};function s(i,{content:o,options:a},c=!1){const l=Object.assign({},a,{content:o});n.emit(wo.UPDATE,{id:i,options:l,create:c})}return r.update=s,r.success=(i,o)=>r(i,Object.assign({},o,{type:yo.SUCCESS})),r.info=(i,o)=>r(i,Object.assign({},o,{type:yo.INFO})),r.error=(i,o)=>r(i,Object.assign({},o,{type:yo.ERROR})),r.warning=(i,o)=>r(i,Object.assign({},o,{type:yo.WARNING})),r},UGe=()=>{const t=()=>console.warn(`[${Fa}] This plugin does not support SSR!`);return new Proxy(t,{get(){return t}})};function YZ(t){return tGe()?nGe(t)?gF({eventBus:t},!1):gF(t,!0):UGe()}var ZZ=Symbol("VueToastification"),JZ=new G6,FGe=(t,e)=>{e?.shareAppContext===!0&&(e.shareAppContext=t);const n=YZ(kZ({eventBus:JZ},e));t.provide(ZZ,n)},kYe=t=>{const e=fI()?Eo(ZZ,void 0):void 0;return e||YZ(JZ)},jGe=FGe,B1={exports:{}};/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var VGe=B1.exports,yF;function HGe(){return yF||(yF=1,(function(t,e){(function(n,r){t.exports=r()})(VGe,(function(){const n=new Map,r={set(U,w,O){n.has(U)||n.set(U,new Map);const q=n.get(U);q.has(w)||q.size===0?q.set(w,O):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(q.keys())[0]}.`)},get:(U,w)=>n.has(U)&&n.get(U).get(w)||null,remove(U,w){if(!n.has(U))return;const O=n.get(U);O.delete(w),O.size===0&&n.delete(U)}},s="transitionend",i=U=>(U&&window.CSS&&window.CSS.escape&&(U=U.replace(/#([^\s"#']+)/g,((w,O)=>`#${CSS.escape(O)}`))),U),o=U=>{U.dispatchEvent(new Event(s))},a=U=>!(!U||typeof U!="object")&&(U.jquery!==void 0&&(U=U[0]),U.nodeType!==void 0),c=U=>a(U)?U.jquery?U[0]:U:typeof U=="string"&&U.length>0?document.querySelector(i(U)):null,l=U=>{if(!a(U)||U.getClientRects().length===0)return!1;const w=getComputedStyle(U).getPropertyValue("visibility")==="visible",O=U.closest("details:not([open])");if(!O)return w;if(O!==U){const q=U.closest("summary");if(q&&q.parentNode!==O||q===null)return!1}return w},u=U=>!U||U.nodeType!==Node.ELEMENT_NODE||!!U.classList.contains("disabled")||(U.disabled!==void 0?U.disabled:U.hasAttribute("disabled")&&U.getAttribute("disabled")!=="false"),d=U=>{if(!document.documentElement.attachShadow)return null;if(typeof U.getRootNode=="function"){const w=U.getRootNode();return w instanceof ShadowRoot?w:null}return U instanceof ShadowRoot?U:U.parentNode?d(U.parentNode):null},h=()=>{},f=U=>{U.offsetHeight},m=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,g=[],y=()=>document.documentElement.dir==="rtl",v=U=>{var w;w=()=>{const O=m();if(O){const q=U.NAME,ne=O.fn[q];O.fn[q]=U.jQueryInterface,O.fn[q].Constructor=U,O.fn[q].noConflict=()=>(O.fn[q]=ne,U.jQueryInterface)}},document.readyState==="loading"?(g.length||document.addEventListener("DOMContentLoaded",(()=>{for(const O of g)O()})),g.push(w)):w()},_=(U,w=[],O=U)=>typeof U=="function"?U.call(...w):O,A=(U,w,O=!0)=>{if(!O)return void _(U);const q=(fe=>{if(!fe)return 0;let{transitionDuration:Ce,transitionDelay:Fe}=window.getComputedStyle(fe);const at=Number.parseFloat(Ce),ct=Number.parseFloat(Fe);return at||ct?(Ce=Ce.split(",")[0],Fe=Fe.split(",")[0],1e3*(Number.parseFloat(Ce)+Number.parseFloat(Fe))):0})(w)+5;let ne=!1;const re=({target:fe})=>{fe===w&&(ne=!0,w.removeEventListener(s,re),_(U))};w.addEventListener(s,re),setTimeout((()=>{ne||o(w)}),q)},k=(U,w,O,q)=>{const ne=U.length;let re=U.indexOf(w);return re===-1?!O&&q?U[ne-1]:U[0]:(re+=O?1:-1,q&&(re=(re+ne)%ne),U[Math.max(0,Math.min(re,ne-1))])},S=/[^.]*(?=\..*)\.|.*/,R=/\..*/,T=/::\d+$/,b={};let E=1;const x={mouseenter:"mouseover",mouseleave:"mouseout"},D=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function M(U,w){return w&&`${w}::${E++}`||U.uidEvent||E++}function $(U){const w=M(U);return U.uidEvent=w,b[w]=b[w]||{},b[w]}function X(U,w,O=null){return Object.values(U).find((q=>q.callable===w&&q.delegationSelector===O))}function P(U,w,O){const q=typeof w=="string",ne=q?O:w||O;let re=J(U);return D.has(re)||(re=U),[q,ne,re]}function L(U,w,O,q,ne){if(typeof w!="string"||!U)return;let[re,fe,Ce]=P(w,O,q);w in x&&(fe=(jt=>function($t){if(!$t.relatedTarget||$t.relatedTarget!==$t.delegateTarget&&!$t.delegateTarget.contains($t.relatedTarget))return jt.call(this,$t)})(fe));const Fe=$(U),at=Fe[Ce]||(Fe[Ce]={}),ct=X(at,fe,re?O:null);if(ct)return void(ct.oneOff=ct.oneOff&&ne);const Ke=M(fe,w.replace(S,"")),Zt=re?(function(St,jt,$t){return function Vt(Jn){const ur=St.querySelectorAll(jt);for(let{target:sn}=Jn;sn&&sn!==this;sn=sn.parentNode)for(const Bn of ur)if(Bn===sn)return se(Jn,{delegateTarget:sn}),Vt.oneOff&&V.off(St,Jn.type,jt,$t),$t.apply(sn,[Jn])}})(U,O,fe):(function(St,jt){return function $t(Vt){return se(Vt,{delegateTarget:St}),$t.oneOff&&V.off(St,Vt.type,jt),jt.apply(St,[Vt])}})(U,fe);Zt.delegationSelector=re?O:null,Zt.callable=fe,Zt.oneOff=ne,Zt.uidEvent=Ke,at[Ke]=Zt,U.addEventListener(Ce,Zt,re)}function W(U,w,O,q,ne){const re=X(w[O],q,ne);re&&(U.removeEventListener(O,re,!!ne),delete w[O][re.uidEvent])}function Y(U,w,O,q){const ne=w[O]||{};for(const[re,fe]of Object.entries(ne))re.includes(q)&&W(U,w,O,fe.callable,fe.delegationSelector)}function J(U){return U=U.replace(R,""),x[U]||U}const V={on(U,w,O,q){L(U,w,O,q,!1)},one(U,w,O,q){L(U,w,O,q,!0)},off(U,w,O,q){if(typeof w!="string"||!U)return;const[ne,re,fe]=P(w,O,q),Ce=fe!==w,Fe=$(U),at=Fe[fe]||{},ct=w.startsWith(".");if(re===void 0){if(ct)for(const Ke of Object.keys(Fe))Y(U,Fe,Ke,w.slice(1));for(const[Ke,Zt]of Object.entries(at)){const St=Ke.replace(T,"");Ce&&!w.includes(St)||W(U,Fe,fe,Zt.callable,Zt.delegationSelector)}}else{if(!Object.keys(at).length)return;W(U,Fe,fe,re,ne?O:null)}},trigger(U,w,O){if(typeof w!="string"||!U)return null;const q=m();let ne=null,re=!0,fe=!0,Ce=!1;w!==J(w)&&q&&(ne=q.Event(w,O),q(U).trigger(ne),re=!ne.isPropagationStopped(),fe=!ne.isImmediatePropagationStopped(),Ce=ne.isDefaultPrevented());const Fe=se(new Event(w,{bubbles:re,cancelable:!0}),O);return Ce&&Fe.preventDefault(),fe&&U.dispatchEvent(Fe),Fe.defaultPrevented&&ne&&ne.preventDefault(),Fe}};function se(U,w={}){for(const[O,q]of Object.entries(w))try{U[O]=q}catch{Object.defineProperty(U,O,{configurable:!0,get:()=>q})}return U}function ue(U){if(U==="true")return!0;if(U==="false")return!1;if(U===Number(U).toString())return Number(U);if(U===""||U==="null")return null;if(typeof U!="string")return U;try{return JSON.parse(decodeURIComponent(U))}catch{return U}}function Ee(U){return U.replace(/[A-Z]/g,(w=>`-${w.toLowerCase()}`))}const pe={setDataAttribute(U,w,O){U.setAttribute(`data-bs-${Ee(w)}`,O)},removeDataAttribute(U,w){U.removeAttribute(`data-bs-${Ee(w)}`)},getDataAttributes(U){if(!U)return{};const w={},O=Object.keys(U.dataset).filter((q=>q.startsWith("bs")&&!q.startsWith("bsConfig")));for(const q of O){let ne=q.replace(/^bs/,"");ne=ne.charAt(0).toLowerCase()+ne.slice(1),w[ne]=ue(U.dataset[q])}return w},getDataAttribute:(U,w)=>ue(U.getAttribute(`data-bs-${Ee(w)}`))};class Se{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(w){return w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w}_mergeConfigObj(w,O){const q=a(O)?pe.getDataAttribute(O,"config"):{};return{...this.constructor.Default,...typeof q=="object"?q:{},...a(O)?pe.getDataAttributes(O):{},...typeof w=="object"?w:{}}}_typeCheckConfig(w,O=this.constructor.DefaultType){for(const[ne,re]of Object.entries(O)){const fe=w[ne],Ce=a(fe)?"element":(q=fe)==null?`${q}`:Object.prototype.toString.call(q).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(re).test(Ce))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${ne}" provided type "${Ce}" but expected type "${re}".`)}var q}}class Me extends Se{constructor(w,O){super(),(w=c(w))&&(this._element=w,this._config=this._getConfig(O),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),V.off(this._element,this.constructor.EVENT_KEY);for(const w of Object.getOwnPropertyNames(this))this[w]=null}_queueCallback(w,O,q=!0){A(w,O,q)}_getConfig(w){return w=this._mergeConfigObj(w,this._element),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}static getInstance(w){return r.get(c(w),this.DATA_KEY)}static getOrCreateInstance(w,O={}){return this.getInstance(w)||new this(w,typeof O=="object"?O:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(w){return`${w}${this.EVENT_KEY}`}}const ce=U=>{let w=U.getAttribute("data-bs-target");if(!w||w==="#"){let O=U.getAttribute("href");if(!O||!O.includes("#")&&!O.startsWith("."))return null;O.includes("#")&&!O.startsWith("#")&&(O=`#${O.split("#")[1]}`),w=O&&O!=="#"?O.trim():null}return w?w.split(",").map((O=>i(O))).join(","):null},oe={find:(U,w=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(w,U)),findOne:(U,w=document.documentElement)=>Element.prototype.querySelector.call(w,U),children:(U,w)=>[].concat(...U.children).filter((O=>O.matches(w))),parents(U,w){const O=[];let q=U.parentNode.closest(w);for(;q;)O.push(q),q=q.parentNode.closest(w);return O},prev(U,w){let O=U.previousElementSibling;for(;O;){if(O.matches(w))return[O];O=O.previousElementSibling}return[]},next(U,w){let O=U.nextElementSibling;for(;O;){if(O.matches(w))return[O];O=O.nextElementSibling}return[]},focusableChildren(U){const w=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((O=>`${O}:not([tabindex^="-"])`)).join(",");return this.find(w,U).filter((O=>!u(O)&&l(O)))},getSelectorFromElement(U){const w=ce(U);return w&&oe.findOne(w)?w:null},getElementFromSelector(U){const w=ce(U);return w?oe.findOne(w):null},getMultipleElementsFromSelector(U){const w=ce(U);return w?oe.find(w):[]}},ge=(U,w="hide")=>{const O=`click.dismiss${U.EVENT_KEY}`,q=U.NAME;V.on(document,O,`[data-bs-dismiss="${q}"]`,(function(ne){if(["A","AREA"].includes(this.tagName)&&ne.preventDefault(),u(this))return;const re=oe.getElementFromSelector(this)||this.closest(`.${q}`);U.getOrCreateInstance(re)[w]()}))},Ne=".bs.alert",mt=`close${Ne}`,Q=`closed${Ne}`;class Z extends Me{static get NAME(){return"alert"}close(){if(V.trigger(this._element,mt).defaultPrevented)return;this._element.classList.remove("show");const w=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,w)}_destroyElement(){this._element.remove(),V.trigger(this._element,Q),this.dispose()}static jQueryInterface(w){return this.each((function(){const O=Z.getOrCreateInstance(this);if(typeof w=="string"){if(O[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);O[w](this)}}))}}ge(Z,"close"),v(Z);const te='[data-bs-toggle="button"]';class me extends Me{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(w){return this.each((function(){const O=me.getOrCreateInstance(this);w==="toggle"&&O[w]()}))}}V.on(document,"click.bs.button.data-api",te,(U=>{U.preventDefault();const w=U.target.closest(te);me.getOrCreateInstance(w).toggle()})),v(me);const we=".bs.swipe",ve=`touchstart${we}`,He=`touchmove${we}`,De=`touchend${we}`,ke=`pointerdown${we}`,Ie=`pointerup${we}`,Qe={endCallback:null,leftCallback:null,rightCallback:null},Le={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class tt extends Se{constructor(w,O){super(),this._element=w,w&&tt.isSupported()&&(this._config=this._getConfig(O),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Qe}static get DefaultType(){return Le}static get NAME(){return"swipe"}dispose(){V.off(this._element,we)}_start(w){this._supportPointerEvents?this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX):this._deltaX=w.touches[0].clientX}_end(w){this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX-this._deltaX),this._handleSwipe(),_(this._config.endCallback)}_move(w){this._deltaX=w.touches&&w.touches.length>1?0:w.touches[0].clientX-this._deltaX}_handleSwipe(){const w=Math.abs(this._deltaX);if(w<=40)return;const O=w/this._deltaX;this._deltaX=0,O&&_(O>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(V.on(this._element,ke,(w=>this._start(w))),V.on(this._element,Ie,(w=>this._end(w))),this._element.classList.add("pointer-event")):(V.on(this._element,ve,(w=>this._start(w))),V.on(this._element,He,(w=>this._move(w))),V.on(this._element,De,(w=>this._end(w))))}_eventIsPointerPenTouch(w){return this._supportPointerEvents&&(w.pointerType==="pen"||w.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Je=".bs.carousel",ft=".data-api",F="ArrowLeft",C="ArrowRight",N="next",G="prev",ee="left",ae="right",ye=`slide${Je}`,Bt=`slid${Je}`,Gt=`keydown${Je}`,nn=`mouseenter${Je}`,zn=`mouseleave${Je}`,ln=`dragstart${Je}`,E_=`load${Je}${ft}`,A_=`click${Je}${ft}`,Bu="carousel",Lu="active",kp=".active",rc=".carousel-item",C_=kp+rc,Dp={[F]:ae,[C]:ee},I_={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ah={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class dl extends Me{constructor(w,O){super(w,O),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=oe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Bu&&this.cycle()}static get Default(){return I_}static get DefaultType(){return Ah}static get NAME(){return"carousel"}next(){this._slide(N)}nextWhenVisible(){!document.hidden&&l(this._element)&&this.next()}prev(){this._slide(G)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?V.one(this._element,Bt,(()=>this.cycle())):this.cycle())}to(w){const O=this._getItems();if(w>O.length-1||w<0)return;if(this._isSliding)return void V.one(this._element,Bt,(()=>this.to(w)));const q=this._getItemIndex(this._getActive());if(q===w)return;const ne=w>q?N:G;this._slide(ne,O[w])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(w){return w.defaultInterval=w.interval,w}_addEventListeners(){this._config.keyboard&&V.on(this._element,Gt,(w=>this._keydown(w))),this._config.pause==="hover"&&(V.on(this._element,nn,(()=>this.pause())),V.on(this._element,zn,(()=>this._maybeEnableCycle()))),this._config.touch&&tt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const O of oe.find(".carousel-item img",this._element))V.on(O,ln,(q=>q.preventDefault()));const w={leftCallback:()=>this._slide(this._directionToOrder(ee)),rightCallback:()=>this._slide(this._directionToOrder(ae)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new tt(this._element,w)}_keydown(w){if(/input|textarea/i.test(w.target.tagName))return;const O=Dp[w.key];O&&(w.preventDefault(),this._slide(this._directionToOrder(O)))}_getItemIndex(w){return this._getItems().indexOf(w)}_setActiveIndicatorElement(w){if(!this._indicatorsElement)return;const O=oe.findOne(kp,this._indicatorsElement);O.classList.remove(Lu),O.removeAttribute("aria-current");const q=oe.findOne(`[data-bs-slide-to="${w}"]`,this._indicatorsElement);q&&(q.classList.add(Lu),q.setAttribute("aria-current","true"))}_updateInterval(){const w=this._activeElement||this._getActive();if(!w)return;const O=Number.parseInt(w.getAttribute("data-bs-interval"),10);this._config.interval=O||this._config.defaultInterval}_slide(w,O=null){if(this._isSliding)return;const q=this._getActive(),ne=w===N,re=O||k(this._getItems(),q,ne,this._config.wrap);if(re===q)return;const fe=this._getItemIndex(re),Ce=Ke=>V.trigger(this._element,Ke,{relatedTarget:re,direction:this._orderToDirection(w),from:this._getItemIndex(q),to:fe});if(Ce(ye).defaultPrevented||!q||!re)return;const Fe=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(fe),this._activeElement=re;const at=ne?"carousel-item-start":"carousel-item-end",ct=ne?"carousel-item-next":"carousel-item-prev";re.classList.add(ct),f(re),q.classList.add(at),re.classList.add(at),this._queueCallback((()=>{re.classList.remove(at,ct),re.classList.add(Lu),q.classList.remove(Lu,ct,at),this._isSliding=!1,Ce(Bt)}),q,this._isAnimated()),Fe&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return oe.findOne(C_,this._element)}_getItems(){return oe.find(rc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(w){return y()?w===ee?G:N:w===ee?N:G}_orderToDirection(w){return y()?w===G?ee:ae:w===G?ae:ee}static jQueryInterface(w){return this.each((function(){const O=dl.getOrCreateInstance(this,w);if(typeof w!="number"){if(typeof w=="string"){if(O[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);O[w]()}}else O.to(w)}))}}V.on(document,A_,"[data-bs-slide], [data-bs-slide-to]",(function(U){const w=oe.getElementFromSelector(this);if(!w||!w.classList.contains(Bu))return;U.preventDefault();const O=dl.getOrCreateInstance(w),q=this.getAttribute("data-bs-slide-to");return q?(O.to(q),void O._maybeEnableCycle()):pe.getDataAttribute(this,"slide")==="next"?(O.next(),void O._maybeEnableCycle()):(O.prev(),void O._maybeEnableCycle())})),V.on(window,E_,(()=>{const U=oe.find('[data-bs-ride="carousel"]');for(const w of U)dl.getOrCreateInstance(w)})),v(dl);const Br=".bs.collapse",T_=`show${Br}`,Ch=`shown${Br}`,Ih=`hide${Br}`,JT=`hidden${Br}`,XT=`click${Br}.data-api`,sc="show",$u="collapse",Mp="collapsing",Bp=`:scope .${$u} .${$u}`,Lp='[data-bs-toggle="collapse"]',ky={parent:null,toggle:!0},$p={parent:"(null|element)",toggle:"boolean"};class ii extends Me{constructor(w,O){super(w,O),this._isTransitioning=!1,this._triggerArray=[];const q=oe.find(Lp);for(const ne of q){const re=oe.getSelectorFromElement(ne),fe=oe.find(re).filter((Ce=>Ce===this._element));re!==null&&fe.length&&this._triggerArray.push(ne)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ky}static get DefaultType(){return $p}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let w=[];if(this._config.parent&&(w=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((ne=>ne!==this._element)).map((ne=>ii.getOrCreateInstance(ne,{toggle:!1})))),w.length&&w[0]._isTransitioning||V.trigger(this._element,T_).defaultPrevented)return;for(const ne of w)ne.hide();const O=this._getDimension();this._element.classList.remove($u),this._element.classList.add(Mp),this._element.style[O]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const q=`scroll${O[0].toUpperCase()+O.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Mp),this._element.classList.add($u,sc),this._element.style[O]="",V.trigger(this._element,Ch)}),this._element,!0),this._element.style[O]=`${this._element[q]}px`}hide(){if(this._isTransitioning||!this._isShown()||V.trigger(this._element,Ih).defaultPrevented)return;const w=this._getDimension();this._element.style[w]=`${this._element.getBoundingClientRect()[w]}px`,f(this._element),this._element.classList.add(Mp),this._element.classList.remove($u,sc);for(const O of this._triggerArray){const q=oe.getElementFromSelector(O);q&&!this._isShown(q)&&this._addAriaAndCollapsedClass([O],!1)}this._isTransitioning=!0,this._element.style[w]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Mp),this._element.classList.add($u),V.trigger(this._element,JT)}),this._element,!0)}_isShown(w=this._element){return w.classList.contains(sc)}_configAfterMerge(w){return w.toggle=!!w.toggle,w.parent=c(w.parent),w}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const w=this._getFirstLevelChildren(Lp);for(const O of w){const q=oe.getElementFromSelector(O);q&&this._addAriaAndCollapsedClass([O],this._isShown(q))}}_getFirstLevelChildren(w){const O=oe.find(Bp,this._config.parent);return oe.find(w,this._config.parent).filter((q=>!O.includes(q)))}_addAriaAndCollapsedClass(w,O){if(w.length)for(const q of w)q.classList.toggle("collapsed",!O),q.setAttribute("aria-expanded",O)}static jQueryInterface(w){const O={};return typeof w=="string"&&/show|hide/.test(w)&&(O.toggle=!1),this.each((function(){const q=ii.getOrCreateInstance(this,O);if(typeof w=="string"){if(q[w]===void 0)throw new TypeError(`No method named "${w}"`);q[w]()}}))}}V.on(document,XT,Lp,(function(U){(U.target.tagName==="A"||U.delegateTarget&&U.delegateTarget.tagName==="A")&&U.preventDefault();for(const w of oe.getMultipleElementsFromSelector(this))ii.getOrCreateInstance(w,{toggle:!1}).toggle()})),v(ii);var us="top",Fs="bottom",Is="right",Yr="left",Th="auto",hl=[us,Fs,Is,Yr],fl="start",ba="end",Dy="clippingParents",Sh="viewport",Do="popper",ic="reference",xh=hl.reduce((function(U,w){return U.concat([w+"-"+fl,w+"-"+ba])}),[]),My=[].concat(hl,[Th]).reduce((function(U,w){return U.concat([w,w+"-"+fl,w+"-"+ba])}),[]),By="beforeRead",Ly="read",$y="afterRead",Up="beforeMain",Fp="main",Uy="afterMain",Fy="beforeWrite",S_="write",x_="afterWrite",jy=[By,Ly,$y,Up,Fp,Uy,Fy,S_,x_];function io(U){return U?(U.nodeName||"").toLowerCase():null}function oi(U){if(U==null)return window;if(U.toString()!=="[object Window]"){var w=U.ownerDocument;return w&&w.defaultView||window}return U}function ai(U){return U instanceof oi(U).Element||U instanceof Element}function Nr(U){return U instanceof oi(U).HTMLElement||U instanceof HTMLElement}function Uu(U){return typeof ShadowRoot<"u"&&(U instanceof oi(U).ShadowRoot||U instanceof ShadowRoot)}const Fu={name:"applyStyles",enabled:!0,phase:"write",fn:function(U){var w=U.state;Object.keys(w.elements).forEach((function(O){var q=w.styles[O]||{},ne=w.attributes[O]||{},re=w.elements[O];Nr(re)&&io(re)&&(Object.assign(re.style,q),Object.keys(ne).forEach((function(fe){var Ce=ne[fe];Ce===!1?re.removeAttribute(fe):re.setAttribute(fe,Ce===!0?"":Ce)})))}))},effect:function(U){var w=U.state,O={popper:{position:w.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(w.elements.popper.style,O.popper),w.styles=O,w.elements.arrow&&Object.assign(w.elements.arrow.style,O.arrow),function(){Object.keys(w.elements).forEach((function(q){var ne=w.elements[q],re=w.attributes[q]||{},fe=Object.keys(w.styles.hasOwnProperty(q)?w.styles[q]:O[q]).reduce((function(Ce,Fe){return Ce[Fe]="",Ce}),{});Nr(ne)&&io(ne)&&(Object.assign(ne.style,fe),Object.keys(re).forEach((function(Ce){ne.removeAttribute(Ce)})))}))}},requires:["computeStyles"]};function oo(U){return U.split("-")[0]}var In=Math.max,pl=Math.min,Mo=Math.round;function ml(){var U=navigator.userAgentData;return U!=null&&U.brands&&Array.isArray(U.brands)?U.brands.map((function(w){return w.brand+"/"+w.version})).join(" "):navigator.userAgent}function P_(){return!/^((?!chrome|android).)*safari/i.test(ml())}function gl(U,w,O){w===void 0&&(w=!1),O===void 0&&(O=!1);var q=U.getBoundingClientRect(),ne=1,re=1;w&&Nr(U)&&(ne=U.offsetWidth>0&&Mo(q.width)/U.offsetWidth||1,re=U.offsetHeight>0&&Mo(q.height)/U.offsetHeight||1);var fe=(ai(U)?oi(U):window).visualViewport,Ce=!P_()&&O,Fe=(q.left+(Ce&&fe?fe.offsetLeft:0))/ne,at=(q.top+(Ce&&fe?fe.offsetTop:0))/re,ct=q.width/ne,Ke=q.height/re;return{width:ct,height:Ke,top:at,right:Fe+ct,bottom:at+Ke,left:Fe,x:Fe,y:at}}function Vy(U){var w=gl(U),O=U.offsetWidth,q=U.offsetHeight;return Math.abs(w.width-O)<=1&&(O=w.width),Math.abs(w.height-q)<=1&&(q=w.height),{x:U.offsetLeft,y:U.offsetTop,width:O,height:q}}function R_(U,w){var O=w.getRootNode&&w.getRootNode();if(U.contains(w))return!0;if(O&&Uu(O)){var q=w;do{if(q&&U.isSameNode(q))return!0;q=q.parentNode||q.host}while(q)}return!1}function _a(U){return oi(U).getComputedStyle(U)}function eS(U){return["table","td","th"].indexOf(io(U))>=0}function Si(U){return((ai(U)?U.ownerDocument:U.document)||window.document).documentElement}function ao(U){return io(U)==="html"?U:U.assignedSlot||U.parentNode||(Uu(U)?U.host:null)||Si(U)}function Hy(U){return Nr(U)&&_a(U).position!=="fixed"?U.offsetParent:null}function ju(U){for(var w=oi(U),O=Hy(U);O&&eS(O)&&_a(O).position==="static";)O=Hy(O);return O&&(io(O)==="html"||io(O)==="body"&&_a(O).position==="static")?w:O||(function(q){var ne=/firefox/i.test(ml());if(/Trident/i.test(ml())&&Nr(q)&&_a(q).position==="fixed")return null;var re=ao(q);for(Uu(re)&&(re=re.host);Nr(re)&&["html","body"].indexOf(io(re))<0;){var fe=_a(re);if(fe.transform!=="none"||fe.perspective!=="none"||fe.contain==="paint"||["transform","perspective"].indexOf(fe.willChange)!==-1||ne&&fe.willChange==="filter"||ne&&fe.filter&&fe.filter!=="none")return re;re=re.parentNode}return null})(U)||w}function jp(U){return["top","bottom"].indexOf(U)>=0?"x":"y"}function Bo(U,w,O){return In(U,pl(w,O))}function N_(U){return Object.assign({},{top:0,right:0,bottom:0,left:0},U)}function O_(U,w){return w.reduce((function(O,q){return O[q]=U,O}),{})}const k_={name:"arrow",enabled:!0,phase:"main",fn:function(U){var w,O=U.state,q=U.name,ne=U.options,re=O.elements.arrow,fe=O.modifiersData.popperOffsets,Ce=oo(O.placement),Fe=jp(Ce),at=[Yr,Is].indexOf(Ce)>=0?"height":"width";if(re&&fe){var ct=(function(Xn,Kn){return N_(typeof(Xn=typeof Xn=="function"?Xn(Object.assign({},Kn.rects,{placement:Kn.placement})):Xn)!="number"?Xn:O_(Xn,hl))})(ne.padding,O),Ke=Vy(re),Zt=Fe==="y"?us:Yr,St=Fe==="y"?Fs:Is,jt=O.rects.reference[at]+O.rects.reference[Fe]-fe[Fe]-O.rects.popper[at],$t=fe[Fe]-O.rects.reference[Fe],Vt=ju(re),Jn=Vt?Fe==="y"?Vt.clientHeight||0:Vt.clientWidth||0:0,ur=jt/2-$t/2,sn=ct[Zt],Bn=Jn-Ke[at]-ct[St],Jt=Jn/2-Ke[at]/2+ur,gn=Bo(sn,Jt,Bn),Gn=Fe;O.modifiersData[q]=((w={})[Gn]=gn,w.centerOffset=gn-Jt,w)}},effect:function(U){var w=U.state,O=U.options.element,q=O===void 0?"[data-popper-arrow]":O;q!=null&&(typeof q!="string"||(q=w.elements.popper.querySelector(q)))&&R_(w.elements.popper,q)&&(w.elements.arrow=q)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ci(U){return U.split("-")[1]}var tS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function D_(U){var w,O=U.popper,q=U.popperRect,ne=U.placement,re=U.variation,fe=U.offsets,Ce=U.position,Fe=U.gpuAcceleration,at=U.adaptive,ct=U.roundOffsets,Ke=U.isFixed,Zt=fe.x,St=Zt===void 0?0:Zt,jt=fe.y,$t=jt===void 0?0:jt,Vt=typeof ct=="function"?ct({x:St,y:$t}):{x:St,y:$t};St=Vt.x,$t=Vt.y;var Jn=fe.hasOwnProperty("x"),ur=fe.hasOwnProperty("y"),sn=Yr,Bn=us,Jt=window;if(at){var gn=ju(O),Gn="clientHeight",Xn="clientWidth";gn===oi(O)&&_a(gn=Si(O)).position!=="static"&&Ce==="absolute"&&(Gn="scrollHeight",Xn="scrollWidth"),(ne===us||(ne===Yr||ne===Is)&&re===ba)&&(Bn=Fs,$t-=(Ke&&gn===Jt&&Jt.visualViewport?Jt.visualViewport.height:gn[Gn])-q.height,$t*=Fe?1:-1),ne!==Yr&&(ne!==us&&ne!==Fs||re!==ba)||(sn=Is,St-=(Ke&&gn===Jt&&Jt.visualViewport?Jt.visualViewport.width:gn[Xn])-q.width,St*=Fe?1:-1)}var Kn,Lr=Object.assign({position:Ce},at&&tS),co=ct===!0?(function(Aa,ui){var $o=Aa.x,Uo=Aa.y,Or=ui.devicePixelRatio||1;return{x:Mo($o*Or)/Or||0,y:Mo(Uo*Or)/Or||0}})({x:St,y:$t},oi(O)):{x:St,y:$t};return St=co.x,$t=co.y,Fe?Object.assign({},Lr,((Kn={})[Bn]=ur?"0":"",Kn[sn]=Jn?"0":"",Kn.transform=(Jt.devicePixelRatio||1)<=1?"translate("+St+"px, "+$t+"px)":"translate3d("+St+"px, "+$t+"px, 0)",Kn)):Object.assign({},Lr,((w={})[Bn]=ur?$t+"px":"",w[sn]=Jn?St+"px":"",w.transform="",w))}const Vu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(U){var w=U.state,O=U.options,q=O.gpuAcceleration,ne=q===void 0||q,re=O.adaptive,fe=re===void 0||re,Ce=O.roundOffsets,Fe=Ce===void 0||Ce,at={placement:oo(w.placement),variation:ci(w.placement),popper:w.elements.popper,popperRect:w.rects.popper,gpuAcceleration:ne,isFixed:w.options.strategy==="fixed"};w.modifiersData.popperOffsets!=null&&(w.styles.popper=Object.assign({},w.styles.popper,D_(Object.assign({},at,{offsets:w.modifiersData.popperOffsets,position:w.options.strategy,adaptive:fe,roundOffsets:Fe})))),w.modifiersData.arrow!=null&&(w.styles.arrow=Object.assign({},w.styles.arrow,D_(Object.assign({},at,{offsets:w.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Fe})))),w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-placement":w.placement})},data:{}};var yl={passive:!0};const Vp={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(U){var w=U.state,O=U.instance,q=U.options,ne=q.scroll,re=ne===void 0||ne,fe=q.resize,Ce=fe===void 0||fe,Fe=oi(w.elements.popper),at=[].concat(w.scrollParents.reference,w.scrollParents.popper);return re&&at.forEach((function(ct){ct.addEventListener("scroll",O.update,yl)})),Ce&&Fe.addEventListener("resize",O.update,yl),function(){re&&at.forEach((function(ct){ct.removeEventListener("scroll",O.update,yl)})),Ce&&Fe.removeEventListener("resize",O.update,yl)}},data:{}};var Ph={left:"right",right:"left",bottom:"top",top:"bottom"};function oc(U){return U.replace(/left|right|bottom|top/g,(function(w){return Ph[w]}))}var M_={start:"end",end:"start"};function Hp(U){return U.replace(/start|end/g,(function(w){return M_[w]}))}function lr(U){var w=oi(U);return{scrollLeft:w.pageXOffset,scrollTop:w.pageYOffset}}function qy(U){return gl(Si(U)).left+lr(U).scrollLeft}function zy(U){var w=_a(U),O=w.overflow,q=w.overflowX,ne=w.overflowY;return/auto|scroll|overlay|hidden/.test(O+ne+q)}function Wy(U){return["html","body","#document"].indexOf(io(U))>=0?U.ownerDocument.body:Nr(U)&&zy(U)?U:Wy(ao(U))}function Hu(U,w){var O;w===void 0&&(w=[]);var q=Wy(U),ne=q===((O=U.ownerDocument)==null?void 0:O.body),re=oi(q),fe=ne?[re].concat(re.visualViewport||[],zy(q)?q:[]):q,Ce=w.concat(fe);return ne?Ce:Ce.concat(Hu(ao(fe)))}function qp(U){return Object.assign({},U,{left:U.x,top:U.y,right:U.x+U.width,bottom:U.y+U.height})}function Rh(U,w,O){return w===Sh?qp((function(q,ne){var re=oi(q),fe=Si(q),Ce=re.visualViewport,Fe=fe.clientWidth,at=fe.clientHeight,ct=0,Ke=0;if(Ce){Fe=Ce.width,at=Ce.height;var Zt=P_();(Zt||!Zt&&ne==="fixed")&&(ct=Ce.offsetLeft,Ke=Ce.offsetTop)}return{width:Fe,height:at,x:ct+qy(q),y:Ke}})(U,O)):ai(w)?(function(q,ne){var re=gl(q,!1,ne==="fixed");return re.top=re.top+q.clientTop,re.left=re.left+q.clientLeft,re.bottom=re.top+q.clientHeight,re.right=re.left+q.clientWidth,re.width=q.clientWidth,re.height=q.clientHeight,re.x=re.left,re.y=re.top,re})(w,O):qp((function(q){var ne,re=Si(q),fe=lr(q),Ce=(ne=q.ownerDocument)==null?void 0:ne.body,Fe=In(re.scrollWidth,re.clientWidth,Ce?Ce.scrollWidth:0,Ce?Ce.clientWidth:0),at=In(re.scrollHeight,re.clientHeight,Ce?Ce.scrollHeight:0,Ce?Ce.clientHeight:0),ct=-fe.scrollLeft+qy(q),Ke=-fe.scrollTop;return _a(Ce||re).direction==="rtl"&&(ct+=In(re.clientWidth,Ce?Ce.clientWidth:0)-Fe),{width:Fe,height:at,x:ct,y:Ke}})(Si(U)))}function Gy(U){var w,O=U.reference,q=U.element,ne=U.placement,re=ne?oo(ne):null,fe=ne?ci(ne):null,Ce=O.x+O.width/2-q.width/2,Fe=O.y+O.height/2-q.height/2;switch(re){case us:w={x:Ce,y:O.y-q.height};break;case Fs:w={x:Ce,y:O.y+O.height};break;case Is:w={x:O.x+O.width,y:Fe};break;case Yr:w={x:O.x-q.width,y:Fe};break;default:w={x:O.x,y:O.y}}var at=re?jp(re):null;if(at!=null){var ct=at==="y"?"height":"width";switch(fe){case fl:w[at]=w[at]-(O[ct]/2-q[ct]/2);break;case ba:w[at]=w[at]+(O[ct]/2-q[ct]/2)}}return w}function js(U,w){w===void 0&&(w={});var O=w,q=O.placement,ne=q===void 0?U.placement:q,re=O.strategy,fe=re===void 0?U.strategy:re,Ce=O.boundary,Fe=Ce===void 0?Dy:Ce,at=O.rootBoundary,ct=at===void 0?Sh:at,Ke=O.elementContext,Zt=Ke===void 0?Do:Ke,St=O.altBoundary,jt=St!==void 0&&St,$t=O.padding,Vt=$t===void 0?0:$t,Jn=N_(typeof Vt!="number"?Vt:O_(Vt,hl)),ur=Zt===Do?ic:Do,sn=U.rects.popper,Bn=U.elements[jt?ur:Zt],Jt=(function(ui,$o,Uo,Or){var cc=$o==="clippingParents"?(function(nr){var di=Hu(ao(nr)),Fo=["absolute","fixed"].indexOf(_a(nr).position)>=0&&Nr(nr)?ju(nr):nr;return ai(Fo)?di.filter((function(Ku){return ai(Ku)&&R_(Ku,Fo)&&io(Ku)!=="body"})):[]})(ui):[].concat($o),lc=[].concat(cc,[Uo]),Zp=lc[0],ps=lc.reduce((function(nr,di){var Fo=Rh(ui,di,Or);return nr.top=In(Fo.top,nr.top),nr.right=pl(Fo.right,nr.right),nr.bottom=pl(Fo.bottom,nr.bottom),nr.left=In(Fo.left,nr.left),nr}),Rh(ui,Zp,Or));return ps.width=ps.right-ps.left,ps.height=ps.bottom-ps.top,ps.x=ps.left,ps.y=ps.top,ps})(ai(Bn)?Bn:Bn.contextElement||Si(U.elements.popper),Fe,ct,fe),gn=gl(U.elements.reference),Gn=Gy({reference:gn,element:sn,placement:ne}),Xn=qp(Object.assign({},sn,Gn)),Kn=Zt===Do?Xn:gn,Lr={top:Jt.top-Kn.top+Jn.top,bottom:Kn.bottom-Jt.bottom+Jn.bottom,left:Jt.left-Kn.left+Jn.left,right:Kn.right-Jt.right+Jn.right},co=U.modifiersData.offset;if(Zt===Do&&co){var Aa=co[ne];Object.keys(Lr).forEach((function(ui){var $o=[Is,Fs].indexOf(ui)>=0?1:-1,Uo=[us,Fs].indexOf(ui)>=0?"y":"x";Lr[ui]+=Aa[Uo]*$o}))}return Lr}function B_(U,w){w===void 0&&(w={});var O=w,q=O.placement,ne=O.boundary,re=O.rootBoundary,fe=O.padding,Ce=O.flipVariations,Fe=O.allowedAutoPlacements,at=Fe===void 0?My:Fe,ct=ci(q),Ke=ct?Ce?xh:xh.filter((function(jt){return ci(jt)===ct})):hl,Zt=Ke.filter((function(jt){return at.indexOf(jt)>=0}));Zt.length===0&&(Zt=Ke);var St=Zt.reduce((function(jt,$t){return jt[$t]=js(U,{placement:$t,boundary:ne,rootBoundary:re,padding:fe})[oo($t)],jt}),{});return Object.keys(St).sort((function(jt,$t){return St[jt]-St[$t]}))}const L_={name:"flip",enabled:!0,phase:"main",fn:function(U){var w=U.state,O=U.options,q=U.name;if(!w.modifiersData[q]._skip){for(var ne=O.mainAxis,re=ne===void 0||ne,fe=O.altAxis,Ce=fe===void 0||fe,Fe=O.fallbackPlacements,at=O.padding,ct=O.boundary,Ke=O.rootBoundary,Zt=O.altBoundary,St=O.flipVariations,jt=St===void 0||St,$t=O.allowedAutoPlacements,Vt=w.options.placement,Jn=oo(Vt),ur=Fe||(Jn!==Vt&&jt?(function(nr){if(oo(nr)===Th)return[];var di=oc(nr);return[Hp(nr),di,Hp(di)]})(Vt):[oc(Vt)]),sn=[Vt].concat(ur).reduce((function(nr,di){return nr.concat(oo(di)===Th?B_(w,{placement:di,boundary:ct,rootBoundary:Ke,padding:at,flipVariations:jt,allowedAutoPlacements:$t}):di)}),[]),Bn=w.rects.reference,Jt=w.rects.popper,gn=new Map,Gn=!0,Xn=sn[0],Kn=0;Kn<sn.length;Kn++){var Lr=sn[Kn],co=oo(Lr),Aa=ci(Lr)===fl,ui=[us,Fs].indexOf(co)>=0,$o=ui?"width":"height",Uo=js(w,{placement:Lr,boundary:ct,rootBoundary:Ke,altBoundary:Zt,padding:at}),Or=ui?Aa?Is:Yr:Aa?Fs:us;Bn[$o]>Jt[$o]&&(Or=oc(Or));var cc=oc(Or),lc=[];if(re&&lc.push(Uo[co]<=0),Ce&&lc.push(Uo[Or]<=0,Uo[cc]<=0),lc.every((function(nr){return nr}))){Xn=Lr,Gn=!1;break}gn.set(Lr,lc)}if(Gn)for(var Zp=function(nr){var di=sn.find((function(Fo){var Ku=gn.get(Fo);if(Ku)return Ku.slice(0,nr).every((function(K_){return K_}))}));if(di)return Xn=di,"break"},ps=jt?3:1;ps>0&&Zp(ps)!=="break";ps--);w.placement!==Xn&&(w.modifiersData[q]._skip=!0,w.placement=Xn,w.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function qu(U,w,O){return O===void 0&&(O={x:0,y:0}),{top:U.top-w.height-O.y,right:U.right-w.width+O.x,bottom:U.bottom-w.height+O.y,left:U.left-w.width-O.x}}function Ky(U){return[us,Is,Fs,Yr].some((function(w){return U[w]>=0}))}const zp={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(U){var w=U.state,O=U.name,q=w.rects.reference,ne=w.rects.popper,re=w.modifiersData.preventOverflow,fe=js(w,{elementContext:"reference"}),Ce=js(w,{altBoundary:!0}),Fe=qu(fe,q),at=qu(Ce,ne,re),ct=Ky(Fe),Ke=Ky(at);w.modifiersData[O]={referenceClippingOffsets:Fe,popperEscapeOffsets:at,isReferenceHidden:ct,hasPopperEscaped:Ke},w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-reference-hidden":ct,"data-popper-escaped":Ke})}},Nh={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(U){var w=U.state,O=U.options,q=U.name,ne=O.offset,re=ne===void 0?[0,0]:ne,fe=My.reduce((function(ct,Ke){return ct[Ke]=(function(Zt,St,jt){var $t=oo(Zt),Vt=[Yr,us].indexOf($t)>=0?-1:1,Jn=typeof jt=="function"?jt(Object.assign({},St,{placement:Zt})):jt,ur=Jn[0],sn=Jn[1];return ur=ur||0,sn=(sn||0)*Vt,[Yr,Is].indexOf($t)>=0?{x:sn,y:ur}:{x:ur,y:sn}})(Ke,w.rects,re),ct}),{}),Ce=fe[w.placement],Fe=Ce.x,at=Ce.y;w.modifiersData.popperOffsets!=null&&(w.modifiersData.popperOffsets.x+=Fe,w.modifiersData.popperOffsets.y+=at),w.modifiersData[q]=fe}},Wp={name:"popperOffsets",enabled:!0,phase:"read",fn:function(U){var w=U.state,O=U.name;w.modifiersData[O]=Gy({reference:w.rects.reference,element:w.rects.popper,placement:w.placement})},data:{}},Oh={name:"preventOverflow",enabled:!0,phase:"main",fn:function(U){var w=U.state,O=U.options,q=U.name,ne=O.mainAxis,re=ne===void 0||ne,fe=O.altAxis,Ce=fe!==void 0&&fe,Fe=O.boundary,at=O.rootBoundary,ct=O.altBoundary,Ke=O.padding,Zt=O.tether,St=Zt===void 0||Zt,jt=O.tetherOffset,$t=jt===void 0?0:jt,Vt=js(w,{boundary:Fe,rootBoundary:at,padding:Ke,altBoundary:ct}),Jn=oo(w.placement),ur=ci(w.placement),sn=!ur,Bn=jp(Jn),Jt=Bn==="x"?"y":"x",gn=w.modifiersData.popperOffsets,Gn=w.rects.reference,Xn=w.rects.popper,Kn=typeof $t=="function"?$t(Object.assign({},w.rects,{placement:w.placement})):$t,Lr=typeof Kn=="number"?{mainAxis:Kn,altAxis:Kn}:Object.assign({mainAxis:0,altAxis:0},Kn),co=w.modifiersData.offset?w.modifiersData.offset[w.placement]:null,Aa={x:0,y:0};if(gn){if(re){var ui,$o=Bn==="y"?us:Yr,Uo=Bn==="y"?Fs:Is,Or=Bn==="y"?"height":"width",cc=gn[Bn],lc=cc+Vt[$o],Zp=cc-Vt[Uo],ps=St?-Xn[Or]/2:0,nr=ur===fl?Gn[Or]:Xn[Or],di=ur===fl?-Xn[Or]:-Gn[Or],Fo=w.elements.arrow,Ku=St&&Fo?Vy(Fo):{width:0,height:0},K_=w.modifiersData["arrow#persistent"]?w.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},A3=K_[$o],C3=K_[Uo],Q_=Bo(0,Gn[Or],Ku[Or]),dX=sn?Gn[Or]/2-ps-Q_-A3-Lr.mainAxis:nr-Q_-A3-Lr.mainAxis,hX=sn?-Gn[Or]/2+ps+Q_+C3+Lr.mainAxis:di+Q_+C3+Lr.mainAxis,pS=w.elements.arrow&&ju(w.elements.arrow),fX=pS?Bn==="y"?pS.clientTop||0:pS.clientLeft||0:0,I3=(ui=co?.[Bn])!=null?ui:0,pX=cc+hX-I3,T3=Bo(St?pl(lc,cc+dX-I3-fX):lc,cc,St?In(Zp,pX):Zp);gn[Bn]=T3,Aa[Bn]=T3-cc}if(Ce){var S3,mX=Bn==="x"?us:Yr,gX=Bn==="x"?Fs:Is,jh=gn[Jt],Y_=Jt==="y"?"height":"width",x3=jh+Vt[mX],P3=jh-Vt[gX],mS=[us,Yr].indexOf(Jn)!==-1,R3=(S3=co?.[Jt])!=null?S3:0,N3=mS?x3:jh-Gn[Y_]-Xn[Y_]-R3+Lr.altAxis,O3=mS?jh+Gn[Y_]+Xn[Y_]-R3-Lr.altAxis:P3,k3=St&&mS?(function(yX,wX,gS){var D3=Bo(yX,wX,gS);return D3>gS?gS:D3})(N3,jh,O3):Bo(St?N3:x3,jh,St?O3:P3);gn[Jt]=k3,Aa[Jt]=k3-jh}w.modifiersData[q]=Aa}},requiresIfExists:["offset"]};function nS(U,w,O){O===void 0&&(O=!1);var q,ne,re=Nr(w),fe=Nr(w)&&(function(Ke){var Zt=Ke.getBoundingClientRect(),St=Mo(Zt.width)/Ke.offsetWidth||1,jt=Mo(Zt.height)/Ke.offsetHeight||1;return St!==1||jt!==1})(w),Ce=Si(w),Fe=gl(U,fe,O),at={scrollLeft:0,scrollTop:0},ct={x:0,y:0};return(re||!re&&!O)&&((io(w)!=="body"||zy(Ce))&&(at=(q=w)!==oi(q)&&Nr(q)?{scrollLeft:(ne=q).scrollLeft,scrollTop:ne.scrollTop}:lr(q)),Nr(w)?((ct=gl(w,!0)).x+=w.clientLeft,ct.y+=w.clientTop):Ce&&(ct.x=qy(Ce))),{x:Fe.left+at.scrollLeft-ct.x,y:Fe.top+at.scrollTop-ct.y,width:Fe.width,height:Fe.height}}function $_(U){var w=new Map,O=new Set,q=[];function ne(re){O.add(re.name),[].concat(re.requires||[],re.requiresIfExists||[]).forEach((function(fe){if(!O.has(fe)){var Ce=w.get(fe);Ce&&ne(Ce)}})),q.push(re)}return U.forEach((function(re){w.set(re.name,re)})),U.forEach((function(re){O.has(re.name)||ne(re)})),q}var zu={placement:"bottom",modifiers:[],strategy:"absolute"};function Qy(){for(var U=arguments.length,w=new Array(U),O=0;O<U;O++)w[O]=arguments[O];return!w.some((function(q){return!(q&&typeof q.getBoundingClientRect=="function")}))}function kh(U){U===void 0&&(U={});var w=U,O=w.defaultModifiers,q=O===void 0?[]:O,ne=w.defaultOptions,re=ne===void 0?zu:ne;return function(fe,Ce,Fe){Fe===void 0&&(Fe=re);var at,ct,Ke={placement:"bottom",orderedModifiers:[],options:Object.assign({},zu,re),modifiersData:{},elements:{reference:fe,popper:Ce},attributes:{},styles:{}},Zt=[],St=!1,jt={state:Ke,setOptions:function(Vt){var Jn=typeof Vt=="function"?Vt(Ke.options):Vt;$t(),Ke.options=Object.assign({},re,Ke.options,Jn),Ke.scrollParents={reference:ai(fe)?Hu(fe):fe.contextElement?Hu(fe.contextElement):[],popper:Hu(Ce)};var ur,sn,Bn=(function(Jt){var gn=$_(Jt);return jy.reduce((function(Gn,Xn){return Gn.concat(gn.filter((function(Kn){return Kn.phase===Xn})))}),[])})((ur=[].concat(q,Ke.options.modifiers),sn=ur.reduce((function(Jt,gn){var Gn=Jt[gn.name];return Jt[gn.name]=Gn?Object.assign({},Gn,gn,{options:Object.assign({},Gn.options,gn.options),data:Object.assign({},Gn.data,gn.data)}):gn,Jt}),{}),Object.keys(sn).map((function(Jt){return sn[Jt]}))));return Ke.orderedModifiers=Bn.filter((function(Jt){return Jt.enabled})),Ke.orderedModifiers.forEach((function(Jt){var gn=Jt.name,Gn=Jt.options,Xn=Gn===void 0?{}:Gn,Kn=Jt.effect;if(typeof Kn=="function"){var Lr=Kn({state:Ke,name:gn,instance:jt,options:Xn});Zt.push(Lr||function(){})}})),jt.update()},forceUpdate:function(){if(!St){var Vt=Ke.elements,Jn=Vt.reference,ur=Vt.popper;if(Qy(Jn,ur)){Ke.rects={reference:nS(Jn,ju(ur),Ke.options.strategy==="fixed"),popper:Vy(ur)},Ke.reset=!1,Ke.placement=Ke.options.placement,Ke.orderedModifiers.forEach((function(Kn){return Ke.modifiersData[Kn.name]=Object.assign({},Kn.data)}));for(var sn=0;sn<Ke.orderedModifiers.length;sn++)if(Ke.reset!==!0){var Bn=Ke.orderedModifiers[sn],Jt=Bn.fn,gn=Bn.options,Gn=gn===void 0?{}:gn,Xn=Bn.name;typeof Jt=="function"&&(Ke=Jt({state:Ke,options:Gn,name:Xn,instance:jt})||Ke)}else Ke.reset=!1,sn=-1}}},update:(at=function(){return new Promise((function(Vt){jt.forceUpdate(),Vt(Ke)}))},function(){return ct||(ct=new Promise((function(Vt){Promise.resolve().then((function(){ct=void 0,Vt(at())}))}))),ct}),destroy:function(){$t(),St=!0}};if(!Qy(fe,Ce))return jt;function $t(){Zt.forEach((function(Vt){return Vt()})),Zt=[]}return jt.setOptions(Fe).then((function(Vt){!St&&Fe.onFirstUpdate&&Fe.onFirstUpdate(Vt)})),jt}}var Yy=kh(),Zy=kh({defaultModifiers:[Vp,Wp,Vu,Fu]}),Gp=kh({defaultModifiers:[Vp,Wp,Vu,Fu,Nh,L_,Oh,k_,zp]});const Dh=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Uy,afterRead:$y,afterWrite:x_,applyStyles:Fu,arrow:k_,auto:Th,basePlacements:hl,beforeMain:Up,beforeRead:By,beforeWrite:Fy,bottom:Fs,clippingParents:Dy,computeStyles:Vu,createPopper:Gp,createPopperBase:Yy,createPopperLite:Zy,detectOverflow:js,end:ba,eventListeners:Vp,flip:L_,hide:zp,left:Yr,main:Fp,modifierPhases:jy,offset:Nh,placements:My,popper:Do,popperGenerator:kh,popperOffsets:Wp,preventOverflow:Oh,read:Ly,reference:ic,right:Is,start:fl,top:us,variationPlacements:xh,viewport:Sh,write:S_},Symbol.toStringTag,{value:"Module"})),Jy="dropdown",ac=".bs.dropdown",Ea=".data-api",U_="ArrowUp",Xy="ArrowDown",F_=`hide${ac}`,j_=`hidden${ac}`,Kp=`show${ac}`,li=`shown${ac}`,e0=`click${ac}${Ea}`,t0=`keydown${ac}${Ea}`,Wu=`keyup${ac}${Ea}`,p="show",I='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',B=`${I}.${p}`,z=".dropdown-menu",ie=y()?"top-end":"top-start",he=y()?"top-start":"top-end",$e=y()?"bottom-end":"bottom-start",Wn=y()?"bottom-start":"bottom-end",Zr=y()?"left-start":"right-start",bn=y()?"right-start":"left-start",ds={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},hs={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class fs extends Me{constructor(w,O){super(w,O),this._popper=null,this._parent=this._element.parentNode,this._menu=oe.next(this._element,z)[0]||oe.prev(this._element,z)[0]||oe.findOne(z,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ds}static get DefaultType(){return hs}static get NAME(){return Jy}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const w={relatedTarget:this._element};if(!V.trigger(this._element,Kp,w).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const O of[].concat(...document.body.children))V.on(O,"mouseover",h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(p),this._element.classList.add(p),V.trigger(this._element,li,w)}}hide(){if(u(this._element)||!this._isShown())return;const w={relatedTarget:this._element};this._completeHide(w)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(w){if(!V.trigger(this._element,F_,w).defaultPrevented){if("ontouchstart"in document.documentElement)for(const O of[].concat(...document.body.children))V.off(O,"mouseover",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(p),this._element.classList.remove(p),this._element.setAttribute("aria-expanded","false"),pe.removeDataAttribute(this._menu,"popper"),V.trigger(this._element,j_,w),this._element.focus()}}_getConfig(w){if(typeof(w=super._getConfig(w)).reference=="object"&&!a(w.reference)&&typeof w.reference.getBoundingClientRect!="function")throw new TypeError(`${Jy.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return w}_createPopper(){if(Dh===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let w=this._element;this._config.reference==="parent"?w=this._parent:a(this._config.reference)?w=c(this._config.reference):typeof this._config.reference=="object"&&(w=this._config.reference);const O=this._getPopperConfig();this._popper=Gp(w,this._menu,O)}_isShown(){return this._menu.classList.contains(p)}_getPlacement(){const w=this._parent;if(w.classList.contains("dropend"))return Zr;if(w.classList.contains("dropstart"))return bn;if(w.classList.contains("dropup-center"))return"top";if(w.classList.contains("dropdown-center"))return"bottom";const O=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return w.classList.contains("dropup")?O?he:ie:O?Wn:$e}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:w}=this._config;return typeof w=="string"?w.split(",").map((O=>Number.parseInt(O,10))):typeof w=="function"?O=>w(O,this._element):w}_getPopperConfig(){const w={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(pe.setDataAttribute(this._menu,"popper","static"),w.modifiers=[{name:"applyStyles",enabled:!1}]),{...w,..._(this._config.popperConfig,[void 0,w])}}_selectMenuItem({key:w,target:O}){const q=oe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((ne=>l(ne)));q.length&&k(q,O,w===Xy,!q.includes(O)).focus()}static jQueryInterface(w){return this.each((function(){const O=fs.getOrCreateInstance(this,w);if(typeof w=="string"){if(O[w]===void 0)throw new TypeError(`No method named "${w}"`);O[w]()}}))}static clearMenus(w){if(w.button===2||w.type==="keyup"&&w.key!=="Tab")return;const O=oe.find(B);for(const q of O){const ne=fs.getInstance(q);if(!ne||ne._config.autoClose===!1)continue;const re=w.composedPath(),fe=re.includes(ne._menu);if(re.includes(ne._element)||ne._config.autoClose==="inside"&&!fe||ne._config.autoClose==="outside"&&fe||ne._menu.contains(w.target)&&(w.type==="keyup"&&w.key==="Tab"||/input|select|option|textarea|form/i.test(w.target.tagName)))continue;const Ce={relatedTarget:ne._element};w.type==="click"&&(Ce.clickEvent=w),ne._completeHide(Ce)}}static dataApiKeydownHandler(w){const O=/input|textarea/i.test(w.target.tagName),q=w.key==="Escape",ne=[U_,Xy].includes(w.key);if(!ne&&!q||O&&!q)return;w.preventDefault();const re=this.matches(I)?this:oe.prev(this,I)[0]||oe.next(this,I)[0]||oe.findOne(I,w.delegateTarget.parentNode),fe=fs.getOrCreateInstance(re);if(ne)return w.stopPropagation(),fe.show(),void fe._selectMenuItem(w);fe._isShown()&&(w.stopPropagation(),fe.hide(),re.focus())}}V.on(document,t0,I,fs.dataApiKeydownHandler),V.on(document,t0,z,fs.dataApiKeydownHandler),V.on(document,e0,fs.clearMenus),V.on(document,Wu,fs.clearMenus),V.on(document,e0,I,(function(U){U.preventDefault(),fs.getOrCreateInstance(this).toggle()})),v(fs);const xi="backdrop",Mh="show",Qp=`mousedown.bs.${xi}`,XZ={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},eJ={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class K6 extends Se{constructor(w){super(),this._config=this._getConfig(w),this._isAppended=!1,this._element=null}static get Default(){return XZ}static get DefaultType(){return eJ}static get NAME(){return xi}show(w){if(!this._config.isVisible)return void _(w);this._append();const O=this._getElement();this._config.isAnimated&&f(O),O.classList.add(Mh),this._emulateAnimation((()=>{_(w)}))}hide(w){this._config.isVisible?(this._getElement().classList.remove(Mh),this._emulateAnimation((()=>{this.dispose(),_(w)}))):_(w)}dispose(){this._isAppended&&(V.off(this._element,Qp),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const w=document.createElement("div");w.className=this._config.className,this._config.isAnimated&&w.classList.add("fade"),this._element=w}return this._element}_configAfterMerge(w){return w.rootElement=c(w.rootElement),w}_append(){if(this._isAppended)return;const w=this._getElement();this._config.rootElement.append(w),V.on(w,Qp,(()=>{_(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(w){A(w,this._getElement(),this._config.isAnimated)}}const V_=".bs.focustrap",tJ=`focusin${V_}`,nJ=`keydown.tab${V_}`,Q6="backward",rJ={autofocus:!0,trapElement:null},sJ={autofocus:"boolean",trapElement:"element"};class Y6 extends Se{constructor(w){super(),this._config=this._getConfig(w),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return rJ}static get DefaultType(){return sJ}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),V.off(document,V_),V.on(document,tJ,(w=>this._handleFocusin(w))),V.on(document,nJ,(w=>this._handleKeydown(w))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,V.off(document,V_))}_handleFocusin(w){const{trapElement:O}=this._config;if(w.target===document||w.target===O||O.contains(w.target))return;const q=oe.focusableChildren(O);q.length===0?O.focus():this._lastTabNavDirection===Q6?q[q.length-1].focus():q[0].focus()}_handleKeydown(w){w.key==="Tab"&&(this._lastTabNavDirection=w.shiftKey?Q6:"forward")}}const Z6=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",J6=".sticky-top",H_="padding-right",X6="margin-right";class rS{constructor(){this._element=document.body}getWidth(){const w=document.documentElement.clientWidth;return Math.abs(window.innerWidth-w)}hide(){const w=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,H_,(O=>O+w)),this._setElementAttributes(Z6,H_,(O=>O+w)),this._setElementAttributes(J6,X6,(O=>O-w))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,H_),this._resetElementAttributes(Z6,H_),this._resetElementAttributes(J6,X6)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(w,O,q){const ne=this.getWidth();this._applyManipulationCallback(w,(re=>{if(re!==this._element&&window.innerWidth>re.clientWidth+ne)return;this._saveInitialAttribute(re,O);const fe=window.getComputedStyle(re).getPropertyValue(O);re.style.setProperty(O,`${q(Number.parseFloat(fe))}px`)}))}_saveInitialAttribute(w,O){const q=w.style.getPropertyValue(O);q&&pe.setDataAttribute(w,O,q)}_resetElementAttributes(w,O){this._applyManipulationCallback(w,(q=>{const ne=pe.getDataAttribute(q,O);ne!==null?(pe.removeDataAttribute(q,O),q.style.setProperty(O,ne)):q.style.removeProperty(O)}))}_applyManipulationCallback(w,O){if(a(w))O(w);else for(const q of oe.find(w,this._element))O(q)}}const Lo=".bs.modal",iJ=`hide${Lo}`,oJ=`hidePrevented${Lo}`,e3=`hidden${Lo}`,t3=`show${Lo}`,aJ=`shown${Lo}`,cJ=`resize${Lo}`,lJ=`click.dismiss${Lo}`,uJ=`mousedown.dismiss${Lo}`,dJ=`keydown.dismiss${Lo}`,hJ=`click${Lo}.data-api`,n3="modal-open",r3="show",sS="modal-static",fJ={backdrop:!0,focus:!0,keyboard:!0},pJ={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Bh extends Me{constructor(w,O){super(w,O),this._dialog=oe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rS,this._addEventListeners()}static get Default(){return fJ}static get DefaultType(){return pJ}static get NAME(){return"modal"}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){this._isShown||this._isTransitioning||V.trigger(this._element,t3,{relatedTarget:w}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(n3),this._adjustDialog(),this._backdrop.show((()=>this._showElement(w))))}hide(){this._isShown&&!this._isTransitioning&&(V.trigger(this._element,iJ).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(r3),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){V.off(window,Lo),V.off(this._dialog,Lo),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new K6({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Y6({trapElement:this._element})}_showElement(w){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const O=oe.findOne(".modal-body",this._dialog);O&&(O.scrollTop=0),f(this._element),this._element.classList.add(r3),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,V.trigger(this._element,aJ,{relatedTarget:w})}),this._dialog,this._isAnimated())}_addEventListeners(){V.on(this._element,dJ,(w=>{w.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),V.on(window,cJ,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),V.on(this._element,uJ,(w=>{V.one(this._element,lJ,(O=>{this._element===w.target&&this._element===O.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(n3),this._resetAdjustments(),this._scrollBar.reset(),V.trigger(this._element,e3)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(V.trigger(this._element,oJ).defaultPrevented)return;const w=this._element.scrollHeight>document.documentElement.clientHeight,O=this._element.style.overflowY;O==="hidden"||this._element.classList.contains(sS)||(w||(this._element.style.overflowY="hidden"),this._element.classList.add(sS),this._queueCallback((()=>{this._element.classList.remove(sS),this._queueCallback((()=>{this._element.style.overflowY=O}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const w=this._element.scrollHeight>document.documentElement.clientHeight,O=this._scrollBar.getWidth(),q=O>0;if(q&&!w){const ne=y()?"paddingLeft":"paddingRight";this._element.style[ne]=`${O}px`}if(!q&&w){const ne=y()?"paddingRight":"paddingLeft";this._element.style[ne]=`${O}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(w,O){return this.each((function(){const q=Bh.getOrCreateInstance(this,w);if(typeof w=="string"){if(q[w]===void 0)throw new TypeError(`No method named "${w}"`);q[w](O)}}))}}V.on(document,hJ,'[data-bs-toggle="modal"]',(function(U){const w=oe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&U.preventDefault(),V.one(w,t3,(q=>{q.defaultPrevented||V.one(w,e3,(()=>{l(this)&&this.focus()}))}));const O=oe.findOne(".modal.show");O&&Bh.getInstance(O).hide(),Bh.getOrCreateInstance(w).toggle(this)})),ge(Bh),v(Bh);const wl=".bs.offcanvas",s3=".data-api",mJ=`load${wl}${s3}`,i3="show",o3="showing",a3="hiding",c3=".offcanvas.show",gJ=`show${wl}`,yJ=`shown${wl}`,wJ=`hide${wl}`,l3=`hidePrevented${wl}`,u3=`hidden${wl}`,vJ=`resize${wl}`,bJ=`click${wl}${s3}`,_J=`keydown.dismiss${wl}`,EJ={backdrop:!0,keyboard:!0,scroll:!1},AJ={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class vl extends Me{constructor(w,O){super(w,O),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return EJ}static get DefaultType(){return AJ}static get NAME(){return"offcanvas"}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){this._isShown||V.trigger(this._element,gJ,{relatedTarget:w}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new rS().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(o3),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(i3),this._element.classList.remove(o3),V.trigger(this._element,yJ,{relatedTarget:w})}),this._element,!0))}hide(){this._isShown&&(V.trigger(this._element,wJ).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(a3),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(i3,a3),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new rS().reset(),V.trigger(this._element,u3)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const w=!!this._config.backdrop;return new K6({className:"offcanvas-backdrop",isVisible:w,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:w?()=>{this._config.backdrop!=="static"?this.hide():V.trigger(this._element,l3)}:null})}_initializeFocusTrap(){return new Y6({trapElement:this._element})}_addEventListeners(){V.on(this._element,_J,(w=>{w.key==="Escape"&&(this._config.keyboard?this.hide():V.trigger(this._element,l3))}))}static jQueryInterface(w){return this.each((function(){const O=vl.getOrCreateInstance(this,w);if(typeof w=="string"){if(O[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);O[w](this)}}))}}V.on(document,bJ,'[data-bs-toggle="offcanvas"]',(function(U){const w=oe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&U.preventDefault(),u(this))return;V.one(w,u3,(()=>{l(this)&&this.focus()}));const O=oe.findOne(c3);O&&O!==w&&vl.getInstance(O).hide(),vl.getOrCreateInstance(w).toggle(this)})),V.on(window,mJ,(()=>{for(const U of oe.find(c3))vl.getOrCreateInstance(U).show()})),V.on(window,vJ,(()=>{for(const U of oe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(U).position!=="fixed"&&vl.getOrCreateInstance(U).hide()})),ge(vl),v(vl);const d3={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},CJ=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),IJ=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,TJ=(U,w)=>{const O=U.nodeName.toLowerCase();return w.includes(O)?!CJ.has(O)||!!IJ.test(U.nodeValue):w.filter((q=>q instanceof RegExp)).some((q=>q.test(O)))},SJ={allowList:d3,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},xJ={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},PJ={entry:"(string|element|function|null)",selector:"(string|element)"};class RJ extends Se{constructor(w){super(),this._config=this._getConfig(w)}static get Default(){return SJ}static get DefaultType(){return xJ}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((w=>this._resolvePossibleFunction(w))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(w){return this._checkContent(w),this._config.content={...this._config.content,...w},this}toHtml(){const w=document.createElement("div");w.innerHTML=this._maybeSanitize(this._config.template);for(const[ne,re]of Object.entries(this._config.content))this._setContent(w,re,ne);const O=w.children[0],q=this._resolvePossibleFunction(this._config.extraClass);return q&&O.classList.add(...q.split(" ")),O}_typeCheckConfig(w){super._typeCheckConfig(w),this._checkContent(w.content)}_checkContent(w){for(const[O,q]of Object.entries(w))super._typeCheckConfig({selector:O,entry:q},PJ)}_setContent(w,O,q){const ne=oe.findOne(q,w);ne&&((O=this._resolvePossibleFunction(O))?a(O)?this._putElementInTemplate(c(O),ne):this._config.html?ne.innerHTML=this._maybeSanitize(O):ne.textContent=O:ne.remove())}_maybeSanitize(w){return this._config.sanitize?(function(O,q,ne){if(!O.length)return O;if(ne&&typeof ne=="function")return ne(O);const re=new window.DOMParser().parseFromString(O,"text/html"),fe=[].concat(...re.body.querySelectorAll("*"));for(const Ce of fe){const Fe=Ce.nodeName.toLowerCase();if(!Object.keys(q).includes(Fe)){Ce.remove();continue}const at=[].concat(...Ce.attributes),ct=[].concat(q["*"]||[],q[Fe]||[]);for(const Ke of at)TJ(Ke,ct)||Ce.removeAttribute(Ke.nodeName)}return re.body.innerHTML})(w,this._config.allowList,this._config.sanitizeFn):w}_resolvePossibleFunction(w){return _(w,[void 0,this])}_putElementInTemplate(w,O){if(this._config.html)return O.innerHTML="",void O.append(w);O.textContent=w.textContent}}const NJ=new Set(["sanitize","allowList","sanitizeFn"]),iS="fade",q_="show",OJ=".tooltip-inner",h3=".modal",f3="hide.bs.modal",n0="hover",oS="focus",aS="click",kJ={AUTO:"auto",TOP:"top",RIGHT:y()?"left":"right",BOTTOM:"bottom",LEFT:y()?"right":"left"},DJ={allowList:d3,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},MJ={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Lh extends Me{constructor(w,O){if(Dh===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(w,O),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return DJ}static get DefaultType(){return MJ}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),V.off(this._element.closest(h3),f3,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const w=V.trigger(this._element,this.constructor.eventName("show")),O=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(w.defaultPrevented||!O)return;this._disposePopper();const q=this._getTipElement();this._element.setAttribute("aria-describedby",q.getAttribute("id"));const{container:ne}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ne.append(q),V.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(q),q.classList.add(q_),"ontouchstart"in document.documentElement)for(const re of[].concat(...document.body.children))V.on(re,"mouseover",h);this._queueCallback((()=>{V.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!V.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(q_),"ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))V.off(w,"mouseover",h);this._activeTrigger[aS]=!1,this._activeTrigger[oS]=!1,this._activeTrigger[n0]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),V.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(w){const O=this._getTemplateFactory(w).toHtml();if(!O)return null;O.classList.remove(iS,q_),O.classList.add(`bs-${this.constructor.NAME}-auto`);const q=(ne=>{do ne+=Math.floor(1e6*Math.random());while(document.getElementById(ne));return ne})(this.constructor.NAME).toString();return O.setAttribute("id",q),this._isAnimated()&&O.classList.add(iS),O}setContent(w){this._newContent=w,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(w){return this._templateFactory?this._templateFactory.changeContent(w):this._templateFactory=new RJ({...this._config,content:w,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[OJ]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(w){return this.constructor.getOrCreateInstance(w.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(iS)}_isShown(){return this.tip&&this.tip.classList.contains(q_)}_createPopper(w){const O=_(this._config.placement,[this,w,this._element]),q=kJ[O.toUpperCase()];return Gp(this._element,w,this._getPopperConfig(q))}_getOffset(){const{offset:w}=this._config;return typeof w=="string"?w.split(",").map((O=>Number.parseInt(O,10))):typeof w=="function"?O=>w(O,this._element):w}_resolvePossibleFunction(w){return _(w,[this._element,this._element])}_getPopperConfig(w){const O={placement:w,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:q=>{this._getTipElement().setAttribute("data-popper-placement",q.state.placement)}}]};return{...O,..._(this._config.popperConfig,[void 0,O])}}_setListeners(){const w=this._config.trigger.split(" ");for(const O of w)if(O==="click")V.on(this._element,this.constructor.eventName("click"),this._config.selector,(q=>{const ne=this._initializeOnDelegatedTarget(q);ne._activeTrigger[aS]=!(ne._isShown()&&ne._activeTrigger[aS]),ne.toggle()}));else if(O!=="manual"){const q=O===n0?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),ne=O===n0?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");V.on(this._element,q,this._config.selector,(re=>{const fe=this._initializeOnDelegatedTarget(re);fe._activeTrigger[re.type==="focusin"?oS:n0]=!0,fe._enter()})),V.on(this._element,ne,this._config.selector,(re=>{const fe=this._initializeOnDelegatedTarget(re);fe._activeTrigger[re.type==="focusout"?oS:n0]=fe._element.contains(re.relatedTarget),fe._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},V.on(this._element.closest(h3),f3,this._hideModalHandler)}_fixTitle(){const w=this._element.getAttribute("title");w&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",w),this._element.setAttribute("data-bs-original-title",w),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(w,O){clearTimeout(this._timeout),this._timeout=setTimeout(w,O)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(w){const O=pe.getDataAttributes(this._element);for(const q of Object.keys(O))NJ.has(q)&&delete O[q];return w={...O,...typeof w=="object"&&w?w:{}},w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w.container=w.container===!1?document.body:c(w.container),typeof w.delay=="number"&&(w.delay={show:w.delay,hide:w.delay}),typeof w.title=="number"&&(w.title=w.title.toString()),typeof w.content=="number"&&(w.content=w.content.toString()),w}_getDelegateConfig(){const w={};for(const[O,q]of Object.entries(this._config))this.constructor.Default[O]!==q&&(w[O]=q);return w.selector=!1,w.trigger="manual",w}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(w){return this.each((function(){const O=Lh.getOrCreateInstance(this,w);if(typeof w=="string"){if(O[w]===void 0)throw new TypeError(`No method named "${w}"`);O[w]()}}))}}v(Lh);const BJ=".popover-header",LJ=".popover-body",$J={...Lh.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},UJ={...Lh.DefaultType,content:"(null|string|element|function)"};class z_ extends Lh{static get Default(){return $J}static get DefaultType(){return UJ}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[BJ]:this._getTitle(),[LJ]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(w){return this.each((function(){const O=z_.getOrCreateInstance(this,w);if(typeof w=="string"){if(O[w]===void 0)throw new TypeError(`No method named "${w}"`);O[w]()}}))}}v(z_);const cS=".bs.scrollspy",FJ=`activate${cS}`,p3=`click${cS}`,jJ=`load${cS}.data-api`,Yp="active",lS="[href]",m3=".nav-link",VJ=`${m3}, .nav-item > ${m3}, .list-group-item`,HJ={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},qJ={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class r0 extends Me{constructor(w,O){super(w,O),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return HJ}static get DefaultType(){return qJ}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const w of this._observableSections.values())this._observer.observe(w)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(w){return w.target=c(w.target)||document.body,w.rootMargin=w.offset?`${w.offset}px 0px -30%`:w.rootMargin,typeof w.threshold=="string"&&(w.threshold=w.threshold.split(",").map((O=>Number.parseFloat(O)))),w}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(V.off(this._config.target,p3),V.on(this._config.target,p3,lS,(w=>{const O=this._observableSections.get(w.target.hash);if(O){w.preventDefault();const q=this._rootElement||window,ne=O.offsetTop-this._element.offsetTop;if(q.scrollTo)return void q.scrollTo({top:ne,behavior:"smooth"});q.scrollTop=ne}})))}_getNewObserver(){const w={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((O=>this._observerCallback(O)),w)}_observerCallback(w){const O=fe=>this._targetLinks.get(`#${fe.target.id}`),q=fe=>{this._previousScrollData.visibleEntryTop=fe.target.offsetTop,this._process(O(fe))},ne=(this._rootElement||document.documentElement).scrollTop,re=ne>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=ne;for(const fe of w){if(!fe.isIntersecting){this._activeTarget=null,this._clearActiveClass(O(fe));continue}const Ce=fe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(re&&Ce){if(q(fe),!ne)return}else re||Ce||q(fe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const w=oe.find(lS,this._config.target);for(const O of w){if(!O.hash||u(O))continue;const q=oe.findOne(decodeURI(O.hash),this._element);l(q)&&(this._targetLinks.set(decodeURI(O.hash),O),this._observableSections.set(O.hash,q))}}_process(w){this._activeTarget!==w&&(this._clearActiveClass(this._config.target),this._activeTarget=w,w.classList.add(Yp),this._activateParents(w),V.trigger(this._element,FJ,{relatedTarget:w}))}_activateParents(w){if(w.classList.contains("dropdown-item"))oe.findOne(".dropdown-toggle",w.closest(".dropdown")).classList.add(Yp);else for(const O of oe.parents(w,".nav, .list-group"))for(const q of oe.prev(O,VJ))q.classList.add(Yp)}_clearActiveClass(w){w.classList.remove(Yp);const O=oe.find(`${lS}.${Yp}`,w);for(const q of O)q.classList.remove(Yp)}static jQueryInterface(w){return this.each((function(){const O=r0.getOrCreateInstance(this,w);if(typeof w=="string"){if(O[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);O[w]()}}))}}V.on(window,jJ,(()=>{for(const U of oe.find('[data-bs-spy="scroll"]'))r0.getOrCreateInstance(U)})),v(r0);const $h=".bs.tab",zJ=`hide${$h}`,WJ=`hidden${$h}`,GJ=`show${$h}`,KJ=`shown${$h}`,QJ=`click${$h}`,YJ=`keydown${$h}`,ZJ=`load${$h}`,JJ="ArrowLeft",g3="ArrowRight",XJ="ArrowUp",y3="ArrowDown",uS="Home",w3="End",Uh="active",v3="fade",dS="show",b3=".dropdown-toggle",hS=`:not(${b3})`,_3='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',fS=`.nav-link${hS}, .list-group-item${hS}, [role="tab"]${hS}, ${_3}`,eX=`.${Uh}[data-bs-toggle="tab"], .${Uh}[data-bs-toggle="pill"], .${Uh}[data-bs-toggle="list"]`;class Fh extends Me{constructor(w){super(w),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),V.on(this._element,YJ,(O=>this._keydown(O))))}static get NAME(){return"tab"}show(){const w=this._element;if(this._elemIsActive(w))return;const O=this._getActiveElem(),q=O?V.trigger(O,zJ,{relatedTarget:w}):null;V.trigger(w,GJ,{relatedTarget:O}).defaultPrevented||q&&q.defaultPrevented||(this._deactivate(O,w),this._activate(w,O))}_activate(w,O){w&&(w.classList.add(Uh),this._activate(oe.getElementFromSelector(w)),this._queueCallback((()=>{w.getAttribute("role")==="tab"?(w.removeAttribute("tabindex"),w.setAttribute("aria-selected",!0),this._toggleDropDown(w,!0),V.trigger(w,KJ,{relatedTarget:O})):w.classList.add(dS)}),w,w.classList.contains(v3)))}_deactivate(w,O){w&&(w.classList.remove(Uh),w.blur(),this._deactivate(oe.getElementFromSelector(w)),this._queueCallback((()=>{w.getAttribute("role")==="tab"?(w.setAttribute("aria-selected",!1),w.setAttribute("tabindex","-1"),this._toggleDropDown(w,!1),V.trigger(w,WJ,{relatedTarget:O})):w.classList.remove(dS)}),w,w.classList.contains(v3)))}_keydown(w){if(![JJ,g3,XJ,y3,uS,w3].includes(w.key))return;w.stopPropagation(),w.preventDefault();const O=this._getChildren().filter((ne=>!u(ne)));let q;if([uS,w3].includes(w.key))q=O[w.key===uS?0:O.length-1];else{const ne=[g3,y3].includes(w.key);q=k(O,w.target,ne,!0)}q&&(q.focus({preventScroll:!0}),Fh.getOrCreateInstance(q).show())}_getChildren(){return oe.find(fS,this._parent)}_getActiveElem(){return this._getChildren().find((w=>this._elemIsActive(w)))||null}_setInitialAttributes(w,O){this._setAttributeIfNotExists(w,"role","tablist");for(const q of O)this._setInitialAttributesOnChild(q)}_setInitialAttributesOnChild(w){w=this._getInnerElement(w);const O=this._elemIsActive(w),q=this._getOuterElement(w);w.setAttribute("aria-selected",O),q!==w&&this._setAttributeIfNotExists(q,"role","presentation"),O||w.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(w,"role","tab"),this._setInitialAttributesOnTargetPanel(w)}_setInitialAttributesOnTargetPanel(w){const O=oe.getElementFromSelector(w);O&&(this._setAttributeIfNotExists(O,"role","tabpanel"),w.id&&this._setAttributeIfNotExists(O,"aria-labelledby",`${w.id}`))}_toggleDropDown(w,O){const q=this._getOuterElement(w);if(!q.classList.contains("dropdown"))return;const ne=(re,fe)=>{const Ce=oe.findOne(re,q);Ce&&Ce.classList.toggle(fe,O)};ne(b3,Uh),ne(".dropdown-menu",dS),q.setAttribute("aria-expanded",O)}_setAttributeIfNotExists(w,O,q){w.hasAttribute(O)||w.setAttribute(O,q)}_elemIsActive(w){return w.classList.contains(Uh)}_getInnerElement(w){return w.matches(fS)?w:oe.findOne(fS,w)}_getOuterElement(w){return w.closest(".nav-item, .list-group-item")||w}static jQueryInterface(w){return this.each((function(){const O=Fh.getOrCreateInstance(this);if(typeof w=="string"){if(O[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);O[w]()}}))}}V.on(document,QJ,_3,(function(U){["A","AREA"].includes(this.tagName)&&U.preventDefault(),u(this)||Fh.getOrCreateInstance(this).show()})),V.on(window,ZJ,(()=>{for(const U of oe.find(eX))Fh.getOrCreateInstance(U)})),v(Fh);const Gu=".bs.toast",tX=`mouseover${Gu}`,nX=`mouseout${Gu}`,rX=`focusin${Gu}`,sX=`focusout${Gu}`,iX=`hide${Gu}`,oX=`hidden${Gu}`,aX=`show${Gu}`,cX=`shown${Gu}`,E3="hide",W_="show",G_="showing",lX={animation:"boolean",autohide:"boolean",delay:"number"},uX={animation:!0,autohide:!0,delay:5e3};class s0 extends Me{constructor(w,O){super(w,O),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return uX}static get DefaultType(){return lX}static get NAME(){return"toast"}show(){V.trigger(this._element,aX).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(E3),f(this._element),this._element.classList.add(W_,G_),this._queueCallback((()=>{this._element.classList.remove(G_),V.trigger(this._element,cX),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(V.trigger(this._element,iX).defaultPrevented||(this._element.classList.add(G_),this._queueCallback((()=>{this._element.classList.add(E3),this._element.classList.remove(G_,W_),V.trigger(this._element,oX)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(W_),super.dispose()}isShown(){return this._element.classList.contains(W_)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(w,O){switch(w.type){case"mouseover":case"mouseout":this._hasMouseInteraction=O;break;case"focusin":case"focusout":this._hasKeyboardInteraction=O}if(O)return void this._clearTimeout();const q=w.relatedTarget;this._element===q||this._element.contains(q)||this._maybeScheduleHide()}_setListeners(){V.on(this._element,tX,(w=>this._onInteraction(w,!0))),V.on(this._element,nX,(w=>this._onInteraction(w,!1))),V.on(this._element,rX,(w=>this._onInteraction(w,!0))),V.on(this._element,sX,(w=>this._onInteraction(w,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(w){return this.each((function(){const O=s0.getOrCreateInstance(this,w);if(typeof w=="string"){if(O[w]===void 0)throw new TypeError(`No method named "${w}"`);O[w](this)}}))}}return ge(s0),v(s0),{Alert:Z,Button:me,Carousel:dl,Collapse:ii,Dropdown:fs,Modal:Bh,Offcanvas:vl,Popover:z_,ScrollSpy:r0,Tab:Fh,Toast:s0,Tooltip:Lh}}))})(B1)),B1.exports}HGe();const{initializeTaskSystem:DYe}=OZ(),qGe=new SZ,ZT=M9(Dxe).use(zVe,{config:zWe}).use(RHe,{queryClient:qGe});ZT.config.globalProperties.$taskSystem=OZ();ZT.use(jGe,{position:Ab.TOP_RIGHT,timeout:3e3});ZT.use(LWe);ZT.mount("#app");export{Pt as $,_s as A,Cr as B,G2 as C,ZVe as D,bs as E,ar as F,kYe as G,w7 as H,Tf as I,GGe as J,yp as K,tu as L,ws as M,Ib as N,sy as O,WGe as P,Pb as Q,uF as R,Td as S,vYe as T,bYe as U,d1 as V,hYe as W,Ine as X,Ro as Y,Er as Z,Nb as _,cKe as a,lKe as a$,kc as a0,qe as a1,le as a2,xn as a3,To as a4,as as a5,K as a6,At as a7,ot as a8,sre as a9,yg as aA,P7 as aB,rw as aC,eh as aD,rF as aE,vn as aF,j9 as aG,Li as aH,qi as aI,be as aJ,J1 as aK,SO as aL,Xd as aM,eKe as aN,CI as aO,xO as aP,JGe as aQ,ZGe as aR,EI as aS,Q1 as aT,nse as aU,ose as aV,kKe as aW,iie as aX,Te as aY,OZ as aZ,go as a_,ut as aa,wr as ab,HO as ac,En as ad,H9 as ae,Ue as af,Ti as ag,_i as ah,kTe as ai,_Ye as aj,EYe as ak,L0 as al,rv as am,Bv as an,fn as ao,$i as ap,un as aq,_d as ar,vj as as,QI as at,Oe as au,NO as av,la as aw,vie as ax,boe as ay,fj as az,Z1 as b,iae as b$,Ase as b0,uKe as b1,dKe as b2,Y1 as b3,fKe as b4,uoe as b5,Mb as b6,gg as b7,Gse as b8,Xc as b9,JE as bA,l1 as bB,K1 as bC,ks as bD,IR as bE,Pc as bF,Pae as bG,Bre as bH,Kre as bI,J9 as bJ,QGe as bK,XGe as bL,AO as bM,vI as bN,nie as bO,vr as bP,ej as bQ,cl as bR,X1 as bS,tj as bT,Aoe as bU,rj as bV,Moe as bW,ay as bX,FO as bY,nA as bZ,mj as b_,Hf as ba,yKe as bb,ss as bc,tKe as bd,wI as be,eo as bf,gt as bg,bt as bh,Tg as bi,pr as bj,Fye as bk,Ir as bl,Zl as bm,iw as bn,Cq as bo,TR as bp,wP as bq,ka as br,ea as bs,vt as bt,wYe as bu,AI as bv,Ln as bw,tr as bx,Pne as by,ny as bz,qw as c,Iae as c$,sae as c0,Yw as c1,oae as c2,_oe as c3,tP as c4,l7 as c5,jf as c6,dae as c7,mg as c8,Ud as c9,noe as cA,yI as cB,OO as cC,DO as cD,II as cE,EO as cF,Doe as cG,PKe as cH,xKe as cI,SKe as cJ,lre as cK,bg as cL,Hl as cM,IKe as cN,ij as cO,TKe as cP,Boe as cQ,Voe as cR,$Ke as cS,lj as cT,FKe as cU,aKe as cV,Vie as cW,Nie as cX,dv as cY,Tae as cZ,Cae as c_,Wse as ca,dj as cb,sA as cc,Oie as cd,sie as ce,m7 as cf,uj as cg,LKe as ch,DKe as ci,pj as cj,BKe as ck,MKe as cl,TI as cm,BO as cn,MO as co,Woe as cp,ese as cq,oy as cr,p7 as cs,gKe as ct,nKe as cu,Jc as cv,bI as cw,_j as cx,Foe as cy,j7 as cz,Vf as d,lae as d0,UO as d1,Aae as d2,HS as d3,roe as d4,_Ke as d5,z7 as d6,EKe as d7,Z7 as d8,X7 as d9,Eae as da,wj as db,jO as dc,r7 as dd,Lb as de,Zi as df,kie as dg,M7 as dh,hae as di,Nk as dj,bj as dk,Fm as dl,f7 as dm,UKe as dn,wF as dp,_X as dq,Mae as dr,jSe as ds,Hw as dt,Jl as du,fYe as e,_r as f,fZ as g,Ct as h,dt as i,cn as j,H as k,oqe as l,xt as m,Ma as n,wp as o,pi as p,jn as q,Lt as r,Bqe as s,_O as t,lz as u,cK as v,Ca as w,yee as x,Yte as y,KGe as z};
