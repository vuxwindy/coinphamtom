import{_ as oe,c as d,a as re,b as e,f as q,w as le,h as ne,e as i,t as u,k as L,d as ce,F as x,g as M,r as n,o as ie,y as de,j as v,n as ue}from"./index-r-K8bCt4.js";const ve={name:"ArrowGame",setup(){const y=n(0),t=n(0);n(!1),n(!1);const f=n(5),s=n(0),m=n(1),B=n(0),h=n(!0),o=n("archer1"),g=n("basic"),p=n(!1),_=n(0),Y=n(0),E=n(!1),A=n(!1),k=n(!1),U=[{id:"archer1",name:"Archer",color:"linear-gradient(135deg, #8B4513, #A0522D)"},{id:"archer2",name:"Ranger",color:"linear-gradient(135deg, #4A90E2, #357ABD)"},{id:"archer3",name:"Hunter",color:"linear-gradient(135deg, #E74C3C, #C0392B)"}],V=[{id:"basic",name:"Basic Bow",description:"Standard accuracy"},{id:"premium",name:"Premium Bow",description:"+20% accuracy"},{id:"legendary",name:"Legendary Bow",description:"+50% accuracy"}],z=computed(()=>({"wallet-status":!0,connected:isWalletConnected.value,disconnected:!isWalletConnected.value})),R=computed(()=>isWalletConnected.value?"Wallet Connected":"Wallet Disconnected"),j=()=>{E.value=!0},J=()=>{E.value=!1,Z()},K=()=>{A.value=!0},Q=()=>{A.value=!1,$()},Z=()=>{const a=document.querySelector(".character");if(!a)return;const r={archer1:{body:"#8B4513",head:"#FFE4C4",legs:"#8B4513"},archer2:{body:"#4A90E2",head:"#FFE4C4",legs:"#4A90E2"},archer3:{body:"#E74C3C",head:"#FFE4C4",legs:"#E74C3C"}}[o.value];a.querySelector(".character-body").style.background=`linear-gradient(135deg, ${r.body}, ${r.body}dd)`,a.querySelector(".character-head").style.background=r.head,a.querySelectorAll(".character-leg").forEach(b=>{b.style.background=`linear-gradient(135deg, ${r.legs}, ${r.legs}dd)`})},$=()=>{const a=document.querySelector(".bow");if(!a)return;const l={basic:"#8B4513",premium:"#FFD700",legendary:"#FF4500"};a.querySelector(".bow-body").style.background=`linear-gradient(135deg, ${l[g.value]}, ${l[g.value]}dd)`},ee=async()=>{if(!isWalletConnected.value){w("Please connect your wallet first!","error");return}if(s.value>=10)try{s.value-=10,f.value=5,h.value=!0,k.value=!1,w("5 arrows purchased for 10 PPO!","success")}catch{w("Failed to purchase arrows","error")}else w("Not enough PPO! Complete daily tasks to earn more!","error")},te=()=>{y.value=0,B.value=0,m.value=1,f.value=5,h.value=!0,k.value=!1},w=(a,l)=>{const r=document.createElement("div");r.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${l==="success"?"#00ff88":l==="error"?"#ff6b6b":"#4a90e2"};
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        font-weight: bold;
        z-index: 10000;
        animation: slideIn 0.3s ease;
      `,r.textContent=a,document.body.appendChild(r),setTimeout(()=>{r.remove()},3e3)},F=a=>{if(!h.value||f.value<=0)return;p.value=!0,_.value=a.clientX,Y.value=a.clientY;const l=document.querySelector(".arrow"),r=document.querySelector(".aiming-line"),c=document.querySelector(".bow");l&&(l.style.display="block"),r&&(r.style.display="block"),c&&c.classList.add("drawing")},P=a=>{if(!p.value)return;const l=a.clientX-_.value,r=a.clientY-Y.value,c=Math.atan2(r,l),b=Math.min(Math.sqrt(l*l+r*r)/10,50),C=document.querySelector(".arrow"),S=document.querySelector(".aimingLine"),I=document.querySelector(".bowString");if(C&&(C.style.transform=`rotate(${c}rad) translateX(${b}px)`),S&&(S.style.transform=`rotate(${c}rad)`),I){const se=Math.min(b/30,1.5);I.style.transform=`rotate(${c}rad) scaleY(${1+se})`}},T=()=>{if(!p.value||!h.value||f.value<=0)return;p.value=!1,f.value--;const a=document.querySelector(".arrow"),l=document.querySelector(".aimingLine"),r=document.querySelector(".bow"),c=document.querySelector(".bowString");a&&(a.style.display="none"),l&&(l.style.display="none"),r&&r.classList.remove("drawing"),c&&(c.style.transform="rotate(0rad) scaleY(1)");const b=Math.random()*100;let C=30;if(g.value==="premium"&&(C=50),g.value==="legendary"&&(C=80),b<=C){if(B.value++,y.value+=Math.floor(m.value*10),B.value%5===0){m.value++,w(`Level Up! Now Level ${m.value}`,"success");const S=Math.floor(m.value*2);s.value+=S,w(`Level Up Reward: +${S} PPO!`,"success")}N("BULLSEYE!","#ffd700")}else N("MISS!","#ff6b6b");f.value<=0&&setTimeout(()=>{ae()},2e3)},N=(a,l)=>{const r=document.createElement("div");r.className="hit-effect",r.innerHTML=`<div class="hit-text" style="color: ${l}">${a}</div>`,r.style.left="50%",r.style.top="50%",r.style.transform="translate(-50%, -50%)";const c=document.querySelector(".game-area");c&&(c.appendChild(r),setTimeout(()=>{r.remove()},1e3))},ae=()=>{h.value=!1,k.value=!0,y.value>t.value&&(t.value=y.value,localStorage.setItem("highScore",t.value),w("New High Score!","success"))},D=a=>F(a),G=a=>P(a),O=()=>T(),X=a=>{a.preventDefault();const l=a.touches[0];F({clientX:l.clientX,clientY:l.clientY})},H=a=>{if(a.preventDefault(),p.value){const l=a.touches[0];P({clientX:l.clientX,clientY:l.clientY})}},W=a=>{a.preventDefault(),T()};return ie(()=>{const a=document.querySelector(".game-area");a&&(a.addEventListener("mousedown",D),a.addEventListener("mousemove",G),a.addEventListener("mouseup",O),a.addEventListener("touchstart",X),a.addEventListener("touchmove",H),a.addEventListener("touchend",W)),s.value=userBalance.value}),de(()=>{const a=document.querySelector(".game-area");a&&(a.removeEventListener("mousedown",D),a.removeEventListener("mousemove",G),a.removeEventListener("mouseup",O),a.removeEventListener("touchstart",X),a.removeEventListener("touchmove",H),a.removeEventListener("touchend",W))}),{score:computed(()=>y.value),highScore:computed(()=>t.value),arrowsLeft:computed(()=>f.value),ppoBalance:computed(()=>s.value),currentLevel:computed(()=>m.value),showCharacterSelector:E,showBowSelector:A,showGameOverModal:k,characters:U,bows:V,selectedCharacter:computed(()=>o.value),selectedBow:computed(()=>g.value),walletStatusClass:z,walletStatusText:R,selectCharacter:j,confirmCharacter:J,selectBow:K,confirmBow:Q,buyArrows:ee,restartGame:te}}},fe={class:"arrow-game"},me={class:"game-container"},he={class:"game-header"},ge={class:"game-stats"},we={class:"stat-card"},ye={class:"stat-card"},be={class:"stat-card score-display"},Ce={class:"game-area",ref:"gameArea"},pe={class:"character",ref:"character"},Se={class:"bow",ref:"bow"},Be={class:"bow-string",ref:"bowString"},ke={class:"aiming-line",ref:"aimingLine"},Le={class:"arrow",ref:"arrow"},Ee={class:"flying-arrow",ref:"flyingArrow"},Ae={class:"target",ref:"target"},qe={class:"arrow-counter"},xe={class:"arrow-display"},Me={class:"ppo-balance"},_e={class:"ppo-amount"},Ye={class:"game-controls"},Fe=["disabled"],Pe={key:0,class:"character-selector"},Te={class:"character-grid"},Ne=["onClick"],De={key:1,class:"bow-selector"},Ge={class:"bow-grid"},Oe=["onClick"],Xe={key:2,class:"game-over-modal"},He={class:"modal-content"},We={class:"final-score"};function Ie(y,t,f,s,m,B){const h=ne("router-link");return v(),d("div",fe,[re(h,{to:"/",class:"back-button"},{default:le(()=>t[9]||(t[9]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),i("Back to Home ",-1)])),_:1,__:[9]}),e("div",{class:L(["wallet-status",s.walletStatusClass])},[t[10]||(t[10]=e("i",{class:"fas fa-wallet me-1"},null,-1)),i(u(s.walletStatusText),1)],2),e("div",me,[e("div",he,[t[14]||(t[14]=e("div",{class:"game-title"},[e("i",{class:"fas fa-crosshairs"}),i(" PPO Archery ")],-1)),e("div",ge,[e("div",we,[t[11]||(t[11]=e("i",{class:"fas fa-trophy"},null,-1)),e("span",null,"High: "+u(s.highScore),1)]),e("div",ye,[t[12]||(t[12]=e("i",{class:"fas fa-star"},null,-1)),e("span",null,"Level: "+u(s.currentLevel),1)]),e("div",be,[t[13]||(t[13]=e("i",{class:"fas fa-bullseye"},null,-1)),e("span",null,"Score: "+u(s.score),1)])])]),e("div",Ce,[e("div",pe,t[15]||(t[15]=[ce('<div class="character-body" data-v-ef77ee5d></div><div class="character-head" data-v-ef77ee5d><div class="character-eyes" data-v-ef77ee5d></div><div class="character-mouth" data-v-ef77ee5d></div></div><div class="character-arms" data-v-ef77ee5d><div class="character-arm left" data-v-ef77ee5d></div><div class="character-arm right" data-v-ef77ee5d></div></div><div class="character-hands" data-v-ef77ee5d><div class="character-hand left" data-v-ef77ee5d></div><div class="character-hand right" data-v-ef77ee5d></div></div><div class="character-legs" data-v-ef77ee5d><div class="character-leg left" data-v-ef77ee5d></div><div class="character-leg right" data-v-ef77ee5d></div></div><div class="character-feet" data-v-ef77ee5d><div class="character-foot left" data-v-ef77ee5d></div><div class="character-foot right" data-v-ef77ee5d></div></div>',6)]),512),e("div",Se,[t[16]||(t[16]=e("div",{class:"bow-body"},null,-1)),e("div",Be,null,512)],512),e("div",ke,null,512),e("div",Le,null,512),e("div",Ee,null,512),e("div",Ae,t[17]||(t[17]=[e("div",{class:"target-ring outer"},null,-1),e("div",{class:"target-ring middle"},null,-1),e("div",{class:"target-ring inner"},null,-1),e("div",{class:"target-ring bullseye"},null,-1)]),512),e("div",qe,[t[18]||(t[18]=e("h3",null,[e("i",{class:"fas fa-arrows-alt"}),i(" Arrows")],-1)),e("div",xe,[(v(),d(x,null,M(5,o=>e("i",{key:o,class:L(["fas fa-arrow-right arrow-icon",{used:o>s.arrowsLeft}])},null,2)),64))])]),e("div",Me,[t[19]||(t[19]=e("h3",null,[e("i",{class:"fas fa-coins"}),i(" PPO")],-1)),e("div",_e,u(s.ppoBalance),1)]),e("div",Ye,[e("button",{class:"control-btn",onClick:t[0]||(t[0]=(...o)=>s.selectCharacter&&s.selectCharacter(...o))},t[20]||(t[20]=[e("i",{class:"fas fa-user"},null,-1),i(" Character ",-1)])),e("button",{class:"control-btn",onClick:t[1]||(t[1]=(...o)=>s.selectBow&&s.selectBow(...o))},t[21]||(t[21]=[e("i",{class:"fas fa-crosshairs"},null,-1),i(" Bow ",-1)])),e("button",{class:"control-btn",onClick:t[2]||(t[2]=(...o)=>s.buyArrows&&s.buyArrows(...o)),disabled:s.ppoBalance<10},t[22]||(t[22]=[e("i",{class:"fas fa-shopping-cart"},null,-1),i(" Buy Arrows ",-1)]),8,Fe)]),t[23]||(t[23]=e("div",{class:"instructions"},[e("i",{class:"fas fa-mouse"}),i(" Click and drag to aim, release to shoot! ")],-1))],512)]),s.showCharacterSelector?(v(),d("div",Pe,[t[24]||(t[24]=e("h2",null,"Choose Your Character",-1)),e("div",Te,[(v(!0),d(x,null,M(s.characters,o=>(v(),d("div",{key:o.id,class:L(["character-option",{selected:s.selectedCharacter===o.id}]),onClick:g=>s.selectedCharacter=o.id},[e("div",{class:"character-avatar",style:ue({background:o.color})},null,4),e("span",null,u(o.name),1)],10,Ne))),128))]),e("button",{class:"control-btn",onClick:t[3]||(t[3]=(...o)=>s.confirmCharacter&&s.confirmCharacter(...o))},"Confirm"),e("button",{class:"control-btn",onClick:t[4]||(t[4]=o=>s.showCharacterSelector=!1)},"Cancel")])):q("",!0),s.showBowSelector?(v(),d("div",De,[t[26]||(t[26]=e("h2",null,"Choose Your Bow",-1)),e("div",Ge,[(v(!0),d(x,null,M(s.bows,o=>(v(),d("div",{key:o.id,class:L(["bow-option",{selected:s.selectedBow===o.id}]),onClick:g=>s.selectedBow=o.id},[t[25]||(t[25]=e("i",{class:"fas fa-crosshairs"},null,-1)),e("div",null,u(o.name),1),e("small",null,u(o.description),1)],10,Oe))),128))]),e("button",{class:"control-btn",onClick:t[5]||(t[5]=(...o)=>s.confirmBow&&s.confirmBow(...o))},"Confirm"),e("button",{class:"control-btn",onClick:t[6]||(t[6]=o=>s.showBowSelector=!1)},"Cancel")])):q("",!0),s.showGameOverModal?(v(),d("div",Xe,[e("div",He,[t[29]||(t[29]=e("h2",null,[e("i",{class:"fas fa-gamepad"}),i(" Game Over!")],-1)),e("div",We,"Score: "+u(s.score),1),t[30]||(t[30]=e("p",null,"You've run out of arrows!",-1)),e("button",{class:"control-btn",onClick:t[7]||(t[7]=(...o)=>s.restartGame&&s.restartGame(...o))},t[27]||(t[27]=[e("i",{class:"fas fa-redo"},null,-1),i(" Play Again ",-1)])),e("button",{class:"control-btn",onClick:t[8]||(t[8]=(...o)=>s.buyArrows&&s.buyArrows(...o))},t[28]||(t[28]=[e("i",{class:"fas fa-shopping-cart"},null,-1),i(" Buy More Arrows ",-1)]))])])):q("",!0)])}const Ve=oe(ve,[["render",Ie],["__scopeId","data-v-ef77ee5d"]]);export{Ve as default};
