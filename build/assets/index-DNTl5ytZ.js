import{aJ as Ve,aI as Q,a8 as me,a6 as C,a2 as R,bx as Ge,a1 as v,by as et,a3 as Y,a0 as W,aa as k,$ as Ne,aF as ee,aH as tt,af as Se,aG as st}from"./index-W7O16Knq.js";import{c as Ye}from"./index-KkpI0fgd.js";import"./index-NtF0e3ax.js";import"./index-Cqg5Vvc8.js";import"./index-Dmbf6N_C.js";import"./index-BkuMDALp.js";import"./index-DgA7GKrI.js";import"./index-BNLNiClf.js";import"./index-XAL8BJnK.js";import"./index-Br57CPtN.js";import"./index-XapnR-EF.js";import"./index-BTClOK_9.js";import"./if-defined-Cjow_KMx.js";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Z=globalThis,fe=Z.ShadowRoot&&(Z.ShadyCSS===void 0||Z.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ye=Symbol(),Ie=new WeakMap;let Be=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==ye)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(fe&&e===void 0){const n=t!==void 0&&t.length===1;n&&(e=Ie.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Ie.set(t,e))}return e}toString(){return this.cssText}};const nt=s=>new Be(typeof s=="string"?s:s+"",void 0,ye),We=(s,...e)=>{const t=s.length===1?s[0]:e.reduce(((n,r,i)=>n+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+s[i+1]),s[0]);return new Be(t,s,ye)},rt=(s,e)=>{if(fe)s.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const t of e){const n=document.createElement("style"),r=Z.litNonce;r!==void 0&&n.setAttribute("nonce",r),n.textContent=t.cssText,s.appendChild(n)}},$e=fe?s=>s:s=>s instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return nt(t)})(s):s;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:it,defineProperty:at,getOwnPropertyDescriptor:ot,getOwnPropertyNames:ct,getOwnPropertySymbols:lt,getPrototypeOf:ut}=Object,ie=globalThis,Ce=ie.trustedTypes,ht=Ce?Ce.emptyScript:"",dt=ie.reactiveElementPolyfillSupport,F=(s,e)=>s,te={toAttribute(s,e){switch(e){case Boolean:s=s?ht:null;break;case Object:case Array:s=s==null?s:JSON.stringify(s)}return s},fromAttribute(s,e){let t=s;switch(e){case Boolean:t=s!==null;break;case Number:t=s===null?null:Number(s);break;case Object:case Array:try{t=JSON.parse(s)}catch{t=null}}return t}},we=(s,e)=>!it(s,e),ve={attribute:!0,type:String,converter:te,reflect:!1,useDefault:!1,hasChanged:we};Symbol.metadata??=Symbol("metadata"),ie.litPropertyMetadata??=new WeakMap;let D=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=ve){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(e,n,t);r!==void 0&&at(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){const{get:r,set:i}=ot(this.prototype,e)??{get(){return this[t]},set(a){this[t]=a}};return{get:r,set(a){const l=r?.call(this);i?.call(this,a),this.requestUpdate(e,l,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ve}static _$Ei(){if(this.hasOwnProperty(F("elementProperties")))return;const e=ut(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(F("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(F("properties"))){const t=this.properties,n=[...ct(t),...lt(t)];for(const r of n)this.createProperty(r,t[r])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[n,r]of t)this.elementProperties.set(n,r)}this._$Eh=new Map;for(const[t,n]of this.elementProperties){const r=this._$Eu(t,n);r!==void 0&&this._$Eh.set(r,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const r of n)t.unshift($e(r))}else e!==void 0&&t.push($e(e));return t}static _$Eu(e,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return rt(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ET(e,t){const n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(r!==void 0&&n.reflect===!0){const i=(n.converter?.toAttribute!==void 0?n.converter:te).toAttribute(t,n.type);this._$Em=e,i==null?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null}}_$AK(e,t){const n=this.constructor,r=n._$Eh.get(e);if(r!==void 0&&this._$Em!==r){const i=n.getPropertyOptions(r),a=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:te;this._$Em=r;const l=a.fromAttribute(t,i.type);this[r]=l??this._$Ej?.get(r)??l,this._$Em=null}}requestUpdate(e,t,n){if(e!==void 0){const r=this.constructor,i=this[e];if(n??=r.getPropertyOptions(e),!((n.hasChanged??we)(i,t)||n.useDefault&&n.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(r._$Eu(e,n))))return;this.C(e,t,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:n,reflect:r,wrapped:i},a){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,a??t??this[e]),i!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(t=void 0),this._$AL.set(e,t)),r===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[r,i]of this._$Ep)this[r]=i;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[r,i]of n){const{wrapped:a}=i,l=this[r];a!==!0||this._$AL.has(r)||l===void 0||this.C(r,void 0,i,l)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((n=>n.hostUpdate?.())),this.update(t)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};D.elementStyles=[],D.shadowRootOptions={mode:"open"},D[F("elementProperties")]=new Map,D[F("finalized")]=new Map,dt?.({ReactiveElement:D}),(ie.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ge=globalThis,se=ge.trustedTypes,be=se?se.createPolicy("lit-html",{createHTML:s=>s}):void 0,Fe="$lit$",b=`lit$${Math.random().toFixed(9).slice(2)}$`,ze="?"+b,pt=`<${ze}>`,O=document,z=()=>O.createComment(""),j=s=>s===null||typeof s!="object"&&typeof s!="function",Ae=Array.isArray,mt=s=>Ae(s)||typeof s?.[Symbol.iterator]=="function",ce=`[ 	
\f\r]`,B=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Te=/-->/g,xe=/>/g,x=RegExp(`>|${ce}(?:([^\\s"'>=/]+)(${ce}*=${ce}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ue=/'/g,Re=/"/g,je=/^(?:script|style|textarea|title)$/i,ft=s=>(e,...t)=>({_$litType$:s,strings:e,values:t}),_=ft(1),H=Symbol.for("lit-noChange"),g=Symbol.for("lit-nothing"),ke=new WeakMap,U=O.createTreeWalker(O,129);function Ke(s,e){if(!Ae(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return be!==void 0?be.createHTML(e):e}const yt=(s,e)=>{const t=s.length-1,n=[];let r,i=e===2?"<svg>":e===3?"<math>":"",a=B;for(let l=0;l<t;l++){const c=s[l];let d,f,p=-1,E=0;for(;E<c.length&&(a.lastIndex=E,f=a.exec(c),f!==null);)E=a.lastIndex,a===B?f[1]==="!--"?a=Te:f[1]!==void 0?a=xe:f[2]!==void 0?(je.test(f[2])&&(r=RegExp("</"+f[2],"g")),a=x):f[3]!==void 0&&(a=x):a===x?f[0]===">"?(a=r??B,p=-1):f[1]===void 0?p=-2:(p=a.lastIndex-f[2].length,d=f[1],a=f[3]===void 0?x:f[3]==='"'?Re:Ue):a===Re||a===Ue?a=x:a===Te||a===xe?a=B:(a=x,r=void 0);const P=a===x&&s[l+1].startsWith("/>")?" ":"";i+=a===B?c+pt:p>=0?(n.push(d),c.slice(0,p)+Fe+c.slice(p)+b+P):c+b+(p===-2?l:P)}return[Ke(s,i+(s[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class K{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let i=0,a=0;const l=e.length-1,c=this.parts,[d,f]=yt(e,t);if(this.el=K.createElement(d,n),U.currentNode=this.el.content,t===2||t===3){const p=this.el.content.firstChild;p.replaceWith(...p.childNodes)}for(;(r=U.nextNode())!==null&&c.length<l;){if(r.nodeType===1){if(r.hasAttributes())for(const p of r.getAttributeNames())if(p.endsWith(Fe)){const E=f[a++],P=r.getAttribute(p).split(b),$=/([.?@])?(.*)/.exec(E);c.push({type:1,index:i,name:$[2],strings:P,ctor:$[1]==="."?gt:$[1]==="?"?At:$[1]==="@"?_t:ae}),r.removeAttribute(p)}else p.startsWith(b)&&(c.push({type:6,index:i}),r.removeAttribute(p));if(je.test(r.tagName)){const p=r.textContent.split(b),E=p.length-1;if(E>0){r.textContent=se?se.emptyScript:"";for(let P=0;P<E;P++)r.append(p[P],z()),U.nextNode(),c.push({type:2,index:++i});r.append(p[E],z())}}}else if(r.nodeType===8)if(r.data===ze)c.push({type:2,index:i});else{let p=-1;for(;(p=r.data.indexOf(b,p+1))!==-1;)c.push({type:7,index:i}),p+=b.length-1}i++}}static createElement(e,t){const n=O.createElement("template");return n.innerHTML=e,n}}function V(s,e,t=s,n){if(e===H)return e;let r=n!==void 0?t._$Co?.[n]:t._$Cl;const i=j(e)?void 0:e._$litDirective$;return r?.constructor!==i&&(r?._$AO?.(!1),i===void 0?r=void 0:(r=new i(s),r._$AT(s,t,n)),n!==void 0?(t._$Co??=[])[n]=r:t._$Cl=r),r!==void 0&&(e=V(s,r._$AS(s,e.values),r,n)),e}class wt{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,r=(e?.creationScope??O).importNode(t,!0);U.currentNode=r;let i=U.nextNode(),a=0,l=0,c=n[0];for(;c!==void 0;){if(a===c.index){let d;c.type===2?d=new q(i,i.nextSibling,this,e):c.type===1?d=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(d=new Et(i,this,e)),this._$AV.push(d),c=n[++l]}a!==c?.index&&(i=U.nextNode(),a++)}return U.currentNode=O,r}p(e){let t=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class q{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,r){this.type=2,this._$AH=g,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=V(this,e,t),j(e)?e===g||e==null||e===""?(this._$AH!==g&&this._$AR(),this._$AH=g):e!==this._$AH&&e!==H&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):mt(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==g&&j(this._$AH)?this._$AA.nextSibling.data=e:this.T(O.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=K.createElement(Ke(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(t);else{const i=new wt(r,this),a=i.u(this.options);i.p(t),this.T(a),this._$AH=i}}_$AC(e){let t=ke.get(e.strings);return t===void 0&&ke.set(e.strings,t=new K(e)),t}k(e){Ae(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const i of e)r===t.length?t.push(n=new q(this.O(z()),this.O(z()),this,this.options)):n=t[r],n._$AI(i),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class ae{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,r,i){this.type=1,this._$AH=g,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=g}_$AI(e,t=this,n,r){const i=this.strings;let a=!1;if(i===void 0)e=V(this,e,t,0),a=!j(e)||e!==this._$AH&&e!==H,a&&(this._$AH=e);else{const l=e;let c,d;for(e=i[0],c=0;c<i.length-1;c++)d=V(this,l[n+c],t,c),d===H&&(d=this._$AH[c]),a||=!j(d)||d!==this._$AH[c],d===g?e=g:e!==g&&(e+=(d??"")+i[c+1]),this._$AH[c]=d}a&&!r&&this.j(e)}j(e){e===g?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class gt extends ae{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===g?void 0:e}}class At extends ae{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==g)}}class _t extends ae{constructor(e,t,n,r,i){super(e,t,n,r,i),this.type=5}_$AI(e,t=this){if((e=V(this,e,t,0)??g)===H)return;const n=this._$AH,r=e===g&&n!==g||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==g&&(n===g||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class Et{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){V(this,e)}}const Pt=ge.litHtmlPolyfillSupport;Pt?.(K,q),(ge.litHtmlVersions??=[]).push("3.3.1");const Nt=(s,e,t)=>{const n=t?.renderBefore??e;let r=n._$litPart$;if(r===void 0){const i=t?.renderBefore??null;n._$litPart$=r=new q(e.insertBefore(z(),i),i,void 0,t??{})}return r._$AI(s),r};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _e=globalThis;class L extends D{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Nt(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return H}}L._$litElement$=!0,L.finalized=!0,_e.litElementHydrateSupport?.({LitElement:L});const St=_e.litElementPolyfillSupport;St?.({LitElement:L});(_e.litElementVersions??=[]).push("4.2.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const It={attribute:!0,type:String,converter:te,reflect:!1,hasChanged:we},$t=(s=It,e,t)=>{const{kind:n,metadata:r}=t;let i=globalThis.litPropertyMetadata.get(r);if(i===void 0&&globalThis.litPropertyMetadata.set(r,i=new Map),n==="setter"&&((s=Object.create(s)).wrapped=!0),i.set(t.name,s),n==="accessor"){const{name:a}=t;return{set(l){const c=e.get.call(this);e.set.call(this,l),this.requestUpdate(a,c,s)},init(l){return l!==void 0&&this.C(a,void 0,s,l),l}}}if(n==="setter"){const{name:a}=t;return function(l){const c=this[a];e.call(this,l),this.requestUpdate(a,c,s)}}throw Error("Unsupported decorator location: "+n)};function Ct(s){return(e,t)=>typeof t=="object"?$t(s,e,t):((n,r,i)=>{const a=r.hasOwnProperty(i);return r.constructor.createProperty(i,n),a?Object.getOwnPropertyDescriptor(r,i):void 0})(s,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function I(s){return Ct({...s,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const le=s=>s??g,vt=Symbol(),Oe=Object.getPrototypeOf,De=new WeakMap,bt=s=>s&&(De.has(s)?De.get(s):Oe(s)===Object.prototype||Oe(s)===Array.prototype),Tt=s=>bt(s)&&s[vt]||null,pe={},Ee=s=>typeof s=="object"&&s!==null,xt=s=>Ee(s)&&!qe.has(s)&&(Array.isArray(s)||!(Symbol.iterator in s))&&!(s instanceof WeakMap)&&!(s instanceof WeakSet)&&!(s instanceof Error)&&!(s instanceof Number)&&!(s instanceof Date)&&!(s instanceof String)&&!(s instanceof RegExp)&&!(s instanceof ArrayBuffer)&&!(s instanceof Promise),Ut=(s,e,t,n)=>({deleteProperty(r,i){const a=Reflect.get(r,i);t(i);const l=Reflect.deleteProperty(r,i);return l&&n(["delete",[i],a]),l},set(r,i,a,l){const c=!s()&&Reflect.has(r,i),d=Reflect.get(r,i,l);if(c&&(Me(d,a)||re.has(a)&&Me(d,re.get(a))))return!0;t(i),Ee(a)&&(a=Tt(a)||a);const f=!ne.has(a)&&kt(a)?Je(a):a;return e(i,f),Reflect.set(r,i,f,l),n(["set",[i],a,d]),!0}}),ne=new WeakMap,qe=new WeakSet,X=[1,1],re=new WeakMap;let Me=Object.is,Rt=(s,e)=>new Proxy(s,e),kt=xt,Ot=Ut;function Je(s={}){if(!Ee(s))throw new Error("object required");const e=re.get(s);if(e)return e;let t=X[0];const n=new Set,r=(y,A=++X[0])=>{t!==A&&(t=A,n.forEach(w=>w(y,A)))};let i=X[1];const a=(y=++X[1])=>(i!==y&&!n.size&&(i=y,c.forEach(([A])=>{const w=A[1](y);w>t&&(t=w)})),t),l=y=>(A,w)=>{const N=[...A];N[1]=[y,...N[1]],r(N,w)},c=new Map,d=(y,A)=>{const w=!qe.has(A)&&ne.get(A);if(w){if((pe?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(n.size){const N=w[2](l(y));c.set(y,[w,N])}else c.set(y,[w])}},f=y=>{var A;const w=c.get(y);w&&(c.delete(y),(A=w[1])==null||A.call(w))},p=y=>(n.add(y),n.size===1&&c.forEach(([w,N],J)=>{if((pe?"production":void 0)!=="production"&&N)throw new Error("remove already exists");const Qe=w[2](l(J));c.set(J,[w,Qe])}),()=>{n.delete(y),n.size===0&&c.forEach(([w,N],J)=>{N&&(N(),c.set(J,[w]))})});let E=!0;const P=Ot(()=>E,d,f,r),$=Rt(s,P);re.set(s,$);const Ze=[s,a,p];return ne.set($,Ze),Reflect.ownKeys(s).forEach(y=>{const A=Object.getOwnPropertyDescriptor(s,y);"value"in A&&A.writable&&($[y]=s[y])}),E=!1,$}function Xe(s,e,t){const n=ne.get(s);(pe?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let r;const i=[],a=n[2];let l=!1;const d=a(f=>{i.push(f),r||(r=Promise.resolve().then(()=>{r=void 0,l&&e(i.splice(0))}))});return l=!0,()=>{l=!1,d()}}function Dt(s,e,t,n){let r=s[e];return Xe(s,()=>{const i=s[e];Object.is(r,i)||t(r=i)})}const u={INVALID_PAYMENT_CONFIG:"INVALID_PAYMENT_CONFIG",INVALID_RECIPIENT:"INVALID_RECIPIENT",INVALID_ASSET:"INVALID_ASSET",INVALID_AMOUNT:"INVALID_AMOUNT",UNKNOWN_ERROR:"UNKNOWN_ERROR",UNABLE_TO_INITIATE_PAYMENT:"UNABLE_TO_INITIATE_PAYMENT",INVALID_CHAIN_NAMESPACE:"INVALID_CHAIN_NAMESPACE",GENERIC_PAYMENT_ERROR:"GENERIC_PAYMENT_ERROR",UNABLE_TO_GET_EXCHANGES:"UNABLE_TO_GET_EXCHANGES",ASSET_NOT_SUPPORTED:"ASSET_NOT_SUPPORTED",UNABLE_TO_GET_PAY_URL:"UNABLE_TO_GET_PAY_URL",UNABLE_TO_GET_BUY_STATUS:"UNABLE_TO_GET_BUY_STATUS"},M={[u.INVALID_PAYMENT_CONFIG]:"Invalid payment configuration",[u.INVALID_RECIPIENT]:"Invalid recipient address",[u.INVALID_ASSET]:"Invalid asset specified",[u.INVALID_AMOUNT]:"Invalid payment amount",[u.UNKNOWN_ERROR]:"Unknown payment error occurred",[u.UNABLE_TO_INITIATE_PAYMENT]:"Unable to initiate payment",[u.INVALID_CHAIN_NAMESPACE]:"Invalid chain namespace",[u.GENERIC_PAYMENT_ERROR]:"Unable to process payment",[u.UNABLE_TO_GET_EXCHANGES]:"Unable to get exchanges",[u.ASSET_NOT_SUPPORTED]:"Asset not supported by the selected exchange",[u.UNABLE_TO_GET_PAY_URL]:"Unable to get payment URL",[u.UNABLE_TO_GET_BUY_STATUS]:"Unable to get buy status"};class h extends Error{get message(){return M[this.code]}constructor(e,t){super(M[e]),this.name="AppKitPayError",this.code=e,this.details=t,Error.captureStackTrace&&Error.captureStackTrace(this,h)}}const Mt="https://rpc.walletconnect.org/v1/json-rpc";class Lt extends Error{}function Ht(){const s=Ve.getSnapshot().projectId;return`${Mt}?projectId=${s}`}async function Pe(s,e){const t=Ht(),{sdkType:n,sdkVersion:r,projectId:i}=Ve.getSnapshot(),a={jsonrpc:"2.0",id:1,method:s,params:{...e||{},st:n,sv:r,projectId:i}},c=await(await fetch(t,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})).json();if(c.error)throw new Lt(c.error.message);return c}async function Le(s){return(await Pe("reown_getExchanges",s)).result}async function Vt(s){return(await Pe("reown_getExchangePayUrl",s)).result}async function Gt(s){return(await Pe("reown_getExchangeBuyStatus",s)).result}const Yt=["eip155","solana"],Bt={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};function ue(s,e){const{chainNamespace:t,chainId:n}=Q.parseCaipNetworkId(s),r=Bt[t];if(!r)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${t}`);let i=r.native.assetNamespace,a=r.native.assetReference;return e!=="native"&&(i=r.defaultTokenNamespace,a=e),`${`${t}:${n}`}/${i}:${a}`}function Wt(s){const{chainNamespace:e}=Q.parseCaipNetworkId(s);return Yt.includes(e)}async function Ft(s){const{paymentAssetNetwork:e,activeCaipNetwork:t,approvedCaipNetworkIds:n,requestedCaipNetworks:r}=s,a=me.sortRequestedNetworks(n,r).find(d=>d.caipNetworkId===e);if(!a)throw new h(u.INVALID_PAYMENT_CONFIG);if(a.caipNetworkId===t.caipNetworkId)return;const l=C.getNetworkProp("supportsAllNetworks",a.chainNamespace);if(!(n?.includes(a.caipNetworkId)||l))throw new h(u.INVALID_PAYMENT_CONFIG);try{await C.switchActiveNetwork(a)}catch(d){throw new h(u.GENERIC_PAYMENT_ERROR,d)}}async function zt(s,e,t){if(e!==R.CHAIN.EVM)throw new h(u.INVALID_CHAIN_NAMESPACE);if(!t.fromAddress)throw new h(u.INVALID_PAYMENT_CONFIG,"fromAddress is required for native EVM payments.");const n=typeof t.amount=="string"?parseFloat(t.amount):t.amount;if(isNaN(n))throw new h(u.INVALID_PAYMENT_CONFIG);const r=s.metadata?.decimals??18,i=v.parseUnits(n.toString(),r);if(typeof i!="bigint")throw new h(u.GENERIC_PAYMENT_ERROR);return await v.sendTransaction({chainNamespace:e,to:t.recipient,address:t.fromAddress,value:i,data:"0x"})??void 0}async function jt(s,e){if(!e.fromAddress)throw new h(u.INVALID_PAYMENT_CONFIG,"fromAddress is required for ERC20 EVM payments.");const t=s.asset,n=e.recipient,r=Number(s.metadata.decimals),i=v.parseUnits(e.amount.toString(),r);if(i===void 0)throw new h(u.GENERIC_PAYMENT_ERROR);return await v.writeContract({fromAddress:e.fromAddress,tokenAddress:t,args:[n,i],method:"transfer",abi:et.getERC20Abi(t),chainNamespace:R.CHAIN.EVM})??void 0}async function Kt(s,e){if(s!==R.CHAIN.SOLANA)throw new h(u.INVALID_CHAIN_NAMESPACE);if(!e.fromAddress)throw new h(u.INVALID_PAYMENT_CONFIG,"fromAddress is required for Solana payments.");const t=typeof e.amount=="string"?parseFloat(e.amount):e.amount;if(isNaN(t)||t<=0)throw new h(u.INVALID_PAYMENT_CONFIG,"Invalid payment amount.");try{if(!Ge.getProvider(s))throw new h(u.GENERIC_PAYMENT_ERROR,"No Solana provider available.");const r=await v.sendTransaction({chainNamespace:R.CHAIN.SOLANA,to:e.recipient,value:t,tokenMint:e.tokenMint});if(!r)throw new h(u.GENERIC_PAYMENT_ERROR,"Transaction failed.");return r}catch(n){throw n instanceof h?n:new h(u.GENERIC_PAYMENT_ERROR,`Solana payment failed: ${n}`)}}const He=0,he="unknown",o=Je({paymentAsset:{network:"eip155:1",asset:"0x0",metadata:{name:"0x0",symbol:"0x0",decimals:0}},recipient:"0x0",amount:0,isConfigured:!1,error:null,isPaymentInProgress:!1,exchanges:[],isLoading:!1,openInNewTab:!0,redirectUrl:void 0,payWithExchange:void 0,currentPayment:void 0,analyticsSet:!1,paymentId:void 0}),m={state:o,subscribe(s){return Xe(o,()=>s(o))},subscribeKey(s,e){return Dt(o,s,e)},async handleOpenPay(s){this.resetState(),this.setPaymentConfig(s),this.subscribeEvents(),this.initializeAnalytics(),o.isConfigured=!0,Y.sendEvent({type:"track",event:"PAY_MODAL_OPEN",properties:{exchanges:o.exchanges,configuration:{network:o.paymentAsset.network,asset:o.paymentAsset.asset,recipient:o.recipient,amount:o.amount}}}),await ee.open({view:"Pay"})},resetState(){o.paymentAsset={network:"eip155:1",asset:"0x0",metadata:{name:"0x0",symbol:"0x0",decimals:0}},o.recipient="0x0",o.amount=0,o.isConfigured=!1,o.error=null,o.isPaymentInProgress=!1,o.isLoading=!1,o.currentPayment=void 0},setPaymentConfig(s){if(!s.paymentAsset)throw new h(u.INVALID_PAYMENT_CONFIG);try{o.paymentAsset=s.paymentAsset,o.recipient=s.recipient,o.amount=s.amount,o.openInNewTab=s.openInNewTab??!0,o.redirectUrl=s.redirectUrl,o.payWithExchange=s.payWithExchange,o.error=null}catch(e){throw new h(u.INVALID_PAYMENT_CONFIG,e.message)}},getPaymentAsset(){return o.paymentAsset},getExchanges(){return o.exchanges},async fetchExchanges(){try{o.isLoading=!0;const s=await Le({page:He,asset:ue(o.paymentAsset.network,o.paymentAsset.asset),amount:o.amount.toString()});o.exchanges=s.exchanges.slice(0,2)}catch{throw W.showError(M.UNABLE_TO_GET_EXCHANGES),new h(u.UNABLE_TO_GET_EXCHANGES)}finally{o.isLoading=!1}},async getAvailableExchanges(s){try{const e=s?.asset&&s?.network?ue(s.network,s.asset):void 0;return await Le({page:s?.page??He,asset:e,amount:s?.amount?.toString()})}catch{throw new h(u.UNABLE_TO_GET_EXCHANGES)}},async getPayUrl(s,e,t=!1){try{const n=Number(e.amount),r=await Vt({exchangeId:s,asset:ue(e.network,e.asset),amount:n.toString(),recipient:`${e.network}:${e.recipient}`});return Y.sendEvent({type:"track",event:"PAY_EXCHANGE_SELECTED",properties:{source:"pay",exchange:{id:s},configuration:{network:e.network,asset:e.asset,recipient:e.recipient,amount:n},currentPayment:{type:"exchange",exchangeId:s},headless:t}}),t&&(this.initiatePayment(),Y.sendEvent({type:"track",event:"PAY_INITIATED",properties:{source:"pay",paymentId:o.paymentId||he,configuration:{network:e.network,asset:e.asset,recipient:e.recipient,amount:n},currentPayment:{type:"exchange",exchangeId:s}}})),r}catch(n){throw n instanceof Error&&n.message.includes("is not supported")?new h(u.ASSET_NOT_SUPPORTED):new Error(n.message)}},async openPayUrl(s,e,t=!1){try{const n=await this.getPayUrl(s.exchangeId,e,t);if(!n)throw new h(u.UNABLE_TO_GET_PAY_URL);const i=s.openInNewTab??!0?"_blank":"_self";return me.openHref(n.url,i),n}catch(n){throw n instanceof h?o.error=n.message:o.error=M.GENERIC_PAYMENT_ERROR,new h(u.UNABLE_TO_GET_PAY_URL)}},subscribeEvents(){o.isConfigured||(v.subscribeKey("connections",s=>{s.size>0&&this.handlePayment()}),k.subscribeKey("caipAddress",s=>{const e=v.hasAnyConnection(R.CONNECTOR_ID.WALLET_CONNECT);s&&(e?setTimeout(()=>{this.handlePayment()},100):this.handlePayment())}))},async handlePayment(){o.currentPayment={type:"wallet",status:"IN_PROGRESS"};const s=k.state.caipAddress;if(!s)return;const{chainId:e,address:t}=Q.parseCaipAddress(s),n=C.state.activeChain;if(!t||!e||!n||!Ge.getProvider(n))return;const i=C.state.activeCaipNetwork;if(i&&!o.isPaymentInProgress)try{this.initiatePayment();const a=C.getAllRequestedCaipNetworks(),l=C.getAllApprovedCaipNetworkIds();switch(await Ft({paymentAssetNetwork:o.paymentAsset.network,activeCaipNetwork:i,approvedCaipNetworkIds:l,requestedCaipNetworks:a}),await ee.open({view:"PayLoading"}),n){case R.CHAIN.EVM:o.paymentAsset.asset==="native"&&(o.currentPayment.result=await zt(o.paymentAsset,n,{recipient:o.recipient,amount:o.amount,fromAddress:t})),o.paymentAsset.asset.startsWith("0x")&&(o.currentPayment.result=await jt(o.paymentAsset,{recipient:o.recipient,amount:o.amount,fromAddress:t})),o.currentPayment.status="SUCCESS";break;case R.CHAIN.SOLANA:o.currentPayment.result=await Kt(n,{recipient:o.recipient,amount:o.amount,fromAddress:t,tokenMint:o.paymentAsset.asset==="native"?void 0:o.paymentAsset.asset}),o.currentPayment.status="SUCCESS";break;default:throw new h(u.INVALID_CHAIN_NAMESPACE)}}catch(a){a instanceof h?o.error=a.message:o.error=M.GENERIC_PAYMENT_ERROR,o.currentPayment.status="FAILED",W.showError(o.error)}finally{o.isPaymentInProgress=!1}},getExchangeById(s){return o.exchanges.find(e=>e.id===s)},validatePayConfig(s){const{paymentAsset:e,recipient:t,amount:n}=s;if(!e)throw new h(u.INVALID_PAYMENT_CONFIG);if(!t)throw new h(u.INVALID_RECIPIENT);if(!e.asset)throw new h(u.INVALID_ASSET);if(n==null||n<=0)throw new h(u.INVALID_AMOUNT)},handlePayWithWallet(){const s=k.state.caipAddress;if(!s){Ne.push("Connect");return}const{chainId:e,address:t}=Q.parseCaipAddress(s),n=C.state.activeChain;if(!t||!e||!n){Ne.push("Connect");return}this.handlePayment()},async handlePayWithExchange(s){try{o.currentPayment={type:"exchange",exchangeId:s};const{network:e,asset:t}=o.paymentAsset,n={network:e,asset:t,amount:o.amount,recipient:o.recipient},r=await this.getPayUrl(s,n);if(!r)throw new h(u.UNABLE_TO_INITIATE_PAYMENT);return o.currentPayment.sessionId=r.sessionId,o.currentPayment.status="IN_PROGRESS",o.currentPayment.exchangeId=s,this.initiatePayment(),{url:r.url,openInNewTab:o.openInNewTab}}catch(e){return e instanceof h?o.error=e.message:o.error=M.GENERIC_PAYMENT_ERROR,o.isPaymentInProgress=!1,W.showError(o.error),null}},async getBuyStatus(s,e){try{const t=await Gt({sessionId:e,exchangeId:s});return(t.status==="SUCCESS"||t.status==="FAILED")&&Y.sendEvent({type:"track",event:t.status==="SUCCESS"?"PAY_SUCCESS":"PAY_ERROR",properties:{source:"pay",paymentId:o.paymentId||he,configuration:{network:o.paymentAsset.network,asset:o.paymentAsset.asset,recipient:o.recipient,amount:o.amount},currentPayment:{type:"exchange",exchangeId:o.currentPayment?.exchangeId,sessionId:o.currentPayment?.sessionId,result:t.txHash}}}),t}catch{throw new h(u.UNABLE_TO_GET_BUY_STATUS)}},async updateBuyStatus(s,e){try{const t=await this.getBuyStatus(s,e);o.currentPayment&&(o.currentPayment.status=t.status,o.currentPayment.result=t.txHash),(t.status==="SUCCESS"||t.status==="FAILED")&&(o.isPaymentInProgress=!1)}catch{throw new h(u.UNABLE_TO_GET_BUY_STATUS)}},initiatePayment(){o.isPaymentInProgress=!0,o.paymentId=crypto.randomUUID()},initializeAnalytics(){o.analyticsSet||(o.analyticsSet=!0,this.subscribeKey("isPaymentInProgress",s=>{if(o.currentPayment?.status&&o.currentPayment.status!=="UNKNOWN"){const e={IN_PROGRESS:"PAY_INITIATED",SUCCESS:"PAY_SUCCESS",FAILED:"PAY_ERROR"}[o.currentPayment.status];Y.sendEvent({type:"track",event:e,properties:{source:"pay",paymentId:o.paymentId||he,configuration:{network:o.paymentAsset.network,asset:o.paymentAsset.asset,recipient:o.recipient,amount:o.amount},currentPayment:{type:o.currentPayment.type,exchangeId:o.currentPayment.exchangeId,sessionId:o.currentPayment.sessionId,result:o.currentPayment.result}}})}}))}},qt=We`
  wui-separator {
    margin: var(--wui-spacing-m) calc(var(--wui-spacing-m) * -1) var(--wui-spacing-xs)
      calc(var(--wui-spacing-m) * -1);
    width: calc(100% + var(--wui-spacing-s) * 2);
  }

  .token-display {
    padding: var(--wui-spacing-s) var(--wui-spacing-m);
    border-radius: var(--wui-border-radius-s);
    background-color: var(--wui-color-bg-125);
    margin-top: var(--wui-spacing-s);
    margin-bottom: var(--wui-spacing-s);
  }

  .token-display wui-text {
    text-transform: none;
  }

  wui-loading-spinner {
    padding: var(--wui-spacing-xs);
  }
`;var T=function(s,e,t,n){var r=arguments.length,i=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,e,t,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(i=(r<3?a(i):r>3?a(e,t,i):a(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i};let S=class extends L{constructor(){super(),this.unsubscribe=[],this.amount="",this.tokenSymbol="",this.networkName="",this.exchanges=m.state.exchanges,this.isLoading=m.state.isLoading,this.loadingExchangeId=null,this.connectedWalletInfo=k.state.connectedWalletInfo,this.initializePaymentDetails(),this.unsubscribe.push(m.subscribeKey("exchanges",e=>this.exchanges=e)),this.unsubscribe.push(m.subscribeKey("isLoading",e=>this.isLoading=e)),this.unsubscribe.push(k.subscribe(e=>this.connectedWalletInfo=e.connectedWalletInfo)),m.fetchExchanges()}get isWalletConnected(){return k.state.status==="connected"}render(){return _`
      <wui-flex flexDirection="column">
        <wui-flex flexDirection="column" .padding=${["0","l","l","l"]} gap="s">
          ${this.renderPaymentHeader()}

          <wui-flex flexDirection="column" gap="s">
            ${this.renderPayWithWallet()} ${this.renderExchangeOptions()}
          </wui-flex>
        </wui-flex>
      </wui-flex>
    `}initializePaymentDetails(){const e=m.getPaymentAsset();this.networkName=e.network,this.tokenSymbol=e.metadata.symbol,this.amount=m.state.amount.toString()}renderPayWithWallet(){return Wt(this.networkName)?_`<wui-flex flexDirection="column" gap="s">
        ${this.isWalletConnected?this.renderConnectedView():this.renderDisconnectedView()}
      </wui-flex>
      <wui-separator text="or"></wui-separator>`:_``}renderPaymentHeader(){let e=this.networkName;if(this.networkName){const n=C.getAllRequestedCaipNetworks().find(r=>r.caipNetworkId===this.networkName);n&&(e=n.name)}return _`
      <wui-flex flexDirection="column" alignItems="center">
        <wui-flex alignItems="center" gap="xs">
          <wui-text variant="large-700" color="fg-100">${this.amount||"0.0000"}</wui-text>
          <wui-flex class="token-display" alignItems="center" gap="xxs">
            <wui-text variant="paragraph-600" color="fg-100">
              ${this.tokenSymbol||"Unknown Asset"}
            </wui-text>
            ${e?_`
                  <wui-text variant="small-500" color="fg-200"> on ${e} </wui-text>
                `:""}
          </wui-flex>
        </wui-flex>
      </wui-flex>
    `}renderConnectedView(){const e=this.connectedWalletInfo?.name||"connected wallet";return _`
      <wui-list-item
        @click=${this.onWalletPayment}
        ?chevron=${!0}
        data-testid="wallet-payment-option"
      >
        <wui-flex alignItems="center" gap="s">
          <wui-wallet-image
            size="sm"
            imageSrc=${le(this.connectedWalletInfo?.icon)}
            name=${le(this.connectedWalletInfo?.name)}
          ></wui-wallet-image>
          <wui-text variant="paragraph-500" color="inherit">Pay with ${e}</wui-text>
        </wui-flex>
      </wui-list-item>

      <wui-list-item
        variant="icon"
        iconVariant="overlay"
        icon="disconnect"
        @click=${this.onDisconnect}
        data-testid="disconnect-button"
        ?chevron=${!1}
      >
        <wui-text variant="paragraph-500" color="fg-200">Disconnect</wui-text>
      </wui-list-item>
    `}renderDisconnectedView(){return _`<wui-list-item
      variant="icon"
      iconVariant="overlay"
      icon="walletPlaceholder"
      @click=${this.onWalletPayment}
      ?chevron=${!0}
      data-testid="wallet-payment-option"
    >
      <wui-text variant="paragraph-500" color="inherit">Pay from wallet</wui-text>
    </wui-list-item>`}renderExchangeOptions(){return this.isLoading?_`<wui-flex justifyContent="center" alignItems="center">
        <wui-spinner size="md"></wui-spinner>
      </wui-flex>`:this.exchanges.length===0?_`<wui-flex justifyContent="center" alignItems="center">
        <wui-text variant="paragraph-500" color="fg-100">No exchanges available</wui-text>
      </wui-flex>`:this.exchanges.map(e=>_`
        <wui-list-item
          @click=${()=>this.onExchangePayment(e.id)}
          data-testid="exchange-option-${e.id}"
          ?chevron=${!0}
          ?disabled=${this.loadingExchangeId!==null}
        >
          <wui-flex alignItems="center" gap="s">
            ${this.loadingExchangeId===e.id?_`<wui-loading-spinner color="accent-100" size="md"></wui-loading-spinner>`:_`<wui-wallet-image
                  size="sm"
                  imageSrc=${le(e.imageUrl)}
                  name=${e.name}
                ></wui-wallet-image>`}
            <wui-text flexGrow="1" variant="paragraph-500" color="inherit"
              >Pay with ${e.name} <wui-spinner size="sm" color="fg-200"></wui-spinner
            ></wui-text>
          </wui-flex>
        </wui-list-item>
      `)}onWalletPayment(){m.handlePayWithWallet()}async onExchangePayment(e){try{this.loadingExchangeId=e;const t=await m.handlePayWithExchange(e);t&&(await ee.open({view:"PayLoading"}),me.openHref(t.url,t.openInNewTab?"_blank":"_self"))}catch(t){console.error("Failed to pay with exchange",t),W.showError("Failed to pay with exchange")}finally{this.loadingExchangeId=null}}async onDisconnect(e){e.stopPropagation();try{await v.disconnect()}catch{console.error("Failed to disconnect"),W.showError("Failed to disconnect")}}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}};S.styles=qt;T([I()],S.prototype,"amount",void 0);T([I()],S.prototype,"tokenSymbol",void 0);T([I()],S.prototype,"networkName",void 0);T([I()],S.prototype,"exchanges",void 0);T([I()],S.prototype,"isLoading",void 0);T([I()],S.prototype,"loadingExchangeId",void 0);T([I()],S.prototype,"connectedWalletInfo",void 0);S=T([Ye("w3m-pay-view")],S);const Jt=We`
  :host {
    display: block;
    height: 100%;
    width: 100%;
  }

  wui-flex:first-child:not(:only-child) {
    position: relative;
  }

  wui-loading-thumbnail {
    position: absolute;
  }
`;var oe=function(s,e,t,n){var r=arguments.length,i=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,e,t,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(i=(r<3?a(i):r>3?a(e,t,i):a(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i};const Xt=4e3;let G=class extends L{constructor(){super(),this.loadingMessage="",this.subMessage="",this.paymentState="in-progress",this.paymentState=m.state.isPaymentInProgress?"in-progress":"completed",this.updateMessages(),this.setupSubscription(),this.setupExchangeSubscription()}disconnectedCallback(){clearInterval(this.exchangeSubscription)}render(){return _`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-flex justifyContent="center" alignItems="center"> ${this.getStateIcon()} </wui-flex>
        <wui-flex flexDirection="column" alignItems="center" gap="xs">
          <wui-text align="center" variant="paragraph-500" color="fg-100">
            ${this.loadingMessage}
          </wui-text>
          <wui-text align="center" variant="small-400" color="fg-200">
            ${this.subMessage}
          </wui-text>
        </wui-flex>
      </wui-flex>
    `}updateMessages(){switch(this.paymentState){case"completed":this.loadingMessage="Payment completed",this.subMessage="Your transaction has been successfully processed";break;case"error":this.loadingMessage="Payment failed",this.subMessage="There was an error processing your transaction";break;case"in-progress":default:m.state.currentPayment?.type==="exchange"?(this.loadingMessage="Payment initiated",this.subMessage="Please complete the payment on the exchange"):(this.loadingMessage="Awaiting payment confirmation",this.subMessage="Please confirm the payment transaction in your wallet");break}}getStateIcon(){switch(this.paymentState){case"completed":return this.successTemplate();case"error":return this.errorTemplate();case"in-progress":default:return this.loaderTemplate()}}setupExchangeSubscription(){m.state.currentPayment?.type==="exchange"&&(this.exchangeSubscription=setInterval(async()=>{const e=m.state.currentPayment?.exchangeId,t=m.state.currentPayment?.sessionId;e&&t&&(await m.updateBuyStatus(e,t),m.state.currentPayment?.status==="SUCCESS"&&clearInterval(this.exchangeSubscription))},Xt))}setupSubscription(){m.subscribeKey("isPaymentInProgress",e=>{!e&&this.paymentState==="in-progress"&&(m.state.error||!m.state.currentPayment?.result?this.paymentState="error":this.paymentState="completed",this.updateMessages(),setTimeout(()=>{v.state.status!=="disconnected"&&ee.close()},3e3))}),m.subscribeKey("error",e=>{e&&this.paymentState==="in-progress"&&(this.paymentState="error",this.updateMessages())})}loaderTemplate(){const e=tt.state.themeVariables["--w3m-border-radius-master"],t=e?parseInt(e.replace("px",""),10):4,n=this.getPaymentIcon();return _`
      <wui-flex justifyContent="center" alignItems="center" style="position: relative;">
        ${n?_`<wui-wallet-image size="lg" imageSrc=${n}></wui-wallet-image>`:null}
        <wui-loading-thumbnail radius=${t*9}></wui-loading-thumbnail>
      </wui-flex>
    `}getPaymentIcon(){const e=m.state.currentPayment;if(e){if(e.type==="exchange"){const t=e.exchangeId;if(t)return m.getExchangeById(t)?.imageUrl}if(e.type==="wallet"){const t=k.state.connectedWalletInfo?.icon;if(t)return t;const n=C.state.activeChain;if(!n)return;const r=Se.getConnectorId(n);if(!r)return;const i=Se.getConnectorById(r);return i?st.getConnectorImage(i):void 0}}}successTemplate(){return _`<wui-icon size="xl" color="success-100" name="checkmark"></wui-icon>`}errorTemplate(){return _`<wui-icon size="xl" color="error-100" name="close"></wui-icon>`}};G.styles=Jt;oe([I()],G.prototype,"loadingMessage",void 0);oe([I()],G.prototype,"subMessage",void 0);oe([I()],G.prototype,"paymentState",void 0);G=oe([Ye("w3m-pay-loading-view")],G);const Zt=3e5;async function Qt(s){return m.handleOpenPay(s)}async function gs(s,e=Zt){if(e<=0)throw new h(u.INVALID_PAYMENT_CONFIG,"Timeout must be greater than 0");try{await Qt(s)}catch(t){throw t instanceof h?t:new h(u.UNABLE_TO_INITIATE_PAYMENT,t.message)}return new Promise((t,n)=>{let r=!1;const i=setTimeout(()=>{r||(r=!0,f(),n(new h(u.GENERIC_PAYMENT_ERROR,"Payment timeout")))},e);function a(){if(r)return;const p=m.state.currentPayment,E=m.state.error,P=m.state.isPaymentInProgress;if(p?.status==="SUCCESS"){r=!0,f(),clearTimeout(i),t({success:!0,result:p.result});return}if(p?.status==="FAILED"){r=!0,f(),clearTimeout(i),t({success:!1,error:E||"Payment failed"});return}E&&!P&&!p&&(r=!0,f(),clearTimeout(i),t({success:!1,error:E}))}const l=de("currentPayment",a),c=de("error",a),d=de("isPaymentInProgress",a),f=es([l,c,d]);a()})}function As(){return m.getExchanges()}function _s(){return m.state.currentPayment?.result}function Es(){return m.state.error}function Ps(){return m.state.isPaymentInProgress}function de(s,e){return m.subscribeKey(s,e)}function es(s){return()=>{s.forEach(e=>{try{e()}catch{}})}}const Ns={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Ss={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Is={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},$s={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Cs={network:"eip155:10",asset:"0x0b2c639c533813f4aa9d7837caf62653d097ff85",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},vs={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},bs={network:"eip155:137",asset:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Ts={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},xs={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Us={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Rs={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},ks={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Os={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Ds={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}};export{G as W3mPayLoadingView,S as W3mPayView,vs as arbitrumUSDC,Rs as arbitrumUSDT,Ns as baseETH,Is as baseSepoliaETH,Ss as baseUSDC,$s as ethereumUSDC,xs as ethereumUSDT,As as getExchanges,Ps as getIsPaymentInProgress,Es as getPayError,_s as getPayResult,Qt as openPay,Cs as optimismUSDC,Us as optimismUSDT,gs as pay,bs as polygonUSDC,ks as polygonUSDT,Ds as solanaSOL,Ts as solanaUSDC,Os as solanaUSDT};
